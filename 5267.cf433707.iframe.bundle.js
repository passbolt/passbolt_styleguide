/*! For license information please see 5267.cf433707.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[5267],{"./src/react-extension/components/AuthenticationLogin/Login/Login.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,c:()=>LoginVariations});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/components/Password/Password.js");const LoginVariations={SIGN_IN:"Sign in",ACCOUNT_RECOVERY:"Account recovery"};class Login extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindEventHandlers(),this.createReferences()}get defaultState(){return{passphrase:"",rememberMe:!1,actions:{processing:!1},hasBeenValidated:!1,errors:{emptyPassphrase:!1,invalidPassphrase:!1,invalidGpgKey:!1},isSsoAvailable:!1}}componentDidMount(){this.focusOnPassphrase(),this.initDefaultRememberMeChoice()}get areActionsAllowed(){return!this.state.actions.processing}get isValid(){return Object.values(this.state.errors).every((value=>!value))}get isProcessing(){return this.state.actions.processing}get hasErrors(){return this.state.errors.emptyPassphrase||this.state.errors.invalidPassphrase||this.state.errors.invalidGpgKey}get fullname(){return this.props.userSettings?.fullName||`${this.props.account?.first_name} ${this.props.account?.last_name}`}get username(){return this.props.userSettings?.username||this.props.account?.username}get trustedDomain(){return this.props.userSettings?.getTrustedDomain()||this.props.account?.domain}bindEventHandlers(){this.handleSubmit=this.handleSubmit.bind(this),this.handleChangePassphrase=this.handleChangePassphrase.bind(this),this.handleToggleRememberMe=this.handleToggleRememberMe.bind(this),this.handleSwitchToSso=this.handleSwitchToSso.bind(this)}createReferences(){this.passphraseInputRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}focusOnPassphrase(){this.passphraseInputRef.current.focus()}async handleSubmit(event){event.preventDefault(),this.validate(this.state.passphrase)&&(this.toggleProcessing(),await this.checkPassphrase()&&await this.login())}handleChangePassphrase(event){const passphrase=event.target.value;this.fillPassphrase(passphrase),this.state.hasBeenValidated&&this.validate(passphrase)}handleToggleRememberMe(){this.toggleRememberMe()}async checkPassphrase(){try{return await this.props.onCheckPassphrase(this.state.passphrase),!0}catch(error){return this.onCheckPassphraseFailure(error),!1}}onCheckPassphraseFailure(error){if("InvalidMasterPasswordError"===error.name)this.setState({actions:{processing:!1},errors:{invalidPassphrase:!0}});else{if("GpgKeyError"!==error.name)throw error;this.setState({actions:{processing:!1},errors:{invalidGpgKey:!0}})}}async login(){await this.props.onSignIn(this.state.passphrase,this.state.rememberMe)}fillPassphrase(passphrase){this.setState({passphrase})}toggleRememberMe(){this.setState({rememberMe:!this.state.rememberMe})}validate(passphrase){const isEmptyPassphrase=""===passphrase.trim(),isValid=!isEmptyPassphrase,state={hasBeenValidated:!0,errors:{emptyPassphrase:isEmptyPassphrase}};return this.setState(state),isValid}toggleProcessing(){this.setState({actions:{processing:!this.state.actions.processing}})}handleSwitchToSso(event){event.preventDefault(),this.props.switchToSsoLogin()}async initDefaultRememberMeChoice(){const defaultRememberMeChoice=await this.props.context.port.request("passbolt.remember-me.get-user-latest-choice");defaultRememberMeChoice!==this.state.rememberMe&&this.setState({rememberMe:defaultRememberMeChoice})}get securityToken(){return this.props.userSettings?.getSecurityToken()||{code:this.props.account.security_token.code,backgroundColor:this.props.account.security_token.color,textColor:this.props.account.security_token.textcolor}}get ssoProviderData(){return this.props.ssoProvider}render(){const processingClassName=this.isProcessing?"processing":"",securityToken=this.securityToken;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"login"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"login-user"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:this.props.account?.user,baseUrl:this.trustedDomain,className:"big avatar user-avatar"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"login-user-name"},this.fullname),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"login-user-email"},this.username)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{acceptCharset:"utf-8",onSubmit:this.handleSubmit,className:"enter-passphrase"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input-password-wrapper input required "+(this.hasErrors?"error":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"passphrase"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Passphrase")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_4__.A,{id:"passphrase",autoComplete:"off",inputRef:this.passphraseInputRef,name:"passphrase",placeholder:this.props.t("Passphrase"),value:this.state.passphrase,onChange:this.handleChangePassphrase,disabled:!this.areActionsAllowed,preview:!0,securityToken}),this.state.hasBeenValidated&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.state.errors.emptyPassphrase&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"empty-passphrase error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"The passphrase should not be empty.")),this.state.errors.invalidPassphrase&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"invalid-passphrase error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"The passphrase is invalid.")," ",this.props.isSsoAvailable&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link",type:"button",onClick:this.props.onSecondaryActionClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Do you need help?"))),this.state.errors.invalidGpgKey&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"invalid-gpg-key error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"The private key is invalid.")))),this.props.canRememberMe&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input checkbox"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:"remember-me",type:"checkbox",name:"remember-me",checked:this.state.rememberMe,onChange:this.handleToggleRememberMe,disabled:!this.areActionsAllowed}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"remember-me"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Remember until signed out."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-actions"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:`button primary big full-width ${processingClassName}`,disabled:this.isProcessing},{[LoginVariations.SIGN_IN]:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Sign in"),[LoginVariations.ACCOUNT_RECOVERY]:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Complete recovery")}[this.props.displayAs]),this.props.isSsoAvailable&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link switchToSso",onClick:this.handleSwitchToSso},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Sign in with Single Sign-On.")),!this.props.isSsoAvailable&&!this.props.isDesktop&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link",onClick:this.props.onSecondaryActionClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Help, I lost my passphrase.")))))}}Login.defaultProps={displayAs:LoginVariations.SIGN_IN},Login.propTypes={displayAs:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf([LoginVariations.SIGN_IN,LoginVariations.ACCOUNT_RECOVERY]),isSsoAvailable:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,isDesktop:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,context:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,account:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,userSettings:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,canRememberMe:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,onSignIn:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func.isRequired,onCheckPassphrase:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func.isRequired,onSecondaryActionClick:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func,switchToSsoLogin:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func,ssoProvider:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(Login));Login.__docgenInfo={description:"This component allows the user to log in with his account",methods:[{name:"defaultState",docblock:"Returns the default state",modifiers:["get"],params:[],returns:null,description:"Returns the default state"},{name:"areActionsAllowed",docblock:"Returns true if the user can perform actions on the component\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the user can perform actions on the component"},{name:"isValid",docblock:"Returns true if the passphrase is valid\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the passphrase is valid"},{name:"isProcessing",docblock:"Returns true if the component must be in a processing mode\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the component must be in a processing mode"},{name:"hasErrors",docblock:"Return true if there is a validation error\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Return true if there is a validation error"},{name:"fullname",docblock:"Returns the user full name",modifiers:["get"],params:[],returns:null,description:"Returns the user full name"},{name:"username",docblock:"Returns the username",modifiers:["get"],params:[],returns:null,description:"Returns the username"},{name:"trustedDomain",docblock:"Returns the trusted domain",modifiers:["get"],params:[],returns:null,description:"Returns the trusted domain"},{name:"bindEventHandlers",docblock:"Handle component event handlers",modifiers:[],params:[],returns:null,description:"Handle component event handlers"},{name:"createReferences",docblock:"Creates the references",modifiers:[],params:[],returns:null,description:"Creates the references"},{name:"focusOnPassphrase",docblock:"Put the focus on the passphrase input",modifiers:[],params:[],returns:null,description:"Put the focus on the passphrase input"},{name:"handleSubmit",docblock:"Whenever the users submits his passphrase\n@param {Event} event Dom event",modifiers:["async"],params:[{name:"event",description:"Dom event",type:{name:"Event"},optional:!1}],returns:null,description:"Whenever the users submits his passphrase"},{name:"handleChangePassphrase",docblock:"Whenever the user changes the private key\n@param event An input event",modifiers:[],params:[{name:"event",description:"An input event",optional:!1}],returns:null,description:"Whenever the user changes the private key"},{name:"handleToggleRememberMe",docblock:"Whenever the user tosggles the remember me flag",modifiers:[],params:[],returns:null,description:"Whenever the user tosggles the remember me flag"},{name:"checkPassphrase",docblock:"Check the private gpg key passphrase\n@returns {Promise<boolean>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Check the private gpg key passphrase"},{name:"onCheckPassphraseFailure",docblock:"Whenever the passphrase check failed\n@param {Error} error The error\n@throw {Error} If an unexpected errors hits the component. Errors not of type: InvalidMasterPasswordError, GpgKeyError.",modifiers:[],params:[{name:"error",description:"The error",type:{name:"Error"},optional:!1}],returns:null,description:"Whenever the passphrase check failed"},{name:"login",docblock:"Sign in the user\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Sign in the user"},{name:"fillPassphrase",docblock:"Fill the passphrase\n@param passphrase A passphrase",modifiers:[],params:[{name:"passphrase",description:"A passphrase",optional:!1}],returns:null,description:"Fill the passphrase"},{name:"toggleRememberMe",docblock:"Toggle the remember me flag value",modifiers:[],params:[],returns:null,description:"Toggle the remember me flag value"},{name:"validate",docblock:"Validate the security token data\n@param {string} passphrase the passphrase to validate\n@returns {booleans}",modifiers:[],params:[{name:"passphrase",description:"the passphrase to validate",type:{name:"string"},optional:!1}],returns:{type:{name:"booleans"}},description:"Validate the security token data"},{name:"toggleProcessing",docblock:"Toggle the processing mode",modifiers:[],params:[],returns:null,description:"Toggle the processing mode"},{name:"handleSwitchToSso",docblock:"Switches the UI to the SSO mode.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Switches the UI to the SSO mode."},{name:"initDefaultRememberMeChoice",docblock:"Initialise the rememberMe choice with the latest choice made by the user or false if none\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Initialise the rememberMe choice with the latest choice made by the user or false if none"},{name:"securityToken",docblock:"Get the security token\n@returns {{backgroundColor, code, textColor}}",modifiers:["get"],params:[],returns:{},description:"Get the security token"},{name:"ssoProviderData",docblock:"Returns the provider information of the current SSO provider configured.\n@return {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Returns the provider information of the current SSO provider configured."}],displayName:"Login",props:{displayAs:{defaultValue:{value:"'Sign in'",computed:!1},description:"",type:{name:"enum",value:[{value:"'Sign in'",computed:!1},{value:"'Account recovery'",computed:!1}]},required:!1},isSsoAvailable:{description:"",type:{name:"bool"},required:!1},isDesktop:{description:"",type:{name:"bool"},required:!1},context:{description:"",type:{name:"any"},required:!1},account:{description:"",type:{name:"object"},required:!1},userSettings:{description:"",type:{name:"object"},required:!1},canRememberMe:{description:"",type:{name:"bool"},required:!1},onSignIn:{description:"",type:{name:"func"},required:!0},onCheckPassphrase:{description:"",type:{name:"func"},required:!0},onSecondaryActionClick:{description:"",type:{name:"func"},required:!1},switchToSsoLogin:{description:"",type:{name:"func"},required:!1},ssoProvider:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Avatar/UserAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const DEFAULT_AVATAR_URL_REGEXP=/img\/avatar\/user(_medium)?\.png$/;class UserAvatar extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{error:!1}}bindCallbacks(){this.handleError=this.handleError.bind(this)}get avatarUrl(){return this.props?.user?.profile?.avatar?.url?.medium}propsHasUrl(){return Boolean(this.avatarUrl)}propsUrlHasProtocol(){return this.avatarUrl.startsWith("https://")||this.avatarUrl.startsWith("http://")}formatUrl(url){return`${this.props.baseUrl}/${url}`}isDefaultAvatarUrlFromApi(){return DEFAULT_AVATAR_URL_REGEXP.test(this.avatarUrl)}getAvatarSrc(){return this.propsHasUrl()?this.propsUrlHasProtocol()?this.avatarUrl:this.formatUrl(this.avatarUrl):null}handleError(){console.error(`Could not load avatar image url: ${this.getAvatarSrc()}`),this.setState({error:!0})}getAltText(){const user=this.props?.user;return user?.first_name&&user?.last_name?this.props.t("Avatar of user {{first_name}} {{last_name}}.",{firstname:user.first_name,lastname:user.last_name}):"..."}render(){const srcAvatar=this.getAvatarSrc(),shouldDisplayDefaultAvatar=this.state.error||this.isDefaultAvatarUrlFromApi()||!srcAvatar;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`${this.props.className} ${this.props.attentionRequired?"attention-required":""}`},shouldDisplayDefaultAvatar&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 42","aria-labelledby":"svg-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:"svg-title"},this.getAltText()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{fill:"#939598",cx:"21",cy:"21",r:"21"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#ffffff",d:"m21,23.04c-4.14,0-7.51-3.37-7.51-7.51s3.37-7.51,7.51-7.51,7.51,3.37,7.51,7.51-3.37,7.51-7.51,7.51Z"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#ffffff",d:"m27.17,26.53h-12.33c-2.01,0-3.89.78-5.31,2.2-1.42,1.42-2.2,3.3-2.2,5.31v1.15c3.55,3.42,8.36,5.53,13.67,5.53s10.13-2.11,13.67-5.53v-1.15c0-2.01-.78-3.89-2.2-5.31-1.42-1.42-3.3-2.2-5.31-2.2Z"})),!shouldDisplayDefaultAvatar&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{src:srcAvatar,onError:this.handleError,alt:this.getAltText()}),this.props.attentionRequired&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"exclamation"}))}}UserAvatar.defaultProps={className:"avatar user-avatar"},UserAvatar.propTypes={baseUrl:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,user:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,attentionRequired:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,className:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,t:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(UserAvatar);UserAvatar.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"avatarUrl",docblock:"Returns the current avatar URL from the props\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the current avatar URL from the props"},{name:"propsHasUrl",docblock:"Return true if the user from props contains a valid profile with avatar url properties\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the user from props contains a valid profile with avatar url properties"},{name:"propsUrlHasProtocol",docblock:"Check if the url has a protocol like http or https?\n@todo only check https for now\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the url has a protocol like http or https?"},{name:"formatUrl",docblock:"Format the avatar url to point on the site url.\n@param {string} url The relative url\n@returns {string}",modifiers:[],params:[{name:"url",description:"The relative url",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Format the avatar url to point on the site url."},{name:"isDefaultAvatarUrlFromApi",docblock:"Returns true if the given URL matches a default avatar from the API\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given URL matches a default avatar from the API"},{name:"getAvatarSrc",docblock:"Get the user avatar url. If the user has no avatar defined, return the default one.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar url. If the user has no avatar defined, return the default one."},{name:"handleError",docblock:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server."},{name:"getAltText",docblock:"Get the user avatar image alternative text.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar image alternative text."}],displayName:"UserAvatar",props:{className:{defaultValue:{value:'"avatar user-avatar"',computed:!1},description:"",type:{name:"string"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},attentionRequired:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/components/Password/Password.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class Password extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{viewPassword:!1,hasPassphraseFocus:!1}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordInputFocus=this.handlePasswordInputFocus.bind(this),this.handlePasswordInputBlur=this.handlePasswordInputBlur.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this)}handleInputChange(event){this.props.onChange&&this.props.onChange(event)}handlePasswordInputFocus(){this.setState({hasPassphraseFocus:!0})}handlePasswordInputBlur(){this.setState({hasPassphraseFocus:!1})}handleViewPasswordButtonClick(){this.props.disabled||this.setState({viewPassword:!this.state.viewPassword})}get securityTokenStyle(){const inverseStyle={background:this.props.securityToken.textColor,color:this.props.securityToken.backgroundColor},fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor};return this.state.hasPassphraseFocus?inverseStyle:fullStyle}get passphraseInputStyle(){const fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor,"--passphrase-placeholder-color":this.props.securityToken.textColor};return this.state.hasPassphraseFocus?fullStyle:undefined}get previewStyle(){const fullStyle={"--icon-color":this.props.securityToken.textColor,"--icon-background-color":this.props.securityToken.backgroundColor};return this.state.hasPassphraseFocus?fullStyle:void 0}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input password ${this.props.disabled?"disabled":""} ${this.state.hasPassphraseFocus?"":"no-focus"} ${this.props.securityToken?"security":""}`,style:this.props.securityToken?this.passphraseInputStyle:void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:this.props.id,name:this.props.name,maxLength:"4096",placeholder:this.props.placeholder,type:this.state.viewPassword&&!this.props.disabled?"text":"password",onKeyUp:this.props.onKeyUp,value:this.props.value,onFocus:this.handlePasswordInputFocus,onBlur:this.handlePasswordInputBlur,onChange:this.handleInputChange,disabled:this.props.disabled,readOnly:this.props.readOnly,autoComplete:this.props.autoComplete,"aria-required":!0,ref:this.props.inputRef}),this.props.preview&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-view-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleViewPasswordButtonClick,style:this.props.securityToken?this.previewStyle:void 0,className:"password-view infield button-transparent "+(this.props.disabled?"disabled":"")},!this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"eye-open"}),this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"eye-close"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"View")))),this.props.securityToken&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"security-token-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"security-token",style:this.securityTokenStyle},this.props.securityToken.code)))}}Password.defaultProps={id:"",name:"",autoComplete:"off"},Password.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,id:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,name:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,autoComplete:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,inputRef:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,preview:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,onKeyUp:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,securityToken:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({code:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,backgroundColor:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,textColor:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string})};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(Password);Password.__docgenInfo={description:"This component represent a password input field with some additional properties",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handlePasswordInputFocus",docblock:"Whenever the user focus on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user focus on the password input"},{name:"handlePasswordInputBlur",docblock:"Whenever the user blurs on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user blurs on the password input"},{name:"handleViewPasswordButtonClick",docblock:"Handle view password button click.",modifiers:[],params:[],returns:null,description:"Handle view password button click."},{name:"securityTokenStyle",docblock:"Returns the style of the security token (color and text color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of the security token (color and text color)"},{name:"passphraseInputStyle",docblock:"Get the passphrase input style.\n@return {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get the passphrase input style."},{name:"previewStyle",docblock:"Returns the style of preview (icon color and icon background color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of preview (icon color and icon background color)"}],displayName:"Password",props:{id:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},name:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},autoComplete:{defaultValue:{value:'"off"',computed:!1},description:"",type:{name:"string"},required:!1},context:{description:"",type:{name:"any"},required:!1},value:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},inputRef:{description:"",type:{name:"object"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},readOnly:{description:"",type:{name:"bool"},required:!1},preview:{description:"",type:{name:"bool"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},onKeyUp:{description:"",type:{name:"func"},required:!1},securityToken:{description:"",type:{name:"shape",value:{code:{name:"string",required:!1},backgroundColor:{name:"string",required:!1},textColor:{name:"string",required:!1}}},required:!1}}}},"./src/shared/models/entity/abstract/entity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class Entity{constructor(dto,options={}){(options?.clone??!0)&&(dto=JSON.parse(JSON.stringify(dto))),this._props=dto}toDto(){return JSON.parse(JSON.stringify(this))}toJSON(){return this._props}_hasProp(propName){if(!propName.includes(".")){const normalizedPropName=Entity._normalizePropName(propName);return Object.prototype.hasOwnProperty.call(this._props,normalizedPropName)}try{return this._getPropByPath(propName),!0}catch(error){return!1}}_getPropByPath(path){return Entity._normalizePropName(path).split(".").reduce(((obj,i)=>{if(Object.prototype.hasOwnProperty.call(obj,i))return obj[i];throw new Error}),this._props)}static _normalizePropName(name){return name.replace(/([A-Z])/g,((x,y)=>`_${y.toLowerCase()}`)).replace(/\._/,".").replace(/^_/,"").replace(/^\./,"")}}const __WEBPACK_DEFAULT_EXPORT__=Entity},"./src/shared/models/entity/abstract/entityV2.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _entitySchema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),_entity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/abstract/entity.js"),validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js"),_entityValidationError__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");const SCALAR_PROPERTY_TYPES=["string","number","integer","boolean"];class EntityV2 extends _entity__WEBPACK_IMPORTED_MODULE_2__.A{static _cachedSchema={};constructor(dtos={},options={}){const validate=options?.validate??!0;if(super(dtos,options),this.marshall(),validate){const error=this.validate({schema:options?.schema,validateBuildRules:options?.validateBuildRules});if(error)throw error}}marshall(){}validate(options={}){try{this.validateSchema(options?.schema),this.validateBuildRules(options?.validateBuildRules)}catch(error){if(!(error instanceof _entityValidationError__WEBPACK_IMPORTED_MODULE_1__.A))throw error;return error}return null}validateSchema(schema=null){this._props=_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validate(this.constructor.name,this._props,schema??this.cachedSchema)}get cachedSchema(){return this.constructor._cachedSchema[this.constructor.name]||(this.constructor._cachedSchema[this.constructor.name]=this.constructor.getSchema()),this.constructor._cachedSchema[this.constructor.name]}static getSchema(){throw new Error("The entity class should declare its schema.")}validateBuildRules(options={}){}get(propName){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_3__.A)(propName);const schemaProperties=this.constructor.getSchema().properties[propName];if(!schemaProperties)throw new Error(`The property "${propName}" has no schema definition.`);if(!SCALAR_PROPERTY_TYPES.includes(schemaProperties?.type))throw new Error('The property "associated_entity" should reference scalar properties only.');return this._props[propName]}set(propName,value,options={}){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_3__.A)(propName);const validate=options?.validate??!0,schemaProperties=this.constructor.getSchema().properties[propName];if(!schemaProperties)throw new Error(`The property "${propName}" has no schema definition.`);if(!SCALAR_PROPERTY_TYPES.includes(schemaProperties?.type))throw new Error('The property "associated_entity" should reference scalar properties only.');validate&&_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validateProp(propName,value,schemaProperties),this._props[propName]=value}diffProps(compareEntity){if(!(compareEntity instanceof EntityV2))throw new TypeError('The property "compareEntity" should be of "EntityV2" type.');const diff={},schema=this.constructor.getSchema(),propertiesNamesToCompare=Object.keys(schema.properties).filter((propertyName=>SCALAR_PROPERTY_TYPES.includes(schema.properties[propertyName].type)));for(const propertyName of propertiesNamesToCompare){const propValue=this.get(propertyName),comparedPropValue=compareEntity.get(propertyName);propValue!==comparedPropValue&&(diff[propertyName]=comparedPropValue)}return diff}hasDiffProps(compareEntity){const diff=this.diffProps(compareEntity);return Object.keys(diff).length>0}}const __WEBPACK_DEFAULT_EXPORT__=EntityV2},"./src/shared/models/entity/role/roleEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js");class RoleEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",enum:[RoleEntity.ROLE_ADMIN,RoleEntity.ROLE_USER,RoleEntity.ROLE_GUEST,RoleEntity.ROLE_ROOT]},description:{type:"string",maxLength:255},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"}}}}get id(){return this._props.id}get name(){return this._props.name}get description(){return this._props.description||null}get created(){return this._props.created||null}get modified(){return this._props.modified||null}isAdmin(){return this.name===RoleEntity.ROLE_ADMIN}static get ENTITY_NAME(){return"Role"}static get ROLE_ADMIN(){return"admin"}static get ROLE_USER(){return"user"}static get ROLE_GUEST(){return"guest"}static get ROLE_ROOT(){return"root"}}const __WEBPACK_DEFAULT_EXPORT__=RoleEntity},"./node_modules/uuid/dist/esm-browser/v5.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v5});var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js"),validate=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js");const esm_browser_parse=function parse(uuid){if(!(0,validate.A)(uuid))throw TypeError("Invalid UUID");var v,arr=new Uint8Array(16);return arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24,arr[1]=v>>>16&255,arr[2]=v>>>8&255,arr[3]=255&v,arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8,arr[5]=255&v,arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8,arr[7]=255&v,arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8,arr[9]=255&v,arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255,arr[11]=v/4294967296&255,arr[12]=v>>>24&255,arr[13]=v>>>16&255,arr[14]=v>>>8&255,arr[15]=255&v,arr};function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:case 3:return x^y^z;case 2:return x&y^x&z^y&z}}function ROTL(x,n){return x<<n|x>>>32-n}const esm_browser_v5=function v35(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){if("string"==typeof value&&(value=function stringToBytes(str){str=unescape(encodeURIComponent(str));for(var bytes=[],i=0;i<str.length;++i)bytes.push(str.charCodeAt(i));return bytes}(value)),"string"==typeof namespace&&(namespace=esm_browser_parse(namespace)),16!==namespace.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var bytes=new Uint8Array(16+value.length);if(bytes.set(namespace),bytes.set(value,namespace.length),(bytes=hashfunc(bytes))[6]=15&bytes[6]|version,bytes[8]=63&bytes[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=bytes[i];return buf}return(0,stringify.A)(bytes)}try{generateUUID.name=name}catch(err){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID}("v5",80,(function sha1(bytes){var K=[1518500249,1859775393,2400959708,3395469782],H=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof bytes){var msg=unescape(encodeURIComponent(bytes));bytes=[];for(var i=0;i<msg.length;++i)bytes.push(msg.charCodeAt(i))}else Array.isArray(bytes)||(bytes=Array.prototype.slice.call(bytes));bytes.push(128);for(var l=bytes.length/4+2,N=Math.ceil(l/16),M=new Array(N),_i=0;_i<N;++_i){for(var arr=new Uint32Array(16),j=0;j<16;++j)arr[j]=bytes[64*_i+4*j]<<24|bytes[64*_i+4*j+1]<<16|bytes[64*_i+4*j+2]<<8|bytes[64*_i+4*j+3];M[_i]=arr}M[N-1][14]=8*(bytes.length-1)/Math.pow(2,32),M[N-1][14]=Math.floor(M[N-1][14]),M[N-1][15]=8*(bytes.length-1)&4294967295;for(var _i2=0;_i2<N;++_i2){for(var W=new Uint32Array(80),t=0;t<16;++t)W[t]=M[_i2][t];for(var _t=16;_t<80;++_t)W[_t]=ROTL(W[_t-3]^W[_t-8]^W[_t-14]^W[_t-16],1);for(var a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],_t2=0;_t2<80;++_t2){var s=Math.floor(_t2/20),T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[_t2]>>>0;e=d,d=c,c=ROTL(b,30)>>>0,b=a,a=T}H[0]=H[0]+a>>>0,H[1]=H[1]+b>>>0,H[2]=H[2]+c>>>0,H[3]=H[3]+d>>>0,H[4]=H[4]+e>>>0}return[H[0]>>24&255,H[0]>>16&255,H[0]>>8&255,255&H[0],H[1]>>24&255,H[1]>>16&255,H[1]>>8&255,255&H[1],H[2]>>24&255,H[2]>>16&255,H[2]>>8&255,255&H[2],H[3]>>24&255,H[3]>>16&255,H[3]>>8&255,255&H[3],H[4]>>24&255,H[4]>>16&255,H[4]>>8&255,255&H[4]]}))}}]);