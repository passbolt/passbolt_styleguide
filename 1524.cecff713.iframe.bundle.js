/*! For license information please see 1524.cecff713.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[1524],{"./src/img/svg/add.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgAdd(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none",viewBox:"0 0 17 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.594 2v12M14.597 7.997h-12"})))}},"./src/img/svg/delete.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgDelete(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25 4.5h13.5M14.25 4.5V15c0 .75-.75 1.5-1.5 1.5h-7.5c-.75 0-1.5-.75-1.5-1.5V4.5M6 4.5V3c0-.75.75-1.5 1.5-1.5h3c.75 0 1.5.75 1.5 1.5v1.5M7.5 8.25v4.5M10.5 8.25v4.5"})))}},"./node_modules/debounce-promise/dist/index.js":module=>{module.exports=function debounce(fn){var wait=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},lastCallAt=void 0,deferred=void 0,timer=void 0,pendingArgs=[];return function debounced(){var currentWait=function getWait(wait){return"function"==typeof wait?wait():wait}(wait),currentTime=(new Date).getTime(),isCold=!lastCallAt||currentTime-lastCallAt>currentWait;lastCallAt=currentTime;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(isCold&&options.leading)return options.accumulate?Promise.resolve(fn.call(this,[args])).then((function(result){return result[0]})):Promise.resolve(fn.call.apply(fn,[this].concat(args)));if(deferred?clearTimeout(timer):deferred=function defer(){var deferred={};return deferred.promise=new Promise((function(resolve,reject){deferred.resolve=resolve,deferred.reject=reject})),deferred}(),pendingArgs.push(args),timer=setTimeout(flush.bind(this),currentWait),options.accumulate){var argsIndex=pendingArgs.length-1;return deferred.promise.then((function(results){return results[argsIndex]}))}return deferred.promise};function flush(){var thisDeferred=deferred;clearTimeout(timer),Promise.resolve(options.accumulate?fn.call(this,pendingArgs):fn.apply(this,pendingArgs[pendingArgs.length-1])).then(thisDeferred.resolve,thisDeferred.reject),pendingArgs=[],deferred=null}}},"./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmDeletionSelfRegistrationSettings/ConfirmDeletionSelfRegistrationSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/Administration/AdministrationSelfRegistration/AdministrationSelfRegistrationContext.js");class ConfirmDeletionSelfRegistrationSettings extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}async handleSubmit(event){event.preventDefault(),await this.props.onSubmit(),this.props.onClose()}render(){const isProcessing=this.props.adminSelfRegistrationContext.isProcessing();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{title:this.props.t("Disable self registration"),onClose:this.handleClose,disabled:isProcessing,className:"delete-self-registration-settings-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Are you sure to disable the self registration for the organization ?")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Users will not be able to self register anymore.")," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Only administrators would be able to invite users to register. ")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__.A,{onClick:this.handleClose,disabled:isProcessing}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_4__.A,{value:this.props.t("Save"),disabled:isProcessing,processing:isProcessing,warning:!0}))))}}ConfirmDeletionSelfRegistrationSettings.propTypes={adminSelfRegistrationContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,onClose:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_5__.v6)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(ConfirmDeletionSelfRegistrationSettings));ConfirmDeletionSelfRegistrationSettings.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleClose",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"handleSubmit",docblock:"Go to the next process\n@param {Event} event A form submit event",modifiers:["async"],params:[{name:"event",description:"A form submit event",type:{name:"Event"},optional:!1}],returns:null,description:"Go to the next process"}],displayName:"ConfirmDeletionSelfRegistrationSettings",props:{adminSelfRegistrationContext:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmSaveSelfRegistrationSettings/ConfirmSaveSelfRegistrationSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/Administration/AdministrationSelfRegistration/AdministrationSelfRegistrationContext.js"),_lib_Map_MapObject__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/lib/Map/MapObject.js");class ConfirmSaveSelfRegistrationSettings extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}async handleSubmit(event){event.preventDefault(),await this.props.onSubmit(),this.props.onClose()}get allowedDomains(){return this.props.adminSelfRegistrationContext.getAllowedDomains()}render(){const isProcessing=this.props.adminSelfRegistrationContext.isProcessing();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{title:this.props.t("Save self registration settings"),onClose:this.handleClose,disabled:isProcessing,className:"save-self-registration-settings-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Allowed domains")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"radiolist-alt"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input radio"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{id:"domains-list"},this.allowedDomains&&_lib_Map_MapObject__WEBPACK_IMPORTED_MODULE_7__.A.iterators(this.allowedDomains).map((key=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key},this.allowedDomains.get(key))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"warning message no-margin"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Please review carefully this configuration."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__.A,{onClick:this.handleClose,disabled:isProcessing}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_4__.A,{value:this.props.t("Save"),disabled:isProcessing,processing:isProcessing,warning:!0}))))}}ConfirmSaveSelfRegistrationSettings.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,adminSelfRegistrationContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,onClose:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__.L)((0,_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_6__.v6)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(ConfirmSaveSelfRegistrationSettings)));ConfirmSaveSelfRegistrationSettings.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleClose",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"handleSubmit",docblock:"Go to the next process\n@param {Event} event A form submit event",modifiers:["async"],params:[{name:"event",description:"A form submit event",type:{name:"Event"},optional:!1}],returns:null,description:"Go to the next process"},{name:"allowedDomains",docblock:"return the allowed domains",modifiers:["get"],params:[],returns:null,description:"return the allowed domains"}],displayName:"ConfirmSaveSelfRegistrationSettings",props:{context:{description:"",type:{name:"any"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},adminSelfRegistrationContext:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/DisplaySelfRegistrationAdministration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DisplaySelfRegistrationAdministration_DisplaySelfRegistrationAdministration});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),DomainUtil=__webpack_require__("./src/react-extension/lib/Domain/DomainUtil.js"),MapObject=__webpack_require__("./src/react-extension/lib/Map/MapObject.js"),AdministrationSelfRegistrationContext=__webpack_require__("./src/react-extension/contexts/Administration/AdministrationSelfRegistration/AdministrationSelfRegistrationContext.js");const map=new Map;function setRef(key){if("string"!=typeof key)return console.warn("useDynamicRefs: Cannot set ref without key");const ref=react.createRef();return map.set(key,ref),ref}function getRef(key){return key?map.get(key):console.warn("useDynamicRefs: Cannot get ref without key")}const DynamicRef=function useDynamicRefs(){return{getRef,setRef}};var DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),SelfRegistrationDomainsViewModel=__webpack_require__("./src/shared/models/selfRegistration/SelfRegistrationDomainsViewModel.js"),dist=__webpack_require__("./node_modules/debounce-promise/dist/index.js"),dist_default=__webpack_require__.n(dist),portals=__webpack_require__("./src/shared/utils/portals.js"),file_text=__webpack_require__("./src/img/svg/file_text.svg");class DisplayAdministrationSelfRegistrationActions extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleSave=this.handleSave.bind(this)}get allowedDomains(){return this.props.adminSelfRegistrationContext.getAllowedDomains()}isSaveEnabled(){let isFirstUsageWithoutChanges=!1;return this.props.adminSelfRegistrationContext.getCurrentSettings()?.provider||(isFirstUsageWithoutChanges=!this.props.adminSelfRegistrationContext.hasSettingsChanges()),!this.props.adminSelfRegistrationContext.isProcessing()&&!isFirstUsageWithoutChanges}async handleSave(){this.isSaveEnabled()&&this.props.adminSelfRegistrationContext.save()}render(){return react.createElement("div",{className:"actions-wrapper"},react.createElement("button",{className:"button primary form",type:"button",disabled:!this.isSaveEnabled(),id:"save-settings",onClick:this.handleSave},react.createElement("span",null,react.createElement(es.x6,null,"Save"))))}}DisplayAdministrationSelfRegistrationActions.propTypes={adminSelfRegistrationContext:prop_types_default().object,t:prop_types_default().func};const DisplayAdministrationSelfRegistrationActions_DisplayAdministrationSelfRegistrationActions=(0,es.CI)("common")((0,AdministrationSelfRegistrationContext.v6)(DisplayAdministrationSelfRegistrationActions));DisplayAdministrationSelfRegistrationActions.__docgenInfo={description:"This component is a container of multiple actions applicable on setting",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"allowedDomains",docblock:"return the allowed domains",modifiers:["get"],params:[],returns:null,description:"return the allowed domains"},{name:"isSaveEnabled",docblock:"Is save button enable\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is save button enable"},{name:"handleSave",docblock:"Handle the save action.\nIn case we have more than one domain and we have changes, we should display a confirmation dialog to inform the user\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle the save action.\nIn case we have more than one domain and we have changes, we should display a confirmation dialog to inform the user"}],displayName:"DisplayAdministrationSelfRegistrationActions",props:{adminSelfRegistrationContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var add=__webpack_require__("./src/img/svg/add.svg"),svg_delete=__webpack_require__("./src/img/svg/delete.svg");class DisplaySelfRegistrationAdministration extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.dynamicRefs=DynamicRef(),this.checkForPublicDomainDebounce=dist_default()(this.checkForWarnings,300),this.bindCallbacks()}async componentDidMount(){await this.findSettings()}componentDidUpdate(){this.shouldFocusOnError(),this.shouldCheckWarnings()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminSelfRegistrationContext.clearContext()}get defaultState(){return{isEnabled:!1,warnings:new Map}}bindCallbacks(){this.handleToggleClicked=this.handleToggleClicked.bind(this),this.handleAddRowClick=this.handleAddRowClick.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleDeleteRow=this.handleDeleteRow.bind(this)}get currentUser(){return this.props.context.loggedInUser}get allowedDomains(){return this.props.adminSelfRegistrationContext.getAllowedDomains()}async findSettings(){await this.props.adminSelfRegistrationContext.findSettings(),this.setState({isEnabled:this.allowedDomains.size>0}),this.checkForWarnings(),this.validateForm()}checkForWarnings(){this.setState({warnings:new Map},(()=>{this.allowedDomains.forEach(((value,key)=>this.checkDomainIsProfessional(key,value)))}))}setupSettings(){if(this.props.adminSelfRegistrationContext.setDomains(new SelfRegistrationDomainsViewModel.A(this.props.adminSelfRegistrationContext.getCurrentSettings())),this.checkForWarnings(),0===this.allowedDomains.size){const domain=DomainUtil.A.extractDomainFromEmail(this.currentUser?.username);DomainUtil.A.checkDomainValidity(domain),this.populateUserDomain(domain)}}shouldFocusOnError(){const onFocus=this.props.adminSelfRegistrationContext.shouldFocus(),[error]=this.props.adminSelfRegistrationContext.getErrors().keys();if(error&&onFocus){this.dynamicRefs.getRef(error).current.focus(),this.props.adminSelfRegistrationContext.setFocus(!1)}}shouldCheckWarnings(){this.props.adminSelfRegistrationContext.isSaved()&&(this.props.adminSelfRegistrationContext.setSaved(!1),this.checkForWarnings())}populateUserDomain(domain){const row=DomainUtil.A.isProfessional(domain)?domain:"";this.addRow(row)}addRow(value=""){const uuid=(0,v4.A)();this.props.adminSelfRegistrationContext.setAllowedDomains(uuid,value,(()=>{const inputRef=this.dynamicRefs.getRef(uuid);inputRef?.current.focus()}))}handleDeleteRow(key){if(this.canDelete()){const domains=this.allowedDomains;domains.delete(key),this.props.adminSelfRegistrationContext.setDomains({allowedDomains:domains}),this.validateForm(),this.checkForWarnings()}}hasWarnings(){return this.state.warnings.size>0}hasAllInputDisabled(){return this.props.adminSelfRegistrationContext.isProcessing()}handleToggleClicked(){this.setState({isEnabled:!this.state.isEnabled},(()=>{this.state.isEnabled?this.setupSettings():(this.props.adminSelfRegistrationContext.setDomains({allowedDomains:new Map}),this.props.adminSelfRegistrationContext.setErrors(new Map))}))}handleAddRowClick(){this.addRow()}checkDomainIsProfessional(uuid,value){this.setState((prevState=>{const warnings=MapObject.A.clone(prevState.warnings);return DomainUtil.A.isProfessional(value)?warnings.delete(uuid):warnings.set(uuid,"This is not a safe professional domain"),{warnings}}))}handleInputChange(event){const value=event.target.value,uuid=event.target.name;this.props.adminSelfRegistrationContext.setAllowedDomains(uuid,value,(()=>this.validateForm())),this.checkForPublicDomainDebounce()}validateForm(){this.props.adminSelfRegistrationContext.validateForm()}canDelete(){return this.allowedDomains.size>1}render(){const isSubmitted=this.props.adminSelfRegistrationContext.isSubmitted(),errors=this.props.adminSelfRegistrationContext.getErrors();return react.createElement("div",{className:"row"},react.createElement(react.Fragment,null,react.createElement("div",{className:"self-registration main-column"},react.createElement("div",{className:"main-content"},react.createElement("h3",null,react.createElement("span",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"settings-toggle",onChange:this.handleToggleClicked,checked:this.state.isEnabled,disabled:this.hasAllInputDisabled(),id:"settings-toggle"}),react.createElement("label",{htmlFor:"settings-toggle"},react.createElement(es.x6,null,"Self Registration")))),!this.state.isEnabled&&react.createElement("p",{className:"description",id:"disabled-description"},react.createElement(es.x6,null,"User self registration is disabled.")," ",react.createElement(es.x6,null,"Only administrators can invite users to register.")),this.state.isEnabled&&react.createElement("div",{className:"self-registration-form"},react.createElement("div",{id:"self-registration-subtitle",className:`input ${this.hasWarnings()&&"warning"} ${isSubmitted&&errors.size>0&&"error"}`},react.createElement("label",{id:"enabled-label"},react.createElement(es.x6,null,"Email domain safe list"))),react.createElement("p",{className:"description",id:"enabled-description"},react.createElement(es.x6,null,"All the users with an email address ending with the domain in the safe list are allowed to register on passbolt.")),MapObject.A.iterators(this.allowedDomains).map((key=>react.createElement("div",{key,className:"input"},react.createElement("div",{className:"domain-row"},react.createElement("input",{type:"text",className:"full-width",onChange:this.handleInputChange,id:`input-${key}`,name:key,value:this.allowedDomains.get(key),disabled:!this.hasAllInputDisabled,ref:this.dynamicRefs.setRef(key),placeholder:this.props.t("domain")}),react.createElement("button",{type:"button",disabled:!this.canDelete(),className:"button-icon",id:`delete-${key}`,onClick:()=>this.handleDeleteRow(key)},react.createElement(svg_delete.A,null))),this.hasWarnings()&&this.state.warnings.get(key)&&react.createElement("div",{id:"domain-name-input-feedback",className:"warning-message"},react.createElement(es.x6,null,this.state.warnings.get(key))),errors.get(key)&&isSubmitted&&react.createElement("div",{className:"error-message"},react.createElement(es.x6,null,errors.get(key)))))),react.createElement("div",{className:"domain-add"},react.createElement("button",{type:"button",onClick:this.handleAddRowClick},react.createElement(add.A,null),react.createElement("span",null,react.createElement(es.x6,null,"Add")))))),this.props.adminSelfRegistrationContext.hasSettingsChanges()&&react.createElement("div",{className:"warning message",id:"self-registration-setting-overridden-banner"},react.createElement("div",null,react.createElement("p",null,react.createElement(es.x6,null,"Don't forget to save your settings to apply your modification."))))),react.createElement(DisplayAdministrationSelfRegistrationActions_DisplayAdministrationSelfRegistrationActions,null)),(0,portals.m)(react.createElement("div",{className:"sidebar-help-section"},react.createElement("h3",null,react.createElement(es.x6,null,"What is user self registration?")),react.createElement("p",null,react.createElement(es.x6,null,"User self registration enables users with an email from a whitelisted domain to create their passbolt account without prior admin invitation.")),react.createElement("a",{className:"button",href:"https://passbolt.com/docs/admin/user-provisioning/self-registration/",target:"_blank",rel:"noopener noreferrer"},react.createElement(file_text.A,null),react.createElement("span",null,react.createElement(es.x6,null,"Read the documentation")))),document.getElementById("administration-help-panel")))}}DisplaySelfRegistrationAdministration.propTypes={dialogContext:prop_types_default().any,context:prop_types_default().any,adminSelfRegistrationContext:prop_types_default().object,administrationWorkspaceContext:prop_types_default().object,t:prop_types_default().func};const DisplaySelfRegistrationAdministration_DisplaySelfRegistrationAdministration=(0,AppContext.L)((0,DialogContext.z9)((0,AdministrationSelfRegistrationContext.v6)((0,AdministrationWorkspaceContext.Kk)((0,es.CI)("common")(DisplaySelfRegistrationAdministration)))));DisplaySelfRegistrationAdministration.__docgenInfo={description:"This component allows to display the Self registration for the administration",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"currentUser",docblock:"return the current user",modifiers:["get"],params:[],returns:null,description:"return the current user"},{name:"allowedDomains",docblock:"return the allowed domains",modifiers:["get"],params:[],returns:null,description:"return the allowed domains"},{name:"findSettings",docblock:"Bind callbacks methods",modifiers:["async"],params:[],returns:null,description:"Bind callbacks methods"},{name:"checkForWarnings",docblock:"We check for warnings and errors into the form",modifiers:[],params:[],returns:null,description:"We check for warnings and errors into the form"},{name:"setupSettings",docblock:"setup settings for the first time",modifiers:[],params:[],returns:null,description:"setup settings for the first time"},{name:"shouldFocusOnError",docblock:"set focus to the first input error",modifiers:[],params:[],returns:null,description:"set focus to the first input error"},{name:"shouldCheckWarnings",docblock:"in case of saved settings we should check warnings again",modifiers:[],params:[],returns:null,description:"in case of saved settings we should check warnings again"},{name:"populateUserDomain",docblock:"Check domain and populate it if it is a professional\n@param {string} domain",modifiers:[],params:[{name:"domain",type:{name:"string"},optional:!1}],returns:null,description:"Check domain and populate it if it is a professional"},{name:"addRow",docblock:"Check domain and populate it if is a professional domain\n@param {string} domain",modifiers:[],params:[{name:"value",optional:!0}],returns:null,description:"Check domain and populate it if is a professional domain"},{name:"handleDeleteRow",docblock:"Remove a domain row\n@param {string} key",modifiers:[],params:[{name:"key",type:{name:"string"},optional:!1}],returns:null,description:"Remove a domain row"},{name:"hasWarnings",docblock:"Check if inputs has warnings",modifiers:[],params:[],returns:null,description:"Check if inputs has warnings"},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is loading or processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is loading or processing"},{name:"handleToggleClicked",docblock:"Handle the click on the self registration title\n@param {UserDirectory} userDirectory state",modifiers:[],params:[],returns:null,description:"Handle the click on the self registration title"},{name:"handleAddRowClick",docblock:"Handle the click on the add button",modifiers:[],params:[],returns:null,description:"Handle the click on the add button"},{name:"checkDomainIsProfessional",docblock:"check if domain is a professional one",modifiers:[],params:[{name:"uuid",optional:!1},{name:"value",optional:!1}],returns:null,description:"check if domain is a professional one"},{name:"handleInputChange",docblock:"Handle input change\n@param event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle input change"},{name:"validateForm",docblock:"validate the form\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"validate the form"},{name:"canDelete",docblock:"we cannot delete a row if we have only one domaine\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"we cannot delete a row if we have only one domaine"}],displayName:"DisplaySelfRegistrationAdministration",props:{dialogContext:{description:"",type:{name:"any"},required:!1},context:{description:"",type:{name:"any"},required:!1},adminSelfRegistrationContext:{description:"",type:{name:"object"},required:!1},administrationWorkspaceContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/Administration/AdministrationSelfRegistration/AdministrationSelfRegistrationContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ji:()=>AdminSelfRegistrationContextProvider,v6:()=>withAdminSelfRegistration});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),selfRegistrationService=__webpack_require__("./src/shared/services/api/selfRegistration/selfRegistrationService.js"),SelfRegistrationDomainsViewModel=__webpack_require__("./src/shared/models/selfRegistration/SelfRegistrationDomainsViewModel.js"),MapObject=__webpack_require__("./src/react-extension/lib/Map/MapObject.js"),SelfRegistrationEnumeration=__webpack_require__("./src/shared/models/selfRegistration/SelfRegistrationEnumeration.js");const selfRegistration_SelfRegistrationDto=class SelfRegistrationDto{constructor(selfRegistrationDomains,settings={}){this.id=settings.id,this.provider=settings.provider||SelfRegistrationEnumeration.y.EMAILDOMAINS,this.data=this.mapData(selfRegistrationDomains?.allowedDomains)}mapData(domains=new Map){return{allowed_domains:Array.from(domains.values())}}};var DomainUtil=__webpack_require__("./src/react-extension/lib/Domain/DomainUtil.js");const selfRegistration_SelfRegistrationFormService=class SelfRegistrationFormService{constructor(translate){this.translate=translate,this.fields=new Map}validate(domains){this.fields=domains;return this.validateInputs()}validateInputs(){const errors=new Map;return this.fields.forEach(((value,key)=>{this.validateInput(key,value,errors)})),errors}validateInput(key,value,errors){if(value.length)try{DomainUtil.A.checkDomainValidity(value)}catch{errors.set(key,this.translate("This should be a valid domain"))}else errors.set(key,this.translate("A domain is required."));this.checkDuplicateValue(errors)}checkDuplicateValue(inputErrors){this.fields.forEach(((value,key)=>{MapObject.A.listValues(this.fields).filter((domain=>domain===value&&""!==domain)).length>1&&inputErrors.set(key,this.translate("This domain already exist"))}))}};var ConfirmSaveSelfRegistrationSettings=__webpack_require__("./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmSaveSelfRegistrationSettings/ConfirmSaveSelfRegistrationSettings.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),ConfirmDeletionSelfRegistrationSettings=__webpack_require__("./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmDeletionSelfRegistrationSettings/ConfirmDeletionSelfRegistrationSettings.js");const AdminSelfRegistrationContext=react.createContext({getCurrentSettings:()=>{},getAllowedDomains:()=>{},setAllowedDomains:()=>{},hasSettingsChanges:()=>{},setDomains:()=>{},findSettings:()=>{},setProcessing:()=>{},isProcessing:()=>{},clearContext:()=>{},isSubmitted:()=>{},setSubmitted:()=>{},setErrors:()=>{},getErrors:()=>{},setError:()=>{},save:()=>{},delete:()=>{},shouldFocus:()=>{},setFocus:()=>{},isSaved:()=>{},setSaved:()=>{},validateForm:()=>{}});class AdminSelfRegistrationContextProvider extends react.Component{constructor(props){super(props),this.state=this.defaultState;const apiClientOptions=props.context.getApiClientOptions();this.selfRegistrationService=new selfRegistrationService.A(apiClientOptions),this.selfRegistrationFormService=new selfRegistration_SelfRegistrationFormService(this.props.t)}get defaultState(){return{errors:new Map,submitted:!1,currentSettings:null,focus:!1,saved:!1,domains:new SelfRegistrationDomainsViewModel.A,processing:!0,getCurrentSettings:this.getCurrentSettings.bind(this),getAllowedDomains:this.getAllowedDomains.bind(this),setAllowedDomains:this.setAllowedDomains.bind(this),setDomains:this.setDomains.bind(this),findSettings:this.findSettings.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),clearContext:this.clearContext.bind(this),isSubmitted:this.isSubmitted.bind(this),setSubmitted:this.setSubmitted.bind(this),getErrors:this.getErrors.bind(this),setError:this.setError.bind(this),setErrors:this.setErrors.bind(this),save:this.save.bind(this),shouldFocus:this.shouldFocus.bind(this),setFocus:this.setFocus.bind(this),isSaved:this.isSaved.bind(this),setSaved:this.setSaved.bind(this),deleteSettings:this.deleteSettings.bind(this),validateForm:this.validateForm.bind(this)}}async findSettings(callback=()=>{}){this.setProcessing(!0);const result=await this.selfRegistrationService.find();this.setState({currentSettings:result});const domains=new SelfRegistrationDomainsViewModel.A(result);this.setDomains(domains,callback),this.setProcessing(!1)}getCurrentSettings(){return this.state.currentSettings}getAllowedDomains(){return this.state.domains.allowedDomains}setAllowedDomains(key,value,callback=()=>{}){this.setState((prevState=>{const allowedDomains=MapObject.A.clone(prevState.domains.allowedDomains);return allowedDomains.set(key,value),{domains:{allowedDomains}}}),callback)}setDomains(domains,callback=()=>{}){this.setState({domains},callback)}isProcessing(){return this.state.processing}setProcessing(processing){this.setState({processing})}isSubmitted(){return this.state.submitted}setSubmitted(submitted){this.setState({submitted}),this.setFocus(submitted)}getErrors(){return this.state.errors}shouldFocus(){return this.state.focus}setFocus(focus){this.setState({focus})}setError(key,value){this.setState((prevState=>{const errors=MapObject.A.clone(prevState.errors);return errors.set(key,value),{errors}}))}setErrors(errors){this.setState({errors})}hasSettingsChanges(){const savedDomains=this.state.currentSettings?.data?.allowed_domains||[],uiDomains=MapObject.A.listValues(this.state.domains.allowedDomains);return JSON.stringify(savedDomains)!==JSON.stringify(uiDomains)}clearContext(){const{currentSettings,domains,processing}=this.defaultState;this.setState({currentSettings,domains,processing})}save(){this.setSubmitted(!0);this.validateForm()&&(this.hasSettingsChanges()&&0===this.getAllowedDomains().size?this.displayConfirmDeletionDialog():this.displayConfirmSummaryDialog())}validateForm(){const errors=this.selfRegistrationFormService.validate(this.state.getAllowedDomains());return this.state.setErrors(errors),0===errors.size}async handleSubmitError(error){"UserAbortsOperationError"!==error.name&&(console.error(error),await this.handleError(error))}async saveSettings(){try{this.setProcessing(!0);const newSettings=new selfRegistration_SelfRegistrationDto(this.state.domains,this.state.currentSettings);await this.selfRegistrationService.save(newSettings),await this.findSettings((()=>this.setSaved(!0))),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The self registration settings for the organization were updated."))}catch(error){this.handleSubmitError(error)}finally{this.setProcessing(!1),this.setSubmitted(!1)}}async handleError(error){this.handleCloseDialog();const errorDialogProps={error};this.props.dialogContext.open(NotifyError.A,errorDialogProps)}handleCloseDialog(){this.props.dialogContext.close()}displayConfirmSummaryDialog(){this.props.dialogContext.open(ConfirmSaveSelfRegistrationSettings.A,{domains:this.getAllowedDomains(),onSubmit:()=>this.saveSettings(),onClose:()=>this.handleCloseDialog()})}displayConfirmDeletionDialog(){this.props.dialogContext.open(ConfirmDeletionSelfRegistrationSettings.A,{onSubmit:()=>this.deleteSettings(),onClose:()=>this.handleCloseDialog()})}async deleteSettings(){try{this.setProcessing(!0),await this.selfRegistrationService.delete(this.state.currentSettings.id),await this.findSettings(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The self registration settings for the organization were updated."))}catch(error){this.handleSubmitError(error)}finally{this.setProcessing(!1),this.setSubmitted(!1)}}isSaved(){return this.state.saved}setSaved(saved){return this.setState({saved})}render(){return react.createElement(AdminSelfRegistrationContext.Provider,{value:this.state},this.props.children)}}AdminSelfRegistrationContextProvider.propTypes={context:prop_types_default().any,children:prop_types_default().any,t:prop_types_default().any,dialogContext:prop_types_default().any,actionFeedbackContext:prop_types_default().object};(0,AppContext.L)((0,DialogContext.z9)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(AdminSelfRegistrationContextProvider))));function withAdminSelfRegistration(WrappedComponent){return class WithAdminSelfRegistration extends react.Component{render(){return react.createElement(AdminSelfRegistrationContext.Consumer,null,(adminSelfRegistrationContext=>react.createElement(WrappedComponent,{adminSelfRegistrationContext,...this.props})))}}}AdminSelfRegistrationContextProvider.__docgenInfo={description:"The Administration self registration context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"findSettings",docblock:"Find the self registration settings\n@return {Promise<void>}",modifiers:["async"],params:[{name:"callback",optional:!0}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find the self registration settings"},{name:"getCurrentSettings",docblock:"Returns the setting actually saved inside DB\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Returns the setting actually saved inside DB"},{name:"getAllowedDomains",docblock:"Returns the allowed domains settings that have been fetch previously.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Returns the allowed domains settings that have been fetch previously."},{name:"setAllowedDomains",docblock:"Handle settings changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"key",optional:!1},{name:"value",optional:!1},{name:"callback",optional:!0}],returns:{type:{name:"void"}},description:"Handle settings changes."},{name:"setDomains",docblock:"Handle domains changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"domains",optional:!1},{name:"callback",optional:!0}],returns:{type:{name:"void"}},description:"Handle domains changes."},{name:"isProcessing",docblock:"Returns true when the data is under processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true when the data is under processing"},{name:"setProcessing",docblock:"Handle processing change.\n@params {Boolean} processing value\n@returns {void}",modifiers:[],params:[{name:"processing",optional:!1}],returns:{type:{name:"void"}},description:"Handle processing change."},{name:"isSubmitted",docblock:"return true if the form has been submitted\n@returns {Boolean}",modifiers:[],params:[],returns:{type:{name:"Boolean"}},description:"return true if the form has been submitted"},{name:"setSubmitted",docblock:"change value for isSubmitted\n@params  {Boolean}\n@returns {Boolean}",modifiers:[],params:[{name:"submitted",optional:!1}],returns:{type:{name:"Boolean"}},description:"change value for isSubmitted"},{name:"getErrors",docblock:"return the errors object",modifiers:[],params:[],returns:null,description:"return the errors object"},{name:"shouldFocus",docblock:"return the focus object",modifiers:[],params:[],returns:null,description:"return the focus object"},{name:"setFocus",docblock:"change value for isSubmitted\n@params  {Boolean}\n@returns {Boolean}",modifiers:[],params:[{name:"focus",optional:!1}],returns:{type:{name:"Boolean"}},description:"change value for isSubmitted"},{name:"setError",docblock:"set an error to object",modifiers:[],params:[{name:"key",optional:!1},{name:"value",optional:!1}],returns:null,description:"set an error to object"},{name:"setErrors",docblock:"set errors to object",modifiers:[],params:[{name:"errors",optional:!1}],returns:null,description:"set errors to object"},{name:"hasSettingsChanges",docblock:"Check if there are changes to apply\n@returns {Boolean}",modifiers:[],params:[],returns:{type:{name:"Boolean"}},description:"Check if there are changes to apply"},{name:"clearContext",docblock:"Puts the state to its default in order to avoid keeping the data users didn't want to save.",modifiers:[],params:[],returns:null,description:"Puts the state to its default in order to avoid keeping the data users didn't want to save."},{name:"save",docblock:"Whenever the save has been requested",modifiers:[],params:[],returns:null,description:"Whenever the save has been requested"},{name:"validateForm",docblock:"validate the form\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"validate the form"},{name:"handleSubmitError",docblock:"Handle save operation error.\n@param {object} error The returned error",modifiers:["async"],params:[{name:"error",description:"The returned error",type:{name:"object"},optional:!1}],returns:null,description:"Handle save operation error."},{name:"saveSettings",docblock:"Whenever the submit request is done",modifiers:["async"],params:[],returns:null,description:"Whenever the submit request is done"},{name:"handleError",docblock:"handle error to display the error dialog\n@param error",modifiers:["async"],params:[{name:"error",optional:!1}],returns:null,description:"handle error to display the error dialog"},{name:"handleCloseDialog",docblock:"Handle close dialog",modifiers:[],params:[],returns:null,description:"Handle close dialog"},{name:"displayConfirmSummaryDialog",docblock:"Display the confirmation summary dialog\n@returns {Promise<void>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Display the confirmation summary dialog"},{name:"displayConfirmDeletionDialog",docblock:"Display the confirmation dialog for deletion seytings\n@returns {Promise<void>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Display the confirmation dialog for deletion seytings"},{name:"deleteSettings",docblock:"Whenever the delete has been requested",modifiers:["async"],params:[],returns:null,description:"Whenever the delete has been requested"},{name:"isSaved",docblock:"return the saved state",modifiers:[],params:[],returns:null,description:"return the saved state"},{name:"setSaved",docblock:"Set saved state\n@Param {Boolean}",modifiers:[],params:[{name:"saved",optional:!1}],returns:null,description:"Set saved state"}],displayName:"AdminSelfRegistrationContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1}}}},"./src/react-extension/lib/Map/MapObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class MapObject{static clone(object){return new Map(JSON.parse(JSON.stringify(Array.from(object))))}static iterators(object){return[...object.keys()]}static listValues(object){return[...object.values()]}}},"./src/shared/models/selfRegistration/SelfRegistrationDomainsViewModel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const __WEBPACK_DEFAULT_EXPORT__=class SelfRegistrationDomainsViewModel{constructor(selfRegistrationDto={}){this.allowedDomains=this.mapAllowedDomains(selfRegistrationDto.data?.allowed_domains||[])}mapAllowedDomains(domains){return new Map(domains.map((domain=>[(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),domain])))}getSettings(){return this.allowedDomains}setSettings(domains){this.allowedDomains=this.mapAllowedDomains(domains)}}},"./src/shared/models/selfRegistration/SelfRegistrationEnumeration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>SelfRegistrationProviderTypes});const SelfRegistrationProviderTypes={EMAILDOMAINS:"email_domains"}},"./src/shared/services/api/selfRegistration/selfRegistrationService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_apiClient_apiClient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/lib/apiClient/apiClient.js");const __WEBPACK_DEFAULT_EXPORT__=class SelfRegistrationService{constructor(apiClientOptions){this.apiClientOptions=apiClientOptions}async find(){this.initClient();const selfRegistrationSettings=await this.apiClient.findAll(),settings=selfRegistrationSettings?.body;return settings}async save(dto){this.initClient(),await this.apiClient.create(dto)}async delete(id){this.initClient(),await this.apiClient.delete(id)}async checkDomainAllowed(payload){this.initClient("dry-run"),await this.apiClient.create(payload)}initClient(path="settings"){this.apiClientOptions.setResourceName(`self-registration/${path}`),this.apiClient=new _lib_apiClient_apiClient__WEBPACK_IMPORTED_MODULE_0__.O(this.apiClientOptions)}}}}]);