/*! For license information please see 6355.c3312dff.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6355],{"./src/react-extension/components/User/FilterUsersByGroups/FilterUsersByGroup.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>FilterUsersByGroups_FilterUsersByGroup,O:()=>filterByGroupsOptions});var react=__webpack_require__("./node_modules/react/index.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),UserWorkspaceContext=__webpack_require__("./src/react-extension/contexts/UserWorkspaceContext.js"),ContextualMenuContext=__webpack_require__("./src/react-extension/contexts/ContextualMenuContext.js"),ContextualMenuWrapper=__webpack_require__("./src/react-extension/components/Common/ContextualMenu/ContextualMenuWrapper.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FilterUsersByGroupContextualMenu extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleFilterClickEvent=this.handleFilterClickEvent.bind(this),this.handleHide=this.handleHide.bind(this)}handleFilterClickEvent(filterType){this.props.onFilterSelected(filterType),this.handleHide()}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(),this.props.hide()}render(){return react.createElement(ContextualMenuWrapper.A,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},react.createElement("li",{key:"option-filter-all-groups",className:"ready closed"},react.createElement("div",{className:"row"},react.createElement("div",{className:"main-cell-wrapper"},react.createElement("div",{className:"main-cell"},react.createElement("button",{type:"button",className:"link no-border",id:"all-groups",onClick:()=>this.handleFilterClickEvent(filterByGroupsOptions.all)},react.createElement("span",null,react.createElement(es.x6,null,"All groups"))))))),react.createElement("li",{key:"option-filter-groups-manage",className:"ready closed"},react.createElement("div",{className:"row"},react.createElement("div",{className:"main-cell-wrapper"},react.createElement("div",{className:"main-cell"},react.createElement("button",{type:"button",className:"link no-border",id:"groups-manage",onClick:()=>this.handleFilterClickEvent(filterByGroupsOptions.manage)},react.createElement("span",null,react.createElement(es.x6,null,"Groups I manage"))))))),react.createElement("li",{key:"option-filter-groups-member",className:"ready closed"},react.createElement("div",{className:"row"},react.createElement("div",{className:"main-cell-wrapper"},react.createElement("div",{className:"main-cell"},react.createElement("button",{type:"button",className:"link no-border",id:"groups-member",onClick:()=>this.handleFilterClickEvent(filterByGroupsOptions.member)},react.createElement("span",null,react.createElement(es.x6,null,"Groups I am member of"))))))))}}FilterUsersByGroupContextualMenu.propTypes={onFilterSelected:prop_types_default().func,left:prop_types_default().number,hide:prop_types_default().func,onBeforeHide:prop_types_default().func,top:prop_types_default().number,className:prop_types_default().string};const FilterUsersByGroups_FilterUsersByGroupContextualMenu=(0,es.CI)("common")(FilterUsersByGroupContextualMenu);FilterUsersByGroupContextualMenu.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleFilterClickEvent",docblock:"Handle click on the filter type menu option.\n@param {string} filterType",modifiers:[],params:[{name:"filterType",type:{name:"string"},optional:!1}],returns:null,description:"Handle click on the filter type menu option."},{name:"handleHide",docblock:"Handle hide contextual menu",modifiers:[],params:[],returns:null,description:"Handle hide contextual menu"}],displayName:"FilterUsersByGroupContextualMenu",props:{onFilterSelected:{description:"",type:{name:"func"},required:!1},left:{description:"",type:{name:"number"},required:!1},hide:{description:"",type:{name:"func"},required:!1},onBeforeHide:{description:"",type:{name:"func"},required:!1},top:{description:"",type:{name:"number"},required:!1},className:{description:"",type:{name:"string"},required:!1}}};var DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),DeleteUserGroupWithConflicts=__webpack_require__("./src/react-extension/components/UserGroup/DeleteUserGroup/DeleteUserGroupWithConflicts.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),DeleteUserGroup=__webpack_require__("./src/react-extension/components/UserGroup/DeleteUserGroup/DeleteUserGroup.js"),EditUserGroup=__webpack_require__("./src/react-extension/components/UserGroup/EditUserGroup/EditUserGroup.js");class DisplayGroupContextualMenu extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleEditGroup=this.handleEditGroup.bind(this),this.handleHide=this.handleHide.bind(this)}get group(){return this.props.group}get isCurrentUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}async handleDeleteClickEvent(){try{await this.props.context.port.request("passbolt.groups.delete-dry-run",this.group.id),this.displayDeleteGroupDialog()}catch(error){"DeleteDryRunError"===error.name?this.displayDeleteGroupWithConflictsDialog(error.errors):this.handleError(error)}this.handleHide()}displayDeleteGroupDialog(){const deleteGroupDialogProps={group:this.group};this.props.context.setContext({deleteGroupDialogProps}),this.props.dialogContext.open(DeleteUserGroup.A)}displayDeleteGroupWithConflictsDialog(errors){const deleteGroupWithConflictsDialogProps={group:this.group,errors};this.props.context.setContext({deleteGroupWithConflictsDialogProps}),this.props.dialogContext.open(DeleteUserGroupWithConflicts.A)}handleError(error){const errorDialogProps={error};this.props.dialogContext.open(NotifyError.A,errorDialogProps)}async handleEditGroup(){await this.props.userWorkspaceContext.onGroupToEdit(this.props.group),this.props.dialogContext.open(EditUserGroup.A),this.handleHide()}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(this.props.group.id),this.props.hide()}render(){return react.createElement(ContextualMenuWrapper.A,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},react.createElement("li",{key:"option-filter-all-groups",className:"ready closed"},react.createElement("div",{className:"row"},react.createElement("div",{className:"main-cell-wrapper"},react.createElement("div",{className:"main-cell"},react.createElement("button",{type:"button",className:"link no-border",id:"edit-group",onClick:this.handleEditGroup},react.createElement("span",null,react.createElement(es.x6,null,"Edit group"))))))),this.isCurrentUserAdmin&&react.createElement("li",{key:"option-delete-group",className:"ready closed"},react.createElement("div",{className:"row"},react.createElement("div",{className:"main-cell-wrapper"},react.createElement("div",{className:"main-cell"},react.createElement("button",{type:"button",className:"link no-border",id:"delete-group",onClick:this.handleDeleteClickEvent},react.createElement("span",null,react.createElement(es.x6,null,"Delete Group"))))))))}}DisplayGroupContextualMenu.propTypes={context:prop_types_default().any,hide:prop_types_default().func,onBeforeHide:prop_types_default().func,left:prop_types_default().number,top:prop_types_default().number,group:prop_types_default().object,className:prop_types_default().string,dialogContext:prop_types_default().any,userWorkspaceContext:prop_types_default().object};const FilterUsersByGroups_DisplayGroupContextualMenu=(0,AppContext.L)((0,UserWorkspaceContext.zY)((0,DialogContext.z9)((0,es.CI)("common")(DisplayGroupContextualMenu))));DisplayGroupContextualMenu.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"group",docblock:"Get group\n@returns {null|{deleted: boolean, created: string, name: string, modified_by: string, modified: string, id: string, created_by: string, groups_users: [{is_admin: boolean, group_id: string, user_id: string, created: string, id: string}, {is_admin: boolean, group_id: string, user_id: string, created: string, id: string}], my_group_user: {is_admin: boolean, group_id: string, user_id: string, created: string, id: string}}}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[]}},description:"Get group"},{name:"isCurrentUserAdmin",docblock:"Returns true if the current user is admin",modifiers:["get"],params:[],returns:null,description:"Returns true if the current user is admin"},{name:"handleDeleteClickEvent",docblock:"Handle delete click event",modifiers:["async"],params:[],returns:null,description:"Handle delete click event"},{name:"displayDeleteGroupDialog",docblock:"Display delete user dialog when there is not conflict to solve",modifiers:[],params:[],returns:null,description:"Display delete user dialog when there is not conflict to solve"},{name:"displayDeleteGroupWithConflictsDialog",docblock:"Display delete user dialog when there is conflict to solve.",modifiers:[],params:[{name:"errors",optional:!1}],returns:null,description:"Display delete user dialog when there is conflict to solve."},{name:"handleError",docblock:"Display error dialog\n@param error",modifiers:[],params:[{name:"error",optional:!1}],returns:null,description:"Display error dialog"},{name:"handleEditGroup",docblock:"Handle the will of edit a group",modifiers:["async"],params:[],returns:null,description:"Handle the will of edit a group"},{name:"handleHide",docblock:"Handle hide contextual menu",modifiers:[],params:[],returns:null,description:"Handle hide contextual menu"}],displayName:"DisplayGroupContextualMenu",props:{context:{description:"",type:{name:"any"},required:!1},hide:{description:"",type:{name:"func"},required:!1},onBeforeHide:{description:"",type:{name:"func"},required:!1},left:{description:"",type:{name:"number"},required:!1},top:{description:"",type:{name:"number"},required:!1},group:{description:"",type:{name:"object"},required:!1},className:{description:"",type:{name:"string"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},userWorkspaceContext:{description:"",type:{name:"object"},required:!1}}};class FilterUsersByGroup extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{open:!0,title:this.translate("All groups"),filterType:null,moreTitleMenuOpen:!1,moreMenuOpenGroupId:null}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleTitleMoreClickEvent=this.handleTitleMoreClickEvent.bind(this),this.handleCloseTitleMoreMenu=this.handleCloseTitleMoreMenu.bind(this),this.handleTitleContextualMenuEvent=this.handleTitleContextualMenuEvent.bind(this),this.handleFilterGroupType=this.handleFilterGroupType.bind(this),this.handleGroupSelected=this.handleGroupSelected.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this),this.handleCloseMoreMenu=this.handleCloseMoreMenu.bind(this),this.handleContextualMenuEvent=this.handleContextualMenuEvent.bind(this)}handleTitleClickEvent(){const open=!this.state.open;this.setState({open})}handleTitleContextualMenuEvent(event){event.preventDefault(),this.showContextualMenu(event.pageY,event.pageX)}handleTitleMoreClickEvent(event){const moreTitleMenuOpen=!this.state.moreTitleMenuOpen;if(this.setState({moreTitleMenuOpen}),moreTitleMenuOpen){const{left,top}=event.currentTarget.getBoundingClientRect();this.showContextualMenu(top+18,left,"right")}}handleCloseTitleMoreMenu(){this.setState({moreTitleMenuOpen:!1})}handleContextualMenuEvent(event,group){if(event.preventDefault(),this.isCurrentUserAdmin){const top=event.pageY,contextualMenuProps={group,left:event.pageX,top};this.props.contextualMenuContext.show(FilterUsersByGroups_DisplayGroupContextualMenu,contextualMenuProps)}}handleGroupSelected(event,group){const{id}=group;this.props.history.push(`/app/groups/view/${id}`)}handleFilterGroupType(filterType){this.setState({filterType},(()=>{this.updateTitle()}))}handleMoreClickEvent(event,group){const moreMenuOpenGroupId=this.state.moreMenuOpenGroupId===group.id?null:group.id;if(this.setState({moreMenuOpenGroupId}),moreMenuOpenGroupId){const{left,top}=event.currentTarget.getBoundingClientRect(),contextualMenuProps={group,left,top:top+18,className:"right",onBeforeHide:this.handleCloseMoreMenu};this.props.contextualMenuContext.show(FilterUsersByGroups_DisplayGroupContextualMenu,contextualMenuProps)}}handleCloseMoreMenu(id){this.state.moreMenuOpenGroupId===id&&this.setState({moreMenuOpenGroupId:null})}get titles(){return{[filterByGroupsOptions.manage]:this.translate("Groups I manage"),[filterByGroupsOptions.member]:this.translate("Groups I am member of"),default:this.translate("All groups")}}get filters(){return{[filterByGroupsOptions.manage]:group=>group.my_group_user&&group.my_group_user.is_admin,[filterByGroupsOptions.member]:group=>group.my_group_user&&!group.my_group_user.is_admin,[filterByGroupsOptions.all]:group=>group}}get filteredGroups(){const filterType=this.state.filterType||filterByGroupsOptions.all,filter=this.filters[filterType];return this.groupsSorted.filter(filter)}get isCurrentUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}get groups(){return this.props.context.groups}get groupsSorted(){return this.groups.sort(((groupA,groupB)=>groupA.name.localeCompare(groupB.name)))}showContextualMenu(top,left,className=""){const contextualMenuProps={left,onFilterSelected:this.handleFilterGroupType,onBeforeHide:this.handleCloseTitleMoreMenu,top,className};this.props.contextualMenuContext.show(FilterUsersByGroups_FilterUsersByGroupContextualMenu,contextualMenuProps)}updateTitle(){const title=this.titles[this.state.filterType]||this.titles.default;this.setState({title})}isLoading(){return null===this.groups}hasGroup(){return this.filteredGroups.length>0}isSelected(group){const isGroupFilter=this.props.userWorkspaceContext.filter.type===UserWorkspaceContext.aj.GROUP,filterPayload=this.props.userWorkspaceContext.filter.payload,groupPayload=filterPayload&&filterPayload.group;return isGroupFilter&&groupPayload.id===group.id}canShowMore(group){const isGroupManager=group.my_group_user&&group.my_group_user.is_admin;return this.isCurrentUserAdmin||isGroupManager}get translate(){return this.props.t}render(){return react.createElement("div",{className:"navigation-secondary-tree navigation-secondary navigation-groups accordion"},react.createElement("ul",{className:"accordion-header"},react.createElement("li",{className:"node root "+(this.state.open?"open":"close")},react.createElement("div",{className:"row title"},react.createElement("div",{className:"main-cell-wrapper"},react.createElement("div",{className:"main-cell"},react.createElement("h3",null,react.createElement("span",{className:"folders-label",onClick:this.handleTitleClickEvent},react.createElement("button",{type:"button",className:"link no-border",onContextMenu:this.handleTitleContextualMenuEvent},react.createElement(react.Fragment,null,this.state.open&&react.createElement(Icon.A,{name:"caret-down"}),!this.state.open&&react.createElement(Icon.A,{name:"caret-right"})),this.state.title))))),react.createElement("div",{className:"dropdown right-cell more-ctrl"},react.createElement("button",{type:"button",className:""+(this.state.moreTitleMenuOpen?"open":""),onClick:this.handleTitleMoreClickEvent},react.createElement(Icon.A,{name:"3-dots-h"})))))),this.state.open&&react.createElement("div",{className:"accordion-content"},this.isLoading()&&react.createElement("div",{className:"processing-wrapper"},react.createElement(Icon.A,{name:"spinner"}),react.createElement("span",{className:"processing-text"},react.createElement(es.x6,null,"Retrieving groups"))),!this.isLoading()&&!this.hasGroup()&&react.createElement("em",{className:"empty-content"},react.createElement(es.x6,null,"empty")),!this.isLoading()&&this.hasGroup()&&react.createElement("ul",{className:"tree ready"},this.filteredGroups.map((group=>react.createElement("li",{className:"node root group-item",key:group.id},react.createElement("div",{className:"row  "+(this.isSelected(group)?"selected":"")},react.createElement("div",{className:"main-cell-wrapper",onClick:event=>this.handleGroupSelected(event,group),onContextMenu:event=>this.handleContextualMenuEvent(event,group)},react.createElement("div",{className:"main-cell"},react.createElement("button",{type:"button",className:"link no-border",title:group.name},react.createElement(Icon.A,{name:"users"}),react.createElement("span",{className:"ellipsis"},group.name)))),this.canShowMore(group)&&react.createElement("div",{className:"dropdown right-cell more-ctrl"},react.createElement("button",{type:"button",onClick:event=>this.handleMoreClickEvent(event,group),className:""+(this.state.moreMenuOpenGroupId===group.id?"open":"")},react.createElement(Icon.A,{name:"3-dots-h"}))))))))))}}FilterUsersByGroup.propTypes={context:prop_types_default().any,userWorkspaceContext:prop_types_default().any,history:prop_types_default().object,contextualMenuContext:prop_types_default().any,t:prop_types_default().func};const FilterUsersByGroups_FilterUsersByGroup=(0,AppContext.L)((0,react_router.y)((0,UserWorkspaceContext.zY)((0,ContextualMenuContext.t6)((0,es.CI)("common")(FilterUsersByGroup))))),filterByGroupsOptions={all:"all",manage:"manage",member:"member"};FilterUsersByGroup.__docgenInfo={description:"This component display groups to filter the users",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleTitleClickEvent",docblock:"Handle when the user click on the title.",modifiers:[],params:[],returns:null,description:"Handle when the user click on the title."},{name:"handleTitleContextualMenuEvent",docblock:"Handle when the user requests to display the contextual menu on the groups title.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle when the user requests to display the contextual menu on the groups title."},{name:"handleTitleMoreClickEvent",docblock:"Handle when the user requests to display the contextual menu on the groups title section.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle when the user requests to display the contextual menu on the groups title section."},{name:"handleCloseTitleMoreMenu",docblock:"Close the title more menu",modifiers:[],params:[],returns:null,description:"Close the title more menu"},{name:"handleContextualMenuEvent",docblock:"Handle when the user clicks right on a group\n@param {ReactEvent} event The event\n@param {Object} selectedTag The target group",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1},{name:"group",optional:!1}],returns:null,description:"Handle when the user clicks right on a group"},{name:"handleGroupSelected",docblock:"Handle the selection of a group\n@param event The Dom event\n@param group The selected group",modifiers:[],params:[{name:"event",description:"The Dom event",optional:!1},{name:"group",description:"The selected group",optional:!1}],returns:null,description:"Handle the selection of a group"},{name:"handleFilterGroupType",docblock:"Handle when the user wants to filter tags\n@param {string} filterType",modifiers:[],params:[{name:"filterType",type:{name:"string"},optional:!1}],returns:null,description:"Handle when the user wants to filter tags"},{name:"handleMoreClickEvent",docblock:"Open the contextual menu for the current group\n@param event The DOM event\n@param group An user group",modifiers:[],params:[{name:"event",description:"The DOM event",optional:!1},{name:"group",description:"An user group",optional:!1}],returns:null,description:"Open the contextual menu for the current group"},{name:"handleCloseMoreMenu",docblock:"Close the more menu with the group id\n@param {string} id The group id",modifiers:[],params:[{name:"id",description:"The group id",type:{name:"string"},optional:!1}],returns:null,description:"Close the more menu with the group id"},{name:"titles",docblock:"get the title\n@returns {{manage: string, default: string, member: string}}",modifiers:["get"],params:[],returns:{},description:"get the title"},{name:"filters",docblock:"get the filter according to the type of the filter\n@returns {{manage: (function(*): *), all: (function(*): *), member: (function(*): *)}}",modifiers:["get"],params:[],returns:{},description:"get the filter according to the type of the filter"},{name:"filteredGroups",docblock:"filter tag to display only the type selected\n@returns {*[filtered tags]}",modifiers:["get"],params:[],returns:null,description:"filter tag to display only the type selected"},{name:"isCurrentUserAdmin",docblock:"Returns true if the current user is admin",modifiers:["get"],params:[],returns:null,description:"Returns true if the current user is admin"},{name:"groups",docblock:"get groups\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"get groups"},{name:"groupsSorted",docblock:"get groups sorted\n@returns {*|boolean}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[{name:"mixed"},{name:"boolean"}]}},description:"get groups sorted"},{name:"showContextualMenu",docblock:"Show the contextual menu\n@param {int} left The left position to display the menu\n@param {int} top The top position to display the menu\n@param {string} className The class name to display the menu",modifiers:[],params:[{name:"top",description:"The top position to display the menu",type:{name:"int"},optional:!1},{name:"left",description:"The left position to display the menu",type:{name:"int"},optional:!1},{name:"className",description:"The class name to display the menu",type:{name:"string"},optional:!0}],returns:null,description:"Show the contextual menu"},{name:"updateTitle",docblock:"update the title of the filter tag",modifiers:[],params:[],returns:null,description:"update the title of the filter tag"},{name:"isLoading",docblock:"check if component loading\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"check if component loading"},{name:"hasGroup",docblock:"has at least one group\n@returns {*|boolean}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"mixed"},{name:"boolean"}]}},description:"has at least one group"},{name:"isSelected",docblock:"Returns true if the given group is selected\n@param group A group",modifiers:[],params:[{name:"group",description:"A group",optional:!1}],returns:null,description:"Returns true if the given group is selected"},{name:"canShowMore",docblock:"Returns true if the contextual menu More can be shown\n@param group The selected group",modifiers:[],params:[{name:"group",description:"The selected group",optional:!1}],returns:null,description:"Returns true if the contextual menu More can be shown"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"FilterUsersByGroup",props:{context:{description:"",type:{name:"any"},required:!1},userWorkspaceContext:{description:"",type:{name:"any"},required:!1},history:{description:"",type:{name:"object"},required:!1},contextualMenuContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/UserGroup/DeleteUserGroup/DeleteUserGroup.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/contexts/LoadingContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class DeleteUserGroup extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.initEventHandlers()}getDefaultState(){return{processing:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}async handleFormSubmit(event){event.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose(),this.props.context.setContext({deleteGroupDialogProps:null})}async delete(){this.setState({processing:!0});try{this.props.loadingContext.add(),await this.props.context.port.request("passbolt.groups.delete",this.group.id),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The group has been deleted successfully")),this.props.onClose(),this.props.context.setContext({deleteGroupDialogProps:null})}catch(error){this.props.loadingContext.remove(),"UserAbortsOperationError"===error.name||(console.error(error),this.handleError(error)),this.setState({processing:!1})}}handleError(error){const errorDialogProps={error};this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_4__.A,errorDialogProps)}hasAllInputDisabled(){return this.state.processing}get group(){return this.props.context.deleteGroupDialogProps.group}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{title:this.translate("Delete group?"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-group-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"Are you sure you want to delete the group ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",{className:"dialog-variable"},{groupName:this.group.name}),"?")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"This action cannot be undone. Users in this group may lose access to the content shared with it."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}DeleteUserGroup.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,loadingContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_8__.$A)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__.z9)((0,react_i18next__WEBPACK_IMPORTED_MODULE_9__.CI)("common")(DeleteUserGroup)))));DeleteUserGroup.__docgenInfo={description:"This component allows user to delete a user",methods:[{name:"getDefaultState",docblock:null,modifiers:[],params:[],returns:null},{name:"initEventHandlers",docblock:null,modifiers:[],params:[],returns:null},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"handleCloseClick",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"delete",docblock:"Save the changes.",modifiers:["async"],params:[],returns:null,description:"Save the changes."},{name:"handleError",docblock:null,modifiers:[],params:[{name:"error",optional:!1,type:null}],returns:null},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"group",docblock:null,modifiers:["get"],params:[],returns:null},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DeleteUserGroup",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},loadingContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}}}]);