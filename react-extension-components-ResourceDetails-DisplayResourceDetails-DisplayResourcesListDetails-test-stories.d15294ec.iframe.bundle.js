/*! For license information please see react-extension-components-ResourceDetails-DisplayResourceDetails-DisplayResourcesListDetails-test-stories.d15294ec.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[8636],{"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourcesListDetails.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayResourcesListDetails_test_stories});var mockPort=__webpack_require__("./test/mocks/mockPort.js"),mockStorage=__webpack_require__("./test/mocks/mockStorage.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),siteSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js"),DisplayResourcesListDetails=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourcesListDetails.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js"),ExtAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js"),ResourceWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.test.data.js");var react=__webpack_require__("./node_modules/react/index.js"),react_router_dom=__webpack_require__("./node_modules/react-router-dom/esm/react-router-dom.js");const DisplayResourcesListDetails_test_stories={title:"Components/ResourceDetails/DisplayResourcesListDetails",component:DisplayResourcesListDetails.A,decorators:[(Story,{args})=>react.createElement(react_router_dom.Kd,null,react.createElement(AppContext.A.Provider,{value:args.context},react.createElement(ResourceWorkspaceContext.XZ.Provider,{value:args.resourceWorkspaceContext},react.createElement("div",{className:"page"},react.createElement("div",{className:"app",style:{margin:"-1rem"}},react.createElement("div",{className:"panel main"},react.createElement("div",{className:"panel middle"},react.createElement("div",{className:"middle-right",style:{display:"flex",justifyContent:"flex-end"}},react.createElement("div",{className:"panel aside"},react.createElement(Story,args))))))))))],parameters:{docs:{description:{component:"DisplayResourceDetails stories"}}}},storage=(0,mockStorage.A)(),port=(0,mockPort.A)(storage);port.addRequestListener("passbolt.organization-settings.get",(()=>siteSettings.B)),port.addRequestListener("passbolt.secret.find-by-resource-id",(()=>({description:"This is a secure note."})));const Default={args:{...function defaultProps(data={}){const resourceWorkspaceContext=(0,ResourceWorkspaceContext_test_data.gJ)();return{...data,context:(0,ExtAppContext_test_data.bC)(data.context),resourceWorkspaceContext,resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)())}}({context:{port}}),storage}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...defaultProps({\n      context: {\n        port\n      }\n    }),\n    storage: storage\n  }\n}",...Default.parameters?.docs?.source}}}},"./src/img/svg/close.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgClose(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m12 4-8 8M4 4l8 8"})))}},"./src/img/svg/key.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgKey(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none",viewBox:"0 0 17 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.682 14.87a3.412 3.412 0 1 0 0-6.823 3.412 3.412 0 0 0 0 6.824M14.77 1.37 7.093 9.047M13.496 5.761l1.969-1.958"})))}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourcesListDetails.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/img/svg/key.svg"),_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/img/svg/close.svg"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");class DisplayResourcesListDetails extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1,error:!1,isSecretDecrypting:!1,isSecretDecrypted:!1,description:null}}bindCallbacks(){this.handleUnselectClickEvent=this.handleUnselectClickEvent.bind(this)}getResourceTypeSubtitle(resource){if(!this.props.resourceTypes)return"";const resourceType=this.props.resourceTypes.getFirstById(resource.resource_type_id);switch(resourceType?.slug){case"password-string":return this.props.t("Password");case"password-and-description":return this.props.t("Password and Encrypted description");case"password-description-totp":return this.props.t("Password, Encrypted description and TOTP");case"totp":return this.props.t("TOTP");default:return this.props.t("Resource")}}handleUnselectClickEvent(resource){this.props.resourceWorkspaceContext.onResourceSelected.multiple(resource)}getPermissionSubtitle(resource){switch(resource.permission.type){case 0:return this.props.t("No access");case 1:return this.props.t("Can read");case 7:return this.props.t("Can edit");case 15:return this.props.t("Is owner")}}render(){const resources=this.props.resourceWorkspaceContext.selectedResources,count=resources.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sidebar resource multiple-resources-selected"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sidebar-title"},this.props.t(`${count} resources selected`)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sidebar-content"},resources.map((resource=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:resource.id,className:"sidebar-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"teaser-image"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_4__.A,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"title-area"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h3",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"title-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"name"},resource.metadata.name)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"subtitle"},this.getResourceTypeSubtitle(resource)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"subtitle"},this.getPermissionSubtitle(resource))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"title-link button-transparent inline",title:this.props.t("Remove this resource from the selection"),onClick:()=>this.handleUnselectClickEvent(resource)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_5__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Remove this resource from the selection")))))))))}}DisplayResourcesListDetails.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_8___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_7__.A),resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.Qw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_6__.KH)((0,react_i18next__WEBPACK_IMPORTED_MODULE_3__.CI)("common")(DisplayResourcesListDetails))));DisplayResourcesListDetails.__docgenInfo={description:"This component display the note section of a resource",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"getResourceTypeSubtitle",docblock:"Get the sidebar subtitle",modifiers:[],params:[{name:"resource",optional:!1}],returns:null,description:"Get the sidebar subtitle"},{name:"handleUnselectClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[{name:"resource",optional:!1}],returns:null,description:"Handle when the user selects the folder parent."},{name:"getPermissionSubtitle",docblock:null,modifiers:[],params:[{name:"resource",optional:!1,type:null}],returns:null}],displayName:"DisplayResourcesListDetails",props:{context:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,KH:()=>withResourceTypesLocalStorage,dA:()=>ResourceTypesLocalStorageContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");const ResourceTypesLocalStorageContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({get:()=>{},resourceTypes:null,updateLocalStorage:()=>{}});class ResourceTypesLocalStorageContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.runningLocalStorageUpdatePromise=null,this.initEventHandlers()}get defaultState(){return{get:this.get.bind(this),resourceTypes:null,updateLocalStorage:this.updateLocalStorage.bind(this)}}initEventHandlers(){this.handleStorageChange=this.handleStorageChange.bind(this)}componentDidMount(){this.props.context.storage.onChanged.addListener(this.handleStorageChange)}componentWillUnmount(){this.props.context.storage.onChanged.removeListener(this.handleStorageChange)}handleStorageChange(changes){changes.resourceTypes&&this.set(changes.resourceTypes.newValue)}set(resourceTypes){const resourceTypesCollection=new _models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__.A(resourceTypes);this.setState({resourceTypes:resourceTypesCollection})}get(){return null===this.state.resourceTypes?(this.loadLocalStorage(),null):this.state.resourceTypes}async loadLocalStorage(){const storageData=await this.props.context.storage.local.get(["resourceTypes"]);storageData.resourceTypes?this.set(storageData.resourceTypes):this.updateLocalStorage()}async updateLocalStorage(){null===this.runningLocalStorageUpdatePromise?(this.runningLocalStorageUpdatePromise=this.props.context.port.request("passbolt.resource-type.get-or-find-all"),await this.runningLocalStorageUpdatePromise,this.runningLocalStorageUpdatePromise=null):await this.runningLocalStorageUpdatePromise}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Provider,{value:this.state},this.props.children)}}ResourceTypesLocalStorageContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(ResourceTypesLocalStorageContextProvider);function withResourceTypesLocalStorage(WrappedComponent){return class withResourceTypesLocalStorage extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Consumer,null,(resourceTypesLocalStorageContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{resourceTypesLocalStorageContext,resourceTypes:resourceTypesLocalStorageContext.get(),...this.props})))}}}ResourceTypesLocalStorageContextProvider.__docgenInfo={description:"The resource types local storage context provider",methods:[{name:"defaultState",docblock:"Returns the default component state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Returns the default component state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"handleStorageChange",docblock:"Handles update of the resource types in the local storage.",modifiers:[],params:[{name:"changes",optional:!1}],returns:null,description:"Handles update of the resource types in the local storage."},{name:"set",docblock:"Set resourceTypes.\n@param {Array<Object>} resourceTypes The resource types to set.\n@private",modifiers:[],params:[{name:"resourceTypes",description:"The resource types to set.",type:{name:"Array",elements:[{name:"Object"}]},optional:!1}],returns:null,description:"Set resourceTypes."},{name:"get",docblock:"Get the resource types from the local storage and/or init them if not the case already.\n@returns {ResourceTypesCollection|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"ResourceTypesCollection"}]}},description:"Get the resource types from the local storage and/or init them if not the case already."},{name:"loadLocalStorage",docblock:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation.\n@returns {Promise<void>}\n@private",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation."},{name:"updateLocalStorage",docblock:"Forces the update of the resource types in the local storage.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Forces the update of the resource types in the local storage."}],displayName:"ResourceTypesLocalStorageContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}}}]);