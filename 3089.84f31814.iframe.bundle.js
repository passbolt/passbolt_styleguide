/*! For license information please see 3089.84f31814.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[3089],{"./src/react-extension/components/Administration/SelectAccountRecoveryOrganizationKey/SelectAccountRecoveryOrganizationKey.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>SelectAccountRecoveryOrganizationKey_SelectAccountRecoveryOrganizationKey});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),DialogWrapper=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),Tab=__webpack_require__("./src/react-extension/components/Common/Tab/Tab.js"),Tabs=__webpack_require__("./src/react-extension/components/Common/Tab/Tabs.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),FormSubmitButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),FormCancelButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js");class ImportOrganizationKey extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.createInputRef()}get defaultState(){return{processing:!1,key:"",keyError:"",hasAlreadyBeenValidated:!1,selectedFile:null}}bindCallbacks(){this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleSelectOrganizationKeyFile=this.handleSelectOrganizationKeyFile.bind(this)}createInputRef(){this.keyInputRef=react.createRef(),this.fileUploaderRef=react.createRef()}async handleSelectOrganizationKeyFile(event){const[organizationFile]=event.target.files,organizationKey=await this.readOrganizationKeyFile(organizationFile);this.setState({key:organizationKey,selectedFile:organizationFile})}readOrganizationKeyFile(organizationFile){const reader=new FileReader;return new Promise(((resolve,reject)=>{reader.onloadend=()=>{try{resolve(reader.result)}catch(e){reject(e)}},reader.readAsText(organizationFile)}))}async validateKeyInput(){const key=this.state.key.trim();return""===key?Promise.reject(new Error(this.translate("The key can't be empty."))):await this.props.context.port.request("passbolt.account-recovery.validate-organization-key",key)}async validate(){return this.setState({keyError:""}),await this.validateKeyInput().then((()=>!0)).catch((error=>(this.setState({keyError:error.message}),!1)))}handleInputChange(event){const target=event.target;this.setState({[target.name]:target.value})}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFormSubmit(event){event.preventDefault(),this.state.processing||await this.save()}async save(){if(await this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing(),!await this.validate())return this.handleValidateError(),void await this.toggleProcessing();await this.props.onUpdateOrganizationKey(this.state.key.trim())}handleValidateError(){this.focusFieldError()}focusFieldError(){this.state.keyError&&this.keyInputRef.current.focus()}async toggleProcessing(){await this.setState({processing:!this.state.processing})}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}get selectedFilename(){return this.state.selectedFile?this.state.selectedFile.name:""}render(){return react.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react.createElement("div",{className:"form-content import-organization-key"},react.createElement("div",{className:"input textarea required "+(this.state.keyError?"error":"")},react.createElement("label",{htmlFor:"organization-recover-form-key"},react.createElement(es.x6,null,"Import an OpenPGP Public key")),react.createElement("textarea",{id:"organization-recover-form-key",name:"key",value:this.state.key,onKeyUp:this.handleKeyInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.keyInputRef,className:"required",placeholder:this.translate("Add Open PGP Public key"),required:"required",autoComplete:"off",autoFocus:!0})),react.createElement("div",{className:"input file"},react.createElement("input",{type:"file",id:"dialog-import-private-key",ref:this.fileUploaderRef,disabled:this.hasAllInputDisabled(),onChange:this.handleSelectOrganizationKeyFile}),react.createElement("label",{htmlFor:"dialog-import-private-key"},react.createElement(es.x6,null,"Select a file to import")),react.createElement("div",{className:"input-file-inline"},react.createElement("input",{type:"text",disabled:!0,placeholder:this.translate("No file selected"),defaultValue:this.selectedFilename}),react.createElement("button",{className:"button primary",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleSelectFile},react.createElement("span",null,react.createElement(es.x6,null,"Choose a file")))),this.state.keyError&&react.createElement("div",{className:"key error-message"},this.state.keyError))),!this.state.hasAlreadyBeenValidated&&react.createElement("div",{className:"message notice"},react.createElement(Icon.A,{baseline:!0,name:"info-circle"}),react.createElement("strong",null,react.createElement(es.x6,null,"Pro tip"),":")," ",react.createElement(es.x6,null,"Learn how to ",react.createElement("a",{href:"https://help.passbolt.com/configure/account-recovery",target:"_blank",rel:"noopener noreferrer"},"generate a key separately."))),react.createElement("div",{className:"submit-wrapper clearfix"},react.createElement(FormCancelButton.A,{disabled:this.hasAllInputDisabled(),onClick:this.props.onClose}),react.createElement(FormSubmitButton.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Apply")})))}}ImportOrganizationKey.propTypes={context:prop_types_default().object,onUpdateOrganizationKey:prop_types_default().func,onClose:prop_types_default().func,t:prop_types_default().func};const SelectAccountRecoveryOrganizationKey_ImportOrganizationKey=(0,AppContext.L)((0,es.CI)("common")(ImportOrganizationKey));ImportOrganizationKey.__docgenInfo={description:"This component allows to display the import organization key for the administration",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"createInputRef",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"handleSelectOrganizationKeyFile",docblock:"Whenever the user select a organization key file\n@param event The file dom event",modifiers:["async"],params:[{name:"event",description:"The file dom event",optional:!1}],returns:null,description:"Whenever the user select a organization key file"},{name:"readOrganizationKeyFile",docblock:"Read the selected file and returns its content in text form\n@param organizationFile The given file\n@return {Promise}",modifiers:[],params:[{name:"organizationFile",description:"The given file",optional:!1}],returns:{type:{name:"Promise"}},description:"Read the selected file and returns its content in text form"},{name:"validateKeyInput",docblock:"Validate the key input.\n@return {Promise}",modifiers:["async"],params:[],returns:{type:{name:"Promise"}},description:"Validate the key input."},{name:"validate",docblock:"Check if the form is valid.\n@return {Promise<boolean>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Check if the form is valid."},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handleSelectFile",docblock:"Handle the selection of a file by file explorer",modifiers:[],params:[],returns:null,description:"Handle the selection of a file by file explorer"},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"save",docblock:"Save the changes.",modifiers:["async"],params:[],returns:null,description:"Save the changes."},{name:"handleValidateError",docblock:"Handle validation error.",modifiers:[],params:[],returns:null,description:"Handle validation error."},{name:"focusFieldError",docblock:"Focus the field of the form which is in error state.",modifiers:[],params:[],returns:null,description:"Focus the field of the form which is in error state."},{name:"toggleProcessing",docblock:"Toggle the processing mode",modifiers:["async"],params:[],returns:null,description:"Toggle the processing mode"},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"},{name:"selectedFilename",docblock:"Returns the selected file's name",modifiers:["get"],params:[],returns:null,description:"Returns the selected file's name"}],displayName:"ImportOrganizationKey",props:{context:{description:"",type:{name:"object"},required:!1},onUpdateOrganizationKey:{description:"",type:{name:"func"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var Tooltip=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js"),SecretGenerator=__webpack_require__("./src/shared/lib/SecretGenerator/SecretGenerator.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),Password=__webpack_require__("./src/shared/components/Password/Password.js"),ExternalServiceUnavailableError=__webpack_require__("./src/shared/lib/Error/ExternalServiceUnavailableError.js"),ExternalServiceError=__webpack_require__("./src/shared/lib/Error/ExternalServiceError.js"),pownedService=__webpack_require__("./src/shared/services/api/secrets/pownedService.js"),AppEmailValidatorService=__webpack_require__("./src/shared/services/validator/AppEmailValidatorService.js"),PasswordPoliciesContext=__webpack_require__("./src/shared/context/PasswordPoliciesContext/PasswordPoliciesContext.js"),PasswordComplexityWithGoal=__webpack_require__("./src/shared/components/PasswordComplexityWithGoal/PasswordComplexityWithGoal.js");class GenerateOrganizationKey extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.createInputRef()}get defaultState(){return{name:"",nameError:"",email:"",emailError:"",algorithm:"RSA",keySize:4096,passphrase:"",passphraseConfirmation:"",passphraseWarning:"",passphraseEntropy:null,hasAlreadyBeenValidated:!1,isPwnedServiceAvailable:!0,passphraseInDictionnary:!1}}async componentDidMount(){await this.props.passwordPoliciesContext.findPolicies(),this.initPwnedPasswordService()}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this),this.handleEmailInputKeyUp=this.handleEmailInputKeyUp.bind(this),this.handlePassphraseChange=this.handlePassphraseChange.bind(this)}createInputRef(){this.nameInputRef=react.createRef(),this.emailInputRef=react.createRef(),this.passphraseInputRef=react.createRef(),this.passphraseConfirmationInputRef=react.createRef()}initPwnedPasswordService(){const isPwnedServiceAvailable=this.props.passwordPoliciesContext.shouldRunDictionaryCheck();isPwnedServiceAvailable&&(this.pownedService=new pownedService.A(this.props.context.port)),this.setState({isPwnedServiceAvailable})}handleNameInputKeyUp(){this.state.hasAlreadyBeenValidated&&this.validateNameInput()}validateNameInput(){let nameError=null;return this.state.name.trim().length||(nameError=this.translate("A name is required.")),this.setState({nameError}),null===nameError}handleEmailInputKeyUp(){this.state.hasAlreadyBeenValidated&&this.validateEmailInput()}validateEmailInput(){let emailError=null;const email=this.state.email.trim();return email.length?AppEmailValidatorService.A.validate(email,this.props.context.siteSettings)||(emailError=this.translate("Please enter a valid email address.")):emailError=this.translate("An email is required."),this.setState({email,emailError}),null===emailError}async handlePassphraseChange(event){const passphrase=event.target.value;this.setState({passphrase},(()=>this.checkPassphraseValidity()))}async checkPassphraseValidity(){let passphraseEntropy=null;if(this.state.passphrase.length>0?passphraseEntropy=SecretGenerator.M.entropy(this.state.passphrase):this.setState({passphraseInDictionnary:!1,passwordEntropy:null}),this.state.hasAlreadyBeenValidated)this.setState({passphraseInDictionnary:!1}),this.validatePassphraseInput();else{const hasResourcePassphraseMaxLength=this.state.passphrase.length>=4096,warningMessage=this.translate("this is the maximum size for this field, make sure your data was not truncated"),passphraseWarning=hasResourcePassphraseMaxLength?warningMessage:"";this.setState({passphraseWarning})}this.setState({passphraseEntropy})}validatePassphraseInput(){return!this.hasAnyErrors()}validatePassphraseConfirmationInput(){return!this.isEmptyPasswordConfirmation()&&!this.isPassphraseAndConfirmationDifferent()}hasWeakPassword(){return!this.isMinimumRequiredEntropyReached(this.state.passphraseEntropy)}isEmptyPasswordConfirmation(){return!this.state.passphraseConfirmation.length}isEmptyPassword(){return!this.state.passphrase.length}isPassphraseAndConfirmationDifferent(){return!this.isEmptyPasswordConfirmation()&&this.state.passphrase!==this.state.passphraseConfirmation}async evaluatePassphraseIsInDictionary(passphrase){let isPwnedServiceAvailable=this.state.isPwnedServiceAvailable;if(!isPwnedServiceAvailable||!this.pownedService)return!1;let passphraseInDictionnary=!1;try{const result=await this.pownedService.evaluateSecret(passphrase);passphraseInDictionnary=this.state.passphrase&&result.inDictionary&&this.isMinimumRequiredEntropyReached(this.state.passphraseEntropy),isPwnedServiceAvailable=result.isPwnedServiceAvailable}catch(error){if(!(error instanceof ExternalServiceUnavailableError.A||error instanceof ExternalServiceError.A))throw error;isPwnedServiceAvailable=!1,passphraseInDictionnary=!1}return this.setState({isPwnedServiceAvailable,passphraseInDictionnary}),passphraseInDictionnary}handleInputChange(event){const target=event.target;this.setState({[target.name]:target.value})}handleValidateError(){this.focusFirstFieldError()}focusFirstFieldError(){this.state.nameError?this.nameInputRef.current.focus():this.state.emailError?this.emailInputRef.current.focus():this.hasAnyErrors()?this.passphraseInputRef.current.focus():this.validatePassphraseConfirmationInput()||this.passphraseConfirmationInputRef.current.focus()}async handleFormSubmit(event){event.preventDefault(),this.state.processing||(this.setState({hasAlreadyBeenValidated:!0}),await this.save())}hasAnyErrors(){const validations=[this.isEmptyPassword(),this.state.passphraseInDictionnary];return validations.push(this.hasWeakPassword()),validations.push(!this.pownedService&&this.state.passphrase.length<8),validations.includes(!0)}async save(){if(this.toggleProcessing(),!await this.validate())return this.handleValidateError(),void this.toggleProcessing();if(await this.evaluatePassphraseIsInDictionary(this.state.passphrase))return void this.toggleProcessing();const key=await this.generateKey();this.props.onUpdateOrganizationKey(key.public_key.armored_key,key.private_key.armored_key)}async validate(){const isNameValid=this.validateNameInput(),isEmailValid=this.validateEmailInput(),isPassphraseValid=this.validatePassphraseInput(),isPassphraseConfirmationValid=this.validatePassphraseConfirmationInput();return isNameValid&&isEmailValid&&isPassphraseValid&&isPassphraseConfirmationValid}async generateKey(){const generateGpgKeyDto={name:this.state.name,email:this.state.email,algorithm:this.state.algorithm,keySize:this.state.keySize,passphrase:this.state.passphrase};return await this.props.context.port.request("passbolt.account-recovery.generate-organization-key",generateGpgKeyDto)}toggleProcessing(){this.setState({processing:!this.state.processing})}hasAllInputDisabled(){return this.state.processing}isMinimumRequiredEntropyReached(passphraseEntropy){return passphraseEntropy>=80}get translate(){return this.props.t}get isPassphraseWarning(){return this.state.passphrase?.length>0&&!this.state.hasAlreadyBeenValidated&&(!this.state.isPwnedServiceAvailable||this.state.passphraseInDictionnary)}render(){const passphraseEntropy=this.state.passphraseInDictionnary?0:this.state.passphraseEntropy;return react.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react.createElement("div",{className:"form-content generate-organization-key"},react.createElement("div",{className:"input text required "+(this.state.nameError?"error":"")},react.createElement("label",{htmlFor:"generate-organization-key-form-name"},react.createElement(es.x6,null,"Name")),react.createElement("input",{id:"generate-organization-key-form-name",name:"name",type:"text",value:this.state.name,onKeyUp:this.handleNameInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.nameInputRef,className:"required fluid",maxLength:"64",required:"required",autoComplete:"off",autoFocus:!0,placeholder:this.translate("Name")}),this.state.nameError&&react.createElement("div",{className:"name error-message"},this.state.nameError)),react.createElement("div",{className:"input text required "+(this.state.emailError?"error":"")},react.createElement("label",{htmlFor:"generate-organization-key-form-email"},react.createElement(es.x6,null,"Email")),react.createElement("input",{id:"generate-organization-key-form-email",name:"email",ref:this.emailInputRef,className:"required fluid",maxLength:"64",type:"email",autoComplete:"off",value:this.state.email,onChange:this.handleInputChange,placeholder:this.translate("Email Address"),onKeyUp:this.handleEmailInputKeyUp,disabled:this.hasAllInputDisabled(),required:"required"}),this.state.emailError&&react.createElement("div",{className:"email error-message"},this.state.emailError)),react.createElement("div",{className:"input select-wrapper"},react.createElement("label",{htmlFor:"generate-organization-key-form-algorithm"},react.createElement(es.x6,null,"Algorithm"),react.createElement(Tooltip.A,{message:this.translate("Algorithm and key size cannot be changed at the moment. These are secure default")},react.createElement(Icon.A,{name:"info-circle"}))),react.createElement("input",{id:"generate-organization-key-form-algorithm",name:"algorithm",value:this.state.algorithm,className:"fluid",type:"text",autoComplete:"off",disabled:!0})),react.createElement("div",{className:"input select-wrapper"},react.createElement("label",{htmlFor:"generate-organization-key-form-keySize"},react.createElement(es.x6,null,"Key Size"),react.createElement(Tooltip.A,{message:this.translate("Algorithm and key size cannot be changed at the moment. These are secure default")},react.createElement(Icon.A,{name:"info-circle"}))),react.createElement("input",{id:"generate-organization-key-form-key-size",name:"keySize",value:this.state.keySize,className:"fluid",type:"text",autoComplete:"off",disabled:!0})),react.createElement("div",{className:"input-password-wrapper input required "+(this.hasAnyErrors()&&this.state.hasAlreadyBeenValidated?"error":"")},react.createElement("label",{htmlFor:"generate-organization-key-form-password"},react.createElement(es.x6,null,"Organization key passphrase"),this.isPassphraseWarning&&react.createElement(Icon.A,{name:"exclamation"})),react.createElement(Password.A,{id:"generate-organization-key-form-password",name:"password",placeholder:this.translate("Passphrase"),autoComplete:"new-password",preview:!0,securityToken:this.props.context.userSettings.getSecurityToken(),value:this.state.passphrase,onChange:this.handlePassphraseChange,disabled:this.hasAllInputDisabled(),inputRef:this.passphraseInputRef}),react.createElement(PasswordComplexityWithGoal.A,{entropy:passphraseEntropy,targetEntropy:80}),this.state.hasAlreadyBeenValidated&&react.createElement("div",{className:"password error-message"},this.isEmptyPassword()&&react.createElement("div",{className:"empty-passphrase error-message"},react.createElement(es.x6,null,"A passphrase is required.")),this.hasWeakPassword()&&passphraseEntropy>0&&react.createElement("div",{className:"invalid-passphrase error-message"},react.createElement(es.x6,null,"A strong passphrase is required. The minimum complexity must be 'fair'.")),this.state.passphraseInDictionnary&&0===passphraseEntropy&&!this.isEmptyPassword()&&react.createElement("div",{className:"invalid-passphrase error-message"},react.createElement(es.x6,null,"The passphrase should not be part of an exposed data breach.")))),react.createElement("div",{className:"input-password-wrapper input required "+(this.state.hasAlreadyBeenValidated&&!this.validatePassphraseConfirmationInput()?"error":"")},react.createElement("label",{htmlFor:"generate-organization-key-form-password"},react.createElement(es.x6,null,"Organization key passphrase confirmation")),react.createElement(Password.A,{id:"generate-organization-key-form-password-confirmation",name:"passphraseConfirmation",placeholder:this.translate("Passphrase confirmation"),autoComplete:"new-password",preview:!0,securityToken:this.props.context.userSettings.getSecurityToken(),value:this.state.passphraseConfirmation,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),inputRef:this.passphraseConfirmationInputRef}),this.state.hasAlreadyBeenValidated&&react.createElement("div",{className:"password-confirmation error-message"},this.isEmptyPasswordConfirmation()&&react.createElement("div",{className:"empty-passphrase-confirmation error-message"},react.createElement(es.x6,null,"The passphrase confirmation is required.")),this.isPassphraseAndConfirmationDifferent()&&react.createElement("div",{className:"invalid-passphrase-confirmation error-message"},react.createElement(es.x6,null,"The passphrase confirmation should match the passphrase"))))),react.createElement("div",{className:"warning message",id:"generate-organization-key-setting-overridden-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Warning, we encourage you to generate your OpenPGP Organization Recovery Key separately. Make sure you keep a backup in a safe place."))),react.createElement("div",{className:"submit-wrapper clearfix"},react.createElement(FormCancelButton.A,{disabled:this.hasAllInputDisabled(),onClick:this.props.onClose}),react.createElement(FormSubmitButton.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Generate & Apply")})))}}GenerateOrganizationKey.propTypes={context:prop_types_default().any,onUpdateOrganizationKey:prop_types_default().func,onClose:prop_types_default().func,t:prop_types_default().func,passwordPoliciesContext:prop_types_default().object};const SelectAccountRecoveryOrganizationKey_GenerateOrganizationKey=(0,AppContext.L)((0,DialogContext.z9)((0,PasswordPoliciesContext.WJ)((0,es.CI)("common")(GenerateOrganizationKey))));GenerateOrganizationKey.__docgenInfo={description:"This component allows to display the generate organization key for the administration",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"createInputRef",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"initPwnedPasswordService",docblock:"Initialize the pwned password service",modifiers:[],params:[],returns:null,description:"Initialize the pwned password service"},{name:"handleNameInputKeyUp",docblock:"Handle name input keyUp event.",modifiers:[],params:[],returns:null,description:"Handle name input keyUp event."},{name:"validateNameInput",docblock:"Validate the name input.\n@return {Promise}",modifiers:[],params:[],returns:{type:{name:"Promise"}},description:"Validate the name input."},{name:"handleEmailInputKeyUp",docblock:"Handle email input keyUp event.",modifiers:[],params:[],returns:null,description:"Handle email input keyUp event."},{name:"validateEmailInput",docblock:"Validate the email input.\n@returns {Promise<void>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Validate the email input."},{name:"handlePassphraseChange",docblock:"Handle passphrase input keyUp event.\n@param {ReactEvent} event The react event.",modifiers:["async"],params:[{name:"event",description:"The react event.",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle passphrase input keyUp event."},{name:"checkPassphraseValidity",docblock:"Validate the passphrase for powned password or validation entropy.\n@return {Promise<boolean>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Validate the passphrase for powned password or validation entropy."},{name:"validatePassphraseInput",docblock:"Validate the passphrase.\n@param {string} passphrase the passphrase to validate\n@param {integer|null} passphraseEntropy the entropy of the given passphrase\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Validate the passphrase."},{name:"validatePassphraseConfirmationInput",docblock:"Validates the passphrase confirmation input.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Validates the passphrase confirmation input."},{name:"hasWeakPassword",docblock:"Checks if the current passphrase has strong enough entropy.\n\n@returns {boolean} True if the passphrase has strong enough entropy, false otherwise.",modifiers:[],params:[],returns:{description:"True if the passphrase has strong enough entropy, false otherwise.",type:{name:"boolean"}},description:"Checks if the current passphrase has strong enough entropy."},{name:"isEmptyPasswordConfirmation",docblock:"Returns true if the passphrase confirmation is empty\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the passphrase confirmation is empty"},{name:"isEmptyPassword",docblock:"Checks if the current passphrase is empty.\n\n@returns {boolean} True if the passphrase is empty, false otherwise.",modifiers:[],params:[],returns:{description:"True if the passphrase is empty, false otherwise.",type:{name:"boolean"}},description:"Checks if the current passphrase is empty."},{name:"isPassphraseAndConfirmationDifferent",docblock:"Returns true if the passphrase is different than the passphraseConfirmation and is not empty.\nFalse is returned when passphraseConfirmation is empty to avoid conflict with the `isEmptyPasswordConfirmation` validation rule\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the passphrase is different than the passphraseConfirmation and is not empty.\nFalse is returned when passphraseConfirmation is empty to avoid conflict with the `isEmptyPasswordConfirmation` validation rule"},{name:"evaluatePassphraseIsInDictionary",docblock:"Evaluate if the passphrase is in dictionary\n@param {string} passphrase the passphrase to evaluate\n@return {Promise<boolean>}",modifiers:["async"],params:[{name:"passphrase",description:"the passphrase to evaluate",type:{name:"string"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Evaluate if the passphrase is in dictionary"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handleValidateError",docblock:"Handle validation error.",modifiers:[],params:[],returns:null,description:"Handle validation error."},{name:"focusFirstFieldError",docblock:"Focus the first field of the form which is in error state.",modifiers:[],params:[],returns:null,description:"Focus the first field of the form which is in error state."},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise<void>}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle form submit event."},{name:"hasAnyErrors",docblock:"Check if we have any errors\n@return {Boolean}",modifiers:[],params:[],returns:{type:{name:"Boolean"}},description:"Check if we have any errors"},{name:"save",docblock:"Save the changes.",modifiers:["async"],params:[],returns:null,description:"Save the changes."},{name:"validate",docblock:"Validate the form.\n@return {Promise<boolean>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Validate the form."},{name:"generateKey",docblock:"Generate an ORK with the current configuration set.\n@returns {Promise<Object>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"Object"}]}},description:"Generate an ORK with the current configuration set."},{name:"toggleProcessing",docblock:"Toggle the processing mode",modifiers:[],params:[],returns:null,description:"Toggle the processing mode"},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"isMinimumRequiredEntropyReached",docblock:"Returns true if the given entropy is greater or equal to the minimum required entropy.\n@param {number} passphraseEntropy\n@returns {boolean}",modifiers:[],params:[{name:"passphraseEntropy",type:{name:"number"},optional:!1}],returns:{type:{name:"boolean"}},description:"Returns true if the given entropy is greater or equal to the minimum required entropy."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"},{name:"isPassphraseWarning",docblock:"check if passphrase has warnings to display\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"check if passphrase has warnings to display"}],displayName:"GenerateOrganizationKey",props:{context:{description:"",type:{name:"any"},required:!1},onUpdateOrganizationKey:{description:"",type:{name:"func"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1},passwordPoliciesContext:{description:"",type:{name:"object"},required:!1}}};class SelectAccountRecoveryOrganizationKey extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{processing:!1}}bindCallbacks(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleApplyChanges=this.handleApplyChanges.bind(this)}handleCloseClick(){this.props.onClose()}handleApplyChanges(public_key,private_key){this.handleCloseClick(),this.props.handleUpdateOrganizationKey(public_key,private_key)}render(){return react.createElement(DialogWrapper.A,{title:this.props.t("Organization Recovery Key"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"organization-recover-key-dialog"},react.createElement(Tabs.A,{activeTabName:"Import"},react.createElement(Tab.A,{key:"Import",name:"Import",type:"Import"},react.createElement(SelectAccountRecoveryOrganizationKey_ImportOrganizationKey,{...this.props,onClose:this.handleCloseClick,onUpdateOrganizationKey:this.handleApplyChanges})),react.createElement(Tab.A,{key:"Generate",name:"Generate",type:"Generate"},react.createElement(SelectAccountRecoveryOrganizationKey_GenerateOrganizationKey,{...this.props,onClose:this.handleCloseClick,onUpdateOrganizationKey:this.handleApplyChanges}))))}}SelectAccountRecoveryOrganizationKey.propTypes={handleUpdateOrganizationKey:prop_types_default().func,onClose:prop_types_default().func,t:prop_types_default().func};const SelectAccountRecoveryOrganizationKey_SelectAccountRecoveryOrganizationKey=(0,es.CI)("common")(SelectAccountRecoveryOrganizationKey);SelectAccountRecoveryOrganizationKey.__docgenInfo={description:"This component allows to display the create recover account for the administration",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleCloseClick",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"handleApplyChanges",docblock:"Handle apply button click.",modifiers:[],params:[{name:"public_key",optional:!1},{name:"private_key",optional:!1}],returns:null,description:"Handle apply button click."}],displayName:"SelectAccountRecoveryOrganizationKey",props:{handleUpdateOrganizationKey:{description:"",type:{name:"func"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormCancelButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.disabled||this.props.onClick()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.props.disabled,className:"link cancel",onClick:this.handleClick},this.props.value)}}FormCancelButton.defaultProps={value:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Cancel")},FormCancelButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,value:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_2___default().node),prop_types__WEBPACK_IMPORTED_MODULE_2___default().node,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string])};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(FormCancelButton);FormCancelButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleClick",docblock:"Handle cancel click\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle cancel click"}],displayName:"FormCancelButton",props:{value:{defaultValue:{value:"<Trans>Cancel</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormSubmitButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.getClassName=this.getClassName.bind(this)}getClassName(){let name="button primary";return this.props.warning?name+=" warning":this.props.attention&&(name+=" attention"),this.props.disabled&&(name+=" disabled"),this.props.processing&&(name+=" processing"),this.props.big&&(name+=" big"),this.props.medium&&(name+=" medium"),this.props.fullWidth&&(name+=" full-width"),name}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:this.getClassName(),disabled:this.props.disabled},this.props.value||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Save"),this.props.processing&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"spinner"}))}}FormSubmitButton.defaultProps={warning:!1,attention:!1},FormSubmitButton.propTypes={processing:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().node),prop_types__WEBPACK_IMPORTED_MODULE_3___default().node,prop_types__WEBPACK_IMPORTED_MODULE_3___default().string]),warning:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,attention:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,big:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,medium:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,fullWidth:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(FormSubmitButton);FormSubmitButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"getClassName",docblock:"Get the input button classname\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the input button classname"}],displayName:"FormSubmitButton",props:{warning:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},attention:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},processing:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},value:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},big:{description:"",type:{name:"bool"},required:!1},medium:{description:"",type:{name:"bool"},required:!1},fullWidth:{description:"",type:{name:"bool"},required:!1}}}},"./src/react-extension/components/Common/Tab/Tab.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);class Tab extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallback()}bindCallback(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.onClick(this.props.name)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"tab "+(this.props.isActive?"active":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"tab-link",onClick:this.handleClick},this.props.name))}}Tab.propTypes={name:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,type:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,isActive:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any};const __WEBPACK_DEFAULT_EXPORT__=Tab;Tab.__docgenInfo={description:"Display of the Tab component",methods:[{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"handleClick",docblock:"Handle click\n@param event",modifiers:[],params:[],returns:null,description:"Handle click"}],displayName:"Tab",props:{name:{description:"",type:{name:"string"},required:!1},type:{description:"",type:{name:"string"},required:!1},isActive:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/components/Common/Tab/Tabs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_Tab__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Tab/Tab.js");class Tabs extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(props),this.bindCallback()}getDefaultState(props){return{activeTabName:props.activeTabName}}bindCallback(){this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(tabItem){this.setState({activeTabName:tabItem.name}),"function"==typeof tabItem.onClick&&tabItem.onClick()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tabs"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"tabs-nav tabs-nav--bordered"},this.props.children.map((({key,props})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Tab__WEBPACK_IMPORTED_MODULE_1__.A,{key,name:props.name,onClick:()=>this.handleTabClick(props),isActive:props.name===this.state.activeTabName})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tabs-active-content"},this.props.children.find((tab=>tab.props.name===this.state.activeTabName)).props.children))}}Tabs.propTypes={activeTabName:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};const __WEBPACK_DEFAULT_EXPORT__=Tabs;Tabs.__docgenInfo={description:"Tabs component to handle the display of selected tab",methods:[{name:"getDefaultState",docblock:"Default state\n@param props Component props",modifiers:[],params:[{name:"props",description:"Component props",optional:!1}],returns:null,description:"Default state"},{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"handleTabClick",docblock:"Toggle currently active tab\n@param tabItem The item which represents the tab",modifiers:[],params:[{name:"tabItem",description:"The item which represents the tab",optional:!1}],returns:null,description:"Toggle currently active tab"}],displayName:"Tabs",props:{activeTabName:{description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter((dialog=>dialogKey!==dialog.key))}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,(dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props})))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/components/PasswordComplexityWithGoal/PasswordComplexityWithGoal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_lib_SecretGenerator_SecretGeneratorComplexity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/lib/SecretGenerator/SecretGeneratorComplexity.js"),_react_extension_components_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js"),_Icons_Icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/components/Icons/Icon.js");class PasswordComplexityWithGoal extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{static getRelativeEntropyPosition(entropyValue){return 100-99/(1+Math.pow(entropyValue/90,3))}formatEntropy(entropy){return(entropy=entropy||0).toFixed(1)}get relativeTargetEntropyRatio(){return PasswordComplexityWithGoal.getRelativeEntropyPosition(this.props.targetEntropy)}get targetEntropyPositionStyle(){return{left:`calc(${this.relativeTargetEntropyRatio}% - 0.6rem`}}get colorClassName(){if(!this.hasEntropy())return"";return this.props.entropy>=this.props.targetEntropy?"reached":this.props.isMinimumEntropyRequired?"required":"recommended"}get targetTooltipMessage(){return this.props.isMinimumEntropyRequired?this.props.t("Minimal requirement"):this.props.t("Minimal recommendation")}get currentEntropyTooltipMessage(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Entropy: ",this.formatEntropy(this.props.entropy)," / ",this.formatEntropy(this.props.targetEntropy)," bits"))}get passwordStrengthLabel(){if(!(this.hasEntropy()||this.hasError()))return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Quality");const strength=_lib_SecretGenerator_SecretGeneratorComplexity__WEBPACK_IMPORTED_MODULE_2__.CH.strength(this.props.entropy);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,strength.label)}getProgresseBarStyle(entropy){return{width:`${PasswordComplexityWithGoal.getRelativeEntropyPosition(entropy)}%`}}hasEntropy(){return null!==this.props.entropy&&void 0!==this.props.entropy}hasError(){return this.props.error}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-complexity with-goal"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"complexity-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_extension_components_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__.A,{message:this.currentEntropyTooltipMessage},this.passwordStrengthLabel," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icons_Icon__WEBPACK_IMPORTED_MODULE_4__.A,{name:"info-circle"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"progress"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"progress-bar background"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:`progress-bar target ${this.colorClassName}`,style:this.hasEntropy()?this.getProgresseBarStyle(this.props.targetEntropy):null}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:`progress-bar foreground ${this.colorClassName}`,style:this.hasEntropy()?this.getProgresseBarStyle(this.props.entropy):null}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:`target-entropy ${this.colorClassName}`,style:this.targetEntropyPositionStyle},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_extension_components_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__.A,{message:this.targetTooltipMessage},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"tooltip-anchor"})))))}}PasswordComplexityWithGoal.defaultProps={isMinimumEntropyRequired:!0},PasswordComplexityWithGoal.propTypes={targetEntropy:prop_types__WEBPACK_IMPORTED_MODULE_5___default().number.isRequired,isMinimumEntropyRequired:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool.isRequired,entropy:prop_types__WEBPACK_IMPORTED_MODULE_5___default().number,error:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,t:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(PasswordComplexityWithGoal);PasswordComplexityWithGoal.__docgenInfo={description:"This component represents a password complexity with the strength and a goal, an entropy and a bar",methods:[{name:"getRelativeEntropyPosition",docblock:"Return a percentage value matching the position of the given entropy compared to the full value possible.\n@param {number} entropyValue\n@returns {number}",modifiers:["static"],params:[{name:"entropyValue",type:{name:"number"},optional:!1}],returns:{type:{name:"number"}},description:"Return a percentage value matching the position of the given entropy compared to the full value possible."},{name:"formatEntropy",docblock:"Get a formatted entropy value to display.\n@param {number} entropy\n@returns {number}",modifiers:[],params:[{name:"entropy",type:{name:"number"},optional:!1}],returns:{type:{name:"number"}},description:"Get a formatted entropy value to display."},{name:"relativeTargetEntropyRatio",docblock:"Get the representative percentage of the targetted entropy compared to the full available entropy\n@returns {number}",modifiers:["get"],params:[],returns:{type:{name:"number"}},description:"Get the representative percentage of the targetted entropy compared to the full available entropy"},{name:"targetEntropyPositionStyle",docblock:"Get the dynamic style of the target entropy cursors.\n@return {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get the dynamic style of the target entropy cursors."},{name:"colorClassName",docblock:"Get the class to set on the different markers.\n@returns {'reached' | 'required' | 'recommended' | ''}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[]}},description:"Get the class to set on the different markers."},{name:"targetTooltipMessage",docblock:"Get the translated message for the target tooltip\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the translated message for the target tooltip"},{name:"currentEntropyTooltipMessage",docblock:"Get the message for the current entropy tooltip\n@returns {JSX}",modifiers:["get"],params:[],returns:{type:{name:"JSX"}},description:"Get the message for the current entropy tooltip"},{name:"passwordStrengthLabel",docblock:"Get the password strength label to display based on the actual entropy or error state.\n@returns {JSX};",modifiers:["get"],params:[],returns:{description:";",type:{name:"JSX"}},description:"Get the password strength label to display based on the actual entropy or error state."},{name:"getProgresseBarStyle",docblock:"Get the dynamic part style of the entropy progression bar.\n@param {number} entropy\n@returns {object}",modifiers:[],params:[{name:"entropy",type:{name:"number"},optional:!1}],returns:{type:{name:"object"}},description:"Get the dynamic part style of the entropy progression bar."},{name:"hasEntropy",docblock:"Has entropy\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has entropy"},{name:"hasError",docblock:"Has error\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has error"}],displayName:"PasswordComplexityWithGoal",props:{isMinimumEntropyRequired:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},targetEntropy:{description:"",type:{name:"number"},required:!0},entropy:{description:"",type:{name:"number"},required:!1},error:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/context/PasswordPoliciesContext/PasswordPoliciesContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{WJ:()=>withPasswordPolicies});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js");const PasswordPoliciesContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({policies:null,getPolicies:()=>{},findPolicies:()=>{},shouldRunDictionaryCheck:()=>{}});class PasswordPoliciesContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{policies:null,getPolicies:this.getPolicies.bind(this),findPolicies:this.findPolicies.bind(this),shouldRunDictionaryCheck:this.shouldRunDictionaryCheck.bind(this)}}async findPolicies(){if(null!==this.getPolicies())return;const policies=await this.props.context.port.request("passbolt.password-policies.get");this.setState({policies})}getPolicies(){return this.state.policies}shouldRunDictionaryCheck(){return Boolean(this.state.policies?.external_dictionary_check)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(PasswordPoliciesContext.Provider,{value:this.state},this.props.children)}}PasswordPoliciesContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};(0,_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(PasswordPoliciesContextProvider);function withPasswordPolicies(WrappedComponent){return class WithPasswordPolicies extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(PasswordPoliciesContext.Consumer,null,(passwordPoliciesContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{passwordPoliciesContext,...this.props})))}}}PasswordPoliciesContextProvider.__docgenInfo={description:"The Password policies context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"findPolicies",docblock:"Find the password policies settings\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find the password policies settings"},{name:"getPolicies",docblock:"Returns the policies for password setting.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Returns the policies for password setting."},{name:"shouldRunDictionaryCheck",docblock:"Returns true if the password policies allows external dictionary checks\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the password policies allows external dictionary checks"}],displayName:"PasswordPoliciesContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/lib/Error/ExternalServiceError.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class ExternalServiceError extends Error{constructor(message){super(message=message||"An error occurred when requesting the external service."),this.name="ExternalServiceError"}}const __WEBPACK_DEFAULT_EXPORT__=ExternalServiceError},"./src/shared/lib/Error/ExternalServiceUnavailableError.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class ExternalServiceUnavailableError extends Error{constructor(message){super(message=message||"The external service is unavailable"),this.name="ExternalServiceUnavailableError"}}const __WEBPACK_DEFAULT_EXPORT__=ExternalServiceUnavailableError},"./src/shared/services/validator/AppEmailValidatorService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AppEmailValidatorService});var SiteSettings=__webpack_require__("./src/shared/lib/Settings/SiteSettings.js"),lib=__webpack_require__("./node_modules/xregexp/lib/index.js"),lib_default=__webpack_require__.n(lib);class IsEmailValidator{static validate(value){return"string"==typeof value&&lib_default()("^[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[_\\p{L}0-9][-_\\p{L}0-9]*\\.)*(?:[\\p{L}0-9][-\\p{L}0-9]{0,62})\\.(?:(?:[a-z]{2}\\.)?[a-z]{2,})$","i").test(value)}}class IsRegexValidator{constructor(regex){if("string"!=typeof regex)throw Error("The regex should be a string.");this.regex=new(lib_default())(regex)}validate(value){return"string"==typeof value&&this.regex.test(value)}}class AppEmailValidatorService{static validate(value,appSettings){return AppEmailValidatorService.getValidator(appSettings).validate(value)}static getValidator(appSettings){return appSettings&&appSettings instanceof SiteSettings.A&&appSettings.emailValidateRegex?new IsRegexValidator(appSettings.emailValidateRegex):IsEmailValidator}}},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}}}]);