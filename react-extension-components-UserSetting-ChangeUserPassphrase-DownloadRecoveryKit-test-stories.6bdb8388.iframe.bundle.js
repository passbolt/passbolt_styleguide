/*! For license information please see react-extension-components-UserSetting-ChangeUserPassphrase-DownloadRecoveryKit-test-stories.6bdb8388.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6608],{"./src/react-extension/components/UserSetting/ChangeUserPassphrase/DownloadRecoveryKit.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DownloadRecoveryKit_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js");var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),UserSettingsContext=__webpack_require__("./src/react-extension/contexts/UserSettingsContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),AnimatedFeedback=__webpack_require__("./src/shared/components/Icons/AnimatedFeedback.js");class DownloadRecoveryKit extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleDownloadBackup=this.handleDownloadBackup.bind(this)}handleDownloadBackup(){this.download()}async download(){await this.props.userSettingsContext.onDownloadRecoveryKitRequested()}render(){return react.createElement("div",{className:"grid grid-responsive-12 profile-passphrase"},react.createElement("div",{className:"row"},react.createElement("div",{className:"col7 main-column last"},react.createElement("h3",null,react.createElement(es.x6,null,"The passphrase was updated!")),react.createElement("div",{className:"message warning"},react.createElement("p",null,react.createElement("strong",null,react.createElement(es.x6,null,"Warning: This recovery kit replace the old one."))),react.createElement("p",null,react.createElement("strong",null,react.createElement(es.x6,null,"You will need this recovery kit later to access your account (for example on a new device).")))),react.createElement("div",{className:"feedback-card"},react.createElement(AnimatedFeedback.A,{name:"success"}),react.createElement("div",{className:"additional-information"},react.createElement("p",null,react.createElement(es.x6,null,"Your passphrase has been changed. Make sure you keep a backup of your secret key encrypted with this new passphrase.")),react.createElement("p",null,react.createElement(es.x6,null,"Keep this backup in a safe place, you will need it in case of emergency.")),react.createElement("button",{type:"button",className:"button primary",onClick:this.handleDownloadBackup},react.createElement(es.x6,null,"Download backup")))))))}}DownloadRecoveryKit.propTypes={userSettingsContext:prop_types_default().object};const ChangeUserPassphrase_DownloadRecoveryKit=(0,UserSettingsContext.tX)((0,es.CI)("common")(DownloadRecoveryKit));DownloadRecoveryKit.__docgenInfo={description:"This component displays the user profile information",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleDownloadBackup",docblock:"Whenever the user wants to download the recovery kit again",modifiers:[],params:[],returns:null,description:"Whenever the user wants to download the recovery kit again"},{name:"download",docblock:"Download the recovery kit",modifiers:["async"],params:[],returns:null,description:"Download the recovery kit"}],displayName:"DownloadRecoveryKit",props:{userSettingsContext:{description:"",type:{name:"object"},required:!1}}};const DownloadRecoveryKit_test_stories={title:"Components/UserSetting/DownloadRecoveryKit",component:ChangeUserPassphrase_DownloadRecoveryKit},Initial=(args=>react.createElement(react_router.fS,{initialEntries:["/"]},react.createElement("div",{className:"page"},react.createElement("div",{className:"panel"},react.createElement(react_router.qh,{component:routerProps=>react.createElement(ChangeUserPassphrase_DownloadRecoveryKit,{...args,...routerProps})}))))).bind({});Initial.args=function defaultProps(){return{userSettingsContext:{onDownloadRecoveryKitRequested:jest.fn()}}}();const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:'args => <MemoryRouter initialEntries={[\'/\']}>\n    <div className="page">\n      <div className="panel">\n        <Route component={routerProps => <DownloadRecoveryKit {...args} {...routerProps} />}></Route>\n      </div>\n    </div>\n  </MemoryRouter>',...Initial.parameters?.docs?.source}}}},"./src/react-extension/contexts/UserSettingsContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{tX:()=>withUserSettings});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js");const UserSettingsContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({state:null,oldPassphrase:null,onIntroductionPassphraseRequested:()=>{},onProvidePassphraseRequested:()=>{},onCheckProvidePassphraseRequested:()=>{},onUpdatePassphraseRequested:()=>{},onGoToIntroductionPassphraseRequested:()=>{},onDownloadRecoveryKitRequested:()=>{},onUpdateSecurityTokenRequested:()=>{},onUpdateUserLocaleRequested:()=>{}});class UserSettingsContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{state:UserSettingsContextState.INITIAL_STATE,oldPassphrase:null,onIntroductionPassphraseRequested:this.onIntroductionPassphraseRequested.bind(this),onProvidePassphraseRequested:this.onProvidePassphraseRequested.bind(this),onCheckProvidePassphraseRequested:this.onCheckProvidePassphraseRequested.bind(this),onUpdatePassphraseRequested:this.onUpdatePassphraseRequested.bind(this),onGoToIntroductionPassphraseRequested:this.onGoToIntroductionPassphraseRequested.bind(this),onDownloadRecoveryKitRequested:this.onDownloadRecoveryKitRequested.bind(this),onUpdateSecurityTokenRequested:this.onUpdateSecurityTokenRequested.bind(this),onUpdateLocaleUserRequested:this.handleUpdateLocaleUserRequested.bind(this)}}async onIntroductionPassphraseRequested(){await this.setState({state:UserSettingsContextState.PASSPHRASE_INTRODUCTION})}async onProvidePassphraseRequested(){await this.setState({state:UserSettingsContextState.PASSPHRASE_TO_PROVIDE_REQUESTED})}async onCheckProvidePassphraseRequested(passphrase){await this.props.context.port.request("passbolt.auth.verify-passphrase",passphrase),await this.setState({state:UserSettingsContextState.PASSPHRASE_TO_PROVIDE_CHECKED,oldPassphrase:passphrase})}async onGoToIntroductionPassphraseRequested(){await this.setState({state:UserSettingsContextState.PASSPHRASE_INTRODUCTION,oldPassphrase:null})}async onUpdatePassphraseRequested(passphrase){await this.props.context.port.request("passbolt.user.update-private-key",this.state.oldPassphrase,passphrase),await this.setState({state:UserSettingsContextState.PASSPHRASE_UPDATED,oldPassphrase:null})}async onDownloadRecoveryKitRequested(){await this.props.context.port.request("passbolt.keyring.download-my-private-key")}async onUpdateSecurityTokenRequested(securityTokenDto){await this.props.context.port.request("passbolt.users.update-security-token",securityTokenDto)}async handleUpdateLocaleUserRequested(localeDto){await this.props.context.port.request("passbolt.locale.update-user-locale",localeDto)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(UserSettingsContext.Provider,{value:this.state},this.props.children)}}UserSettingsContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(UserSettingsContextProvider);function withUserSettings(WrappedComponent){return class withUserSettings extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(UserSettingsContext.Consumer,null,(userSettingsContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{userSettingsContext,...this.props})))}}}const UserSettingsContextState={INITIAL_STATE:"Initial State",PASSPHRASE_INTRODUCTION:"Passphrase Introduction",PASSPHRASE_TO_PROVIDE_REQUESTED:"Passphrase To Provide Requested",PASSPHRASE_TO_PROVIDE_CHECKED:"Passphrase To Provide Checked",PASSPHRASE_UPDATED:"Passphrase Updated"};UserSettingsContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"onIntroductionPassphraseRequested",docblock:"Whenever the introduction passphrase is requested",modifiers:["async"],params:[],returns:null,description:"Whenever the introduction passphrase is requested"},{name:"onProvidePassphraseRequested",docblock:"Whenever the provide passphrase is requested",modifiers:["async"],params:[],returns:null,description:"Whenever the provide passphrase is requested"},{name:"onCheckProvidePassphraseRequested",docblock:"Whenever the check provide passphrase is requested\n@param passphrase A passphrase",modifiers:["async"],params:[{name:"passphrase",description:"A passphrase",optional:!1}],returns:null,description:"Whenever the check provide passphrase is requested"},{name:"onGoToIntroductionPassphraseRequested",docblock:"Whenever the user wants to go back to the passphrase introduction",modifiers:["async"],params:[],returns:null,description:"Whenever the user wants to go back to the passphrase introduction"},{name:"onUpdatePassphraseRequested",docblock:"Whenever the update passphrase is requested\n@param {string} passphrase The new passphrase",modifiers:["async"],params:[{name:"passphrase",description:"The new passphrase",type:{name:"string"},optional:!1}],returns:null,description:"Whenever the update passphrase is requested"},{name:"onDownloadRecoveryKitRequested",docblock:"Whenever the download of the recovery kit is requested",modifiers:["async"],params:[],returns:null,description:"Whenever the download of the recovery kit is requested"},{name:"onUpdateSecurityTokenRequested",docblock:"Whenever the update security token is requested\n@param securityTokenDto The security token DTO",modifiers:["async"],params:[{name:"securityTokenDto",description:"The security token DTO",optional:!1}],returns:null,description:"Whenever the update security token is requested"},{name:"handleUpdateLocaleUserRequested",docblock:"Whenever the update of the locale is requested\n@param localeDto The locale DTO",modifiers:["async"],params:[{name:"localeDto",description:"The locale DTO",optional:!1}],returns:null,description:"Whenever the update of the locale is requested"}],displayName:"UserSettingsContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/components/Icons/AnimatedFeedback.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);class AnimatedFeedback extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"illustration icon-feedback"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:this.props.name}))}}AnimatedFeedback.defaultProps={},AnimatedFeedback.propTypes={name:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=AnimatedFeedback;AnimatedFeedback.__docgenInfo={description:"",methods:[],displayName:"AnimatedFeedback",props:{name:{description:"",type:{name:"string"},required:!1}}}}}]);