/*! For license information please see react-extension-components-Authentication-DisplayUnexpectedError-DisplayUnexpectedError-test-stories.7e9c88bc.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[8039],{"./src/react-extension/components/Authentication/DisplayUnexpectedError/DisplayUnexpectedError.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorWithData:()=>ErrorWithData,ErrorWithDetails:()=>ErrorWithDetails,Initial:()=>Initial,SignInError:()=>SignInError,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayUnexpectedError_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),DisplayUnexpectedError=__webpack_require__("./src/react-extension/components/Authentication/DisplayUnexpectedError/DisplayUnexpectedError.js"),PassboltApiFetchError=__webpack_require__("./src/shared/lib/Error/PassboltApiFetchError.js"),entityValidationError=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");function defaultProps(props={}){const defaultProps1={error:new Error("Mocked unexpected error."),context:{}};return Object.assign(defaultProps1,props)}const DisplayUnexpectedError_test_stories={title:"Components/Authentication/DisplayUnexpectedError",component:DisplayUnexpectedError.A},Template=args=>react.createElement("div",{id:"container",className:"container page login"},react.createElement("div",{className:"content"},react.createElement("div",{className:"login-form"},react.createElement(react_router.MemoryRouter,{initialEntries:["/"]},react.createElement(react_router.Route,{component:routerProps=>react.createElement(DisplayUnexpectedError.A,{...args,...routerProps})}))))),Initial=Template.bind({});Initial.args=defaultProps(),Initial.parameters={css:"ext_authentication"};const SignInError=Template.bind({});SignInError.args=defaultProps({title:"Sorry, you have not been signed in.",message:"Something went wrong, the sign in failed with the following error"}),SignInError.parameters={css:"ext_authentication"};const ErrorWithData=Template.bind({});ErrorWithData.args=function passboltApiFetchErrorProps(props={}){const defaultProps={error:new PassboltApiFetchError.A("Could not finalize API request",{body:{message:"The provided Gpg doesn't fit the minimal requirements."},code:403})};return Object.assign(defaultProps,props)}(),ErrorWithData.parameters={css:"ext_authentication"};const ErrorWithDetails=Template.bind({});ErrorWithDetails.args=function passboltEntityValidationErrorProps(props={}){const error=new entityValidationError.A("Could not validate Entity");error.addError("algorithm","enum","The algorithm value is not included in the supported list.");const defaultProps={error};return Object.assign(defaultProps,props)}(),ErrorWithDetails.parameters={css:"ext_authentication"};const __namedExportsOrder=["Initial","SignInError","ErrorWithData","ErrorWithDetails"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:'args => <div id="container" className="container page login">\n    <div className="content">\n      <div className="login-form">\n        <MemoryRouter initialEntries={[\'/\']}>\n          <Route component={routerProps => <DisplayUnexpectedError {...args} {...routerProps} />} />\n        </MemoryRouter>\n      </div>\n    </div>\n  </div>',...Initial.parameters?.docs?.source}}},SignInError.parameters={...SignInError.parameters,docs:{...SignInError.parameters?.docs,source:{originalSource:'args => <div id="container" className="container page login">\n    <div className="content">\n      <div className="login-form">\n        <MemoryRouter initialEntries={[\'/\']}>\n          <Route component={routerProps => <DisplayUnexpectedError {...args} {...routerProps} />} />\n        </MemoryRouter>\n      </div>\n    </div>\n  </div>',...SignInError.parameters?.docs?.source}}},ErrorWithData.parameters={...ErrorWithData.parameters,docs:{...ErrorWithData.parameters?.docs,source:{originalSource:'args => <div id="container" className="container page login">\n    <div className="content">\n      <div className="login-form">\n        <MemoryRouter initialEntries={[\'/\']}>\n          <Route component={routerProps => <DisplayUnexpectedError {...args} {...routerProps} />} />\n        </MemoryRouter>\n      </div>\n    </div>\n  </div>',...ErrorWithData.parameters?.docs?.source}}},ErrorWithDetails.parameters={...ErrorWithDetails.parameters,docs:{...ErrorWithDetails.parameters?.docs,source:{originalSource:'args => <div id="container" className="container page login">\n    <div className="content">\n      <div className="login-form">\n        <MemoryRouter initialEntries={[\'/\']}>\n          <Route component={routerProps => <DisplayUnexpectedError {...args} {...routerProps} />} />\n        </MemoryRouter>\n      </div>\n    </div>\n  </div>',...ErrorWithDetails.parameters?.docs?.source}}}},"./src/react-extension/components/Authentication/DisplayUnexpectedError/DisplayUnexpectedError.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js");class DisplayUnexpectedError extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{showErrorDetails:!1}}bindCallbacks(){this.handleErrorDetailsToggle=this.handleErrorDetailsToggle.bind(this)}onClick(){this.props.context.port?this.props.context.port.request("passbolt.tab.reload"):window.location.reload()}handleErrorDetailsToggle(){this.setState({showErrorDetails:!this.state.showErrorDetails})}get hasErrorDetails(){const error=this.props?.error;return Boolean(error?.details)||Boolean(error?.data?.body)}formatErrors(){const errorMessage=this.props.error?.details||this.props.error?.data;return JSON.stringify(errorMessage,null,4)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"setup-error"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h1",null,this.props.title),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,this.props.message),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,this.props.error&&this.props.error.message),this.hasErrorDetails&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion error-details"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link no-border",type:"button",onClick:this.handleErrorDetailsToggle},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Error details"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:this.state.showErrorDetails?"caret-up":"caret-down"}))),this.state.showErrorDetails&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"js_field_debug",className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Error details")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{id:"js_field_debug",defaultValue:`${this.formatErrors()}`,readOnly:!0})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-actions"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:this.onClick.bind(this),className:"button primary big full-width",role:"button"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Try again"))))}}DisplayUnexpectedError.defaultProps={title:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Something went wrong!"),message:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"The operation failed with the following error:")},DisplayUnexpectedError.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_4___default().any,title:prop_types__WEBPACK_IMPORTED_MODULE_4___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().node),prop_types__WEBPACK_IMPORTED_MODULE_4___default().node,prop_types__WEBPACK_IMPORTED_MODULE_4___default().string]),message:prop_types__WEBPACK_IMPORTED_MODULE_4___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().node),prop_types__WEBPACK_IMPORTED_MODULE_4___default().node,prop_types__WEBPACK_IMPORTED_MODULE_4___default().string]),error:prop_types__WEBPACK_IMPORTED_MODULE_4___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(DisplayUnexpectedError));DisplayUnexpectedError.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Returns the component default state",modifiers:["get"],params:[],returns:null,description:"Returns the component default state"},{name:"bindCallbacks",docblock:"Bind the component handlers",modifiers:[],params:[],returns:null,description:"Bind the component handlers"},{name:"onClick",docblock:"Whenever the user click on the action",modifiers:[],params:[],returns:null,description:"Whenever the user click on the action"},{name:"handleErrorDetailsToggle",docblock:"Handle the toggle display of error details",modifiers:[],params:[],returns:null,description:"Handle the toggle display of error details"},{name:"hasErrorDetails",docblock:"Does the provided error carry details.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Does the provided error carry details."},{name:"formatErrors",docblock:"Format the error details as a string.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Format the error details as a string."}],displayName:"DisplayUnexpectedError",props:{title:{defaultValue:{value:"<Trans>Something went wrong!</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},message:{defaultValue:{value:"<Trans>The operation failed with the following error:</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},context:{description:"",type:{name:"any"},required:!1},error:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/lib/Error/PassboltApiFetchError.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class PassboltApiFetchError extends Error{constructor(message,data){super(message),this.name="PassboltApiFetchError",this.data=data||{}}}const __WEBPACK_DEFAULT_EXPORT__=PassboltApiFetchError},"./src/shared/models/entity/abstract/entityValidationError.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class EntityValidationError extends Error{constructor(message="Entity validation error."){super(message),this.name="EntityValidationError",this.details={}}addError(property,rule,message){if("string"!=typeof property)throw new TypeError("EntityValidationError addError property should be a string.");if("string"!=typeof rule)throw new TypeError("EntityValidationError addError rule should be a string.");if("string"!=typeof message)throw new TypeError("EntityValidationError addError message should be a string.");Object.prototype.hasOwnProperty.call(this.details,property)||(this.details[property]={}),this.details[property][rule]=message}addAssociationError(associationName,error){if("string"!=typeof associationName)throw new TypeError("EntityValidationError addAssociationError associationName should be a string.");if(!(error instanceof EntityValidationError))throw new TypeError("EntityValidationError addAssociationError errorDetails should be an object.");this.details[associationName]=error}getError(property,rule){if(!this.hasError(property,rule))return null;const errors=this.details[property];return rule?errors[rule]:errors}hasError(property,rule){if("string"!=typeof property)throw new TypeError("EntityValidationError hasError property should be a string.");const hasError=this.details&&Object.prototype.hasOwnProperty.call(this.details,property);if(!hasError)return!1;if(!rule)return hasError;if("string"!=typeof rule)throw new TypeError("EntityValidationError hasError rule should be a string.");return Object.prototype.hasOwnProperty.call(this.details[property],rule)}hasErrors(){return Object.keys(this.details).length>0}getFirstRuleErrorByField(property){if(!this.hasError(property))return null;const errors=this.details[property];return errors[Object.keys(errors)[0]]}}const __WEBPACK_DEFAULT_EXPORT__=EntityValidationError}}]);