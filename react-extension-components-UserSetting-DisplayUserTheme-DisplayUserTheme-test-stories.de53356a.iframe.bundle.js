/*! For license information please see react-extension-components-UserSetting-DisplayUserTheme-DisplayUserTheme-test-stories.de53356a.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[9632],{"./src/react-extension/components/UserSetting/DisplayUserTheme/DisplayUserTheme.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayUserTheme_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),LoadingContext=__webpack_require__("./src/react-extension/contexts/LoadingContext.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class DisplayUserTheme extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{themes:[],selectedTheme:null}}async componentDidMount(){await this.populate()}bindHandlers(){this.onSelectSuccess=this.onSelectSuccess.bind(this),this.onSelectFailure=this.onSelectFailure.bind(this),this.onSelectFinally=this.onSelectFinally.bind(this)}handleThemeSelected(theme){this.select(theme)}async populate(){this.props.loadingContext.add();const themes=await this.props.context.port.request("passbolt.themes.find-all"),selectedTheme=this.props.context.userSettings.getTheme();this.setState({themes,selectedTheme}),this.props.loadingContext.remove()}select(theme){this.state.selectedTheme!==theme.name&&(this.props.loadingContext.add(),this.setState({selectedTheme:theme.name}),this.props.context.port.request("passbolt.themes.change",theme.name).then(this.onSelectSuccess).catch(this.onSelectFailure).finally(this.onSelectFinally))}async onSelectSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("The theme has been updated successfully"))}async onSelectFailure(error){const errorDialogProps={error};this.props.dialogContext.open(NotifyError.A,errorDialogProps)}async onSelectFinally(){await this.props.loadingContext.remove()}convertUrlToWebAccessibleResources(url){return`/webAccessibleResources/img/themes/${/\/([a-zA-Z-_]*\.png)$/.exec(url)[1]}`}render(){const selectedClass=theme=>this.state.selectedTheme===theme.name?"selected":"";return react.createElement("div",{className:"grid grid-responsive-12"},react.createElement("div",{className:"row"},react.createElement("div",{className:"main-column"},react.createElement("h3",null,react.createElement(es.x6,null,"Theme")),react.createElement("div",{className:"themes"},react.createElement("div",{className:"col12"},react.createElement("ul",null,this.state.themes.map((theme=>react.createElement("li",{key:theme.id},react.createElement("div",{className:`main-cell theme ${selectedClass(theme)}`},react.createElement("button",{type:"button",onClick:()=>this.handleThemeSelected(theme)},react.createElement("img",{src:this.convertUrlToWebAccessibleResources(theme.preview)}),react.createElement("div",{className:"theme-desc"},theme.name))))))))))))}}DisplayUserTheme.propTypes={context:prop_types_default().any,actionFeedbackContext:prop_types_default().object,dialogContext:prop_types_default().object,loadingContext:prop_types_default().object,t:prop_types_default().func};const DisplayUserTheme_DisplayUserTheme=(0,AppContext.L)((0,ActionFeedbackContext.ot)((0,DialogContext.z9)((0,LoadingContext.$A)((0,es.CI)("common")(DisplayUserTheme)))));DisplayUserTheme.__docgenInfo={description:"This component displays the user profile theme",methods:[{name:"defaultState",docblock:"Returns the component default state",modifiers:["get"],params:[],returns:null,description:"Returns the component default state"},{name:"bindHandlers",docblock:"Binds the component handlers",modifiers:[],params:[],returns:null,description:"Binds the component handlers"},{name:"handleThemeSelected",docblock:"Whenever the user select a theme\n@param theme A theme",modifiers:[],params:[{name:"theme",description:"A theme",optional:!1}],returns:null,description:"Whenever the user select a theme"},{name:"populate",docblock:"Populates the component with data\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Populates the component with data"},{name:"select",docblock:"Selects a new theme\n@param {{name: string}} theme the name of the selected theme",modifiers:[],params:[{name:"theme",description:"the name of the selected theme",optional:!1}],returns:null,description:"Selects a new theme"},{name:"onSelectSuccess",docblock:"Whenever the new theme has been selected with success\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Whenever the new theme has been selected with success"},{name:"onSelectFailure",docblock:"Whenever the a new theme has been selected with failure\n@param {object} error the error to display",modifiers:["async"],params:[{name:"error",description:"the error to display",type:{name:"object"},optional:!1}],returns:null,description:"Whenever the a new theme has been selected with failure"},{name:"onSelectFinally",docblock:"Whenever the new theme has been selected finally",modifiers:["async"],params:[],returns:null,description:"Whenever the new theme has been selected finally"},{name:"convertUrlToWebAccessibleResources",docblock:"Converts the given image theme preview URL to pick it from the browser extension.\n@param {string} url\n@returns {string}",modifiers:[],params:[{name:"url",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Converts the given image theme preview URL to pick it from the browser extension."}],displayName:"DisplayUserTheme",props:{context:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},loadingContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var UserSettings=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),userSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js"),SiteSettings=__webpack_require__("./src/shared/lib/Settings/SiteSettings.js"),siteSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js"),MockPort=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js"),ActionFeedbackContext_test_data=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.test.data.js");function defaultAppContext(appContext={}){const defaultAppContext1={userSettings:new UserSettings.A(userSettings.A),siteSettings:new SiteSettings.A(siteSettings.A),port:new MockPort.A};return Object.assign(defaultAppContext1,appContext)}const themes=[{id:"default",name:"default",preview:"img/themes/default.png"},{id:"midgar",name:"midgar",preview:"img/themes/midgar.png"},{id:"solarized_dark",name:"solarized_dark",preview:"img/themes/solarized_dark.png"},{id:"solarized_light",name:"solarized_light",preview:"img/themes/solarized_light.png"}],DisplayUserTheme_test_stories={title:"Components/UserSetting/DisplayUserTheme",component:DisplayUserTheme_DisplayUserTheme},mockedPort=new MockPort.A;mockedPort.addRequestListener("passbolt.themes.find-all",(()=>themes));const Initial=(args=>react.createElement(DisplayUserTheme_DisplayUserTheme,args)).bind({});Initial.args=function defaultProps(props={}){const defaultProps1={context:defaultAppContext(),actionFeedbackContext:(0,ActionFeedbackContext_test_data.M)(),dialogContext:(0,DialogContext_test_data.L)(),loadingContext:{add:jest.fn(),remove:jest.fn()}};return Object.assign(defaultProps1,props)}({context:defaultAppContext({port:mockedPort})});const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"args => <DisplayUserTheme {...args} />",...Initial.parameters?.docs?.source}}}},"./src/react-extension/contexts/ActionFeedbackContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>ActionFeedbackContextProvider,ot:()=>withActionFeedback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const ActionFeedbackContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({feedbacks:[],displaySuccess:()=>{},displayError:()=>{},remove:()=>{}});class ActionFeedbackContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{feedbacks:[],displaySuccess:this.displaySuccess.bind(this),displayError:this.displayError.bind(this),remove:this.remove.bind(this)}}async displaySuccess(feedbackToAdd){await this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"success",message:feedbackToAdd}]})}async displayError(feedbackToAdd){await this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"error",message:feedbackToAdd}]})}async remove(feedbackToRemove){await this.setState({feedbacks:this.state.feedbacks.filter((feedback=>feedbackToRemove.id!==feedback.id))})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Provider,{value:this.state},this.props.children)}}function withActionFeedback(WrappedComponent){return class WithActionFeedback extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Consumer,null,(actionFeedbackContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{actionFeedbackContext,...this.props})))}}}ActionFeedbackContextProvider.displayName="ActionFeedbackContextProvider",ActionFeedbackContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},ActionFeedbackContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"displaySuccess",docblock:"Display the feedback in a success mode\n@param feedbackToAdd A feedback",modifiers:["async"],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a success mode"},{name:"displayError",docblock:"Display the feedback in a error mode\n@param feedbackToAdd A feedback",modifiers:["async"],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a error mode"},{name:"remove",docblock:"Remove the feedback\n@param feedbackToRemove A feedback",modifiers:["async"],params:[{name:"feedbackToRemove",description:"A feedback",optional:!1}],returns:null,description:"Remove the feedback"}],displayName:"ActionFeedbackContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/ActionFeedbackContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultActionFeedbackContext(data={}){const defaultContext={displaySuccess:jest.fn(),displayError:jest.fn(),remove:jest.fn()};return Object.assign(defaultContext,data)}__webpack_require__.d(__webpack_exports__,{M:()=>defaultActionFeedbackContext})},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter((dialog=>dialogKey!==dialog.key))}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,(dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props})))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/react-extension/contexts/LoadingContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$A:()=>withLoading});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);const LoadingContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({counter:[],add:()=>{},remove:()=>{}});class LoadingContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{counter:0,add:()=>{this.setState({counter:this.state.counter+1})},remove:()=>{this.setState({counter:Math.min(this.state.counter-1,0)})}}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingContext.Provider,{value:this.state},this.props.children)}}function withLoading(WrappedComponent){return class WithLoading extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingContext.Consumer,null,(loadingContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{loadingContext,...this.props})))}}}LoadingContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any},LoadingContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"The component default state",modifiers:["get"],params:[],returns:null,description:"The component default state"}],displayName:"LoadingContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/lib/Object/getPropValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(obj,path)=>path.split(".").reduce(((accumulator,key)=>accumulator?.[key]),obj)},"./src/react-extension/lib/Sanitize/sanitizeUrl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,P:()=>urlProtocols});const __WEBPACK_DEFAULT_EXPORT__=(uri,options)=>{if(void 0===uri||"string"!=typeof uri||!uri.length)return!1;if((options=options||{}).whitelistedProtocols&&!Array.isArray(options.whitelistedProtocols))throw new TypeError("The whitelistedProtocols should be an array of string.");if(options.defaultProtocol&&"string"!=typeof options.defaultProtocol)throw new TypeError("The defaultProtocol should be a string.");const whitelistedProtocols=options.whitelistedProtocols||[urlProtocols.HTTP,urlProtocols.HTTPS],blacklistedProtocols=[urlProtocols.JAVASCRIPT],defaultProtocol=options.defaultProtocol||"";!/^((?!:\/\/).)*:\/\//.test(uri)&&defaultProtocol&&(uri=`${defaultProtocol}//${uri}`);try{const url=new URL(uri);return!blacklistedProtocols.includes(url.protocol)&&(!!whitelistedProtocols.includes(url.protocol)&&url.href)}catch(error){return!1}},urlProtocols={FTP:"http:",FTPS:"https:",HTTP:"http:",HTTPS:"https:",JAVASCRIPT:"javascript:",SSH:"ssh:"}},"./src/react-extension/test/fixture/Settings/siteSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,B:()=>siteSettingsCe});const siteSettings=(isProEdition=!0)=>({app:{version:{number:"3.5.0",name:"Wide Open"},locale:"en-UK",url:"http://127.0.0.1:3001",debug:1,server_timezone:"UTC",session_timeout:24,image_storage:{public_path:"img/public/"}},passbolt:{legal:{privacy_policy:{url:"https://passbolt.com/privacy"},terms:{url:"https://passbolt.com/terms"}},edition:isProEdition?"pro":"ce",plugins:{accountRecovery:{version:"1.0.0",enabled:isProEdition},rbacs:{version:"1.0.0",enabled:isProEdition},import:{version:"2.0.1",config:{format:["kdbx","csv"]}},export:{version:"2.0.0"},selenium_api:{version:"2.2.0"},passbolt_test_data:{version:"2.0"},license:{version:"2.0.0"},ee:{version:"3.0.0",enabled:isProEdition},accountSettings:{version:"1.0.0",themes:{css:"api_main.min.css"}},rememberMe:{version:"2.0.0",options:{300:"5 minutes",900:"15 minutes",1800:"30 minutes",3600:"1 hour","-1":"until I log out"}},emailNotificationSettings:{version:"1.1.0"},emailDigest:{version:"1.0.0"},resourceTypes:{version:"1.0.0"},reports:{version:"1.0.0"},multiFactorAuthentication:{version:"1.1.0",enabled:isProEdition},directorySync:{version:"1.0.0",enabled:isProEdition},tags:{version:"1.0.1",enabled:isProEdition},log:{version:"1.0.0"},audit_log:{version:"1.0.0",enabled:isProEdition},folders:{version:"2.0.0",enabled:!0},previewPassword:{version:"3.0.0"},passwordGenerator:{version:"3.3.0"},locale:{options:[{locale:"de-DE",label:"Deutsch"},{locale:"en-UK",label:"English"},{locale:"es-ES",label:"Español"},{locale:"fr-FR",label:"Français"},{locale:"it-IT",label:"Italiano (Beta)"},{locale:"ja-JP",label:"日本語"},{locale:"ko-KR",label:"日本語"},{locale:"lt-LT",label:"Lietuvių"},{locale:"nl-NL",label:"Nederlands"},{locale:"pl-PL",label:"Polski"},{locale:"pt-BR",label:"Português Brasil (beta)"},{locale:"ro-RO",label:"Română (beta)"},{locale:"ru-RU",label:"Pусский (beta)"},{locale:"sv-SE",label:"Svenska"}]},mobile:{version:"1.0.0"},accountRecoveryRequestHelp:{version:"1.0.0",enabled:isProEdition},smtpSettings:{version:"1.0.0",enabled:!0},totpResourceTypes:{version:"1.0.0",enabled:!0},disableUser:{enabled:!0},passwordExpiry:{enabled:!0},desktop:{enabled:!0},passwordExpiryPolicies:{enabled:isProEdition},healthcheckUi:{enabled:!0},sso:{enabled:isProEdition}}}}),__WEBPACK_DEFAULT_EXPORT__=siteSettings(!0),siteSettingsCe=siteSettings(!1)},"./src/react-extension/test/fixture/Settings/userSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={"user.settings.trustedDomain":new URL(window.location.href).origin,"user.firstname":"Ada","user.id":"f848277c-5398-58f8-a82a-72397af2d450","user.lastname":"Lovelace","user.settings.securityToken.code":"TST","user.settings.securityToken.color":"#000000","user.settings.securityToken.textColor":"#FFFFFF","user.username":"ada@passbolt.com","user.settings.locale":"en-UK","user.settings.theme":"default"}},"./src/react-extension/test/mock/MockPort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function delay(t,v){return new Promise((resolve=>{setTimeout((()=>resolve(v)),t)}))}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class MockPort{constructor(storage){this.storage=storage,this.onListeners={},this.requestListeners={},this.emitListener={},this.onConnectErrorHandler={}}async emit(name,eventObject){let result;return console.debug(`PORT EMIT: ${name}`),console.debug("Arguments",eventObject),this.emitListener[name]?(result=await this.emitListener[name](eventObject),console.debug("response: ",result)):console.debug(`The emit ${name} has not been mocked`),delay(0,result)}on(name,callback){console.debug(`PORT ON: ${name}`),console.debug("PORT ON PARAMETERS:",callback),this.addOnListener(name,callback)}async request(name){let result;if(console.debug(`PORT REQUEST: ${name}`),console.debug("PORT REQUEST PARAMETERS:",Array.prototype.slice.call(arguments)),this.requestListeners[name]){const listenerArguments=Array.prototype.slice.call(arguments,1,arguments.length);console.debug("listenerArguments",listenerArguments),listenerArguments.push(this.storage),console.debug("listenerArguments",listenerArguments),result=await this.requestListeners[name](...listenerArguments),console.debug("response: ",result)}else console.debug(`The request ${name} has not been mocked`);return delay(0,result)}addEmitListener(name){console.debug(`PORT EMIT: ${name}`),console.debug("PORT EMIT PARAMETERS:",Array.prototype.slice.call(arguments))}addOnListener(name,callback){this.emitListener[name]=callback}addRequestListener(name,callback){this.requestListeners[name]=callback}onConnectError(callback){this.onConnectErrorHandler.callback=callback}}},"./src/shared/lib/Settings/SiteSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>SiteSettings});var _react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/lib/Object/getPropValue.js"),_react_extension_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js");class SiteSettings{constructor(settings){this.settings=this.sanitizeDto(settings)}sanitizeDto(dto){const sanitizedDto=JSON.parse(JSON.stringify(dto));return this.sanitizeEmailValidateRegex(sanitizedDto),sanitizedDto}sanitizeEmailValidateRegex(dto){const emailValidateRegex=dto?.passbolt?.email?.validate?.regex;emailValidateRegex&&"string"==typeof emailValidateRegex&&emailValidateRegex.trim().length&&(dto.passbolt.email.validate.regex=emailValidateRegex.trim().replace(/^\/+/,"").replace(/\/+$/,""))}canIUse(name){let result=!1;const configPath=`passbolt.plugins.${name}`,pluginSettings=(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,configPath)||null;if(pluginSettings&&"object"==typeof pluginSettings){const pluginEnabled=(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(pluginSettings,"enabled");void 0!==pluginEnabled&&!0!==pluginEnabled||(result=!0)}return result}getPluginSettings(name){const configPath=`passbolt.plugins.${name}`;return(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,configPath)}getRememberMeOptions(){return(this.getPluginSettings("rememberMe")||{}).options||{}}get hasRememberMeUntilILogoutOption(){return void 0!==(this.getRememberMeOptions()||{})[-1]}getServerTimezone(){return(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"passbolt.app.server_timezone")}get termsLink(){const termsLink=(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"passbolt.legal.terms.url");return!!termsLink&&(0,_react_extension_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_0__.A)(termsLink)}get privacyLink(){const privacyLink=(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"passbolt.legal.privacy_policy.url");return!!privacyLink&&(0,_react_extension_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_0__.A)(privacyLink)}get registrationPublic(){return!0===(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"passbolt.registration.public")}get debug(){return!0===(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"app.debug")}get url(){return(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"app.url")||""}get version(){return(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"app.version.number")}get locale(){return(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"app.locale")||SiteSettings.DEFAULT_LOCALE.locale}async setLocale(locale){this.settings.app.locale=locale}get supportedLocales(){return(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"passbolt.plugins.locale.options")||SiteSettings.DEFAULT_SUPPORTED_LOCALES}get generatorConfiguration(){return(0,_react_extension_lib_Object_getPropValue__WEBPACK_IMPORTED_MODULE_1__.A)(this.settings,"passbolt.plugins.generator.configuration")}get emailValidateRegex(){return this.settings?.passbolt?.email?.validate?.regex||null}static get DEFAULT_SUPPORTED_LOCALES(){return[SiteSettings.DEFAULT_LOCALE]}static get DEFAULT_LOCALE(){return{locale:"en-UK",label:"English"}}}},"./src/shared/lib/Settings/UserSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>UserSettings});class UserSettings{constructor(settings){this.settings=settings}get id(){return this.settings["user.id"]}get fullName(){return`${this.settings["user.firstname"]} ${this.settings["user.lastname"]}`}get username(){return this.settings["user.username"]}getTheme(){return this.settings["user.settings.theme"]}getTrustedDomain(){return this.settings["user.settings.trustedDomain"]}getSecurityToken(){return{code:this.settings["user.settings.securityToken.code"],backgroundColor:this.settings["user.settings.securityToken.color"],textColor:this.settings["user.settings.securityToken.textColor"]}}get locale(){return this.settings["user.settings.locale"]}}},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}}}]);