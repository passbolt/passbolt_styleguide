/*! For license information please see 2587.72203c57.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[2587],{"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}},"./node_modules/validator/es/lib/util/assertString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function assertString(input){if(null==input)throw new TypeError("Expected a string but received a ".concat(input));if("String"!==input.constructor.name)throw new TypeError("Expected a string but received a ".concat(input.constructor.name))}__webpack_require__.d(__webpack_exports__,{A:()=>assertString})},"./src/img/svg/spinner.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSpinner(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:18,height:18,fill:"none",className:"svg-icon spinner",viewBox:"0 0 18 18"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"background",cx:8,cy:8,r:8,fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(1 1)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"loading",r:8,fill:"none",stroke:"var(--spinner-color)",strokeLinecap:"round",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(9 9)"})))}},"./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmDeletionSelfRegistrationSettings/ConfirmDeletionSelfRegistrationSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/Administration/AdministrationSelfRegistration/AdministrationSelfRegistrationContext.js");class ConfirmDeletionSelfRegistrationSettings extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}async handleSubmit(event){event.preventDefault(),await this.props.onSubmit(),this.props.onClose()}render(){const isProcessing=this.props.adminSelfRegistrationContext.isProcessing();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_3__.A,{title:this.props.t("Disable self registration"),onClose:this.handleClose,disabled:isProcessing,className:"delete-self-registration-settings-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Are you sure to disable the self registration for the organization ?")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Users will not be able to self register anymore.")," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Only administrators would be able to invite users to register. ")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__.A,{onClick:this.handleClose,disabled:isProcessing}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__.A,{value:this.props.t("Save"),disabled:isProcessing,processing:isProcessing,warning:!0}))))}}ConfirmDeletionSelfRegistrationSettings.propTypes={adminSelfRegistrationContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_6__.v6)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(ConfirmDeletionSelfRegistrationSettings));ConfirmDeletionSelfRegistrationSettings.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleClose",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"handleSubmit",docblock:"Go to the next process\n@param {Event} event A form submit event",modifiers:["async"],params:[{name:"event",description:"A form submit event",type:{name:"Event"},optional:!1}],returns:null,description:"Go to the next process"}],displayName:"ConfirmDeletionSelfRegistrationSettings",props:{adminSelfRegistrationContext:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmSaveSelfRegistrationSettings/ConfirmSaveSelfRegistrationSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/contexts/Administration/AdministrationSelfRegistration/AdministrationSelfRegistrationContext.js"),_lib_Map_MapObject__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/lib/Map/MapObject.js");class ConfirmSaveSelfRegistrationSettings extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}async handleSubmit(event){event.preventDefault(),await this.props.onSubmit(),this.props.onClose()}get allowedDomains(){return this.props.adminSelfRegistrationContext.getAllowedDomains()}render(){const isProcessing=this.props.adminSelfRegistrationContext.isProcessing();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_3__.A,{title:this.props.t("Save self registration settings"),onClose:this.handleClose,disabled:isProcessing,className:"save-self-registration-settings-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Allowed domains")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"radiolist-alt"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input radio"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{id:"domains-list"},this.allowedDomains&&_lib_Map_MapObject__WEBPACK_IMPORTED_MODULE_8__.A.iterators(this.allowedDomains).map(key=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key},this.allowedDomains.get(key)))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"warning message no-margin"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Please review carefully this configuration."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__.A,{onClick:this.handleClose,disabled:isProcessing}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__.A,{value:this.props.t("Save"),disabled:isProcessing,processing:isProcessing,warning:!0}))))}}ConfirmSaveSelfRegistrationSettings.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,adminSelfRegistrationContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_6__.L)((0,_contexts_Administration_AdministrationSelfRegistration_AdministrationSelfRegistrationContext__WEBPACK_IMPORTED_MODULE_7__.v6)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(ConfirmSaveSelfRegistrationSettings)));ConfirmSaveSelfRegistrationSettings.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleClose",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"handleSubmit",docblock:"Go to the next process\n@param {Event} event A form submit event",modifiers:["async"],params:[{name:"event",description:"A form submit event",type:{name:"Event"},optional:!1}],returns:null,description:"Go to the next process"},{name:"allowedDomains",docblock:"return the allowed domains",modifiers:["get"],params:[],returns:null,description:"return the allowed domains"}],displayName:"ConfirmSaveSelfRegistrationSettings",props:{context:{description:"",type:{name:"any"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},adminSelfRegistrationContext:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmSaveSelfRegistrationSettings/ConfirmSaveSelfRegistrationSettings.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Gs:()=>defaultProps,Ih:()=>propsWithMockDomains});var _contexts_ApiAppContext_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/react-extension/contexts/ApiAppContext.test.data.js");function defaultProps(data={}){const defaultProps1={context:(0,_contexts_ApiAppContext_test_data__WEBPACK_IMPORTED_MODULE_0__.s)(data?.context),administrationWorkspaceContext:{setDisplayAdministrationWorkspaceAction:jest.fn(),resetDisplayAdministrationWorkspaceAction:jest.fn()},onClose:jest.fn(),onSubmit:jest.fn(),t:jest.fn()};return Object.assign(defaultProps1,data)}function propsWithMockDomains(props={}){const _props={adminSelfRegistrationContext:{isProcessing:jest.fn(),getAllowedDomains:()=>function mockDomains(){const map=new Map;return map.set("uuid","passbolt.com"),map.set("uuid2","passbolt.lu"),map}()}};return defaultProps(Object.assign(_props,props))}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormCancelButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.disabled||this.props.onClick()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.props.disabled,className:"link cancel",onClick:this.handleClick},this.props.value)}}FormCancelButton.defaultProps={value:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Cancel")},FormCancelButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,value:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().node),prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,prop_types__WEBPACK_IMPORTED_MODULE_1___default().string])};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(FormCancelButton);FormCancelButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleClick",docblock:"Handle cancel click\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle cancel click"}],displayName:"FormCancelButton",props:{value:{defaultValue:{value:"<Trans>Cancel</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormSubmitButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.getClassName=this.getClassName.bind(this)}getClassName(){let name="button primary form";return this.props.warning?name+=" warning":this.props.attention&&(name+=" attention"),this.props.disabled&&(name+=" disabled"),this.props.processing&&(name+=" processing"),this.props.big&&(name+=" big"),this.props.medium&&(name+=" medium"),this.props.fullWidth&&(name+=" full-width"),name}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:this.getClassName(),disabled:this.props.disabled},this.props.value||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Save"),this.props.processing&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_2__.A,null))}}FormSubmitButton.defaultProps={warning:!1,attention:!1},FormSubmitButton.propTypes={processing:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,value:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().node),prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,prop_types__WEBPACK_IMPORTED_MODULE_1___default().string]),warning:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,attention:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,big:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,medium:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,fullWidth:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_3__.CI)("common")(FormSubmitButton);FormSubmitButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"getClassName",docblock:"Get the input button classname\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the input button classname"}],displayName:"FormSubmitButton",props:{warning:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},attention:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},processing:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},value:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},big:{description:"",type:{name:"bool"},required:!1},medium:{description:"",type:{name:"bool"},required:!1},fullWidth:{description:"",type:{name:"bool"},required:!1}}}},"./src/react-extension/contexts/Administration/AdministrationSelfRegistration/AdministrationSelfRegistrationContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ji:()=>AdminSelfRegistrationContextProvider,v6:()=>withAdminSelfRegistration});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),selfRegistrationService=__webpack_require__("./src/shared/services/api/selfRegistration/selfRegistrationService.js"),SelfRegistrationDomainsViewModel=__webpack_require__("./src/shared/models/selfRegistration/SelfRegistrationDomainsViewModel.js"),MapObject=__webpack_require__("./src/react-extension/lib/Map/MapObject.js"),SelfRegistrationEnumeration=__webpack_require__("./src/shared/models/selfRegistration/SelfRegistrationEnumeration.js");const selfRegistration_SelfRegistrationDto=class SelfRegistrationDto{constructor(selfRegistrationDomains,settings={}){this.id=settings.id,this.provider=settings.provider||SelfRegistrationEnumeration.y.EMAILDOMAINS,this.data=this.mapData(selfRegistrationDomains?.allowedDomains)}mapData(domains=new Map){return{allowed_domains:Array.from(domains.values())}}};var DomainUtil=__webpack_require__("./src/react-extension/lib/Domain/DomainUtil.js");const selfRegistration_SelfRegistrationFormService=class SelfRegistrationFormService{constructor(translate){this.translate=translate,this.fields=new Map}validate(domains){this.fields=domains;return this.validateInputs()}validateInputs(){const errors=new Map;return this.fields.forEach((value,key)=>{this.validateInput(key,value,errors)}),errors}validateInput(key,value,errors){if(value.length)try{DomainUtil.A.checkDomainValidity(value)}catch{errors.set(key,this.translate("This should be a valid domain"))}else errors.set(key,this.translate("A domain is required."));this.checkDuplicateValue(errors)}checkDuplicateValue(inputErrors){this.fields.forEach((value,key)=>{MapObject.A.listValues(this.fields).filter(domain=>domain===value&&""!==domain).length>1&&inputErrors.set(key,this.translate("This domain already exist"))})}};var ConfirmSaveSelfRegistrationSettings=__webpack_require__("./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmSaveSelfRegistrationSettings/ConfirmSaveSelfRegistrationSettings.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),ConfirmDeletionSelfRegistrationSettings=__webpack_require__("./src/react-extension/components/Administration/DisplaySelfRegistrationAdministration/ConfirmDeletionSelfRegistrationSettings/ConfirmDeletionSelfRegistrationSettings.js");const AdminSelfRegistrationContext=react.createContext({getCurrentSettings:()=>{},getAllowedDomains:()=>{},setAllowedDomains:()=>{},hasSettingsChanges:()=>{},setDomains:()=>{},findSettings:()=>{},setProcessing:()=>{},isProcessing:()=>{},clearContext:()=>{},isSubmitted:()=>{},setSubmitted:()=>{},setErrors:()=>{},getErrors:()=>{},setError:()=>{},save:()=>{},delete:()=>{},shouldFocus:()=>{},setFocus:()=>{},isSaved:()=>{},setSaved:()=>{},validateForm:()=>{}});class AdminSelfRegistrationContextProvider extends react.Component{constructor(props){super(props),this.state=this.defaultState;const apiClientOptions=props.context.getApiClientOptions();this.selfRegistrationService=new selfRegistrationService.A(apiClientOptions),this.selfRegistrationFormService=new selfRegistration_SelfRegistrationFormService(this.props.t)}get defaultState(){return{errors:new Map,submitted:!1,currentSettings:null,focus:!1,saved:!1,domains:new SelfRegistrationDomainsViewModel.A,processing:!0,getCurrentSettings:this.getCurrentSettings.bind(this),getAllowedDomains:this.getAllowedDomains.bind(this),setAllowedDomains:this.setAllowedDomains.bind(this),setDomains:this.setDomains.bind(this),findSettings:this.findSettings.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),clearContext:this.clearContext.bind(this),isSubmitted:this.isSubmitted.bind(this),setSubmitted:this.setSubmitted.bind(this),getErrors:this.getErrors.bind(this),setError:this.setError.bind(this),setErrors:this.setErrors.bind(this),save:this.save.bind(this),shouldFocus:this.shouldFocus.bind(this),setFocus:this.setFocus.bind(this),isSaved:this.isSaved.bind(this),setSaved:this.setSaved.bind(this),deleteSettings:this.deleteSettings.bind(this),validateForm:this.validateForm.bind(this)}}async findSettings(callback=()=>{}){this.setProcessing(!0);const result=await this.selfRegistrationService.find();this.setState({currentSettings:result});const domains=new SelfRegistrationDomainsViewModel.A(result);this.setDomains(domains,callback),this.setProcessing(!1)}getCurrentSettings(){return this.state.currentSettings}getAllowedDomains(){return this.state.domains.allowedDomains}setAllowedDomains(key,value,callback=()=>{}){this.setState(prevState=>{const allowedDomains=MapObject.A.clone(prevState.domains.allowedDomains);return allowedDomains.set(key,value),{domains:{allowedDomains}}},callback)}setDomains(domains,callback=()=>{}){this.setState({domains},callback)}isProcessing(){return this.state.processing}setProcessing(processing){this.setState({processing})}isSubmitted(){return this.state.submitted}setSubmitted(submitted){this.setState({submitted}),this.setFocus(submitted)}getErrors(){return this.state.errors}shouldFocus(){return this.state.focus}setFocus(focus){this.setState({focus})}setError(key,value){this.setState(prevState=>{const errors=MapObject.A.clone(prevState.errors);return errors.set(key,value),{errors}})}setErrors(errors){this.setState({errors})}hasSettingsChanges(){const savedDomains=this.state.currentSettings?.data?.allowed_domains||[],uiDomains=MapObject.A.listValues(this.state.domains.allowedDomains);return JSON.stringify(savedDomains)!==JSON.stringify(uiDomains)}clearContext(){const{currentSettings,domains,processing}=this.defaultState;this.setState({currentSettings,domains,processing})}save(){this.setSubmitted(!0);this.validateForm()&&(this.hasSettingsChanges()&&0===this.getAllowedDomains().size?this.displayConfirmDeletionDialog():this.displayConfirmSummaryDialog())}validateForm(){const errors=this.selfRegistrationFormService.validate(this.state.getAllowedDomains());return this.state.setErrors(errors),0===errors.size}async handleSubmitError(error){"UserAbortsOperationError"!==error.name&&(console.error(error),await this.handleError(error))}async saveSettings(){try{this.setProcessing(!0);const newSettings=new selfRegistration_SelfRegistrationDto(this.state.domains,this.state.currentSettings);await this.selfRegistrationService.save(newSettings),await this.findSettings(()=>this.setSaved(!0)),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The self registration settings for the organization were updated."))}catch(error){this.handleSubmitError(error)}finally{this.setProcessing(!1),this.setSubmitted(!1)}}async handleError(error){this.handleCloseDialog();const errorDialogProps={error};this.props.dialogContext.open(NotifyError.A,errorDialogProps)}handleCloseDialog(){this.props.dialogContext.close()}displayConfirmSummaryDialog(){this.props.dialogContext.open(ConfirmSaveSelfRegistrationSettings.A,{domains:this.getAllowedDomains(),onSubmit:()=>this.saveSettings(),onClose:()=>this.handleCloseDialog()})}displayConfirmDeletionDialog(){this.props.dialogContext.open(ConfirmDeletionSelfRegistrationSettings.A,{onSubmit:()=>this.deleteSettings(),onClose:()=>this.handleCloseDialog()})}async deleteSettings(){try{this.setProcessing(!0),await this.selfRegistrationService.delete(this.state.currentSettings.id),await this.findSettings(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The self registration settings for the organization were updated."))}catch(error){this.handleSubmitError(error)}finally{this.setProcessing(!1),this.setSubmitted(!1)}}isSaved(){return this.state.saved}setSaved(saved){return this.setState({saved})}render(){return react.createElement(AdminSelfRegistrationContext.Provider,{value:this.state},this.props.children)}}AdminSelfRegistrationContextProvider.propTypes={context:prop_types_default().any,children:prop_types_default().any,t:prop_types_default().any,dialogContext:prop_types_default().any,actionFeedbackContext:prop_types_default().object};(0,AppContext.L)((0,DialogContext.z9)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(AdminSelfRegistrationContextProvider))));function withAdminSelfRegistration(WrappedComponent){return class WithAdminSelfRegistration extends react.Component{render(){return react.createElement(AdminSelfRegistrationContext.Consumer,null,adminSelfRegistrationContext=>react.createElement(WrappedComponent,{adminSelfRegistrationContext,...this.props}))}}}AdminSelfRegistrationContextProvider.__docgenInfo={description:"The Administration self registration context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"findSettings",docblock:"Find the self registration settings\n@return {Promise<void>}",modifiers:["async"],params:[{name:"callback",optional:!0}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find the self registration settings"},{name:"getCurrentSettings",docblock:"Returns the setting actually saved inside DB\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Returns the setting actually saved inside DB"},{name:"getAllowedDomains",docblock:"Returns the allowed domains settings that have been fetch previously.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Returns the allowed domains settings that have been fetch previously."},{name:"setAllowedDomains",docblock:"Handle settings changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"key",optional:!1},{name:"value",optional:!1},{name:"callback",optional:!0}],returns:{type:{name:"void"}},description:"Handle settings changes."},{name:"setDomains",docblock:"Handle domains changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"domains",optional:!1},{name:"callback",optional:!0}],returns:{type:{name:"void"}},description:"Handle domains changes."},{name:"isProcessing",docblock:"Returns true when the data is under processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true when the data is under processing"},{name:"setProcessing",docblock:"Handle processing change.\n@params {Boolean} processing value\n@returns {void}",modifiers:[],params:[{name:"processing",optional:!1}],returns:{type:{name:"void"}},description:"Handle processing change."},{name:"isSubmitted",docblock:"return true if the form has been submitted\n@returns {Boolean}",modifiers:[],params:[],returns:{type:{name:"Boolean"}},description:"return true if the form has been submitted"},{name:"setSubmitted",docblock:"change value for isSubmitted\n@params  {Boolean}\n@returns {Boolean}",modifiers:[],params:[{name:"submitted",optional:!1}],returns:{type:{name:"Boolean"}},description:"change value for isSubmitted"},{name:"getErrors",docblock:"return the errors object",modifiers:[],params:[],returns:null,description:"return the errors object"},{name:"shouldFocus",docblock:"return the focus object",modifiers:[],params:[],returns:null,description:"return the focus object"},{name:"setFocus",docblock:"change value for isSubmitted\n@params  {Boolean}\n@returns {Boolean}",modifiers:[],params:[{name:"focus",optional:!1}],returns:{type:{name:"Boolean"}},description:"change value for isSubmitted"},{name:"setError",docblock:"set an error to object",modifiers:[],params:[{name:"key",optional:!1},{name:"value",optional:!1}],returns:null,description:"set an error to object"},{name:"setErrors",docblock:"set errors to object",modifiers:[],params:[{name:"errors",optional:!1}],returns:null,description:"set errors to object"},{name:"hasSettingsChanges",docblock:"Check if there are changes to apply\n@returns {Boolean}",modifiers:[],params:[],returns:{type:{name:"Boolean"}},description:"Check if there are changes to apply"},{name:"clearContext",docblock:"Puts the state to its default in order to avoid keeping the data users didn't want to save.",modifiers:[],params:[],returns:null,description:"Puts the state to its default in order to avoid keeping the data users didn't want to save."},{name:"save",docblock:"Whenever the save has been requested",modifiers:[],params:[],returns:null,description:"Whenever the save has been requested"},{name:"validateForm",docblock:"validate the form\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"validate the form"},{name:"handleSubmitError",docblock:"Handle save operation error.\n@param {object} error The returned error",modifiers:["async"],params:[{name:"error",description:"The returned error",type:{name:"object"},optional:!1}],returns:null,description:"Handle save operation error."},{name:"saveSettings",docblock:"Whenever the submit request is done",modifiers:["async"],params:[],returns:null,description:"Whenever the submit request is done"},{name:"handleError",docblock:"handle error to display the error dialog\n@param error",modifiers:["async"],params:[{name:"error",optional:!1}],returns:null,description:"handle error to display the error dialog"},{name:"handleCloseDialog",docblock:"Handle close dialog",modifiers:[],params:[],returns:null,description:"Handle close dialog"},{name:"displayConfirmSummaryDialog",docblock:"Display the confirmation summary dialog\n@returns {Promise<void>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Display the confirmation summary dialog"},{name:"displayConfirmDeletionDialog",docblock:"Display the confirmation dialog for deletion seytings\n@returns {Promise<void>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Display the confirmation dialog for deletion seytings"},{name:"deleteSettings",docblock:"Whenever the delete has been requested",modifiers:["async"],params:[],returns:null,description:"Whenever the delete has been requested"},{name:"isSaved",docblock:"return the saved state",modifiers:[],params:[],returns:null,description:"return the saved state"},{name:"setSaved",docblock:"Set saved state\n@Param {Boolean}",modifiers:[],params:[{name:"saved",optional:!1}],returns:null,description:"Set saved state"}],displayName:"AdminSelfRegistrationContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1}}}},"./src/react-extension/contexts/ApiAppContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>defaultAppContext});var _shared_lib_Settings_SiteSettings__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/lib/Settings/SiteSettings.js"),_test_fixture_Settings_siteSettings__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js"),_shared_lib_apiClient_apiClientOptions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/lib/apiClient/apiClientOptions.js"),_test_mock_MockPort__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),_shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js");function defaultAppContext(appContext={}){const userSettings=new _shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_4__.A(_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_5__.A),siteSettings=new _shared_lib_Settings_SiteSettings__WEBPACK_IMPORTED_MODULE_0__.A(_test_fixture_Settings_siteSettings__WEBPACK_IMPORTED_MODULE_1__.A),defaultAppContext1={locale:"en-UK",onRefreshLocaleRequested:jest.fn(),userSettings,siteSettings,trustedDomain:"https://localhost:6006",loggedInUser:{id:userSettings.id,username:"user@passbolt.com",role:{name:"admin"}},port:new _test_mock_MockPort__WEBPACK_IMPORTED_MODULE_3__.A,setContext:jest.fn(),baseUrl:"https://localhost:6006",getApiClientOptions:()=>(new _shared_lib_apiClient_apiClientOptions__WEBPACK_IMPORTED_MODULE_2__.k).setBaseUrl("https://localhost:6006")};return Object.assign(defaultAppContext1,appContext)}},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter(dialog=>dialogKey!==dialog.key)}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props}))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/lib/Map/MapObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class MapObject{static clone(object){return new Map(JSON.parse(JSON.stringify(Array.from(object))))}static iterators(object){return[...object.keys()]}static listValues(object){return[...object.values()]}}},"./src/react-extension/test/fixture/Settings/userSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={"user.settings.trustedDomain":new URL(window.location.href).origin,"user.firstname":"Ada","user.id":"f848277c-5398-58f8-a82a-72397af2d450","user.lastname":"Lovelace","user.settings.securityToken.code":"TST","user.settings.securityToken.color":"#000000","user.settings.securityToken.textColor":"#FFFFFF","user.username":"ada@passbolt.com","user.settings.locale":"en-UK","user.settings.theme":"default"}},"./src/react-extension/test/mock/MockPort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function delay(t,v){return new Promise(resolve=>{setTimeout(()=>resolve(v),t)})}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class MockPort{constructor(storage){this.storage=storage,this.onListeners={},this.requestListeners={},this.emitListener={},this.onConnectErrorHandler={}}async emit(name,eventObject){let result;return console.debug(`PORT EMIT: ${name}`),console.debug("Arguments",eventObject),this.emitListener[name]?(result=await this.emitListener[name](eventObject),console.debug("response: ",result)):console.debug(`The emit ${name} has not been mocked`),delay(0,result)}on(name,callback){console.debug(`PORT ON: ${name}`),console.debug("PORT ON PARAMETERS:",callback),this.addOnListener(name,callback)}async request(name){let result;if(console.debug(`PORT REQUEST: ${name}`),console.debug("PORT REQUEST PARAMETERS:",Array.prototype.slice.call(arguments)),this.requestListeners[name]){const listenerArguments=Array.prototype.slice.call(arguments,1,arguments.length);console.debug("listenerArguments",listenerArguments),listenerArguments.push(this.storage),console.debug("listenerArguments",listenerArguments),result=await this.requestListeners[name](...listenerArguments),console.debug("response: ",result)}else console.debug(`The request ${name} has not been mocked`);return delay(0,result)}addEmitListener(name){console.debug(`PORT EMIT: ${name}`),console.debug("PORT EMIT PARAMETERS:",Array.prototype.slice.call(arguments))}addOnListener(name,callback){this.emitListener[name]=callback}addRequestListener(name,callback){this.requestListeners[name]=callback}onConnectError(callback){this.onConnectErrorHandler.callback=callback}}},"./src/shared/lib/Settings/UserSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>UserSettings});class UserSettings{constructor(settings){this.settings=settings}get id(){return this.settings["user.id"]}get fullName(){return`${this.settings["user.firstname"]} ${this.settings["user.lastname"]}`}get username(){return this.settings["user.username"]}getTheme(){return this.settings["user.settings.theme"]}getTrustedDomain(){return this.settings["user.settings.trustedDomain"]}getSecurityToken(){return{code:this.settings["user.settings.securityToken.code"],backgroundColor:this.settings["user.settings.securityToken.color"],textColor:this.settings["user.settings.securityToken.textColor"]}}get locale(){return this.settings["user.settings.locale"]}}},"./src/shared/lib/apiClient/apiClientOptions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>ApiClientOptions});class ApiClientOptions{setBaseUrl(baseUrl){if(!baseUrl)throw new TypeError("ApiClientOption baseUrl is required.");if("string"==typeof baseUrl)try{this.baseUrl=new URL(baseUrl)}catch(error){throw new TypeError("ApiClientOption baseUrl is invalid.",{cause:error})}else{if(!(baseUrl instanceof URL))throw new TypeError("ApiClientOptions baseurl should be a string or URL");this.baseUrl=baseUrl}return this}setResourceName(resourceName){if(!resourceName)throw new TypeError("ApiClientOptions.setResourceName resourceName is required.");if("string"!=typeof resourceName)throw new TypeError("ApiClientOptions.setResourceName resourceName should be a valid string.");return this.resourceName=resourceName,this}getBaseUrl(){return this.baseUrl}getResourceName(){return this.resourceName}async getHeaders(){const csrfToken=await this.getCsrfToken();if(csrfToken)return{"X-CSRF-Token":csrfToken}}async getCsrfToken(){if("undefined"==typeof browser||void 0===browser.cookies){const csrfToken=document?.cookie?.split("; ")?.find(row=>row.startsWith("csrfToken"))?.split("=");return csrfToken&&2===csrfToken.length?csrfToken[1]:null}const stringUrl=this.baseUrl.toString(),url="/"===stringUrl.slice(-1)?stringUrl:`${stringUrl}/`,csrfCookie=await browser.cookies.get({name:"csrfToken",url});return csrfCookie?.value||null}}},"./src/shared/models/selfRegistration/SelfRegistrationDomainsViewModel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const __WEBPACK_DEFAULT_EXPORT__=class SelfRegistrationDomainsViewModel{constructor(selfRegistrationDto={}){this.allowedDomains=this.mapAllowedDomains(selfRegistrationDto.data?.allowed_domains||[])}mapAllowedDomains(domains){return new Map(domains.map(domain=>[(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),domain]))}getSettings(){return this.allowedDomains}setSettings(domains){this.allowedDomains=this.mapAllowedDomains(domains)}}},"./src/shared/models/selfRegistration/SelfRegistrationEnumeration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>SelfRegistrationProviderTypes});const SelfRegistrationProviderTypes={EMAILDOMAINS:"email_domains"}},"./src/shared/services/api/selfRegistration/selfRegistrationService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_apiClient_apiClient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/lib/apiClient/apiClient.js");const __WEBPACK_DEFAULT_EXPORT__=class SelfRegistrationService{constructor(apiClientOptions){this.apiClientOptions=apiClientOptions}async find(){this.initClient();const selfRegistrationSettings=await this.apiClient.findAll(),settings=selfRegistrationSettings?.body;return settings}async save(dto){this.initClient(),await this.apiClient.create(dto)}async delete(id){this.initClient(),await this.apiClient.delete(id)}async checkDomainAllowed(payload){this.initClient("dry-run"),await this.apiClient.create(payload)}initClient(path="settings"){this.apiClientOptions.setResourceName(`self-registration/${path}`),this.apiClient=new _lib_apiClient_apiClient__WEBPACK_IMPORTED_MODULE_0__.O(this.apiClientOptions)}}}}]);