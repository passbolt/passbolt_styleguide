/*! For license information please see 4412.134426b6.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[4412],{"./src/react-extension/components/Resource/ImportResources/ImportResourcesResult.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/img/svg/caret_right.svg");class ImportResourcesResult extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{showErrorsDetails:!1}}bindHandlers(){this.handleClose=this.handleClose.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleErrorDetailsToggle=this.handleErrorDetailsToggle.bind(this),this.handleReferenceFolderClick=this.handleReferenceFolderClick.bind(this),this.handleReferenceTagClick=this.handleReferenceTagClick.bind(this)}handleClose(){this.close()}handleSubmit(e){e.preventDefault(),this.close()}handleErrorDetailsToggle(){this.toggleErrorDetails()}handleReferenceFolderClick(){const folder=this.resultReferenceFolder;this.props.history.push(`/app/folders/view/${folder.id}`),this.close()}handleReferenceTagClick(){const tag=this.resultReferenceTag,filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.FM.TAG,payload:{tag}};this.props.history.push({pathname:"/app/passwords",state:{filter}}),this.close()}close(){this.props.onClose()}toggleErrorDetails(){this.setState({showErrorDetails:!this.state.showErrorDetails})}get canIUseTags(){return this.props.context.siteSettings.canIUse("tags")}get canIUseFolders(){return this.props.context.siteSettings.canIUse("folders")}get result(){return this.props.resourceWorkspaceContext.resourceFileImportResult||{}}get resultCreated(){return this.result.created||{}}get resultCreatedFoldersCount(){return this.resultCreated.foldersCount||0}get resultCreatedResourcesCount(){return this.resultCreated.resourcesCount||0}get resultReferences(){return this.result.references||{}}get resultReferenceTag(){return this.resultReferences.tag||null}get resultReferenceFolder(){return this.resultReferences.folder||null}get resultErrors(){return this.result.errors||{}}get resultErrorsResources(){return this.resultErrors.resources||[]}get resultErrorsFolders(){return this.resultErrors.folders||[]}get hasErrorsResources(){return this.resultErrorsResources.length>0}get resultHasErrorsFolders(){return this.resultErrorsFolders.length>0}get resultHasErrors(){return this.hasErrorsResources||this.resultHasErrorsFolders}get formatErrors(){let result="";return this.hasErrorsResources&&(result+=`----------------------------\n${this.translate("Resources errors")}\n----------------------------\n${JSON.stringify(this.resultErrorsResources,null,4)}\n\n`),this.resultHasErrorsFolders&&(result+=`----------------------------\n${this.translate("Folder errors")}\n----------------------------\n${JSON.stringify(this.resultErrorsFolders,null,4)}`),result}get translate(){return this.props.t}render(){const createAndErrorResourcesCount=this.resultCreatedResourcesCount+this.resultErrorsResources.length,createAndErrorFoldersCount=this.resultCreatedFoldersCount+this.resultErrorsFolders.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_4__.A,{title:this.resultHasErrors?this.translate("Something went wrong!"):this.translate("Import success!"),onClose:this.handleClose},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},!this.hasErrorsResources&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,this.translate("{{count}} password has been imported successfully.",{count:this.resultCreatedResourcesCount}))),this.hasErrorsResources&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"error inline-error"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"There was an issue while importing passwords:")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,{count:createAndErrorResourcesCount},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,{numberResourceSuccess:this.resultCreatedResourcesCount}," out of ",{count:this.resultCreatedResourcesCount+this.resultErrorsResources.length})," password has been imported."))),this.canIUseFolders&&!this.resultHasErrorsFolders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,this.translate("{{count}} folder has been imported successfully.",{count:this.resultCreatedFoldersCount}))),this.canIUseFolders&&this.resultHasErrorsFolders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"error inline-error"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"There was an issue while importing folders:")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,{count:createAndErrorFoldersCount},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,{numberFolderSuccess:this.resultCreatedFoldersCount}," out of ",{count:this.resultCreatedFoldersCount+this.resultErrorsFolders.length})," folder has been imported."))),this.canIUseFolders&&this.resultReferenceFolder&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"You can find these newly imported passwords in the folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link inline no-border",onClick:this.handleReferenceFolderClick},{folderName:this.resultReferenceFolder.name}),".")),this.canIUseTags&&!this.resultReferenceFolder&&this.resultReferenceTag&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"You can find these newly imported passwords under the tag ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link inline no-border",onClick:this.handleReferenceTagClick},{tagName:this.resultReferenceTag.slug}),".")),this.resultHasErrors&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion error-details"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",onClick:this.handleErrorDetailsToggle},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Error details")),this.state.showErrorDetails?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_7__.A,{className:"baseline svg-icon"}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_8__.A,{className:"baseline svg-icon"}))),this.state.showErrorDetails&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"js_field_debug",className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Error details")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{id:"js_field_debug",defaultValue:`${this.formatErrors}`,readOnly:!0}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__.A,{value:this.translate("Ok")}))))}}ImportResourcesResult.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_9___default().func,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,history:prop_types__WEBPACK_IMPORTED_MODULE_9___default().object,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_9___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_10__.withRouter)((0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.CI)("common")(ImportResourcesResult)))));ImportResourcesResult.__docgenInfo={description:"This component displays the success of a resource file import",methods:[{name:"defaultState",docblock:"Returns the component default state",modifiers:["get"],params:[],returns:null,description:"Returns the component default state"},{name:"bindHandlers",docblock:"Bind the component handlers",modifiers:[],params:[],returns:null,description:"Bind the component handlers"},{name:"handleClose",docblock:"Whenever the user intends to close the dialog",modifiers:[],params:[],returns:null,description:"Whenever the user intends to close the dialog"},{name:"handleSubmit",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleErrorDetailsToggle",docblock:"Handle the toggle display of error details",modifiers:[],params:[],returns:null,description:"Handle the toggle display of error details"},{name:"handleReferenceFolderClick",docblock:"Handle the click on the reference folder",modifiers:[],params:[],returns:null,description:"Handle the click on the reference folder"},{name:"handleReferenceTagClick",docblock:"Handle the click on the reference tag",modifiers:[],params:[],returns:null,description:"Handle the click on the reference tag"},{name:"close",docblock:"Closes the dialog",modifiers:[],params:[],returns:null,description:"Closes the dialog"},{name:"toggleErrorDetails",docblock:"Toggle the display of the error details",modifiers:[],params:[],returns:null,description:"Toggle the display of the error details"},{name:"canIUseTags",docblock:"Is the user allowed to use the tags capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the tags capability"},{name:"canIUseFolders",docblock:"Is the user allowed to use the folders capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the folders capability"},{name:"result",docblock:"Returns the import result",modifiers:["get"],params:[],returns:null,description:"Returns the import result"},{name:"resultCreated",docblock:"Created content\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Created content"},{name:"resultCreatedFoldersCount",docblock:"Created folders count\n@returns {int}",modifiers:["get"],params:[],returns:{type:{name:"int"}},description:"Created folders count"},{name:"resultCreatedResourcesCount",docblock:"Created resources count\n@returns {int}",modifiers:["get"],params:[],returns:{type:{name:"int"}},description:"Created resources count"},{name:"resultReferences",docblock:"The import references\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"The import references"},{name:"resultReferenceTag",docblock:"The unique tag used to mark the resources\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"The unique tag used to mark the resources"},{name:"resultReferenceFolder",docblock:"The folder used as root folder.\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"The folder used as root folder."},{name:"resultErrors",docblock:"Import errors\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Import errors"},{name:"resultErrorsResources",docblock:"Import resources errors\n@returns {array}",modifiers:["get"],params:[],returns:{type:{name:"array"}},description:"Import resources errors"},{name:"resultErrorsFolders",docblock:"Import folders errors\n@returns {array}",modifiers:["get"],params:[],returns:{type:{name:"array"}},description:"Import folders errors"},{name:"hasErrorsResources",docblock:"Errors occurred while importing the resources\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Errors occurred while importing the resources"},{name:"resultHasErrorsFolders",docblock:"Errors occurred while importing the folders\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Errors occurred while importing the folders"},{name:"resultHasErrors",docblock:"Errors occurred while importing the file\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Errors occurred while importing the file"},{name:"formatErrors",docblock:"Format the errors that occurred while importing\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Format the errors that occurred while importing"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ImportResourcesResult",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},history:{description:"",type:{name:"object"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}}}]);