/*! For license information please see react-extension-components-Resource-PasswordExpiryDialog-PasswordExpiryDialog-test-stories.89cb93ab.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[985],{"./src/react-extension/components/Resource/PasswordExpiryDialog/PasswordExpiryDialog.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Resource/PasswordExpiryDialog/PasswordExpiryDialog.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/Dialogs/PasswordExpiryDialog",component:_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_1__.A},Initial=(args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_1__.A,args)).bind();Initial.args={resources:[]};const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"args => <PasswordExpiryDialog {...args} />",...Initial.parameters?.docs?.source}}}},"./src/img/svg/spinner.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSpinner(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:18,height:18,fill:"none",className:"svg-icon spinner",viewBox:"0 0 18 18"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"background",cx:8,cy:8,r:8,fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(1 1)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"loading",r:8,fill:"none",stroke:"var(--spinner-color)",strokeLinecap:"round",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(9 9)"})))}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormCancelButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.disabled||this.props.onClick()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.props.disabled,className:"link cancel",onClick:this.handleClick},this.props.value)}}FormCancelButton.defaultProps={value:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Cancel")},FormCancelButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,value:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_2___default().node),prop_types__WEBPACK_IMPORTED_MODULE_2___default().node,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string])};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(FormCancelButton);FormCancelButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleClick",docblock:"Handle cancel click\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle cancel click"}],displayName:"FormCancelButton",props:{value:{defaultValue:{value:"<Trans>Cancel</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormSubmitButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.getClassName=this.getClassName.bind(this)}getClassName(){let name="button primary form";return this.props.warning?name+=" warning":this.props.attention&&(name+=" attention"),this.props.disabled&&(name+=" disabled"),this.props.processing&&(name+=" processing"),this.props.big&&(name+=" big"),this.props.medium&&(name+=" medium"),this.props.fullWidth&&(name+=" full-width"),name}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:this.getClassName(),disabled:this.props.disabled},this.props.value||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Save"),this.props.processing&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__.A,null))}}FormSubmitButton.defaultProps={warning:!1,attention:!1},FormSubmitButton.propTypes={processing:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().node),prop_types__WEBPACK_IMPORTED_MODULE_3___default().node,prop_types__WEBPACK_IMPORTED_MODULE_3___default().string]),warning:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,attention:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,big:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,medium:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,fullWidth:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(FormSubmitButton);FormSubmitButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"getClassName",docblock:"Get the input button classname\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the input button classname"}],displayName:"FormSubmitButton",props:{warning:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},attention:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},processing:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},value:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},big:{description:"",type:{name:"bool"},required:!1},medium:{description:"",type:{name:"bool"},required:!1},fullWidth:{description:"",type:{name:"bool"},required:!1}}}},"./src/react-extension/components/Resource/PasswordExpiryDialog/PasswordExpiryDialog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>PasswordExpiryDialog_PasswordExpiryDialog});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),DialogWrapper=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),FormCancelButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),FormSubmitButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),PasswordExpirySettingsContext=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),entityValidationError=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js"),entitySchema=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),luxon=__webpack_require__("./node_modules/luxon/src/luxon.js"),dateUtils=__webpack_require__("./src/shared/utils/dateUtils.js");const PasswordExpiryOptionEnum={AUTOMATIC:"automatic",MANUAL:"manual",NEVER:"never"};class PasswordExpiryDialogViewModel{constructor(settings={}){this.passwordExpiryDurationInDay=settings.passwordExpiryDurationInDay,this.passwordExpiryDate=settings.passwordExpiryDate,this.passwordExpiryOption=settings.passwordExpiryOption}static getSchema(){return{type:"object",required:["passwordExpiryDurationInDay","passwordExpiryDate","passwordExpiryOption"],properties:{passwordExpiryDurationInDay:{type:"integer",maximum:999,minimum:-99},passwordExpiryDate:{type:"string",pattern:/\d{4}-\d{2}-\d{2}/},passwordExpiryOption:{type:"string",enum:PasswordExpiryOptionEnum}}}}static fromEntityDto(entityDto){const passwordExpiryDurationInDay=entityDto?.default_expiry_period||90,passwordExpiryDate=luxon.c9.utc().plus({days:passwordExpiryDurationInDay}).toFormat("yyyy-MM-dd");return new PasswordExpiryDialogViewModel({passwordExpiryDurationInDay,passwordExpiryDate,passwordExpiryOption:PasswordExpiryOptionEnum.AUTOMATIC})}toDto(){return{passwordExpiryDurationInDay:this.passwordExpiryDurationInDay,passwordExpiryDate:this.passwordExpiryDate,passwordExpiryOption:this.passwordExpiryOption}}getExpiryDateToApply(){let date;switch(this.passwordExpiryOption){case PasswordExpiryOptionEnum.AUTOMATIC:date=luxon.c9.utc().plus({days:this.passwordExpiryDurationInDay});break;case PasswordExpiryOptionEnum.MANUAL:date=luxon.c9.fromFormat(this.passwordExpiryDate,"yyyy-MM-dd",{zone:"UTC"});break;case PasswordExpiryOptionEnum.NEVER:date=null;break;default:throw new Error(`Unsuppored Password Expiry dialog option '${this.passwordExpiryOption}'`)}return(0,dateUtils.B7)(date)}mapResourcesToPasswordExpiryDto(resourceList){const expiryDate=this.getExpiryDateToApply();return resourceList.map((resource=>({id:resource.id,expired:expiryDate})))}validate(){switch(this.passwordExpiryOption){case PasswordExpiryOptionEnum.AUTOMATIC:return this.validatePasswordExpiryDurationInDay();case PasswordExpiryOptionEnum.MANUAL:return this.validatePasswordExpiryDate()}return new entityValidationError.A}validatePasswordExpiryDurationInDay(){const schema=PasswordExpiryDialogViewModel.getSchema();try{entitySchema.A.validateProp("passwordExpiryDurationInDay",this.passwordExpiryDurationInDay,schema.properties.passwordExpiryDurationInDay)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}validatePasswordExpiryDate(){const schema=PasswordExpiryDialogViewModel.getSchema();try{entitySchema.A.validateProp("passwordExpiryDate",this.passwordExpiryDate,schema.properties.passwordExpiryDate)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}}const passwordExpirySettings_PasswordExpiryDialogViewModel=PasswordExpiryDialogViewModel;class PasswordExpiryDialog extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){const settings=this.props.passwordExpiryContext.getSettings();return{hasBeenSubmitted:!1,processing:!1,passwordExpiryDialogViewModel:passwordExpirySettings_PasswordExpiryDialogViewModel.fromEntityDto(settings),errors:null}}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleDurationInDayChange=this.handleDurationInDayChange.bind(this),this.handleDuration=this.handleDurationInDayChange.bind(this),this.handleDateChange=this.handleDateChange.bind(this),this.selectExpiryOption=this.selectExpiryOption.bind(this)}handleDurationInDayChange(event){if(event.target.value.toString().length>3)return void event.preventDefault();const newExpiryDurationInDay={passwordExpiryDurationInDay:parseInt(event.target.value,10)};this.selectExpiryOption(PasswordExpiryOptionEnum.AUTOMATIC,newExpiryDurationInDay)}handleDateChange(event){const newPasswordExpiryDate={passwordExpiryDate:event.target.value};this.selectExpiryOption(PasswordExpiryOptionEnum.MANUAL,newPasswordExpiryDate)}selectExpiryOption(passwordExpiryOption,newInputFieldDate={}){const data=Object.assign({},this.state.passwordExpiryDialogViewModel.toDto(),newInputFieldDate,{passwordExpiryOption}),newState={passwordExpiryDialogViewModel:new passwordExpirySettings_PasswordExpiryDialogViewModel(data)};this.state.hasBeenSubmitted?(newState.errors=this.state.passwordExpiryDialogViewModel.validate(),this.setState(newState)):this.setState(newState)}hasAllInputDisabled(){return this.state.processing}handleError(error){this.props.dialogContext.open(NotifyError.A,{error})}displayErrors(errors){return react.createElement("span",{className:"error-message"},Object.keys(errors).map((errorKey=>react.createElement(react.Fragment,null,errors[errorKey]))))}get resourceCount(){return this.props.resources.length}async handleFormSubmit(e){e.preventDefault();const errors=this.state.passwordExpiryDialogViewModel.validate();if(this.setState({hasBeenSubmitted:!0,errors}),errors.hasErrors())return;this.setState({processing:!0});const resourceExpirationDto=this.state.passwordExpiryDialogViewModel.mapResourcesToPasswordExpiryDto(this.props.resources);try{await this.props.context.port.request("passbolt.resources.set-expiration-date",resourceExpirationDto),this.props.actionFeedbackContext.displaySuccess(this.props.t("The expiry date of the selected resource has been updated.",{count:this.props.resources.length})),this.setState({processing:!1}),this.props.onClose()}catch(e){this.handleError(e),this.setState({processing:!1})}}render(){const viewModel=this.state.passwordExpiryDialogViewModel,isDisabled=this.hasAllInputDisabled(),errors=this.state.errors;return react.createElement(DialogWrapper.A,{className:"password-expiry-dialog",title:this.props.t("Set an expiry date",{count:this.resourceCount}),onClose:this.props.onClose,disabled:isDisabled},react.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react.createElement("div",{className:"form-content"},react.createElement("div",{className:"radiolist-alt"},react.createElement("div",{className:"input radio "+(viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.AUTOMATIC?"checked":"")},react.createElement("input",{type:"radio",value:PasswordExpiryOptionEnum.AUTOMATIC,onChange:()=>this.selectExpiryOption(PasswordExpiryOptionEnum.AUTOMATIC),name:"passwordExpiryOption",checked:viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.AUTOMATIC,id:"passwordExpiryOptionAutomatic",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"passwordExpiryOptionAutomatic"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Set the date automatically:")),react.createElement("span",{className:"info"},react.createElement("input",{type:"number",value:viewModel.passwordExpiryDurationInDay,id:"passwordExpiryDateAutomatic",name:"passwordExpiryDurationInDay",onChange:this.handleDurationInDayChange,disabled:this.hasAllInputDisabled(),min:"1",max:"365"}),react.createElement(es.x6,null,"days from now.")),errors?.hasError("passwordExpiryDurationInDay")&&this.displayErrors(errors.getError("passwordExpiryDurationInDay")))),react.createElement("div",{className:"input radio "+(viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.MANUAL?"checked":"")},react.createElement("input",{type:"radio",value:PasswordExpiryOptionEnum.MANUAL,onChange:()=>this.selectExpiryOption(PasswordExpiryOptionEnum.MANUAL),name:"passwordExpiryOption",checked:viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.MANUAL,id:"passwordExpiryOptionManual",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"passwordExpiryOptionManual"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Set the date manually:")),react.createElement("span",{className:"info date-wrapper"},react.createElement("div",{className:"button-inline"},react.createElement("input",{className:"fluid form-element "+(viewModel.passwordExpiryDate?"":"empty"),type:"date",value:viewModel.passwordExpiryDate,id:"passwordExpiryDateManual",name:"passwordExpiryDate",onChange:this.handleDateChange,disabled:this.hasAllInputDisabled()}),react.createElement(Icon.A,{name:"calendar"}))),errors?.hasError("passwordExpiryDate")&&this.displayErrors(errors.getError("passwordExpiryDate")))),react.createElement("div",{className:"input radio "+(viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.NEVER?"checked":"")},react.createElement("input",{type:"radio",value:PasswordExpiryOptionEnum.NEVER,onChange:()=>this.selectExpiryOption(PasswordExpiryOptionEnum.NEVER),name:"passwordExpiryOption",checked:viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.NEVER,id:"passwordExpiryOptionNever",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"passwordExpiryOptionNever"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Not set")),react.createElement("span",{className:"info"},react.createElement(es.x6,{count:this.resourceCount},"This resource does not need an expiry date.")))))),react.createElement("div",{className:"submit-wrapper clearfix"},react.createElement(FormCancelButton.A,{disabled:isDisabled,onClick:this.props.onClose}),react.createElement(FormSubmitButton.A,{disabled:isDisabled,processing:this.state.processing,value:this.props.t("Save")}))))}}PasswordExpiryDialog.propTypes={context:prop_types_default().any,onClose:prop_types_default().func,passwordExpiryContext:prop_types_default().object,dialogContext:prop_types_default().object,actionFeedbackContext:prop_types_default().object,t:prop_types_default().func,resources:prop_types_default().arrayOf(Object)};const PasswordExpiryDialog_PasswordExpiryDialog=(0,AppContext.L)((0,DialogContext.z9)((0,PasswordExpirySettingsContext.f4)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(PasswordExpiryDialog)))));PasswordExpiryDialog.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleDurationInDayChange",docblock:"Handle duration in day input change\n@param {Event} event",modifiers:[],params:[{name:"event",type:{name:"Event"},optional:!1}],returns:null,description:"Handle duration in day input change"},{name:"handleDateChange",docblock:"Handle manual date input change\n@param {Event} event",modifiers:[],params:[{name:"event",type:{name:"Event"},optional:!1}],returns:null,description:"Handle manual date input change"},{name:"selectExpiryOption",docblock:"Change the currently selected expiration option\n@param {string} passwordExpiryOption\n@param {object} [newInputFieldDate]",modifiers:[],params:[{name:"passwordExpiryOption",type:{name:"string"},optional:!1},{name:"newInputFieldDate",optional:!0}],returns:null,description:"Change the currently selected expiration option"},{name:"hasAllInputDisabled",docblock:"Returns true if the input must be disabled.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the input must be disabled."},{name:"handleError",docblock:"Handles error by displaying the NotifyError dialog.\n@param {Error} error",modifiers:[],params:[{name:"error",type:{name:"Error"},optional:!1}],returns:null,description:"Handles error by displaying the NotifyError dialog."},{name:"displayErrors",docblock:"Handles EntityValidationError for displaying on the UI.\n@param {object} errors",modifiers:[],params:[{name:"errors",type:{name:"object"},optional:!1}],returns:null,description:"Handles EntityValidationError for displaying on the UI."},{name:"resourceCount",docblock:"Returns the count of selected resources.\nThis is mainly used to adapt the translations accordingly.\n@returns {number}",modifiers:["get"],params:[],returns:{type:{name:"number"}},description:"Returns the count of selected resources.\nThis is mainly used to adapt the translations accordingly."},{name:"handleFormSubmit",docblock:"Handles form submission\n@param {Event} e",modifiers:["async"],params:[{name:"e",type:{name:"Event"},optional:!1}],returns:null,description:"Handles form submission"}],displayName:"PasswordExpiryDialog",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1},resources:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"Object"}},required:!1}}}},"./src/react-extension/contexts/ActionFeedbackContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>ActionFeedbackContextProvider,b_:()=>ActionFeedbackContext,ot:()=>withActionFeedback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const ActionFeedbackContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({feedbacks:[],displaySuccess:()=>{},displayWarning:()=>{},displayError:()=>{},remove:()=>{}});class ActionFeedbackContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{feedbacks:[],displaySuccess:this.displaySuccess.bind(this),displayWarning:this.displayWarning.bind(this),displayError:this.displayError.bind(this),remove:this.remove.bind(this)}}displaySuccess(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"success",message:feedbackToAdd}]})}displayWarning(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"warning",message:feedbackToAdd}]})}displayError(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"error",message:feedbackToAdd}]})}remove(feedbackToRemove){this.setState({feedbacks:this.state.feedbacks.filter((feedback=>feedbackToRemove.id!==feedback.id))})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Provider,{value:this.state},this.props.children)}}function withActionFeedback(WrappedComponent){return class WithActionFeedback extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Consumer,null,(actionFeedbackContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{actionFeedbackContext,...this.props})))}}}ActionFeedbackContextProvider.displayName="ActionFeedbackContextProvider",ActionFeedbackContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},ActionFeedbackContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"displaySuccess",docblock:"Display the feedback in a success mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a success mode"},{name:"displayWarning",docblock:"Display the feedback in a warning mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a warning mode"},{name:"displayError",docblock:"Display the feedback in a error mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a error mode"},{name:"remove",docblock:"Remove the feedback\n@param feedbackToRemove A feedback",modifiers:[],params:[{name:"feedbackToRemove",description:"A feedback",optional:!1}],returns:null,description:"Remove the feedback"}],displayName:"ActionFeedbackContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter((dialog=>dialogKey!==dialog.key))}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,(dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props})))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/PasswordExpirySettingsContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,f4:()=>withPasswordExpiry});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/utils/dateUtils.js"),luxon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/luxon/src/luxon.js");const PasswordExpirySettingsContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({getSettings:()=>{},getDefaultExpirationDate:()=>{},findSettings:()=>{},isFeatureEnabled:()=>{}});class PasswordExpirySettingsContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{settings:null,findSettings:this.findSettings.bind(this),getSettings:this.getSettings.bind(this),getDefaultExpirationDate:this.getDefaultExpirationDate.bind(this),isFeatureEnabled:this.isFeatureEnabled.bind(this)}}async findSettings(){if(!this.props.context.siteSettings.canIUse("passwordExpiry")||null!==this.getSettings())return;const settings=await this.props.context.port.request("passbolt.password-expiry.get-or-find");this.setState({settings})}getSettings(){return this.state.settings}getDefaultExpirationDate(){if(!this.props.context.siteSettings.canIUse("passwordExpiryPolicies"))return null;const settings=this.getSettings();if(!settings?.default_expiry_period)return null;const durationInDays=settings.default_expiry_period,expirationDate=luxon__WEBPACK_IMPORTED_MODULE_4__.c9.utc().plus({days:durationInDays});return(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_3__.B7)(expirationDate)}isFeatureEnabled(){const settings=this.getSettings();if(!this.props.context.siteSettings.canIUse("passwordExpiry")||!settings)return!1;return Boolean(settings.id)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(PasswordExpirySettingsContext.Provider,{value:this.state},this.props.children)}}PasswordExpirySettingsContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(PasswordExpirySettingsContextProvider));function withPasswordExpiry(WrappedComponent){return class WithPasswordExpiry extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(PasswordExpirySettingsContext.Consumer,null,(passwordExpiryContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{passwordExpiryContext,...this.props})))}}}PasswordExpirySettingsContextProvider.__docgenInfo={description:"The Password Expiry settings context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"findSettings",docblock:"Find the User Passphrase Policies\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find the User Passphrase Policies"},{name:"getSettings",docblock:"Get the User Passphrase Policies\n@return {Object}",modifiers:[],params:[],returns:{type:{name:"Object"}},description:"Get the User Passphrase Policies"},{name:"getDefaultExpirationDate",docblock:"Returns the expiry date based on the configuration if any.\n@returns {string|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"string"}]}},description:"Returns the expiry date based on the configuration if any."},{name:"isFeatureEnabled",docblock:"Returns true if the feature flag is enabled and the settings are set.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the feature flag is enabled and the settings are set."}],displayName:"PasswordExpirySettingsContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/utils/dateUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B7:()=>formatDateForApi,Br:()=>formatExpirationDateTimeAgo,kD:()=>formatDateTimeAgo});var luxon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/luxon/src/luxon.js");const formatDateTimeAgo=(date,translate,locale)=>{if(null===date)return"n/a";if("Infinity"===date)return translate("Never");const dateTime=luxon__WEBPACK_IMPORTED_MODULE_0__.c9.fromISO(date),duration=dateTime.diffNow().toMillis();return duration>-1e3&&duration<0?translate("Just now"):dateTime.toRelative({locale})},formatExpirationDateTimeAgo=(date,translate,locale)=>date?formatDateTimeAgo(date,translate,locale):translate("Never"),formatDateForApi=date=>date?.toUTC().toISO()||null},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}}}]);