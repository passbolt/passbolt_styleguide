/*! For license information please see react-extension-components-User-DisplayUserBadgeMenu-DisplayUserBadgeMenu-test-stories.f0cef9e7.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[9224],{"./src/react-extension/components/User/DisplayUserBadgeMenu/DisplayUserBadgeMenu.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AttentionRequired:()=>AttentionRequired,DefaultUserBadgeMenu:()=>DefaultUserBadgeMenu,UserAvatarBadgeMenu:()=>UserAvatarBadgeMenu,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayUserBadgeMenu_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),DisplayUserBadgeMenu=__webpack_require__("./src/react-extension/components/User/DisplayUserBadgeMenu/DisplayUserBadgeMenu.js"),RbacContext_test_data=__webpack_require__("./src/shared/context/Rbac/RbacContext.test.data.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js");function defaultProps(props){const defaultProps={baseUrl:new URL(window.location.href).origin,user:{username:"carol@passbolt.com",profile:{first_name:"Carol",last_name:"Shaw"}},mfaContext:{checkMfaChoiceRequired:jest.fn(),isMfaChoiceRequired:jest.fn()},accountRecoveryContext:{isAccountRecoveryChoiceRequired:jest.fn()},context:{onLogoutRequested:()=>{},siteSettings:{canIUse:()=>!0}},rbacContext:(0,RbacContext_test_data.mM)(),dialogContext:(0,DialogContext_test_data.L)()};return Object.assign(defaultProps,props||{})}const DisplayUserBadgeMenu_test_stories={title:"Components/User/DisplayUserBadgeMenu",decorators:[Story=>react.createElement("div",{className:"page"},react.createElement("div",{className:"app"},react.createElement("div",{className:"panel main"},react.createElement("div",{className:"panel middle"},react.createElement("div",{className:"header"},react.createElement("div",{className:"header-right"},react.createElement(Story,null)))))))],component:DisplayUserBadgeMenu.A},DefaultUserBadgeMenu={args:defaultProps()},AttentionRequired={args:defaultProps({accountRecoveryContext:{isAccountRecoveryChoiceRequired:()=>!0}})},UserAvatarBadgeMenu={args:defaultProps({user:{username:"user@passbolt.com",profile:{first_name:"User",last_name:"Passbolt",avatar:{url:{medium:"img/logo/icon-64.png",small:"img/logo/icon-32.png"}}}}})},__namedExportsOrder=["DefaultUserBadgeMenu","AttentionRequired","UserAvatarBadgeMenu"];DefaultUserBadgeMenu.parameters={...DefaultUserBadgeMenu.parameters,docs:{...DefaultUserBadgeMenu.parameters?.docs,source:{originalSource:"{\n  args: defaultProps()\n}",...DefaultUserBadgeMenu.parameters?.docs?.source}}},AttentionRequired.parameters={...AttentionRequired.parameters,docs:{...AttentionRequired.parameters?.docs,source:{originalSource:"{\n  args: defaultProps(propsAttentionRequired)\n}",...AttentionRequired.parameters?.docs?.source}}},UserAvatarBadgeMenu.parameters={...UserAvatarBadgeMenu.parameters,docs:{...UserAvatarBadgeMenu.parameters?.docs,source:{originalSource:"{\n  args: defaultProps(propsWithUserAvatar)\n}",...UserAvatarBadgeMenu.parameters?.docs?.source}}}},"./src/img/svg/attention.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgAttention(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#attention_svg__clip0_2062_453107)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"var(--icon-exclamation-background-color)",stroke:"var(--icon-exclamation-border-color)",d:"M9 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-exclamation-color)",d:"M9 6v3M9 12h.008"}))))}},"./src/img/svg/logout.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgLogout(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6.75 15.75h-3a1.5 1.5 0 0 1-1.5-1.5V3.75a1.5 1.5 0 0 1 1.5-1.5h3M12 12.75 15.75 9 12 5.25M15.75 9h-9"})))}},"./src/img/svg/profile.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,_path3,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgProfile(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75 13.5a1.5 1.5 0 0 0-1.5-1.5h-4.5a1.5 1.5 0 0 0-1.5 1.5"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25 3H3.75a1.5 1.5 0 0 0-1.5 1.5V15a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V4.5a1.5 1.5 0 0 0-1.5-1.5"})),_path3||(_path3=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M6 1.5V3M12 1.5V3"})))}},"./src/react-extension/components/Common/Avatar/UserAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Avatar_UserAvatar});var _circle,_path,_circle2,react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const user_default=function SvgUserDefault(props){return react.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:42,height:42,fill:"none",viewBox:"0 0 42 42"},props),_circle||(_circle=react.createElement("circle",{id:"background",cx:21,cy:21,r:21,fill:"var(--Avatar-Avatar-background)"})),_path||(_path=react.createElement("path",{fill:"var(--Avatar-Avatar)",d:"M27.184 26.54H14.852a7.36 7.36 0 0 0-5.362 2.2 7.4 7.4 0 0 0-2.216 5.36v1.145a19.66 19.66 0 0 0 13.672 5.522 19.66 19.66 0 0 0 13.673-5.522V34.1a7.38 7.38 0 0 0-2.199-5.362 7.38 7.38 0 0 0-5.236-2.198"})),_circle2||(_circle2=react.createElement("circle",{cx:21,cy:15.5,r:7.5,fill:"var(--Avatar-Avatar)"})))};var attention=__webpack_require__("./src/img/svg/attention.svg");const DEFAULT_AVATAR_URL_REGEXP=/img\/avatar\/user(_medium)?\.png$/;class UserAvatar extends react.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{error:!1}}bindCallbacks(){this.handleError=this.handleError.bind(this)}get avatarUrl(){return this.props?.user?.profile?.avatar?.url?.medium}propsHasUrl(){return Boolean(this.avatarUrl)}propsUrlHasProtocol(){return this.avatarUrl.startsWith("https://")||this.avatarUrl.startsWith("http://")}formatUrl(url){return`${this.props.baseUrl}/${url}`}isDefaultAvatarUrlFromApi(){return DEFAULT_AVATAR_URL_REGEXP.test(this.avatarUrl)}getAvatarSrc(){return this.propsHasUrl()?this.propsUrlHasProtocol()?this.avatarUrl:this.formatUrl(this.avatarUrl):null}handleError(){console.error(`Could not load avatar image url: ${this.getAvatarSrc()}`),this.setState({error:!0})}getAltText(){const user=this.props?.user;return user?.first_name&&user?.last_name?this.props.t("Avatar of user {{first_name}} {{last_name}}.",{firstname:user.first_name,lastname:user.last_name}):"..."}render(){const srcAvatar=this.getAvatarSrc(),shouldDisplayDefaultAvatar=this.state.error||this.isDefaultAvatarUrlFromApi()||!srcAvatar;return react.createElement("div",{className:`${this.props.className}`},shouldDisplayDefaultAvatar&&react.createElement("div",{className:"default-avatar"},react.createElement(user_default,null)),!shouldDisplayDefaultAvatar&&react.createElement("div",{className:"default-avatar"},react.createElement("img",{src:srcAvatar,onError:this.handleError,alt:this.getAltText()})),this.props.attentionRequired&&react.createElement(attention.A,{className:"attention-required"}))}}UserAvatar.defaultProps={className:"avatar user-avatar"},UserAvatar.propTypes={baseUrl:prop_types_default().string,user:prop_types_default().object,attentionRequired:prop_types_default().bool,className:prop_types_default().string,t:prop_types_default().func};const Avatar_UserAvatar=(0,es.CI)("common")(UserAvatar);UserAvatar.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"avatarUrl",docblock:"Returns the current avatar URL from the props\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the current avatar URL from the props"},{name:"propsHasUrl",docblock:"Return true if the user from props contains a valid profile with avatar url properties\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the user from props contains a valid profile with avatar url properties"},{name:"propsUrlHasProtocol",docblock:"Check if the url has a protocol like http or https?\n@todo only check https for now\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the url has a protocol like http or https?"},{name:"formatUrl",docblock:"Format the avatar url to point on the site url.\n@param {string} url The relative url\n@returns {string}",modifiers:[],params:[{name:"url",description:"The relative url",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Format the avatar url to point on the site url."},{name:"isDefaultAvatarUrlFromApi",docblock:"Returns true if the given URL matches a default avatar from the API\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given URL matches a default avatar from the API"},{name:"getAvatarSrc",docblock:"Get the user avatar url. If the user has no avatar defined, return the default one.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar url. If the user has no avatar defined, return the default one."},{name:"handleError",docblock:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server."},{name:"getAltText",docblock:"Get the user avatar image alternative text.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar image alternative text."}],displayName:"UserAvatar",props:{className:{defaultValue:{value:'"avatar user-avatar"',computed:!1},description:"",type:{name:"string"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},attentionRequired:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/User/DisplayUserBadgeMenu/DisplayUserBadgeMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_14__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_NavigationContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/NavigationContext.js"),_contexts_AccountRecoveryUserContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/AccountRecoveryUserContext.js"),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_contexts_MFAContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/MFAContext.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_img_svg_profile_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/img/svg/profile.svg"),_img_svg_logout_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/img/svg/logout.svg"),_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/img/svg/close.svg"),_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/img/svg/attention.svg"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js");class DisplayUserBadgeMenu extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks(),this.createRefs()}getDefaultState(){return{open:!1}}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleToggleMenuClick=this.handleToggleMenuClick.bind(this),this.handleProfileClick=this.handleProfileClick.bind(this),this.handleSignOutClick=this.handleSignOutClick.bind(this)}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),this.props.context.siteSettings.canIUse("mfaPolicies")&&this.props.mfaContext.checkMfaChoiceRequired()}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}createRefs(){this.userBadgeMenuRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}handleDocumentClickEvent(event){this.userBadgeMenuRef.current.contains(event.target)||this.closeUserBadgeMenu()}handleDocumentContextualMenuEvent(event){this.userBadgeMenuRef.current.contains(event.target)||this.closeUserBadgeMenu()}handleDocumentDragStartEvent(){this.closeUserBadgeMenu()}closeUserBadgeMenu(){this.setState({open:!1})}getUserFullName(){return this.props.user&&this.props.user.profile?`${this.props.user.profile.first_name} ${this.props.user.profile.last_name}`:"..."}getUserUsername(){return this.props.user&&this.props.user.username?`${this.props.user.username}`:"..."}handleToggleMenuClick(e){e.preventDefault();const open=!this.state.open;this.setState({open})}handleProfileClick(){this.props.navigationContext.onGoToUserSettingsProfileRequested(),this.closeUserBadgeMenu()}async handleSignOutClick(){try{await this.props.context.onLogoutRequested()}catch(error){this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_13__.A,{error})}finally{this.closeUserBadgeMenu()}}get attentionRequired(){return this.props.accountRecoveryContext.isAccountRecoveryChoiceRequired()||this.props.mfaContext.isMfaChoiceRequired()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"profile-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"user profile dropdown",ref:this.userBadgeMenuRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"avatar-with-name button avatar-button "+(this.state.open?"open":""),onClick:this.handleToggleMenuClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_4__.A,{user:this.props.user,baseUrl:this.props.baseUrl,attentionRequired:this.attentionRequired})),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"dropdown-content left visible"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"button button-transparent user-profile-close",role:"button",onClick:this.handleToggleMenuClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_10__.A,{className:"svg-icon close"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},"Close")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_4__.A,{user:this.props.user,baseUrl:this.props.baseUrl}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"informations"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},this.getUserFullName()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"email"},this.getUserUsername())),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"manage-account"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"button primary",onClick:this.handleProfileClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_profile_svg__WEBPACK_IMPORTED_MODULE_8__.A,null)," Manage account",this.attentionRequired&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_11__.A,{className:"attention-required"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"no-border sign-out",onClick:this.handleSignOutClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_logout_svg__WEBPACK_IMPORTED_MODULE_9__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Sign out")))))}}DisplayUserBadgeMenu.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,navigationContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().any,mfaContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,accountRecoveryContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,baseUrl:prop_types__WEBPACK_IMPORTED_MODULE_14___default().string,user:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_7__.x6)((0,_contexts_NavigationContext__WEBPACK_IMPORTED_MODULE_2__.qN)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_12__.z9)((0,_contexts_AccountRecoveryUserContext__WEBPACK_IMPORTED_MODULE_3__.Le)((0,_contexts_MFAContext__WEBPACK_IMPORTED_MODULE_6__.dg)((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(DisplayUserBadgeMenu)))))));DisplayUserBadgeMenu.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {Object}",modifiers:[],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"createRefs",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"handleDocumentClickEvent",docblock:"Handle click events on document. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle click events on document. Hide the component if the click occurred outside of the component."},{name:"handleDocumentContextualMenuEvent",docblock:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component."},{name:"handleDocumentDragStartEvent",docblock:"Handle drag start event on document. Hide the component if any.",modifiers:[],params:[],returns:null,description:"Handle drag start event on document. Hide the component if any."},{name:"closeUserBadgeMenu",docblock:"Close the user badge menu",modifiers:[],params:[],returns:null,description:"Close the user badge menu"},{name:"getUserFullName",docblock:"Get the user full name\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user full name"},{name:"getUserUsername",docblock:"Get the user username\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user username"},{name:"handleToggleMenuClick",docblock:"Handle click on menu (toggle open state)\n@param {Event} e\n@return {void}",modifiers:[],params:[{name:"e",type:{name:"Event"},optional:!1}],returns:{type:{name:"void"}},description:"Handle click on menu (toggle open state)"},{name:"handleProfileClick",docblock:"Whenever the user wants to navigate to the users settings workspace profile section.",modifiers:[],params:[],returns:null,description:"Whenever the user wants to navigate to the users settings workspace profile section."},{name:"handleSignOutClick",docblock:"Handles the click on Sign out button\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handles the click on Sign out button"},{name:"attentionRequired",docblock:"Returns true if the account recovery needs to be configured.\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the account recovery needs to be configured."}],displayName:"DisplayUserBadgeMenu",props:{context:{description:"",type:{name:"object"},required:!1},navigationContext:{description:"",type:{name:"any"},required:!1},mfaContext:{description:"",type:{name:"object"},required:!1},accountRecoveryContext:{description:"",type:{name:"object"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1}}}},"./src/react-extension/contexts/AccountRecoveryUserContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,Le:()=>withAccountRecovery,On:()=>AccountRecoveryUserContextProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js");const AccountRecoveryUserContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({accountRecoveryOrganizationPolicy:null,status:null,isDataLoaded:!1,findAccountRecoveryPolicy:()=>{},getOrganizationPolicy:()=>{},getRequestor:()=>{},getRequestedDate:()=>{},getPolicy:()=>{},getUserAccountRecoverySubscriptionStatus:()=>{},isAccountRecoveryChoiceRequired:()=>{},isPolicyEnabled:()=>{},loadAccountRecoveryPolicy:()=>{},reloadAccountRecoveryPolicy:()=>{},isReady:()=>{}});class AccountRecoveryUserContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{accountRecoveryOrganizationPolicy:null,status:null,isDataLoaded:!1,findAccountRecoveryPolicy:this.findAccountRecoveryPolicy.bind(this),getOrganizationPolicy:this.getOrganizationPolicy.bind(this),getRequestor:this.getRequestor.bind(this),getRequestedDate:this.getRequestedDate.bind(this),getPolicy:this.getPolicy.bind(this),getUserAccountRecoverySubscriptionStatus:this.getUserAccountRecoverySubscriptionStatus.bind(this),setUserAccountRecoveryStatus:this.setUserAccountRecoveryStatus.bind(this),isAccountRecoveryChoiceRequired:this.isAccountRecoveryChoiceRequired.bind(this),isPolicyEnabled:this.isPolicyEnabled.bind(this),loadAccountRecoveryPolicy:this.loadAccountRecoveryPolicy.bind(this),reloadAccountRecoveryPolicy:this.reloadAccountRecoveryPolicy.bind(this),isReady:this.isReady.bind(this)}}async loadAccountRecoveryPolicy(){this.state.isDataLoaded||await this.findAccountRecoveryPolicy()}async reloadAccountRecoveryPolicy(){await this.findAccountRecoveryPolicy()}async findAccountRecoveryPolicy(){if(!this.props.context.siteSettings.canIUse("accountRecovery"))return;const loggedInUser=this.props.context.loggedInUser;if(!loggedInUser)return;const accountRecoveryOrganizationPolicy=await this.props.accountRecoveryUserService.getOrganizationAccountRecoverySettings(),status=loggedInUser.account_recovery_user_setting?.status||AccountRecoveryUserContextProvider.STATUS_PENDING;this.setState({accountRecoveryOrganizationPolicy,status,isDataLoaded:!0})}isReady(){return this.state.isDataLoaded}getOrganizationPolicy(){return this.state.accountRecoveryOrganizationPolicy}getRequestedDate(){return this.getOrganizationPolicy()?.modified}getRequestor(){return this.getOrganizationPolicy()?.creator}getPolicy(){return this.getOrganizationPolicy()?.policy}getUserAccountRecoverySubscriptionStatus(){return this.state.status}setUserAccountRecoveryStatus(status){this.setState({status})}isAccountRecoveryChoiceRequired(){if(null===this.getOrganizationPolicy())return!1;const policy=this.getPolicy();return this.state.status===AccountRecoveryUserContextProvider.STATUS_PENDING&&policy!==AccountRecoveryUserContextProvider.POLICY_DISABLED}isPolicyEnabled(){const policy=this.getPolicy();return policy&&policy!==AccountRecoveryUserContextProvider.POLICY_DISABLED}static get STATUS_PENDING(){return"pending"}static get POLICY_DISABLED(){return"disabled"}static get POLICY_MANDATORY(){return"mandatory"}static get POLICY_OPT_OUT(){return"opt-out"}static get STATUS_APPROVED(){return"approved"}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(AccountRecoveryUserContext.Provider,{value:this.state},this.props.children)}}AccountRecoveryUserContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any.isRequired,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,accountRecoveryUserService:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object.isRequired};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(AccountRecoveryUserContextProvider);function withAccountRecovery(WrappedComponent){return class WithAccountRecovery extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(AccountRecoveryUserContext.Consumer,null,(accountRecoveryContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{accountRecoveryContext,...this.props})))}}}AccountRecoveryUserContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"loadAccountRecoveryPolicy",docblock:"Run the initial load of the account recovery policy.",modifiers:["async"],params:[],returns:null,description:"Run the initial load of the account recovery policy."},{name:"reloadAccountRecoveryPolicy",docblock:"Reload the account recovery policy regardless of having it cached or not.",modifiers:["async"],params:[],returns:null,description:"Reload the account recovery policy regardless of having it cached or not."},{name:"findAccountRecoveryPolicy",docblock:"Find the account recovery policy",modifiers:["async"],params:[],returns:null,description:"Find the account recovery policy"},{name:"isReady",docblock:"Returns true when the data has been loaded\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true when the data has been loaded"},{name:"getOrganizationPolicy",docblock:"Returns the full organization policy settings.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Returns the full organization policy settings."},{name:"getRequestedDate",docblock:"Get the date at when an administrator asked users to set their account recovery policy setting.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get the date at when an administrator asked users to set their account recovery policy setting."},{name:"getRequestor",docblock:"Get the user that asked the account recovery policy settings to be set.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get the user that asked the account recovery policy settings to be set."},{name:"getPolicy",docblock:"Get the organization policy.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the organization policy."},{name:"getUserAccountRecoverySubscriptionStatus",docblock:"Get the current user account recovery setting status.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the current user account recovery setting status."},{name:"setUserAccountRecoveryStatus",docblock:"Set the current user account recovery setting.\n@param {string} status",modifiers:[],params:[{name:"status",type:{name:"string"},optional:!1}],returns:null,description:"Set the current user account recovery setting."},{name:"isAccountRecoveryChoiceRequired",docblock:'Returns true if the current user has to choose for an account recovery setting.\nIn that case, the organization account recovery setting has to be set with "mandatory" or "opt-out",\nplus the user shouldn\'t have made a choice yet.\n@returns {bool}',modifiers:[],params:[],returns:{type:{name:"bool"}},description:'Returns true if the current user has to choose for an account recovery setting.\nIn that case, the organization account recovery setting has to be set with "mandatory" or "opt-out",\nplus the user shouldn\'t have made a choice yet.'},{name:"isPolicyEnabled",docblock:"Return true if the policy is not set to POLICY_DISABLED\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the policy is not set to POLICY_DISABLED"},{name:"STATUS_PENDING",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"POLICY_DISABLED",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"POLICY_MANDATORY",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"POLICY_OPT_OUT",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"STATUS_APPROVED",docblock:null,modifiers:["static","get"],params:[],returns:null}],displayName:"AccountRecoveryUserContextProvider",props:{context:{description:"",type:{name:"any"},required:!0},children:{description:"",type:{name:"any"},required:!1},accountRecoveryUserService:{description:"",type:{name:"object"},required:!0}}}},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter((dialog=>dialogKey!==dialog.key))}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,(dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props})))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/shared/context/Rbac/RbacContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{eu:()=>RbacContext,Ay:()=>Rbac_RbacContext,x6:()=>withRbac});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),controlFunctionEnumeration=__webpack_require__("./src/shared/services/rbacs/controlFunctionEnumeration.js"),denyControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/denyControlFunction.js"),allowControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/allowControlFunction.js");class GetControlFunctionService{static getByRbac(rbac){const controlFunction=controlFunctionEnumeration.HJ[rbac.controlFunction];return controlFunction||(console.warn(`Could not find control function for the given rbac entity (${rbac.id})`),denyControlFunction.A)}static getDefaultForAdminAndUiAction(uiActionName){return controlFunctionEnumeration.Y9[uiActionName]||allowControlFunction.A}static getDefaultForUserAndUiAction(uiActionName){return controlFunctionEnumeration.uy[uiActionName]||allowControlFunction.A}}var roleEntity=__webpack_require__("./src/shared/models/entity/role/roleEntity.js");class CanUse{static canRoleUseUiAction(user,rbacs,actionName){if(window.chrome?.webview){const rbac=rbacs.findRbacByActionName(actionName);return this.getByRbacOrDefault(rbac,actionName,user)}const role=new roleEntity.A(user.role);if(role.isAdmin()){return GetControlFunctionService.getDefaultForAdminAndUiAction(actionName).execute()}const rbac=rbacs.findRbacByRoleAndUiActionName(role,actionName);return this.getByRbacOrDefault(rbac,actionName,user)}static getByRbacOrDefault(rbac,actionName,user){if(rbac){return GetControlFunctionService.getByRbac(rbac).execute(user)}return GetControlFunctionService.getDefaultForUserAndUiAction(actionName).execute()}}const RbacContext=react.createContext({canIUseUiAction:()=>{}});class RbacContextProvider extends react.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{canIUseUiAction:this.canIUseUiAction.bind(this)}}canIUseUiAction(actionName){return CanUse.canRoleUseUiAction(this.props.context.loggedInUser,this.props.context.rbacs,actionName)}render(){return react.createElement(RbacContext.Provider,{value:this.state},this.props.children)}}RbacContextProvider.propTypes={context:prop_types_default().any,children:prop_types_default().any};const Rbac_RbacContext=(0,AppContext.L)(RbacContextProvider);function withRbac(WrappedComponent){return class WithRbac extends react.Component{render(){return react.createElement(RbacContext.Consumer,null,(rbacContext=>react.createElement(WrappedComponent,{rbacContext,...this.props})))}}}RbacContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"canIUseUiAction",docblock:"Check if the user can use the given ui action.\n@param {string} actionName The name of the UI action to check for.\n@return {boolean}",modifiers:[],params:[{name:"actionName",description:"The name of the UI action to check for.",type:{name:"string"},optional:!1}],returns:{type:{name:"boolean"}},description:"Check if the user can use the given ui action."}],displayName:"RbacContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/context/Rbac/RbacContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E2:()=>defaultAdministratorRbacContext,UO:()=>denyRbacContext,mM:()=>defaultUserRbacContext});__webpack_require__("./src/shared/models/entity/groupUser/groupUserEntity.test.data.js"),__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");function defaultAdministratorRbacContext(data={}){return{canIUseUiAction:()=>!0,...data}}function defaultUserRbacContext(data={}){return{canIUseUiAction:()=>!0,...data}}function denyRbacContext(data={}){return{canIUseUiAction:()=>!1,...data}}},"./src/shared/models/entity/avatar/avatarEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fp:()=>defaultFullAvatarDto,KA:()=>defaultAvatarDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const defaultAvatarDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),url:{medium:"/avatars/view/e6927385-195c-4c7f-a107-a202ea86de40/medium.jpg",small:"/avatars/view/e6927385-195c-4c7f-a107-a202ea86de40/small.jpg"},created:"2023-06-03T12:03:46+00:00",modified:"2023-06-03T12:03:46+00:00",...data}),defaultFullAvatarDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),created:"2023-06-03T12:03:46+00:00",modified:"2023-06-03T12:03:46+00:00",user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),foreign_key:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),model:"Avatar",filename:"carol.png",filesize:733439,mime_type:"image/png",extension:"png",hash:"7445a736df60a1ac1bfdab8fc5b842a95c495aec",path:"Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.png",adapter:"Local",url:{medium:"img/public/Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.a99472d5.png",small:"img/public/Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.65a0ba70.png"},...data})},"./src/shared/models/entity/groupUser/groupUserEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M2:()=>defaultGroupUser});var uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");const defaultGroupUser=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),group_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),is_admin:!1,created:"2022-01-13T13:19:04.661Z",...data})},"./src/shared/models/entity/profile/ProfileEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>defaultProfileDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_avatar_avatarEntity_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/avatar/avatarEntity.test.data.js");const defaultProfileDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),first_name:"Ada",last_name:"Lovelace",created:"2020-04-20T11:32:17+00:00",modified:"2020-04-20T11:32:17+00:00",avatar:(0,_avatar_avatarEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.KA)(),...data})},"./src/shared/models/entity/role/roleEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js");class RoleEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",enum:[RoleEntity.ROLE_ADMIN,RoleEntity.ROLE_USER,RoleEntity.ROLE_GUEST,RoleEntity.ROLE_ROOT]},description:{type:"string",maxLength:255},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"}}}}get id(){return this._props.id}get name(){return this._props.name}get description(){return this._props.description||null}get created(){return this._props.created||null}get modified(){return this._props.modified||null}isAdmin(){return this.name===RoleEntity.ROLE_ADMIN}static get ENTITY_NAME(){return"Role"}static get ROLE_ADMIN(){return"admin"}static get ROLE_USER(){return"user"}static get ROLE_GUEST(){return"guest"}static get ROLE_ROOT(){return"root"}}const __WEBPACK_DEFAULT_EXPORT__=RoleEntity},"./src/shared/models/entity/user/userEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HI:()=>defaultAdminUserDto,cI:()=>defaultUserDto,VV:()=>users});var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ProfileEntity_test_data=__webpack_require__("./src/shared/models/entity/profile/ProfileEntity.test.data.js"),role_test_data=__webpack_require__("./src/shared/models/entity/role/role.test.data.js"),groupUserEntity_test_data=__webpack_require__("./src/shared/models/entity/groupUser/groupUserEntity.test.data.js"),keys=__webpack_require__("./test/fixture/pgpKeys/keys.js");const defaultUserDto=(data={},options={})=>{const defaultData={id:(0,v4.A)(),role_id:role_test_data.ol,username:"ada@passbolt.com",active:!0,deleted:!1,created:"2020-04-20T11:32:16+00:00",modified:"2020-04-20T11:32:16+00:00",last_logged_in:"2022-07-04T13:39:25+00:00",is_mfa_enabled:!1,...data};!data.role&&options?.withRole&&(defaultData.role=(0,role_test_data.Dm)({id:defaultData.role_id}));const profile=data?.profile||(0,ProfileEntity_test_data.S)({user_id:defaultData.id,...data?.profile});if(defaultData.profile=profile,!data.groups_users&&options?.withGroupsUsers){const groupsUsersCount="number"==typeof options?.withGroupsUsers?options?.withGroupsUsers:1;defaultData.groups_users=[];for(let i=0;i<groupsUsersCount;i++){const groupUserDto=(0,groupUserEntity_test_data.M2)({user_id:defaultData.id});defaultData.groups_users.push(groupUserDto)}}return!data.gpgkey&&options?.withGpgkey&&(defaultData.gpgkey=((data={})=>({id:"91d8a7fd-3ab3-5e98-a4a5-0d8694ff23b9",user_id:"d57c10f5-639d-5160-9c81-8a0c6c4ec856",armored_key:keys.u.ada.public,bits:4096,uid:"Passbolt Default Admin <admin@passbolt.com>",key_id:"D06426D3",fingerprint:"0C1D1761110D1E33C9006D1A5B1B332ED06426D3",type:"RSA",expires:null,key_created:"2015-10-31T16:21:43+00:00",deleted:!1,created:"2020-04-20T11:32:18+00:00",modified:"2020-04-20T11:32:18+00:00",...data}))()),!data.account_recovery_user_setting&&options?.withAccountRecoveryUserSetting&&(defaultData.account_recovery_user_setting=(data=>{const defaultData={user_id:(0,v4.A)(),status:"approved"};return Object.assign(defaultData,data||{})})()),!data.pending_account_recovery_request&&options?.withPendingAccountRecoveryUserRequest&&(defaultData.pending_account_recovery_request=((data={})=>({id:(0,v4.A)(),status:"pending",created:"2020-05-04T20:31:45+00:00",modified:"2020-05-04T20:31:45+00:00",created_by:(0,v4.A)(),modified_by:(0,v4.A)(),...data}))()),defaultData},defaultAdminUserDto=(data={})=>{const role=(0,role_test_data.bd)();return defaultUserDto({role,...data})},users={ada:defaultUserDto({id:"f848277c-5398-58f8-a82a-72397af2d450",username:"ada@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Ada",last_name:"Lovelace"})}),admin:defaultAdminUserDto({id:"f642271d-bbb1-401e-bbd1-7ec370f8e19b",username:"admin@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Admin",last_name:"User"})}),betty:defaultUserDto({id:"e97b14ba-8957-57c9-a357-f78a6e1e1a46",username:"betty@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Betty",last_name:"Holberton"})})}},"./src/shared/services/rbacs/controlFunctionEnumeration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HJ:()=>controlFunctionResolutions,HK:()=>controlFunctions,Y9:()=>defaultAdminUiActionControlResolution,uy:()=>defaultUserUiActionControlResolution});var allowControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/allowControlFunction.js"),ControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/ControlFunction.js");class AllowIfGroupManagerInOneGroupFunction extends ControlFunction.A{static execute(user){return user.groups_users.some((group=>group.is_admin))}}var denyControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/denyControlFunction.js"),uiActionEnumeration=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js");const controlFunctions={ALLOW:"Allow",DENY:"Deny",ALLOW_IF_GROUP_MANAGER_IN_ONE_GROUP:"AllowIfGroupManagerInOneGroup"},controlFunctionResolutions={[controlFunctions.ALLOW]:allowControlFunction.A,[controlFunctions.DENY]:denyControlFunction.A,[controlFunctions.ALLOW_IF_GROUP_MANAGER_IN_ONE_GROUP]:AllowIfGroupManagerInOneGroupFunction},defaultAdminUiActionControlResolution={[uiActionEnumeration.e.FOLDERS_USE]:controlFunctionResolutions[controlFunctions.ALLOW]},defaultUserUiActionControlResolution={[uiActionEnumeration.e.ADMINSTRATION_VIEW_WORKSPACE]:controlFunctionResolutions[controlFunctions.DENY]}},"./src/shared/services/rbacs/controlFunctions/ControlFunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ControlFunction});class ControlFunction{}},"./src/shared/services/rbacs/controlFunctions/allowControlFunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AllowControlFunction});var _ControlFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/services/rbacs/controlFunctions/ControlFunction.js");class AllowControlFunction extends _ControlFunction__WEBPACK_IMPORTED_MODULE_0__.A{static execute(){return!0}}},"./src/shared/services/rbacs/controlFunctions/denyControlFunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DenyControlFunction});var _ControlFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/services/rbacs/controlFunctions/ControlFunction.js");class DenyControlFunction extends _ControlFunction__WEBPACK_IMPORTED_MODULE_0__.A{static execute(){return!1}}},"./src/shared/services/rbacs/uiActionEnumeration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>uiActions});const uiActions={FOLDERS_USE:"Folders.use",RESOURCES_IMPORT:"Resources.import",RESOURCES_EXPORT:"Resources.export",RESOURCES_SEE_ACTIVITIES:"Resources.seeActivities",RESOURCES_SEE_COMMENTS:"Resources.seeComments",SECRETS_PREVIEW:"Secrets.preview",SECRETS_COPY:"Secrets.copy",SHARE_VIEW_LIST:"Share.viewList",TAGS_USE:"Tags.use",USERS_VIEW_WORKSPACE:"Users.viewWorkspace",MOBILE_TRANSFER:"Mobile.transfer",DESKTOP_TRANSFER:"Desktop.transfer",PROFIL_ACCOUNT_RECOVERY:"Profil.accountRecovery",ADMINSTRATION_VIEW_WORKSPACE:"Administration.viewWorkspace",DUO_CONFIGURATION:"Duo.configuration",AVATAR_UPLOAD:"Avatar.upload",SHARE_FOLDER:"Folders.share"}},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}},"./node_modules/validator/es/lib/util/assertString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function assertString(input){if(!("string"==typeof input||input instanceof String)){var invalidType=_typeof(input);throw null===input?invalidType="null":"object"===invalidType&&(invalidType=input.constructor.name),new TypeError("Expected a string but received a ".concat(invalidType))}}__webpack_require__.d(__webpack_exports__,{A:()=>assertString})}}]);