/*! For license information please see 1206.e881652b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[1206],{"./src/img/svg/search.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSearch(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:25,height:24,fill:"none",viewBox:"0 0 25 24"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.597 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16M21.597 21l-4.35-4.35"})))}},"./src/react-extension/components/Common/Select/Select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Select_Select});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const PropTypes_CustomPropTypes=new class CustomPropTypes{allPropTypes=(...types)=>(...args)=>{const errors=types.map((type=>type(...args))).filter(Boolean);if(0===errors.length)return;const message=errors.map((e=>e.message)).join("\n");return new Error(message)}};var search=__webpack_require__("./src/img/svg/search.svg"),caret_down=__webpack_require__("./src/img/svg/caret_down.svg");class Select extends react.Component{constructor(props){super(props),this.state=this.getDefaultState(props),this.bindCallback(),this.createRefs()}getDefaultState(props){return{selectedValue:props.value,search:"",open:!1,style:void 0}}get listItemsFiltered(){const itemsFiltered=this.props.items.filter((item=>item.value!==this.state.selectedValue));return this.props.search&&""!==this.state.search?this.getItemsMatch(itemsFiltered,this.state.search):itemsFiltered}get selectedItemLabel(){const item=this.props.items&&this.props.items.find((item=>item.value===this.state.selectedValue));return item&&item.label||react.createElement(react.Fragment,null,"Â ")}static getDerivedStateFromProps(props,state){return void 0!==props.value&&props.value!==state.selectedValue?{selectedValue:props.value}:null}bindCallback(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleDocumentScrollEvent=this.handleDocumentScrollEvent.bind(this),this.handleSelectClick=this.handleSelectClick.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleItemClick=this.handleItemClick.bind(this),this.handleSelectKeyDown=this.handleSelectKeyDown.bind(this),this.handleItemKeyDown=this.handleItemKeyDown.bind(this),this.handleBlur=this.handleBlur.bind(this)}createRefs(){this.selectedItemRef=react.createRef(),this.selectItemsRef=react.createRef(),this.itemsRef=react.createRef()}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.addEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.removeEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}handleDocumentClickEvent(event){this.selectedItemRef.current.contains(event.target)||this.selectItemsRef.current.contains(event.target)||this.closeSelect()}handleDocumentContextualMenuEvent(event){this.selectedItemRef.current.contains(event.target)||this.selectItemsRef.current.contains(event.target)||this.closeSelect()}handleDocumentDragStartEvent(){this.closeSelect()}handleDocumentScrollEvent(event){this.itemsRef.current.contains(event.target)||this.selectItemsRef.current.contains(event.target)||this.closeSelect()}handleSelectClick(){if(this.props.disabled)this.closeSelect();else{const open=!this.state.open;open?this.forceVisibilitySelect():this.resetStyleSelect(),this.setState({open})}}getFirstParentWithTransform(){let currentElement=this.selectedItemRef.current.parentElement;for(;null!==currentElement&&""===currentElement.style.getPropertyValue("transform");)currentElement=currentElement.parentElement;return currentElement}forceVisibilitySelect(){const boundingRect=this.selectedItemRef.current.getBoundingClientRect(),{width,height}=boundingRect;let{top,left}=boundingRect;const relativeParent=this.getFirstParentWithTransform();if(relativeParent){const relativeParentPosition=relativeParent.getBoundingClientRect();top-=relativeParentPosition.top,left-=relativeParentPosition.left}const style={position:"fixed",zIndex:1,width,height,top,left};this.setState({style})}handleBlur(event){event.currentTarget.contains(event.relatedTarget)||this.closeSelect()}closeSelect(){this.resetStyleSelect(),this.setState({open:!1})}resetStyleSelect(){this.setState({style:undefined})}handleInputChange(event){const target=event.target,value=target.value,name=target.name;this.setState({[name]:value})}handleItemClick(item){if(this.setState({selectedValue:item.value,open:!1}),"function"==typeof this.props.onChange){const event={target:{value:item.value,name:this.props.name}};this.props.onChange(event)}this.closeSelect()}getItemsMatch(items,keyword){const words=keyword&&keyword.split(/\s+/)||[""],matchWord=(word,value)=>(word=>new RegExp((word=>word.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(word),"i"))(word).test(value);return items.filter((item=>words.every((word=>matchWord(word,item.label)))))}handleSelectKeyDown(event){switch(event.keyCode){case 13:return event.stopPropagation(),void this.handleSelectClick();case 40:return event.preventDefault(),event.stopPropagation(),void(this.state.open?this.focusItem(0):this.handleSelectClick());case 38:return event.preventDefault(),event.stopPropagation(),void(this.state.open?this.focusItem(this.listItemsFiltered.length-1):this.handleSelectClick());case 27:return event.stopPropagation(),void this.closeSelect();default:return}}focusItem(index){this.itemsRef.current.childNodes[index]?.focus()}handleItemKeyDown(event,item){switch(event.keyCode){case 13:return event.stopPropagation(),void this.handleItemClick(item);case 40:return event.stopPropagation(),event.preventDefault(),void(event.target.nextSibling?event.target.nextSibling.focus():this.focusItem(0));case 38:return event.stopPropagation(),event.preventDefault(),void(event.target.previousSibling?event.target.previousSibling.focus():this.focusItem(this.listItemsFiltered.length-1));default:return}}hasFilteredItems(){return this.listItemsFiltered.length>0}render(){return react.createElement("div",{className:`select-container ${this.props.className}`,style:{width:this.state.style?.width,height:this.state.style?.height}},react.createElement("div",{onKeyDown:this.handleSelectKeyDown,onBlur:this.handleBlur,id:this.props.id,className:`select ${this.props.direction} ${this.state.open?"open":""}`,style:this.state.style},react.createElement("div",{ref:this.selectedItemRef,className:"selected-value "+(this.props.disabled?"disabled":""),tabIndex:this.props.disabled?-1:0,onClick:this.handleSelectClick},react.createElement("span",{className:"value"},this.selectedItemLabel),react.createElement(caret_down.A,null)),react.createElement("div",{ref:this.selectItemsRef,className:"select-items "+(this.state.open?"visible":"")},this.props.search&&react.createElement(react.Fragment,null,react.createElement("input",{className:"search-input",name:"search",value:this.state.search,onChange:this.handleInputChange,type:"text"}),react.createElement(search.A,{className:"search"})),react.createElement("ul",{ref:this.itemsRef,className:"items"},this.hasFilteredItems()&&this.listItemsFiltered.map((item=>react.createElement("li",{tabIndex:item.disabled?-1:0,key:item.value,className:`option ${item.value}`,onKeyDown:event=>this.handleItemKeyDown(event,item),onClick:()=>this.handleItemClick(item)},item.label))),!this.hasFilteredItems()&&this.props.search&&react.createElement("li",{className:"option no-results"},react.createElement(es.x6,null,"No results match")," ",react.createElement("span",null,this.state.search))))))}}Select.defaultProps={id:"",name:"select",className:"",direction:"bottom"};Select.propTypes={id:prop_types_default().string,name:prop_types_default().string,className:prop_types_default().string,direction:prop_types_default().oneOf(Object.values({top:"top",bottom:"bottom",left:"left",right:"right"})),search:prop_types_default().bool,items:prop_types_default().array,value:PropTypes_CustomPropTypes.allPropTypes(prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number,prop_types_default().bool]),((props,propName,componentName)=>{const value=props[propName],items=props.items;if(null!==value&&items.length>0&&items.every((item=>item.value!==value)))return new Error(`Invalid prop ${propName} passed to ${componentName}. Expected the value ${value} in items.`)})),disabled:prop_types_default().bool,onChange:prop_types_default().func};const Select_Select=(0,es.CI)("common")(Select);Select.__docgenInfo={description:"Display of the Select component",methods:[{name:"getDefaultState",docblock:"Default state\n@param props Component props",modifiers:[],params:[{name:"props",description:"Component props",optional:!1}],returns:null,description:"Default state"},{name:"listItemsFiltered",docblock:"Get the list item filtered\n@returns {*[]|*}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[{name:"Array",elements:[{name:"mixed"}]},{name:"mixed"}]}},description:"Get the list item filtered"},{name:"selectedItemLabel",docblock:"Get the selected item label\n@returns {*|string}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[{name:"mixed"},{name:"string"}]}},description:"Get the selected item label"},{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"createRefs",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"handleDocumentClickEvent",docblock:"Handle click events on document. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle click events on document. Hide the component if the click occurred outside of the component."},{name:"handleDocumentContextualMenuEvent",docblock:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component."},{name:"handleDocumentDragStartEvent",docblock:"Handle drag start event on document. Hide the component if any.",modifiers:[],params:[],returns:null,description:"Handle drag start event on document. Hide the component if any."},{name:"handleDocumentScrollEvent",docblock:"Handle scroll event on document. Hide the component if any.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle scroll event on document. Hide the component if any."},{name:"handleSelectClick",docblock:"Toggle select",modifiers:[],params:[],returns:null,description:"Toggle select"},{name:"getFirstParentWithTransform",docblock:"Get the first parent from this element that have a transfrom CSS property set.\nIt's useful for calculation of a correction of an offset for the dropdown",modifiers:[],params:[],returns:null,description:"Get the first parent from this element that have a transfrom CSS property set.\nIt's useful for calculation of a correction of an offset for the dropdown"},{name:"forceVisibilitySelect",docblock:"Force the visibility of the select with fixed position",modifiers:[],params:[],returns:null,description:"Force the visibility of the select with fixed position"},{name:"handleBlur",docblock:"Handle blur\n@param event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle blur"},{name:"closeSelect",docblock:"Close select",modifiers:[],params:[],returns:null,description:"Close select"},{name:"resetStyleSelect",docblock:"Reset the style of the select",modifiers:[],params:[],returns:null,description:"Reset the style of the select"},{name:"handleInputChange",docblock:"Handle form input changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"event",optional:!1}],returns:{type:{name:"void"}},description:"Handle form input changes."},{name:"handleItemClick",docblock:"Handle item click.\n@params {event} The react event\n@params {item} The item selected\n@returns {void}",modifiers:[],params:[{name:"item",optional:!1}],returns:{type:{name:"void"}},description:"Handle item click."},{name:"getItemsMatch",docblock:"Get items who match the search\n@param items\n@param keyword\n@returns {*}",modifiers:[],params:[{name:"items",optional:!1},{name:"keyword",optional:!1}],returns:{type:{name:"mixed"}},description:"Get items who match the search"},{name:"handleSelectKeyDown",docblock:"Handle click on selected item\n@param event The React event",modifiers:[],params:[{name:"event",description:"The React event",optional:!1}],returns:null,description:"Handle click on selected item"},{name:"focusItem",docblock:"Focus the item at the index\n@param index The index",modifiers:[],params:[{name:"index",description:"The index",optional:!1}],returns:null,description:"Focus the item at the index"},{name:"handleItemKeyDown",docblock:"Handle click on option item\n@param event The React event\n@param item The item",modifiers:[],params:[{name:"event",description:"The React event",optional:!1},{name:"item",description:"The item",optional:!1}],returns:null,description:"Handle click on option item"},{name:"hasFilteredItems",docblock:"Has filtered items\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has filtered items"}],displayName:"Select",props:{id:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},name:{defaultValue:{value:'"select"',computed:!1},description:"",type:{name:"string"},required:!1},className:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},direction:{defaultValue:{value:"'bottom'",computed:!1},description:"",type:{name:"enum",value:[{value:'"top"',computed:!1},{value:'"bottom"',computed:!1},{value:'"left"',computed:!1},{value:'"right"',computed:!1}]},required:!1},search:{description:"",type:{name:"bool"},required:!1},items:{description:"",type:{name:"array"},required:!1},value:{description:"",type:{name:"custom",raw:"CustomPropTypes.allPropTypes(\n  PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool]),\n  isValueInItems\n)"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}}}}}]);