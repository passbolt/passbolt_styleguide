/*! For license information please see react-extension-components-Administration-ApiAdministrationWorkspace-test-stories.34a6c958.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6137],{"./src/react-extension/components/Administration/ApiAdministrationWorkspace.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{HealthcheckPage:()=>HealthcheckPage,MfaPolicyPage:()=>MfaPolicyPage,UserDirectoryPage:()=>UserDirectoryPage,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ApiAdministrationWorkspace_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),AdministrationWorkspace=__webpack_require__("./src/react-extension/components/Administration/AdministrationWorkspace.js"),RbacContext=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ContextualMenuContext=__webpack_require__("./src/react-extension/contexts/ContextualMenuContext.js"),ManageDialogs=__webpack_require__("./src/react-extension/components/Common/Dialog/ManageDialogs/ManageDialogs.js"),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),MFAContext=__webpack_require__("./src/react-extension/contexts/MFAContext.js"),DisplayActionFeedbacks=__webpack_require__("./src/react-extension/components/Common/ActionFeedback/DisplayActionFeedbacks.js"),AnnouncementContext=__webpack_require__("./src/react-extension/contexts/AnnouncementContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),TranslationProvider=__webpack_require__("./src/react-extension/components/Common/Internationalisation/TranslationProvider.js"),NavigationContext=__webpack_require__("./src/react-extension/contexts/NavigationContext.js"),ManageAnnouncements=__webpack_require__("./src/react-extension/components/Announcement/ManageAnnouncements/ManageAnnouncements.js"),ManageContextualMenu=__webpack_require__("./src/react-extension/components/Common/ContextualMenu/ManageContextualMenu.js"),AdministrationWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.test.data.js"),ApiAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ApiAppContext.test.data.js"),SiteSettings=__webpack_require__("./src/shared/lib/Settings/SiteSettings.js"),rbacsCollection=__webpack_require__("./src/shared/models/entity/rbac/rbacsCollection.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),apiClientOptions=__webpack_require__("./src/shared/lib/apiClient/apiClientOptions.js"),apiClient_apiClient=__webpack_require__("./src/shared/lib/apiClient/apiClient.js"),PassboltApiFetchError=__webpack_require__("./src/shared/lib/Error/PassboltApiFetchError.js");class PassboltSubscriptionError extends Error{constructor(message,subscription={}){super(message),this.name="PassboltSubscriptionError",this.subscription=subscription}}const Error_PassboltSubscriptionError=PassboltSubscriptionError;var abstractService=__webpack_require__("./src/shared/services/api/abstract/abstractService.js");class RbacMeService extends abstractService.A{constructor(apiClientOptions){super(apiClientOptions,RbacMeService.RESOURCE_NAME)}static get RESOURCE_NAME(){return"/rbacs/me"}static getSupportedContainOptions(){return["action","ui_action"]}async findMe(contains){const options=contains?this.formatContainOptions(contains,RbacMeService.getSupportedContainOptions()):null;return(await this.apiClient.findAll(options)).body}}const rbacMeService=RbacMeService;const auth_AuthLogoutService=class AuthLogoutService{constructor(apiClientOptions){apiClientOptions.setResourceName("auth"),this.apiClient=new apiClient_apiClient.O(apiClientOptions)}async logout(){const url=this.apiClient.buildUrl(`${this.apiClient.baseUrl}/logout`,{}),response=await this.apiClient.sendRequest("POST",url,null,{redirect:"manual"});if(!(response.ok||0===response.status))return this._logoutLegacy()}async _logoutLegacy(){const url=this.apiClient.buildUrl(`${this.apiClient.baseUrl}/logout`,{}),response=await this.apiClient.sendRequest("GET",url,null,{redirect:"manual"});if(!(response.ok||0===response.status))throw new PassboltApiFetchError.A("An unexpected error happened during the legacy logout process",{code:response.status})}};class ApiAppContextProvider extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.authLogoutService=new auth_AuthLogoutService(this.getApiClientOptions())}async componentDidMount(){await this.getLoggedInUser(),await this.getSiteSettings(),await this.getRbacs(),this.initLocale(),this.removeSplashScreen();const skeleton=document.querySelector(".temporary.skeleton");skeleton&&skeleton.remove()}componentWillUnmount(){clearTimeout(this.state.onExpiredSession)}get defaultState(){return{name:"api",loggedInUser:null,rbacs:null,siteSettings:null,trustedDomain:this.baseUrl,basename:new URL(this.baseUrl).pathname,getApiClientOptions:this.getApiClientOptions.bind(this),locale:null,displayTestUserDirectoryDialogProps:{userDirectoryTestResult:null},setContext:context=>{this.setState(context)},onLogoutRequested:()=>this.onLogoutRequested(),onCheckIsAuthenticatedRequested:()=>this.onCheckIsAuthenticatedRequested(),onExpiredSession:this.onExpiredSession.bind(this),onGetSubscriptionKeyRequested:()=>this.onGetSubscriptionKeyRequested(),onRefreshLocaleRequested:this.onRefreshLocaleRequested.bind(this)}}get isReady(){return null!==this.state.loggedInUser&&null!==this.state.rbacs&&null!==this.state.siteSettings&&null!==this.state.locale}get baseUrl(){const baseElement=document.getElementsByTagName("base")&&document.getElementsByTagName("base")[0];return baseElement?baseElement.attributes.href.value.replace(/\/*$/g,""):(console.error("Unable to retrieve the page base tag"),"")}getApiClientOptions(){return(new apiClientOptions.k).setBaseUrl(this.state.trustedDomain)}async getLoggedInUser(){const apiClientOptions=this.getApiClientOptions().setResourceName("users"),apiClient=new apiClient_apiClient.O(apiClientOptions),loggedInUser=(await apiClient.get("me")).body;this.setState({loggedInUser})}async getRbacs(){let rbacsDto=[];if(this.state.siteSettings.canIUse("rbacs")){const apiClientOptions=this.getApiClientOptions(),rbacService=new rbacMeService(apiClientOptions);rbacsDto=await rbacService.findMe({ui_action:!0})}const rbacs=new rbacsCollection.A(rbacsDto,!0);this.setState({rbacs})}async getSiteSettings(){const apiClientOptions=this.getApiClientOptions().setResourceName("settings"),apiClient=new apiClient_apiClient.O(apiClientOptions),siteSettings=await apiClient.findAll();await this.setState({siteSettings:new SiteSettings.A(siteSettings.body)})}async initLocale(){const userLocale=await this.getUserLocale();if(userLocale)return this.setState({locale:userLocale.locale});const organizationLocale=this.state.siteSettings.locale;return this.setState({locale:organizationLocale})}async getUserLocale(){const userLocaleSettings=(await this.getUserSettings()).find((userSetting=>"locale"===userSetting.property));if(userLocaleSettings)return this.state.siteSettings.supportedLocales.find((supportedLocale=>supportedLocale.locale===userLocaleSettings.value))}async getUserSettings(){const apiClientOptions=this.getApiClientOptions().setResourceName("account/settings"),apiClient=new apiClient_apiClient.O(apiClientOptions);return(await apiClient.findAll()).body}removeSplashScreen(){document.getElementsByTagName("html")[0].classList.remove("launching")}async onLogoutRequested(){await this.authLogoutService.logout(),window.location.href=this.state.trustedDomain}async onCheckIsAuthenticatedRequested(){try{const apiClientOptions=this.getApiClientOptions().setResourceName("auth"),apiClient=new apiClient_apiClient.O(apiClientOptions);return await apiClient.get("is-authenticated"),!0}catch(error){if(error instanceof PassboltApiFetchError.A&&401===error.data.code)return!1;throw error}}onExpiredSession(callback){this.scheduledCheckIsAuthenticatedTimeout=setTimeout((async()=>{await this.onCheckIsAuthenticatedRequested()?this.onExpiredSession(callback):callback()}),6e4)}async onGetSubscriptionKeyRequested(){try{const apiClientOptions=this.getApiClientOptions().setResourceName("ee/subscription"),apiClient=new apiClient_apiClient.O(apiClientOptions);return(await apiClient.get("key")).body}catch(error){if(error instanceof PassboltApiFetchError.A){if(error.data&&402===error.data.code){const subscriptionKey=error.data.body;throw new Error_PassboltSubscriptionError(error.message,subscriptionKey)}}throw error}}onRefreshLocaleRequested(locale){this.state.siteSettings.setLocale(locale),this.initLocale()}render(){return react.createElement(AppContext.A.Provider,{value:this.state},this.isReady&&this.props.children)}}ApiAppContextProvider.propTypes={children:prop_types_default().any};const ApiAppContext=ApiAppContextProvider;ApiAppContextProvider.__docgenInfo={description:"The ApiApp context provider",methods:[{name:"defaultState",docblock:"Default state\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Default state"},{name:"isReady",docblock:"Returns true when the component can be rendered",modifiers:["get"],params:[],returns:null,description:"Returns true when the component can be rendered"},{name:"baseUrl",docblock:"Get the application base url\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the application base url"},{name:"getApiClientOptions",docblock:"Get the API client options\n@returns {ApiClientOptions}",modifiers:[],params:[],returns:{type:{name:"ApiClientOptions"}},description:"Get the API client options"},{name:"getLoggedInUser",docblock:"Retrieve the logged in user.\n@returns {Promise<object>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"object"}]}},description:"Retrieve the logged in user."},{name:"getRbacs",docblock:"Retrieve the rbacs.\n@returns {Promise<object>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"object"}]}},description:"Retrieve the rbacs."},{name:"getSiteSettings",docblock:"Fetch the site settings",modifiers:["async"],params:[],returns:null,description:"Fetch the site settings"},{name:"initLocale",docblock:"Get the locale following this priority:\n1. The user locale if set;\n2. The organization locale;\n@warning Require the site settings to be fetch to work.",modifiers:["async"],params:[],returns:null,description:"Get the locale following this priority:\n1. The user locale if set;\n2. The organization locale;"},{name:"getUserLocale",docblock:"Get the user locale.\n@returns {Promise<object>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"object"}]}},description:"Get the user locale."},{name:"getUserSettings",docblock:"Get the user settings.\n@returns {Promise<array>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"array"}]}},description:"Get the user settings."},{name:"removeSplashScreen",docblock:"Remove the splashscreen.",modifiers:[],params:[],returns:null,description:"Remove the splashscreen."},{name:"onLogoutRequested",docblock:"Listen when the user wants to logout.",modifiers:["async"],params:[],returns:null,description:"Listen when the user wants to logout."},{name:"onCheckIsAuthenticatedRequested",docblock:"Whenever the user authentication status must be checked\n@return {Promise<boolean>}\n@throw Error if an unexpected error occurred while checking the session",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Whenever the user authentication status must be checked"},{name:"onExpiredSession",docblock:"Check when the user session is expired and execute the callback.\n@param {function} callback The callback to execute",modifiers:[],params:[{name:"callback",description:"The callback to execute",type:{name:"function"},optional:!1}],returns:null,description:"Check when the user session is expired and execute the callback."},{name:"onGetSubscriptionKeyRequested",docblock:"Whenever the subsription key is requested\n@return {Promise<Object>}\n@throw Error if an unexpected error occurred while get the subscription key",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"Object"}]}},description:"Whenever the subsription key is requested"},{name:"onRefreshLocaleRequested",docblock:"Refresh the organization locale\n@param locale",modifiers:[],params:[{name:"locale",optional:!1}],returns:null,description:"Refresh the organization locale"}],displayName:"ApiAppContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}};var siteSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js");const mock_MockApiAppContextProvider=class MockApiAppContextProvider extends ApiAppContext{get baseUrl(){return document.baseURI}getSiteSettings(){this.setState({siteSettings:new SiteSettings.A(siteSettings.A)})}async getRbacs(){this.setState({rbacs:new rbacsCollection.A([],!0)})}};var MockFetch=__webpack_require__("./src/react-extension/test/mock/MockFetch.js"),mockApiResponse=__webpack_require__("./test/mocks/mockApiResponse.js"),DisplayUserDirectoryAdministration_test_data=__webpack_require__("./src/react-extension/components/Administration/DisplayUserDirectoryAdministration/DisplayUserDirectoryAdministration.test.data.js"),AdministrationUserDirectoryContext=__webpack_require__("./src/react-extension/contexts/Administration/AdministrationUserDirectory/AdministrationUserDirectoryContext.js");const currentAdminUser=DisplayUserDirectoryAdministration_test_data.rB.find((user=>"admin@passbolt.com"===user.username)),mockFetch=new MockFetch.A;mockFetch.addGetFetchRequest(/directorysync\/settings/,(async()=>(0,mockApiResponse._)(DisplayUserDirectoryAdministration_test_data.Yw))),mockFetch.addGetFetchRequest(/account\/settings/,(async()=>(0,mockApiResponse._)([]))),mockFetch.addGetFetchRequest(/users\/me/,(async()=>(0,mockApiResponse._)(currentAdminUser))),mockFetch.addGetFetchRequest(/users*/,(async()=>(0,mockApiResponse._)(DisplayUserDirectoryAdministration_test_data.rB))),mockFetch.addGetFetchRequest(/settings\.json/,(async()=>(0,mockApiResponse._)(siteSettings.A)));const ApiAdministrationWorkspace_test_stories={title:"Workspaces/ApiAdministration",component:AdministrationWorkspace.A,parameters:{css:"api_main",docs:{description:{component:"Api served page for AdministrationWorkspace stories"}}},decorators:[(Story,{args})=>react.createElement(react_router.fS,{initialEntries:[args.routerInitialEntry]},react.createElement(TranslationProvider.A,{loadingPath:"/webAccessibleResources/locales/{{lng}}/{{ns}}.json"},react.createElement(mock_MockApiAppContextProvider,null,react.createElement(RbacContext.Ay,null,react.createElement(MFAContext.Ay,null,react.createElement(ActionFeedbackContext.Ay,null,react.createElement(DialogContext.Ay,null,react.createElement(AnnouncementContext.Ay,null,react.createElement(ContextualMenuContext.Ay,null,react.createElement(DisplayActionFeedbacks.A,null),react.createElement(NavigationContext.Ay,null,react.createElement(react_router.qh,{path:["/app/administration/users-directory","/app/administration/mfa-policy","/app/administration/password-policies","/app/administration/user-passphrase-policies","/app/administration/healthcheck"]},react.createElement(AdministrationWorkspaceContext.Ay,{value:args.administrationWorkspaceContext},react.createElement(AdministrationUserDirectoryContext.Ay,null,react.createElement(ManageContextualMenu.A,null),react.createElement(ManageAnnouncements.A,null),react.createElement(ManageDialogs.A,null),react.createElement(Story,args))))))))))))))]},UserDirectoryPage={args:(0,ApiAppContext_test_data.s)({administrationWorkspaceContext:(0,AdministrationWorkspaceContext_test_data.M)({selectedAdministration:AdministrationWorkspaceContext.UZ.USER_DIRECTORY}),routerInitialEntry:"/app/administration/users-directory"})},MfaPolicyPage={args:{administrationWorkspaceContext:(0,AdministrationWorkspaceContext_test_data.M)({selectedAdministration:AdministrationWorkspaceContext.UZ.MFA_POLICY}),routerInitialEntry:"/app/administration/mfa-policy"}},HealthcheckPage={args:{administrationWorkspaceContext:(0,AdministrationWorkspaceContext_test_data.M)({selectedAdministration:AdministrationWorkspaceContext.UZ.HEALTHCHECK}),routerInitialEntry:"/app/administration/healthcheck"}},__namedExportsOrder=["UserDirectoryPage","MfaPolicyPage","HealthcheckPage"];UserDirectoryPage.parameters={...UserDirectoryPage.parameters,docs:{...UserDirectoryPage.parameters?.docs,source:{originalSource:'{\n  args: defaultAppContext({\n    administrationWorkspaceContext: defaultAdministrationWorkspaceContext({\n      selectedAdministration: AdministrationWorkspaceMenuTypes.USER_DIRECTORY\n    }),\n    routerInitialEntry: "/app/administration/users-directory"\n  })\n}',...UserDirectoryPage.parameters?.docs?.source}}},MfaPolicyPage.parameters={...MfaPolicyPage.parameters,docs:{...MfaPolicyPage.parameters?.docs,source:{originalSource:'{\n  args: {\n    administrationWorkspaceContext: defaultAdministrationWorkspaceContext({\n      selectedAdministration: AdministrationWorkspaceMenuTypes.MFA_POLICY\n    }),\n    routerInitialEntry: "/app/administration/mfa-policy"\n  }\n}',...MfaPolicyPage.parameters?.docs?.source}}},HealthcheckPage.parameters={...HealthcheckPage.parameters,docs:{...HealthcheckPage.parameters?.docs,source:{originalSource:'{\n  args: {\n    administrationWorkspaceContext: defaultAdministrationWorkspaceContext({\n      selectedAdministration: AdministrationWorkspaceMenuTypes.HEALTHCHECK\n    }),\n    routerInitialEntry: "/app/administration/healthcheck"\n  }\n}',...HealthcheckPage.parameters?.docs?.source}}}},"./src/img/svg/heart.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgHeart(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none",viewBox:"0 0 17 16"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{clipPath:"url(#heart_svg__clip0_93_734678)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.497 9.333c.993-.973 2-2.14 2-3.666A3.667 3.667 0 0 0 11.83 2c-1.173 0-2 .333-3 1.333-1-1-1.827-1.333-3-1.333a3.667 3.667 0 0 0-3.667 3.667c0 1.533 1 2.7 2 3.666L8.83 14z"}))))}},"./src/img/svg/info.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgInfo(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:17,height:18,fill:"none",viewBox:"0 0 17 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.5 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15M8.5 12V9M8.5 6h.008"})))}},"./src/img/svg/logout.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgLogout(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6.75 15.75h-3a1.5 1.5 0 0 1-1.5-1.5V3.75a1.5 1.5 0 0 1 1.5-1.5h3M12 12.75 15.75 9 12 5.25M15.75 9h-9"})))}},"./src/img/svg/profile.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,_path3,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgProfile(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75 13.5a1.5 1.5 0 0 0-1.5-1.5h-4.5a1.5 1.5 0 0 0-1.5 1.5"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25 3H3.75a1.5 1.5 0 0 0-1.5 1.5V15a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V4.5a1.5 1.5 0 0 0-1.5-1.5"})),_path3||(_path3=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M6 1.5V3M12 1.5V3"})))}},"./src/react-extension/components/Announcement/ManageAnnouncements/ManageAnnouncements.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_contexts_AnnouncementContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/AnnouncementContext.js");class ManageAnnouncements extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallback()}bindCallback(){this.close=this.close.bind(this)}async close(index){this.props.announcementContext.close(index)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.props.announcementContext.announcements.map((({key,Announcement,AnnouncementProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Announcement,{key,onClose:()=>this.close(key),...AnnouncementProps}))),this.props.children)}}ManageAnnouncements.propTypes={announcementContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_AnnouncementContext__WEBPACK_IMPORTED_MODULE_1__.w2)(ManageAnnouncements);ManageAnnouncements.__docgenInfo={description:"This component acts as an anchor for the different project announcements.",methods:[{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"close",docblock:"Removes the index-th announcement",modifiers:["async"],params:[{name:"index",optional:!1}],returns:null,description:"Removes the index-th announcement"}],displayName:"ManageAnnouncements",props:{announcementContext:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/components/Common/ContextualMenu/ManageContextualMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_contexts_ContextualMenuContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ContextualMenuContext.js");class ManageContextualMenu extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.createRefs(),this.bindCallback()}bindCallback(){this.handleHide=this.handleHide.bind(this)}createRefs(){this.elementRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}handleHide(index){this.props.contextualMenuContext.hide(index)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:this.elementRef},this.props.contextualMenuContext.contextualMenus.map(((contextualMenu,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(contextualMenu.ContextualMenuComponent,{key:index,hide:()=>this.handleHide(index),...contextualMenu.componentProps}))))}}ManageContextualMenu.propTypes={contextualMenuContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_ContextualMenuContext__WEBPACK_IMPORTED_MODULE_1__.t6)(ManageContextualMenu);ManageContextualMenu.__docgenInfo={description:"This component acts as an anchor for the different project contextual menus.",methods:[{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"createRefs",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"handleHide",docblock:"Hide the contextual menu\n@param {int} index The contextual menu to close",modifiers:[],params:[{name:"index",description:"The contextual menu to close",type:{name:"int"},optional:!1}],returns:null,description:"Hide the contextual menu"}],displayName:"ManageContextualMenu",props:{contextualMenuContext:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/components/Common/Dialog/ManageDialogs/ManageDialogs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);class ManageDialogs extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallback()}bindCallback(){this.close=this.close.bind(this)}async close(index){const dialog=this.props.dialogContext.dialogs.find((({key})=>key===index));dialog?.DialogProps?.onClose&&dialog.DialogProps.onClose(),this.props.dialogContext.close(index)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.props.dialogContext.dialogs.map((({key,Dialog,DialogProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Dialog,{key,...DialogProps,onClose:()=>this.close(key)}))),this.props.children)}}ManageDialogs.propTypes={dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_1__.z9)(ManageDialogs);ManageDialogs.__docgenInfo={description:"This component acts as an anchor for the different project dialogs.",methods:[{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"close",docblock:"Removes the index-th dialog",modifiers:["async"],params:[{name:"index",optional:!1}],returns:null,description:"Removes the index-th dialog"}],displayName:"ManageDialogs",props:{dialogContext:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/components/Common/Footer/Footer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_img_svg_heart_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/heart.svg"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js");class Footer extends react__WEBPACK_IMPORTED_MODULE_0__.Component{get privacyUrl(){return this.props.context.siteSettings.privacyLink}get creditsUrl(){return"https://www.passbolt.com/credits"}get unsafeUrl(){return"https://www.passbolt.com/docs/hosting/faq/why-I-see-unsafe-mode-banner/"}get termsUrl(){return this.props.context.siteSettings.termsLink}get versions(){const versions=[],serverVersion=this.props.context.siteSettings.version;return serverVersion&&versions.push(`${this.props.t("Server")} ${serverVersion}`),this.props.context.extensionVersion&&versions.push(`${this.props.t("Client")} ${this.props.context.extensionVersion}`),versions.join(" / ")}get isUnsafeMode(){if(!this.props.context.siteSettings)return!1;const debug=this.props.context.siteSettings.debug,isHttpMode=this.props.context.siteSettings.url.startsWith("http://");return debug||isHttpMode}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("footer",{className:"footer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"footer-links"},this.isUnsafeMode&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:this.unsafeUrl,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Unsafe mode"))),this.termsUrl&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:this.termsUrl,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Terms"))),this.privacyUrl&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:this.privacyUrl,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Privacy"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:this.creditsUrl,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Credits"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,this.versions&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_4__.A,{message:this.versions,direction:"left"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{className:"button button-transparent inline",href:this.creditsUrl,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_heart_svg__WEBPACK_IMPORTED_MODULE_1__.A,null))),!this.versions&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{className:"button button-transparent inline",href:this.creditsUrl,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_heart_svg__WEBPACK_IMPORTED_MODULE_1__.A,null)))))}}Footer.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(Footer));Footer.__docgenInfo={description:"The application footer",methods:[{name:"privacyUrl",docblock:"Returns the terms link url",modifiers:["get"],params:[],returns:null,description:"Returns the terms link url"},{name:"creditsUrl",docblock:"Returns the credits link url",modifiers:["get"],params:[],returns:null,description:"Returns the credits link url"},{name:"unsafeUrl",docblock:"Returns the unsafe url.",modifiers:["get"],params:[],returns:null,description:"Returns the unsafe url."},{name:"termsUrl",docblock:"Returns the privacy link url",modifiers:["get"],params:[],returns:null,description:"Returns the privacy link url"},{name:"versions",docblock:"Return the server (if available) and browser extension version.\ni.e. SERVER_VERSION / BROWSER_EXTENSION_VERSION",modifiers:["get"],params:[],returns:null,description:"Return the server (if available) and browser extension version.\ni.e. SERVER_VERSION / BROWSER_EXTENSION_VERSION"},{name:"isUnsafeMode",docblock:"Returns true if the application is in an unsafe mode",modifiers:["get"],params:[],returns:null,description:"Returns true if the application is in an unsafe mode"}],displayName:"Footer",props:{context:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Navigation/Breadcrumbs/Breadcrumb.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);class Breadcrumb extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border inline ellipsis",onClick:this.props.onClick},this.props.name)}}Breadcrumb.propTypes={name:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=Breadcrumb;Breadcrumb.__docgenInfo={description:"",methods:[],displayName:"Breadcrumb",props:{name:{description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Navigation/Breadcrumbs/Breadcrumbs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);class Breadcrumbs extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){let index=0;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"breadcrumbs"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"menu"},this.props.items&&this.props.items.map((breadcrumb=>(index++,react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:index},breadcrumb))))),this.props.children)}}Breadcrumbs.propTypes={items:prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any};const __WEBPACK_DEFAULT_EXPORT__=Breadcrumbs;Breadcrumbs.__docgenInfo={description:"",methods:[],displayName:"Breadcrumbs",props:{items:{description:"",type:{name:"array"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/components/User/DisplayUserBadgeMenu/DisplayUserBadgeMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_14__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_NavigationContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/NavigationContext.js"),_contexts_AccountRecoveryUserContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/AccountRecoveryUserContext.js"),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_contexts_MFAContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/MFAContext.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_img_svg_profile_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/img/svg/profile.svg"),_img_svg_logout_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/img/svg/logout.svg"),_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/img/svg/close.svg"),_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/img/svg/attention.svg"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js");class DisplayUserBadgeMenu extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks(),this.createRefs()}getDefaultState(){return{open:!1}}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleToggleMenuClick=this.handleToggleMenuClick.bind(this),this.handleProfileClick=this.handleProfileClick.bind(this),this.handleSignOutClick=this.handleSignOutClick.bind(this)}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),this.props.context.siteSettings.canIUse("mfaPolicies")&&this.props.mfaContext.checkMfaChoiceRequired()}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}createRefs(){this.userBadgeMenuRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}handleDocumentClickEvent(event){this.userBadgeMenuRef.current.contains(event.target)||this.closeUserBadgeMenu()}handleDocumentContextualMenuEvent(event){this.userBadgeMenuRef.current.contains(event.target)||this.closeUserBadgeMenu()}handleDocumentDragStartEvent(){this.closeUserBadgeMenu()}closeUserBadgeMenu(){this.setState({open:!1})}getUserFullName(){return this.props.user&&this.props.user.profile?`${this.props.user.profile.first_name} ${this.props.user.profile.last_name}`:"..."}getUserUsername(){return this.props.user&&this.props.user.username?`${this.props.user.username}`:"..."}handleToggleMenuClick(e){e.preventDefault();const open=!this.state.open;this.setState({open})}handleProfileClick(){this.props.navigationContext.onGoToUserSettingsProfileRequested(),this.closeUserBadgeMenu()}async handleSignOutClick(){try{await this.props.context.onLogoutRequested()}catch(error){this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_13__.A,{error})}finally{this.closeUserBadgeMenu()}}get attentionRequired(){return this.props.accountRecoveryContext.isAccountRecoveryChoiceRequired()||this.props.mfaContext.isMfaChoiceRequired()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"profile-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"user profile dropdown",ref:this.userBadgeMenuRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"avatar-with-name button avatar-button "+(this.state.open?"open":""),onClick:this.handleToggleMenuClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_4__.A,{user:this.props.user,baseUrl:this.props.baseUrl,attentionRequired:this.attentionRequired})),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"dropdown-content left visible"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"button button-transparent user-profile-close",role:"button",onClick:this.handleToggleMenuClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_10__.A,{className:"svg-icon close"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},"Close")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_4__.A,{user:this.props.user,baseUrl:this.props.baseUrl}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"informations"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},this.getUserFullName()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"email"},this.getUserUsername())),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"manage-account"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"button primary",onClick:this.handleProfileClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_profile_svg__WEBPACK_IMPORTED_MODULE_8__.A,null)," Manage account",this.attentionRequired&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_11__.A,{className:"attention-required"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"no-border sign-out",onClick:this.handleSignOutClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_logout_svg__WEBPACK_IMPORTED_MODULE_9__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Sign out")))))}}DisplayUserBadgeMenu.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,navigationContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().any,mfaContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,accountRecoveryContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,baseUrl:prop_types__WEBPACK_IMPORTED_MODULE_14___default().string,user:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_14___default().object};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_7__.x6)((0,_contexts_NavigationContext__WEBPACK_IMPORTED_MODULE_2__.qN)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_12__.z9)((0,_contexts_AccountRecoveryUserContext__WEBPACK_IMPORTED_MODULE_3__.Le)((0,_contexts_MFAContext__WEBPACK_IMPORTED_MODULE_6__.dg)((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(DisplayUserBadgeMenu)))))));DisplayUserBadgeMenu.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {Object}",modifiers:[],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"createRefs",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"handleDocumentClickEvent",docblock:"Handle click events on document. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle click events on document. Hide the component if the click occurred outside of the component."},{name:"handleDocumentContextualMenuEvent",docblock:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component."},{name:"handleDocumentDragStartEvent",docblock:"Handle drag start event on document. Hide the component if any.",modifiers:[],params:[],returns:null,description:"Handle drag start event on document. Hide the component if any."},{name:"closeUserBadgeMenu",docblock:"Close the user badge menu",modifiers:[],params:[],returns:null,description:"Close the user badge menu"},{name:"getUserFullName",docblock:"Get the user full name\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user full name"},{name:"getUserUsername",docblock:"Get the user username\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user username"},{name:"handleToggleMenuClick",docblock:"Handle click on menu (toggle open state)\n@param {Event} e\n@return {void}",modifiers:[],params:[{name:"e",type:{name:"Event"},optional:!1}],returns:{type:{name:"void"}},description:"Handle click on menu (toggle open state)"},{name:"handleProfileClick",docblock:"Whenever the user wants to navigate to the users settings workspace profile section.",modifiers:[],params:[],returns:null,description:"Whenever the user wants to navigate to the users settings workspace profile section."},{name:"handleSignOutClick",docblock:"Handles the click on Sign out button\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handles the click on Sign out button"},{name:"attentionRequired",docblock:"Returns true if the account recovery needs to be configured.\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the account recovery needs to be configured."}],displayName:"DisplayUserBadgeMenu",props:{context:{description:"",type:{name:"object"},required:!1},navigationContext:{description:"",type:{name:"any"},required:!1},mfaContext:{description:"",type:{name:"object"},required:!1},accountRecoveryContext:{description:"",type:{name:"object"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1}}}},"./src/shared/models/entity/rbac/rbacEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>rbacEntity});var entity=__webpack_require__("./src/shared/models/entity/abstract/entity.js"),entitySchema=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js");class ActionEntity extends entity.A{constructor(dto,options={}){super(entitySchema.A.validate(ActionEntity.ENTITY_NAME,dto,ActionEntity.getSchema()),options)}static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",maxLength:255}}}}get id(){return this._props.id}get name(){return this._props.name}static get ENTITY_NAME(){return"Action"}}const actionEntity=ActionEntity;class UiActionEntity extends entity.A{constructor(dto,options={}){super(entitySchema.A.validate(UiActionEntity.ENTITY_NAME,dto,UiActionEntity.getSchema()),options)}static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",maxLength:255}}}}get id(){return this._props.id}get name(){return this._props.name}static get ENTITY_NAME(){return"UiAction"}}const uiActionEntity=UiActionEntity;var controlFunctionEnumeration=__webpack_require__("./src/shared/services/rbacs/controlFunctionEnumeration.js");class RbacEntity extends entity.A{constructor(dto,options={}){super(entitySchema.A.validate(RbacEntity.ENTITY_NAME,dto,RbacEntity.getSchema()),options),this._props.action&&(this._action=new actionEntity(this._props.action,{clone:!1})),delete this._props.action,this._props.ui_action&&(this._ui_action=new uiActionEntity(this._props.ui_action,{clone:!1})),delete this._props.ui_action}static getSchema(){return{type:"object",required:["id","role_id","foreign_model","foreign_id","control_function"],properties:{id:{type:"string",format:"uuid"},role_id:{type:"string",format:"uuid"},foreign_model:{type:"string",enum:[RbacEntity.FOREIGN_MODEL_ACTION,RbacEntity.FOREIGN_MODEL_UI_ACTION]},foreign_id:{type:"string",format:"uuid"},control_function:{type:"string",enum:[controlFunctionEnumeration.HK.ALLOW,controlFunctionEnumeration.HK.DENY,controlFunctionEnumeration.HK.ALLOW_IF_GROUP_MANAGER_IN_ONE_GROUP]},action:actionEntity.getSchema(),ui_action:uiActionEntity.getSchema()}}}toDto(contain){const result=Object.assign({},this._props);return contain?(this._action&&contain.action&&(result.action=this._action.toDto()),this._ui_action&&contain.ui_action&&(result.ui_action=this._ui_action.toDto()),result):result}toUpdateDto(){return{id:this.id,control_function:this.controlFunction}}toJSON(){return this.toDto(RbacEntity.ALL_CONTAIN_OPTIONS)}get id(){return this._props.id}get roleId(){return this._props.role_id}get foreignModel(){return this._props.foreign_model}get foreignId(){return this._props.foreign_id}get controlFunction(){return this._props.control_function}set controlFunction(controlFunction){entitySchema.A.validateProp("control_function",controlFunction,RbacEntity.getSchema().properties.control_function),this._props.control_function=controlFunction}get action(){return this._action||null}get uiAction(){return this._ui_action||null}static get ENTITY_NAME(){return"Rbac"}static get ALL_CONTAIN_OPTIONS(){return{action:!0,ui_action:!0}}static get FOREIGN_MODEL_ACTION(){return"Action"}static get FOREIGN_MODEL_UI_ACTION(){return"UiAction"}}const rbacEntity=RbacEntity},"./src/shared/models/entity/rbac/rbacsCollection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _rbacEntity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/rbac/rbacEntity.js"),_abstract_entityCollection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityCollection.js"),_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),_role_roleEntity__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js");class RbacsCollection extends _abstract_entityCollection__WEBPACK_IMPORTED_MODULE_1__.A{constructor(collectionDto,excludeInvalid=!1){super(_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_2__.A.validate(RbacsCollection.ENTITY_NAME,collectionDto,RbacsCollection.getSchema())),this._props.forEach((dto=>{try{this._items.push(new _rbacEntity__WEBPACK_IMPORTED_MODULE_0__.A(dto))}catch(e){if(!excludeInvalid)throw e}})),this._props=null}static getSchema(){return{type:"array",items:_rbacEntity__WEBPACK_IMPORTED_MODULE_0__.A.getSchema()}}get rbacs(){return this._items}toBulkUpdateDto(){return this.items.map((rbac=>rbac.toUpdateDto()))}findRbacByRoleAndUiActionName(role,name){if(!(role instanceof _role_roleEntity__WEBPACK_IMPORTED_MODULE_3__.A))throw new Error("The role parameter should be a role entity.");if("string"!=typeof name&&!(name instanceof String))throw new Error("The name parameter should be a valid string.");return this.rbacs.find((rbac=>rbac.roleId===role.id&&rbac.uiAction?.name===name))}findRbacByActionName(name){if("string"!=typeof name&&!(name instanceof String))throw new Error("The name parameter should be a valid string.");return this.rbacs.find((rbac=>rbac.uiAction?.name===name))}push(dto){if(!dto||"object"!=typeof dto)throw new TypeError("The function expect an object as parameter");dto instanceof _rbacEntity__WEBPACK_IMPORTED_MODULE_0__.A&&(dto=dto.toDto(_rbacEntity__WEBPACK_IMPORTED_MODULE_0__.A.ALL_CONTAIN_OPTIONS));const entity=new _rbacEntity__WEBPACK_IMPORTED_MODULE_0__.A(dto);super.push(entity)}addOrReplace(rbac){const index=this.items.findIndex((existingRbac=>existingRbac.id===rbac.id));index>-1?this._items[index]=rbac:this.push(rbac)}remove(rbac){const length=this.items.length;let i=0;for(;i<length;i++){if(this.items[i].id===rbac.id)return void this._items.splice(i,1)}}static get ENTITY_NAME(){return"Rbacs"}static get RULE_UNIQUE_ID(){return"unique_id"}}const __WEBPACK_DEFAULT_EXPORT__=RbacsCollection}}]);