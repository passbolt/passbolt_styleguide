/*! For license information please see react-extension-components-Common-Avatar-UserAvatar-test-stories.f913a327.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[8237],{"./src/react-extension/components/Common/Avatar/UserAvatar.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>UserAvatar_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),UserAvatar=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js");const UserAvatar_test_stories={title:"Components/Common/UserAvatar",component:UserAvatar.A},Initial=(args=>react.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},react.createElement("div",{style:{width:"50%"}},react.createElement(UserAvatar.A,args)),react.createElement("div",{style:{width:"50%"}},react.createElement(UserAvatar.A,{...args,attentionRequired:!0})),react.createElement("div",{className:"avatar-with-name",style:{width:"50%",marginTop:"2.3rem"}},react.createElement(UserAvatar.A,args),react.createElement("div",{className:"details center-cell"},react.createElement("span",{className:"name"},"Name"),react.createElement("span",{className:"email"},"name@passbolt.com"))),react.createElement("div",{className:"avatar-with-name",style:{width:"50%",marginTop:"2.3rem"}},react.createElement(UserAvatar.A,{...args,attentionRequired:!0}),react.createElement("div",{className:"details center-cell"},react.createElement("span",{className:"name"},"Name"),react.createElement("span",{className:"email"},"name@passbolt.com"))))).bind({});Initial.args=function defaultProps(props={}){const _props={user:{first_name:"Dame Steve",last_name:"Shirley"},baseUrl:new URL(window.location.href).origin};return Object.assign(_props,props)}({baseUrl:"https://passbolt.github.io/passbolt_styleguide"});const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:'args => <div style={{\n  display: "flex",\n  flexWrap: "wrap"\n}}>\n    <div style={{\n    width: "50%"\n  }}>\n      <UserAvatar {...args} />\n    </div>\n    <div style={{\n    width: "50%"\n  }}>\n      <UserAvatar {...args} attentionRequired={true} />\n    </div>\n    <div className="avatar-with-name" style={{\n    width: "50%",\n    marginTop: "2.3rem"\n  }}>\n      <UserAvatar {...args} />\n      <div className="details center-cell">\n        <span className="name">Name</span>\n        <span className="email">name@passbolt.com</span>\n      </div>\n    </div>\n    <div className="avatar-with-name" style={{\n    width: "50%",\n    marginTop: "2.3rem"\n  }}>\n      <UserAvatar {...args} attentionRequired={true} />\n      <div className="details center-cell">\n        <span className="name">Name</span>\n        <span className="email">name@passbolt.com</span>\n      </div>\n    </div>\n  </div>',...Initial.parameters?.docs?.source}}}},"./src/img/svg/attention.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgAttention(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#attention_svg__clip0_2062_453107)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"var(--icon-exclamation-background-color)",stroke:"var(--icon-exclamation-border-color)",d:"M9 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-exclamation-color)",d:"M9 6v3M9 12h.008"}))))}},"./src/react-extension/components/Common/Avatar/UserAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Avatar_UserAvatar});var _circle,_path,_circle2,react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const user_default=function SvgUserDefault(props){return react.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:42,height:42,fill:"none",viewBox:"0 0 42 42"},props),_circle||(_circle=react.createElement("circle",{id:"background",cx:21,cy:21,r:21,fill:"var(--Avatar-Avatar-background)"})),_path||(_path=react.createElement("path",{fill:"var(--Avatar-Avatar)",d:"M27.184 26.54H14.852a7.36 7.36 0 0 0-5.362 2.2 7.4 7.4 0 0 0-2.216 5.36v1.145a19.66 19.66 0 0 0 13.672 5.522 19.66 19.66 0 0 0 13.673-5.522V34.1a7.38 7.38 0 0 0-2.199-5.362 7.38 7.38 0 0 0-5.236-2.198"})),_circle2||(_circle2=react.createElement("circle",{cx:21,cy:15.5,r:7.5,fill:"var(--Avatar-Avatar)"})))};var attention=__webpack_require__("./src/img/svg/attention.svg");const DEFAULT_AVATAR_URL_REGEXP=/img\/avatar\/user(_medium)?\.png$/;class UserAvatar extends react.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{error:!1,isLoading:!0}}bindCallbacks(){this.handleError=this.handleError.bind(this),this.handleLoaded=this.handleLoaded.bind(this)}get avatarUrl(){return this.props?.user?.profile?.avatar?.url?.medium}propsHasUrl(){return Boolean(this.avatarUrl)}propsUrlHasProtocol(){return this.avatarUrl.startsWith("https://")||this.avatarUrl.startsWith("http://")}formatUrl(url){return`${this.props.baseUrl}/${url}`}isDefaultAvatarUrlFromApi(){return DEFAULT_AVATAR_URL_REGEXP.test(this.avatarUrl)}getAvatarSrc(){return this.propsHasUrl()?this.propsUrlHasProtocol()?this.avatarUrl:this.formatUrl(this.avatarUrl):null}handleError(){console.error(`Could not load avatar image url: ${this.getAvatarSrc()}`),this.setState({error:!0})}handleLoaded(){this.setState({isLoading:!1})}getAltText(){const user=this.props?.user;return user?.first_name&&user?.last_name?this.props.t("Avatar of user {{first_name}} {{last_name}}.",{firstname:user.first_name,lastname:user.last_name}):"..."}render(){const srcAvatar=this.getAvatarSrc(),shouldDisplayDefaultAvatar=this.state.error||this.isDefaultAvatarUrlFromApi()||!srcAvatar;return react.createElement("div",{className:`${this.props.className}`},react.createElement("div",{className:"default-avatar"},(shouldDisplayDefaultAvatar||this.state.isLoading)&&react.createElement(user_default,null),!shouldDisplayDefaultAvatar&&react.createElement("img",{src:srcAvatar,className:this.state.isLoading?"is-loading":"",onError:this.handleError,onLoad:this.handleLoaded,alt:this.getAltText()})),this.props.attentionRequired&&react.createElement(attention.A,{className:"attention-required"}))}}UserAvatar.defaultProps={className:"avatar user-avatar"},UserAvatar.propTypes={baseUrl:prop_types_default().string,user:prop_types_default().object,attentionRequired:prop_types_default().bool,className:prop_types_default().string,t:prop_types_default().func};const Avatar_UserAvatar=(0,es.CI)("common")(UserAvatar);UserAvatar.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"avatarUrl",docblock:"Returns the current avatar URL from the props\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the current avatar URL from the props"},{name:"propsHasUrl",docblock:"Return true if the user from props contains a valid profile with avatar url properties\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the user from props contains a valid profile with avatar url properties"},{name:"propsUrlHasProtocol",docblock:"Check if the url has a protocol like http or https?\n@todo only check https for now\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the url has a protocol like http or https?"},{name:"formatUrl",docblock:"Format the avatar url to point on the site url.\n@param {string} url The relative url\n@returns {string}",modifiers:[],params:[{name:"url",description:"The relative url",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Format the avatar url to point on the site url."},{name:"isDefaultAvatarUrlFromApi",docblock:"Returns true if the given URL matches a default avatar from the API\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given URL matches a default avatar from the API"},{name:"getAvatarSrc",docblock:"Get the user avatar url. If the user has no avatar defined, return the default one.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar url. If the user has no avatar defined, return the default one."},{name:"handleError",docblock:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server."},{name:"handleLoaded",docblock:"Handle loaded image event.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle loaded image event."},{name:"getAltText",docblock:"Get the user avatar image alternative text.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar image alternative text."}],displayName:"UserAvatar",props:{className:{defaultValue:{value:'"avatar user-avatar"',computed:!1},description:"",type:{name:"string"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},attentionRequired:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}}}]);