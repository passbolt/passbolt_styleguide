/*! For license information please see 6117.847f257f.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6117],{"./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,LP:()=>RESOURCE_TYPE_VERSION_5,Sr:()=>RESOURCE_TYPE_VERSION_4});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js"),_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");const RESOURCE_TYPE_VERSION_4="v4",RESOURCE_TYPE_VERSION_5="v5";class MetadataTypesSettingsEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["default_resource_types","default_folder_type","default_tag_type","default_comment_type","allow_creation_of_v5_resources","allow_creation_of_v5_folders","allow_creation_of_v5_tags","allow_creation_of_v5_comments","allow_creation_of_v4_resources","allow_creation_of_v4_folders","allow_creation_of_v4_tags","allow_creation_of_v4_comments","allow_v4_v5_upgrade","allow_v5_v4_downgrade"],properties:{default_resource_types:{type:"string",enum:[RESOURCE_TYPE_VERSION_4,RESOURCE_TYPE_VERSION_5]},default_folder_type:{type:"string",enum:[RESOURCE_TYPE_VERSION_4,RESOURCE_TYPE_VERSION_5]},default_tag_type:{type:"string",enum:[RESOURCE_TYPE_VERSION_4,RESOURCE_TYPE_VERSION_5]},default_comment_type:{type:"string",enum:[RESOURCE_TYPE_VERSION_4,RESOURCE_TYPE_VERSION_5]},allow_creation_of_v5_resources:{type:"boolean"},allow_creation_of_v5_folders:{type:"boolean"},allow_creation_of_v5_tags:{type:"boolean"},allow_creation_of_v5_comments:{type:"boolean"},allow_creation_of_v4_resources:{type:"boolean"},allow_creation_of_v4_folders:{type:"boolean"},allow_creation_of_v4_tags:{type:"boolean"},allow_creation_of_v4_comments:{type:"boolean"},allow_v4_v5_upgrade:{type:"boolean"},allow_v5_v4_downgrade:{type:"boolean"}}}}static createFromV4Default(){return new MetadataTypesSettingsEntity({default_resource_types:RESOURCE_TYPE_VERSION_4,default_folder_type:RESOURCE_TYPE_VERSION_4,default_tag_type:RESOURCE_TYPE_VERSION_4,default_comment_type:RESOURCE_TYPE_VERSION_4,allow_creation_of_v5_resources:!1,allow_creation_of_v5_folders:!1,allow_creation_of_v5_tags:!1,allow_creation_of_v5_comments:!1,allow_creation_of_v4_resources:!0,allow_creation_of_v4_folders:!0,allow_creation_of_v4_tags:!0,allow_creation_of_v4_comments:!0,allow_v4_v5_upgrade:!1,allow_v5_v4_downgrade:!1})}static createFromDefault(data={}){return new MetadataTypesSettingsEntity({...{default_resource_types:RESOURCE_TYPE_VERSION_4,default_folder_type:RESOURCE_TYPE_VERSION_4,default_tag_type:RESOURCE_TYPE_VERSION_4,default_comment_type:RESOURCE_TYPE_VERSION_4,allow_creation_of_v5_resources:!1,allow_creation_of_v5_folders:!1,allow_creation_of_v5_tags:!1,allow_creation_of_v5_comments:!1,allow_creation_of_v4_resources:!0,allow_creation_of_v4_folders:!0,allow_creation_of_v4_tags:!0,allow_creation_of_v4_comments:!0,allow_v4_v5_upgrade:!1,allow_v5_v4_downgrade:!1},...data})}static createFromV5Default(data={}){return new MetadataTypesSettingsEntity({...{default_resource_types:RESOURCE_TYPE_VERSION_5,default_folder_type:RESOURCE_TYPE_VERSION_4,default_tag_type:RESOURCE_TYPE_VERSION_4,default_comment_type:RESOURCE_TYPE_VERSION_4,allow_creation_of_v5_resources:!0,allow_creation_of_v5_folders:!1,allow_creation_of_v5_tags:!1,allow_creation_of_v5_comments:!1,allow_creation_of_v4_resources:!1,allow_creation_of_v4_folders:!0,allow_creation_of_v4_tags:!0,allow_creation_of_v4_comments:!0,allow_v4_v5_upgrade:!1,allow_v5_v4_downgrade:!1},...data})}validateBuildRules(){let error;if(this.isDefaultResourceTypeV4&&!this.allowCreationOfV4Resources){error=error||new _abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_1__.A;const message="Allow creation of v4 resources should be true when default resources is v4";error.addError("allow_creation_of_v4_resources","is_default",message),error.addError("default_resource_types","allow_create_v4",message)}else if(this.isDefaultResourceTypeV5&&!this.allowCreationOfV5Resources){error=error||new _abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_1__.A;const message="Allow creation of v5 resources should be true when default resources is v5";error.addError("allow_creation_of_v5_resources","is_default",message),error.addError("default_resource_types","allow_create_v5",message)}if(error)throw error}get defaultResourceTypes(){return this._props.default_resource_types}get allowCreationOfV5Resources(){return this._props.allow_creation_of_v5_resources}get allowCreationOfV4Resources(){return this._props.allow_creation_of_v4_resources}get allowCreationOfV5Folders(){return this._props.allow_creation_of_v5_folders}get allowCreationOfV4Folders(){return this._props.allow_creation_of_v4_folders}get allowCreationOfV5Tags(){return this._props.allow_creation_of_v5_tags}get allowCreationOfV4Tags(){return this._props.allow_creation_of_v4_tags}get allowCreationOfV5Comments(){return this._props.allow_creation_of_v5_comments}get allowCreationOfV4Comments(){return this._props.allow_creation_of_v4_comments}get isDefaultResourceTypeV5(){return this._props.default_resource_types===RESOURCE_TYPE_VERSION_5}get isDefaultResourceTypeV4(){return this._props.default_resource_types===RESOURCE_TYPE_VERSION_4}get allowV5V4Downgrade(){return this._props.allow_v5_v4_downgrade}get allowV4V5Upgrade(){return this._props.allow_v4_v5_upgrade}}const __WEBPACK_DEFAULT_EXPORT__=MetadataTypesSettingsEntity},"./src/shared/models/entity/resourceType/resourceTypeEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,zc:()=>PASSWORD_RESOURCE_TYPES});var _entity_abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js"),_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js"),_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js");const PASSWORD_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__._w,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.Bo,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.fl,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.gG,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.a5,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.Eh],TOTP_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.fl,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.KY,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.a5,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.uQ],STANDALONE_TOTP_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.KY,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.uQ],PASSWORD_STRING_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__._w,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.Eh],SECRET_DESCRIPTION_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.Bo,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.fl,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.gG,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.a5],METADATA_DESCRIPTION_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__._w,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.gG,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.a5,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.Eh,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.uQ,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.qr],CUSTOM_FIELDS_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.gG,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.a5,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.qr];class ResourceTypeEntity extends _entity_abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{marshall(){if("string"!=typeof this._props.slug||!(this._props.slug in _resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.Ay.SCHEMAS))return void delete this._props.definition;const resourceTypeDefinitionSchema=_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_3__.Ay.SCHEMAS[this._props.slug],definition=Object.assign({},resourceTypeDefinitionSchema);this._props.definition=definition}static getSchema(){return{type:"object",required:["id","name","slug","definition"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",minLength:1,maxLength:255},slug:{type:"string",minLength:1,maxLength:64},definition:{type:"object"},description:{type:"string",maxLength:255,nullable:!0},resources_count:{type:"integer"},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"},deleted:{type:"string",format:"date-time",nullable:!0}}}}get id(){return this._props.id}get slug(){return this._props.slug}get definition(){return this._props.definition}get resourcesCount(){return this._props.resources_count||null}set deleted(deleted){const propSchema=ResourceTypeEntity.getSchema().properties.deleted;propSchema?.nullable&&null===deleted||_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_1__.A.validateProp("deleted",deleted,propSchema),this._props.deleted=deleted}hasTotp(){return TOTP_RESOURCE_TYPES.includes(this.slug)}hasPassword(){return PASSWORD_RESOURCE_TYPES.includes(this.slug)}hasCustomFields(){return CUSTOM_FIELDS_RESOURCE_TYPES.includes(this.slug)}isStandaloneTotp(){return STANDALONE_TOTP_RESOURCE_TYPES.includes(this.slug)}isPasswordString(){return PASSWORD_STRING_RESOURCE_TYPES.includes(this.slug)}hasSecretDescription(){return SECRET_DESCRIPTION_RESOURCE_TYPES.includes(this.slug)}hasMetadataDescription(){return METADATA_DESCRIPTION_RESOURCE_TYPES.includes(this.slug)}get version(){return this.slug.startsWith("v5")?_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_2__.LP:_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_2__.Sr}isV5(){return this.version===_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_2__.LP}isV4(){return this.version===_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_2__.Sr}isDeleted(){return void 0!==this._props.deleted&&null!==this._props.deleted}}const __WEBPACK_DEFAULT_EXPORT__=ResourceTypeEntity},"./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,Bo:()=>RESOURCE_TYPE_PASSWORD_AND_DESCRIPTION_SLUG,Eh:()=>RESOURCE_TYPE_V5_PASSWORD_STRING_SLUG,KY:()=>RESOURCE_TYPE_TOTP_SLUG,WC:()=>V4_TO_V5_RESOURCE_TYPE_MAPPING,_w:()=>RESOURCE_TYPE_PASSWORD_STRING_SLUG,a5:()=>RESOURCE_TYPE_V5_DEFAULT_TOTP_SLUG,fl:()=>RESOURCE_TYPE_PASSWORD_DESCRIPTION_TOTP_SLUG,gG:()=>RESOURCE_TYPE_V5_DEFAULT_SLUG,qr:()=>RESOURCE_TYPE_V5_CUSTOM_FIELDS_SLUG,uQ:()=>RESOURCE_TYPE_V5_TOTP_SLUG});const RESOURCE_TYPE_PASSWORD_STRING_SLUG="password-string",RESOURCE_TYPE_PASSWORD_AND_DESCRIPTION_SLUG="password-and-description",RESOURCE_TYPE_PASSWORD_DESCRIPTION_TOTP_SLUG="password-description-totp",RESOURCE_TYPE_TOTP_SLUG="totp",RESOURCE_TYPE_V5_DEFAULT_SLUG="v5-default",RESOURCE_TYPE_V5_PASSWORD_STRING_SLUG="v5-password-string",RESOURCE_TYPE_V5_DEFAULT_TOTP_SLUG="v5-default-with-totp",RESOURCE_TYPE_V5_TOTP_SLUG="v5-totp-standalone",RESOURCE_TYPE_V5_CUSTOM_FIELDS_SLUG="v5-custom-fields",RESOURCE_TYPE_PASSWORD_STRING_LEGACY_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},username:{type:"string",maxLength:255,nullable:!0},description:{maxLength:1e4,nullable:!0,type:"string"},uri:{type:"string",maxLength:1024,nullable:!0}}},secret:{type:"string",maxLength:4096}},RESOURCE_TYPE_PASSWORD_AND_DESCRIPTION_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},username:{type:"string",maxLength:255,nullable:!0},uri:{type:"string",maxLength:1024,nullable:!0}}},secret:{type:"object",required:["password"],properties:{password:{type:"string",maxLength:4096},description:{type:"string",maxLength:1e4,nullable:!0}}}},RESOURCE_TYPE_TOTP_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},uri:{type:"string",maxLength:1024,nullable:!0}}},secret:{type:"object",required:["totp"],properties:{totp:{type:"object",required:["secret_key","digits","algorithm"],properties:{algorithm:{type:"string",minLength:4,maxLength:6},secret_key:{type:"string",maxLength:1024},digits:{type:"number",minimum:6,maximum:8},period:{type:"number"}}}}}},RESOURCE_TYPE_PASSWORD_DESCRIPTION_TOTP_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},username:{type:"string",maxLength:255,nullable:!0},uri:{type:"string",maxLength:1024,nullable:!0}}},secret:{type:"object",required:["password","totp"],properties:{password:{type:"string",maxLength:4096},description:{type:"string",maxLength:1e4,nullable:!0},totp:RESOURCE_TYPE_TOTP_DEFINITION_SCHEMA.secret.properties.totp}}},RESOURCE_TYPE_V5_CUSTOM_FIELDS_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},username:{type:"string",maxLength:255,nullable:!0},uris:{type:"array",items:{type:"string",maxLength:1024,nullable:!0},maxItems:32},description:{type:"string",maxLength:1e4,nullable:!0},custom_fields:{type:"object",required:["items"],properties:{items:{type:"array",maxItems:128,items:{type:"object",required:["id","type"],properties:{id:{type:"string",format:"uuid"},type:{type:"string",enum:["text","password","boolean","number","uri"]},metadata_key:{type:"string",maxLength:255,nullable:!0},metadata_value:{anyOf:[{type:"string",maxLength:2e4},{type:"number"},{type:"boolean"}],nullable:!0}}}}}}}},secret:{type:"object",required:["custom_fields"],properties:{object_type:{type:"string",enum:["PASSBOLT_SECRET_DATA"]},custom_fields:{type:"object",required:["items"],properties:{items:{type:"array",maxItems:128,items:{type:"object",required:["id","type"],properties:{id:{type:"string",format:"uuid"},type:{type:"string",enum:["text","password","boolean","number","uri"]},secret_key:{type:"string",maxLength:255,nullable:!0},secret_value:{anyOf:[{type:"string",maxLength:2e4},{type:"number"},{type:"boolean"}],nullable:!0}}}}}}}}},RESOURCE_TYPE_V5_DEFAULT_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},username:{type:"string",maxLength:255,nullable:!0},uris:{type:"array",items:{type:"string",maxLength:1024,nullable:!0},maxItems:32},description:{type:"string",maxLength:1e4,nullable:!0},custom_fields:RESOURCE_TYPE_V5_CUSTOM_FIELDS_DEFINITION_SCHEMA.resource.properties.custom_fields}},secret:{type:"object",required:["password"],properties:{object_type:{type:"string",enum:["PASSBOLT_SECRET_DATA"]},password:{type:"string",maxLength:4096,nullable:!0},description:{type:"string",maxLength:5e4,nullable:!0},custom_fields:RESOURCE_TYPE_V5_CUSTOM_FIELDS_DEFINITION_SCHEMA.secret.properties.custom_fields}}},RESOURCE_TYPE_V5_PASSWORD_STRING_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},username:{type:"string",maxLength:255,nullable:!0},uris:{type:"array",items:{type:"string",maxLength:1024,nullable:!0},maxItems:32},description:{type:"string",maxLength:1e4,nullable:!0}}},secret:{type:"string",maxLength:4096}},RESOURCE_TYPE_V5_DEFAULT_TOTP_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},username:{type:"string",maxLength:255,nullable:!0},uris:{type:"array",items:{type:"string",maxLength:1024,nullable:!0},maxItems:32},description:{type:"string",maxLength:1e4,nullable:!0},custom_fields:RESOURCE_TYPE_V5_CUSTOM_FIELDS_DEFINITION_SCHEMA.resource.properties.custom_fields}},secret:{type:"object",required:["password","totp"],properties:{object_type:{type:"string",enum:["PASSBOLT_SECRET_DATA"]},password:{type:"string",maxLength:4096,nullable:!0},description:{type:"string",maxLength:5e4,nullable:!0},totp:RESOURCE_TYPE_TOTP_DEFINITION_SCHEMA.secret.properties.totp,custom_fields:RESOURCE_TYPE_V5_CUSTOM_FIELDS_DEFINITION_SCHEMA.secret.properties.custom_fields}}},RESOURCE_TYPE_V5_TOTP_DEFINITION_SCHEMA={resource:{type:"object",required:["name"],properties:{name:{type:"string",maxLength:255},uris:{type:"array",items:{type:"string",maxLength:1024,nullable:!0},maxItems:32},description:{type:"string",maxLength:1e4,nullable:!0}}},secret:{type:"object",required:["totp"],properties:{object_type:{type:"string",enum:["PASSBOLT_SECRET_DATA"]},totp:{type:"object",required:["secret_key","digits","algorithm"],properties:{algorithm:{type:"string",minLength:4,maxLength:6},secret_key:{type:"string",maxLength:1024},digits:{type:"number",minimum:6,maximum:8},period:{type:"number"}}}}}},V4_TO_V5_RESOURCE_TYPE_MAPPING={[RESOURCE_TYPE_PASSWORD_STRING_SLUG]:RESOURCE_TYPE_V5_PASSWORD_STRING_SLUG,[RESOURCE_TYPE_PASSWORD_AND_DESCRIPTION_SLUG]:RESOURCE_TYPE_V5_DEFAULT_SLUG,[RESOURCE_TYPE_PASSWORD_DESCRIPTION_TOTP_SLUG]:RESOURCE_TYPE_V5_DEFAULT_TOTP_SLUG,[RESOURCE_TYPE_TOTP_SLUG]:RESOURCE_TYPE_V5_TOTP_SLUG};const __WEBPACK_DEFAULT_EXPORT__=new class ResourceTypeSchemasDefinition{get SCHEMAS(){return{[RESOURCE_TYPE_PASSWORD_STRING_SLUG]:RESOURCE_TYPE_PASSWORD_STRING_LEGACY_DEFINITION_SCHEMA,[RESOURCE_TYPE_PASSWORD_AND_DESCRIPTION_SLUG]:RESOURCE_TYPE_PASSWORD_AND_DESCRIPTION_DEFINITION_SCHEMA,[RESOURCE_TYPE_PASSWORD_DESCRIPTION_TOTP_SLUG]:RESOURCE_TYPE_PASSWORD_DESCRIPTION_TOTP_DEFINITION_SCHEMA,[RESOURCE_TYPE_TOTP_SLUG]:RESOURCE_TYPE_TOTP_DEFINITION_SCHEMA,[RESOURCE_TYPE_V5_DEFAULT_SLUG]:RESOURCE_TYPE_V5_DEFAULT_DEFINITION_SCHEMA,[RESOURCE_TYPE_V5_PASSWORD_STRING_SLUG]:RESOURCE_TYPE_V5_PASSWORD_STRING_DEFINITION_SCHEMA,[RESOURCE_TYPE_V5_DEFAULT_TOTP_SLUG]:RESOURCE_TYPE_V5_DEFAULT_TOTP_DEFINITION_SCHEMA,[RESOURCE_TYPE_V5_TOTP_SLUG]:RESOURCE_TYPE_V5_TOTP_DEFINITION_SCHEMA,[RESOURCE_TYPE_V5_CUSTOM_FIELDS_SLUG]:RESOURCE_TYPE_V5_CUSTOM_FIELDS_DEFINITION_SCHEMA}}}},"./src/shared/models/entity/resourceType/resourceTypesCollection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _entity_abstract_entityV2Collection__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2Collection.js"),_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js"),_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js"),_resourceTypeEntity__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.js"),validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js");const SUPPORTED_RESOURCE_TYPES=[_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__._w,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.Bo,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.fl,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.KY,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.gG,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.a5,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.Eh,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.uQ,_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_2__.qr];class ResourceTypesCollection extends _entity_abstract_entityV2Collection__WEBPACK_IMPORTED_MODULE_0__.A{get entityClass(){return _resourceTypeEntity__WEBPACK_IMPORTED_MODULE_3__.Ay}constructor(dtos=[],options={}){super(dtos,options)}static getSchema(){return{type:"array",items:_resourceTypeEntity__WEBPACK_IMPORTED_MODULE_3__.Ay.getSchema()}}validateBuildRules(item,options={}){this.assertNotExist("id",item._props.id,{haystackSet:options?.uniqueIdsSetCache}),this.assertNotExist("slug",item._props.slug,{haystackSet:options?.uniqueSlugsSetCache})}isResourceTypeIdPresent(id){return this._items.some((resourceType=>resourceType.id===id))}filterByPasswordResourceTypes(){this.filterByPropertyValueIn("slug",_resourceTypeEntity__WEBPACK_IMPORTED_MODULE_3__.zc)}filterByResourceTypeVersion(version){this.filterByCallback((resourceType=>resourceType.version===version))}getFirstById(id){return this.getFirst("id",id)}getFirstBySlug(slug){return this.getFirst("slug",slug)}hasOneWithSlug(slug){return Boolean(this.getFirstBySlug(slug))}hasSomePasswordResourceTypes(version=_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__.Sr){return this.items.some((resourceType=>resourceType.hasPassword()&&resourceType.version===version))}hasSomeTotpResourceTypes(version=_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__.Sr){return this.items.some((resourceType=>resourceType.hasTotp()&&resourceType.version===version))}hasSomeCustomFieldsResourceTypes(version=_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__.Sr){return this.items.some((resourceType=>resourceType.hasCustomFields()&&resourceType.version===version))}hasSomeNoteResourceTypes(version=_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__.Sr){return this.items.some((resourceType=>resourceType.hasSecretDescription()&&resourceType.version===version))}hasSomeMetadataDescriptionResourceTypes(version=_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__.Sr){return this.items.some((resourceType=>resourceType.hasMetadataDescription()&&resourceType.version===version))}hasSomeOfVersion(version=_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__.Sr){return this.items.some((resourceType=>resourceType.version===version))}getResourceTypeMatchingResource(resourceDto,version=_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_1__.Sr){if((0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_4__.A)(version),null==resourceDto?.secret||"object"!=typeof resourceDto.secret)throw new TypeError("The resource DTO is not an expected object");let resourceTypeMatch=null,score=null;const resourceSecretFields=Object.keys(resourceDto.secret);for(const resourceType of this.items){if(resourceType.version!==version||resourceType.isPasswordString())continue;const secretsFields=Object.keys(resourceType.definition.secret.properties);if(resourceSecretFields.every((secretField=>secretsFields.includes(secretField)))){const unsetPropertyCount=secretsFields.filter((field=>!resourceSecretFields.includes(field))).length;if(0===unsetPropertyCount)return resourceType;(!score||score>unsetPropertyCount)&&(score=unsetPropertyCount,resourceTypeMatch=resourceType)}}return resourceTypeMatch}pushMany(data,entityOptions={},options={}){const uniqueIdsSetCache=new Set(this.extract("id")),uniqueSlugsSetCache=new Set(this.extract("slug"));options={onItemPushed:item=>{uniqueIdsSetCache.add(item.id),uniqueSlugsSetCache.add(item.slug)},validateBuildRules:{...options?.validateBuildRules,uniqueIdsSetCache,uniqueSlugsSetCache},...options},super.pushMany(data,entityOptions,options)}push(data,entityOptions={},options={}){SUPPORTED_RESOURCE_TYPES.includes(data?.slug)&&super.push(data,entityOptions,options)}}const __WEBPACK_DEFAULT_EXPORT__=ResourceTypesCollection}}]);