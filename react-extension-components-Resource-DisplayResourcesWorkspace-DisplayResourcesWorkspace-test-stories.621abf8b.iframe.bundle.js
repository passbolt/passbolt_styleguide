/*! For license information please see react-extension-components-Resource-DisplayResourcesWorkspace-DisplayResourcesWorkspace-test-stories.621abf8b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[195,4412,563],{"./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspace.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,ceVersion:()=>ceVersion,default:()=>DisplayResourcesWorkspace_test_stories,proVersion:()=>proVersion});var react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),DisplayUserBadgeMenu=__webpack_require__("./src/react-extension/components/User/DisplayUserBadgeMenu/DisplayUserBadgeMenu.js"),FilterResourcesByFolders=__webpack_require__("./src/react-extension/components/Resource/FilterResourcesByFolders/FilterResourcesByFolders.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),DisplayResourceFolderDetailsInformation=__webpack_require__("./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsInformation.js"),DisplayResourceFolderDetailsPermissions=__webpack_require__("./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsPermissions.js"),DisplayResourceFolderDetailsActivity=__webpack_require__("./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),clipBoard=__webpack_require__("./src/shared/lib/Browser/clipBoard.js"),uiActionEnumeration=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),RbacContext=__webpack_require__("./src/shared/context/Rbac/RbacContext.js");class DisplayResourceFolderDetails extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handlePermalinkClick=this.handlePermalinkClick.bind(this)}handleCloseClick(){this.props.resourceWorkspaceContext.onLockDetail()}async handlePermalinkClick(){const permalink=`${this.props.context.userSettings.getTrustedDomain()}/app/folders/view/${this.props.resourceWorkspaceContext.details.folder.id}`;await clipBoard.A.copy(permalink,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard"))}get translate(){return this.props.t}render(){const canViewShare=this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.SHARE_FOLDER),canUseAuditLog=this.props.context.siteSettings.canIUse("auditLog");return react.createElement("div",{className:"panel aside ready"},react.createElement("div",{className:"sidebar resource"},react.createElement("div",{className:"sidebar-header"},react.createElement("div",{className:"teaser-image"},react.createElement(Icon.A,{name:"folder"})),react.createElement("h3",null,react.createElement("div",{className:"title-wrapper"},react.createElement("span",{className:"name"},this.props.resourceWorkspaceContext.details.folder.name),react.createElement("button",{type:"button",className:"title-link link no-border",title:this.translate("Copy the link to this folder"),onClick:this.handlePermalinkClick},react.createElement(Icon.A,{name:"link"}),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"Copy the link to this folder")))),react.createElement("span",{className:"subtitle"},react.createElement(es.x6,null,"folder"))),react.createElement("button",{type:"button",className:"link no-border dialog-close",onClick:this.handleCloseClick},react.createElement(Icon.A,{name:"close"}),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"Close")))),react.createElement(DisplayResourceFolderDetailsInformation.A,null),canViewShare&&react.createElement(DisplayResourceFolderDetailsPermissions.A,null),canUseAuditLog&&react.createElement(DisplayResourceFolderDetailsActivity.A,null)))}}DisplayResourceFolderDetails.propTypes={context:prop_types_default().any,groups:prop_types_default().array,onSelectFolderParent:prop_types_default().func,onSelectRoot:prop_types_default().func,onEditPermissions:prop_types_default().func,users:prop_types_default().array,resourceWorkspaceContext:prop_types_default().object,actionFeedbackContext:prop_types_default().any,t:prop_types_default().func,rbacContext:prop_types_default().any};const DisplayResourceFolderDetails_DisplayResourceFolderDetails=(0,AppContext.L)((0,RbacContext.x6)((0,ResourceWorkspaceContext.Qw)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(DisplayResourceFolderDetails)))));DisplayResourceFolderDetails.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleCloseClick",docblock:"Handle when the user closes the sidebar.",modifiers:[],params:[],returns:null,description:"Handle when the user closes the sidebar."},{name:"handlePermalinkClick",docblock:"Handle when the user copies the permalink.",modifiers:["async"],params:[],returns:null,description:"Handle when the user copies the permalink."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceFolderDetails",props:{context:{description:"",type:{name:"any"},required:!1},groups:{description:"",type:{name:"array"},required:!1},onSelectFolderParent:{description:"",type:{name:"func"},required:!1},onSelectRoot:{description:"",type:{name:"func"},required:!1},onEditPermissions:{description:"",type:{name:"func"},required:!1},users:{description:"",type:{name:"array"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1}}};var sanitizeUrl=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js"),HiddenPassword=__webpack_require__("./src/shared/components/Password/HiddenPassword.js"),ProgressContext=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),Totp=__webpack_require__("./src/shared/components/Totp/Totp.js"),TotpCodeGeneratorService=__webpack_require__("./src/shared/services/otp/TotpCodeGeneratorService.js"),PasswordExpirySettingsContext=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),dateUtils=__webpack_require__("./src/shared/utils/dateUtils.js"),ResourceTypesLocalStorageContext=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");class DisplayResourceDetailsInformation extends react.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!0,previewedSecret:null,plaintextSecretDto:null,creator:null,modifier:null}}bindCallbacks(){this.handleFolderParentClickEvent=this.handleFolderParentClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleUsernameClickEvent=this.handleUsernameClickEvent.bind(this),this.handlePasswordClickEvent=this.handlePasswordClickEvent.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this),this.handleTotpClick=this.handleTotpClick.bind(this),this.handlePreviewTotpButtonClick=this.handlePreviewTotpButtonClick.bind(this),this.handleGoToResourceUriClick=this.handleGoToResourceUriClick.bind(this),this.isFolderParentShared=this.isFolderParentShared.bind(this)}componentDidMount(){this.props.passwordExpiryContext.findSettings(),this.state.open&&this.loadUserInformation()}componentDidUpdate(prevProps){this.handleResourceChange(prevProps.resourceWorkspaceContext.details.resource)}async loadUserInformation(){const resourceInformation=await this.props.context.port.request("passbolt.resources.find-details",this.resource.id);this.resource.created_by!==resourceInformation.created_by||this.resource.modified_by!==resourceInformation.modified_by||this.setState({creator:resourceInformation?.creator,modifier:resourceInformation?.modifier})}handleResourceChange(previousResource){const hasResourceChanged=this.resource.id!==previousResource.id,hasResourceUpdated=this.resource.modified!==previousResource.modified;if((hasResourceChanged||hasResourceUpdated)&&this.state.open&&this.setState({plaintextSecretDto:null,previewedSecret:null}),!hasResourceChanged)return;(this.resource.created_by!==previousResource.created_by||this.resource.modified_by!==previousResource.modified_by)&&(this.setState({creator:null,modifier:null}),this.state.open&&this.loadUserInformation())}get resource(){return this.props.resourceWorkspaceContext.details.resource}get safeUri(){return(0,sanitizeUrl.A)(this.resource.metadata.uris?.[0],{whiteListedProtocols:ResourceWorkspaceContext.XH,defaultProtocol:sanitizeUrl.P.HTTPS})}handleFolderParentClickEvent(){if(this.resource.folder_parent_id){const folderParent=this.props.context.folders.find((item=>item.id===this.resource.folder_parent_id));this.props.history.push(`/app/folders/view/${folderParent.id}`)}else{const filter={type:ResourceWorkspaceContext.FM.ROOT_FOLDER};this.props.history.push("/app/passwords",{filter})}}handleTitleClickEvent(){const open=!this.state.open;this.setState({open}),open?this.loadUserInformation():this.setState({creator:null,modifier:null,plaintextSecretDto:null,previewedSecret:null})}async handleUsernameClickEvent(){await clipBoard.A.copy(this.resource.metadata.username,this.props.context.port),this.displaySuccessNotification(this.translate("The username has been copied to clipboard"))}getFolderName(folderParentId){if(null===folderParentId)return this.translate("root");if(this.props.context.folders){const folder=this.props.context.folders.find((item=>item.id===folderParentId));if(folder)return folder.name}return""}isFolderParentShared(){if(null!==this.resource.folder_parent_id&&this.props.context.folders){const folder=this.props.context.folders.find((item=>item.id===this.resource.folder_parent_id));if(folder)return!folder.personal}return!1}async handlePasswordClickEvent(){await this.copyPasswordToClipboard()}async handleViewPasswordButtonClick(){await this.togglePreviewPassword()}async copyPasswordToClipboard(){const resourceId=this.resource.id,isPasswordPreviewed=this.isPasswordPreviewed();let plaintextSecretDto;if(this.props.progressContext.open(this.props.t("Decrypting secret")),isPasswordPreviewed)plaintextSecretDto=this.state.plaintextSecretDto;else try{plaintextSecretDto=await this.decryptResourceSecret(resourceId)}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecretDto&&(plaintextSecretDto?.password?.length?(await clipBoard.A.copy(plaintextSecretDto.password,this.props.context.port),await this.props.resourceWorkspaceContext.onResourceCopied(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The secret has been copied to clipboard"))):await this.props.actionFeedbackContext.displayError(this.translate("The password is empty and cannot be copied to clipboard.")))}async togglePreviewPassword(){const isPasswordPreviewed=this.isPasswordPreviewed();this.hidePreviewedSecret(),isPasswordPreviewed||(await this.previewPassword(),await this.props.resourceWorkspaceContext.onResourcePreviewed())}hidePreviewedSecret(){this.setState({plaintextSecretDto:null,previewedSecret:null})}async previewPassword(){const resourceId=this.resource.id;let plaintextSecretDto;this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret(resourceId)}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecretDto&&(plaintextSecretDto?.password?.length?this.setState({plaintextSecretDto,previewedSecret:"password"}):await this.props.actionFeedbackContext.displayError(this.translate("The password is empty and cannot be previewed.")))}decryptResourceSecret(resourceId){return this.props.context.port.request("passbolt.secret.find-by-resource-id",resourceId)}async handleTotpClick(){let plaintextSecretDto,code;if(this.isTotpPreviewed())plaintextSecretDto=this.state.plaintextSecretDto;else{this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret(this.resource.id)}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close()}if(plaintextSecretDto)if(plaintextSecretDto.totp){try{code=TotpCodeGeneratorService.l.generate(plaintextSecretDto.totp)}catch(error){return void await this.props.actionFeedbackContext.displayError(this.translate("Unable to copy the TOTP"))}await clipBoard.A.copy(code,this.props.context.port),await this.props.resourceWorkspaceContext.onResourceCopied(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The TOTP has been copied to clipboard"))}else await this.props.actionFeedbackContext.displayError(this.translate("The TOTP is empty and cannot be copied to clipboard."))}handlePreviewTotpButtonClick(){const isTotpPreviewed=this.isTotpPreviewed();this.hidePreviewedSecret(),isTotpPreviewed||(this.previewTotp(),this.props.resourceWorkspaceContext.onResourcePreviewed())}async previewTotp(){const resourceId=this.resource.id;let plaintextSecretDto;this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret(resourceId)}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecretDto&&(plaintextSecretDto.totp?this.setState({plaintextSecretDto,previewedSecret:"totp"}):await this.props.actionFeedbackContext.displayError(this.translate("The TOTP is empty and cannot be previewed.")))}isPasswordPreviewed(){return"password"===this.state.previewedSecret}isTotpPreviewed(){return"totp"===this.state.previewedSecret}handleGoToResourceUriClick(){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(this.resource.metadata.uris[0])}displaySuccessNotification(message){this.props.actionFeedbackContext.displaySuccess(message)}isPasswordResources(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasPassword()}isTotpResources(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasTotp()}get isAttentionRequired(){return this.isAttentionRequiredOnExpiryDate}get resourceExpirationStatus(){return this.resource?.expired?(0,dateUtils.Br)(this.resource?.expired,this.props.t,this.props.context.locale):this.translate("Not set")}get isAttentionRequiredOnExpiryDate(){if(!this.resource?.expired)return!1;return new Date(this.resource.expired)<=new Date}get translate(){return this.props.t}render(){const canUseFolders=this.props.context.siteSettings.canIUse("folders")&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.FOLDERS_USE),canPreviewSecret=this.props.context.siteSettings.canIUse("previewPassword")&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.SECRETS_PREVIEW),canUsePasswordExpiry=this.props.passwordExpiryContext.isFeatureEnabled(),canCopySecret=this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.SECRETS_COPY),creatorUsername=this.state.creator?.username||"",modifierUsername=this.state.modifier?.username||"",createdDateTimeAgo=(0,dateUtils.kD)(this.resource.created,this.props.t,this.props.context.locale),modifiedDateTimeAgo=(0,dateUtils.kD)(this.resource.modified,this.props.t,this.props.context.locale),isPasswordPreviewed=this.isPasswordPreviewed(),isTotpPreviewed=this.isTotpPreviewed();return react.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},react.createElement("div",{className:"accordion-header"},react.createElement("h4",null,react.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickEvent},react.createElement("span",null,react.createElement(es.x6,null,"Information"),canUsePasswordExpiry&&this.isAttentionRequired&&react.createElement(Icon.A,{name:"exclamation",baseline:!0})),this.state.open&&react.createElement(Icon.A,{name:"caret-down"}),!this.state.open&&react.createElement(Icon.A,{name:"caret-right"})))),react.createElement("ul",{className:"accordion-content"},this.isPasswordResources()&&react.createElement(react.Fragment,null,react.createElement("li",{className:"username"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Username")),react.createElement("span",{className:"value"},react.createElement("button",{type:"button",className:"link no-border",onClick:this.handleUsernameClickEvent},react.createElement("span",null,this.resource.metadata.username)))),react.createElement("li",{className:"password"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Password")),react.createElement("div",{className:"value"},react.createElement("div",{className:"secret secret-password "+(isPasswordPreviewed?"":"secret-copy"),title:isPasswordPreviewed?this.state.plaintextSecretDto?.password:"secret"},react.createElement(HiddenPassword.A,{canClick:canCopySecret,preview:this.state.plaintextSecretDto?.password,onClick:this.handlePasswordClickEvent})),canPreviewSecret&&react.createElement("button",{type:"button",onClick:this.handleViewPasswordButtonClick,className:"password-view button-transparent"},react.createElement(Icon.A,{name:isPasswordPreviewed?"eye-close":"eye-open"}),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"View")))))),this.isTotpResources()&&react.createElement("li",{className:"totp"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"TOTP")),react.createElement("div",{className:"value"},react.createElement("div",{className:"secret secret-totp "+(isTotpPreviewed?"":"secret-copy")},isTotpPreviewed&&react.createElement(Totp.A,{totp:this.state.plaintextSecretDto?.totp,canClick:canCopySecret,onClick:this.handleTotpClick}),!isTotpPreviewed&&react.createElement("button",{type:"button",className:"link no-border",onClick:this.handleTotpClick,disabled:!canCopySecret},react.createElement("span",null,"Copy TOTP to clipboard"))),canPreviewSecret&&react.createElement("button",{type:"button",onClick:this.handlePreviewTotpButtonClick,className:"totp-view inline button-transparent"},react.createElement(Icon.A,{name:isTotpPreviewed?"eye-close":"eye-open"})))),react.createElement("li",{className:"uri"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"URI")),react.createElement("span",{className:"value"},this.safeUri&&react.createElement("button",{type:"button",className:"link no-border",onClick:this.handleGoToResourceUriClick},react.createElement("span",null,this.resource.metadata.uris?.[0])),!this.safeUri&&react.createElement("span",null,this.resource.metadata.uris?.[0]))),react.createElement("li",{className:"modified"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Modified")),react.createElement("span",{className:"value",title:this.resource.modified},modifiedDateTimeAgo)),react.createElement("li",{className:"modified-by"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Modified by")),react.createElement("span",{className:"value"},modifierUsername)),react.createElement("li",{className:"modified"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Created")),react.createElement("span",{className:"value",title:this.resource.created},createdDateTimeAgo)),react.createElement("li",{className:"modified-by"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Created by")),react.createElement("span",{className:"value"},creatorUsername)),canUseFolders&&react.createElement("li",{className:"location"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Location")),react.createElement("span",{className:"value"},react.createElement("button",{type:"button",onClick:this.handleFolderParentClickEvent,disabled:!this.props.context.folders,className:"link no-border folder-link"},this.isFolderParentShared()?react.createElement(Icon.A,{name:"folder-shared"}):react.createElement(Icon.A,{name:"folder"}),react.createElement("span",null,this.getFolderName(this.resource.folder_parent_id))))),canUsePasswordExpiry&&react.createElement("li",{className:"expiry"},react.createElement("span",{className:"label"},react.createElement(es.x6,null,"Expiry")," ",this.isAttentionRequiredOnExpiryDate&&react.createElement(Icon.A,{name:"exclamation",baseline:!0})),react.createElement("span",{className:"value",title:this.resource.expired},this.resourceExpirationStatus))))}}DisplayResourceDetailsInformation.propTypes={context:prop_types_default().any,rbacContext:prop_types_default().any,onSelectFolderParent:prop_types_default().func,onSelectRoot:prop_types_default().func,history:prop_types_default().object,resourceWorkspaceContext:prop_types_default().object,resourceTypes:prop_types_default().instanceOf(resourceTypesCollection.A),actionFeedbackContext:prop_types_default().any,progressContext:prop_types_default().any,passwordExpiryContext:prop_types_default().object,t:prop_types_default().func};const DisplayResourceDetails_DisplayResourceDetailsInformation=(0,AppContext.L)((0,RbacContext.x6)((0,react_router.y)((0,ActionFeedbackContext.ot)((0,ResourceWorkspaceContext.Qw)((0,ResourceTypesLocalStorageContext.KH)((0,PasswordExpirySettingsContext.f4)((0,ProgressContext.E0)((0,es.CI)("common")(DisplayResourceDetailsInformation)))))))));DisplayResourceDetailsInformation.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"loadUserInformation",docblock:"Loads the information about the creator and the modifier of the current selected resource.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Loads the information about the creator and the modifier of the current selected resource."},{name:"handleResourceChange",docblock:"Check if the resource has changed and fetch\n@param previousResource",modifiers:[],params:[{name:"previousResource",optional:!1}],returns:null,description:"Check if the resource has changed and fetch"},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"safeUri",docblock:"the resource safe uri\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"the resource safe uri"},{name:"handleFolderParentClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handleUsernameClickEvent",docblock:"Handle when the user select the username of the resource",modifiers:["async"],params:[],returns:null,description:"Handle when the user select the username of the resource"},{name:"getFolderName",docblock:"Get the folder name.\n@param {string} folderId The folder id\n@returns {string}",modifiers:[],params:[{name:"folderParentId",optional:!1}],returns:{type:{name:"string"}},description:"Get the folder name."},{name:"isFolderParentShared",docblock:"Check if folder parent is shared\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if folder parent is shared"},{name:"handlePasswordClickEvent",docblock:"Handle copy password click.",modifiers:["async"],params:[],returns:null,description:"Handle copy password click."},{name:"handleViewPasswordButtonClick",docblock:"Handle preview password button click.",modifiers:["async"],params:[],returns:null,description:"Handle preview password button click."},{name:"copyPasswordToClipboard",docblock:"Copy the resource password to clipboard.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copy the resource password to clipboard."},{name:"togglePreviewPassword",docblock:"Toggle preview password\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle preview password"},{name:"hidePreviewedSecret",docblock:"Hide the previewed resource secret.",modifiers:[],params:[],returns:null,description:"Hide the previewed resource secret."},{name:"previewPassword",docblock:"Preview password\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Preview password"},{name:"decryptResourceSecret",docblock:"Decrypt the resource secret\n@param {string} resourceId The target resource id\n@returns {Promise<object>} The plaintext secret DTO\n@throw UserAbortsOperationError If the user cancel the operation",modifiers:[],params:[{name:"resourceId",description:"The target resource id",type:{name:"string"},optional:!1}],returns:{description:"The plaintext secret DTO",type:{name:"Promise",elements:[{name:"object"}]}},description:"Decrypt the resource secret"},{name:"handleTotpClick",docblock:"Handle copy totp\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle copy totp"},{name:"handlePreviewTotpButtonClick",docblock:"Handle preview totp button click.",modifiers:[],params:[],returns:null,description:"Handle preview totp button click."},{name:"previewTotp",docblock:"Preview totp\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Preview totp"},{name:"isPasswordPreviewed",docblock:"Check if the password is previewed\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the password is previewed"},{name:"isTotpPreviewed",docblock:"Check if the totp is previewed\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the totp is previewed"},{name:"handleGoToResourceUriClick",docblock:"Whenever the user wants to follow a resource uri.",modifiers:[],params:[],returns:null,description:"Whenever the user wants to follow a resource uri."},{name:"displaySuccessNotification",docblock:"display a success notification message\n@param message",modifiers:[],params:[{name:"message",optional:!1}],returns:null,description:"display a success notification message"},{name:"isPasswordResources",docblock:"Is password resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is password resource"},{name:"isTotpResources",docblock:"Is TOTP resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"isAttentionRequired",docblock:"Returns true if the resource requires some attention.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the resource requires some attention."},{name:"resourceExpirationStatus",docblock:"Returns the expiration status of the current resource.\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the expiration status of the current resource."},{name:"isAttentionRequiredOnExpiryDate",docblock:"Returns true if the current resource is expired or about to expire.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the current resource is expired or about to expire."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceDetailsInformation",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},onSelectFolderParent:{description:"",type:{name:"func"},required:!1},onSelectRoot:{description:"",type:{name:"func"},required:!1},history:{description:"",type:{name:"object"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},progressContext:{description:"",type:{name:"any"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var DisplayResourceDetailsTag=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsTag.js"),AddResourceComment=__webpack_require__("./src/react-extension/components/ResourceComment/AddResourceComment/AddResourceComment.js"),DisplayResourceCommentList=__webpack_require__("./src/react-extension/components/ResourceComment/DisplayResourceCommentList/DisplayResourceCommentList.js");class DisplayResourceDetailsComment extends react.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1,comments:[],canAdd:!1,canAddByIcon:!1,mustRefresh:!1}}componentDidUpdate(prevProps){this.handleResourceChange(prevProps.resourceWorkspaceContext.details.resource)}bindCallbacks(){this.handleTitleClickedEvent=this.handleTitleClickedEvent.bind(this),this.handleAddedEvent=this.handleAddedEvent.bind(this),this.handleCancelledAddEvent=this.handleCancelledAddEvent.bind(this),this.handleRequestedAddEvent=this.handleRequestedAddEvent.bind(this),this.handleFetchedEvent=this.handleFetchedEvent.bind(this)}async handleResourceChange(previousResource){this.state.open&&this.resource.id!==previousResource.id&&await this.setState({mustRefresh:!0})}async handleTitleClickedEvent(){const open=!this.state.open;this.setState({open})}async handleAddedEvent(){await this.setState({mustRefresh:!0,canAdd:!1,canAddByIcon:!0})}async handleCancelledAddEvent(){await this.setState({canAdd:!1})}async handleRequestedAddEvent(){await this.setState({canAdd:!0})}async handleFetchedEvent(comments){const hasComments=comments&&comments.length>0;await this.setState({mustRefresh:!1,canAdd:!hasComments,canAddByIcon:hasComments})}get resource(){return this.props.resourceWorkspaceContext.details.resource}render(){return react.createElement("div",{className:"comments accordion sidebar-section "+(this.state.open?"":"closed")},react.createElement("div",{className:"accordion-header"},react.createElement("h4",null,react.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickedEvent},react.createElement(es.x6,null,"Comments"),this.state.open&&react.createElement(Icon.A,{name:"caret-down"}),!this.state.open&&react.createElement(Icon.A,{name:"caret-right"})))),this.state.open&&react.createElement("div",{className:"accordion-content"},this.state.canAddByIcon&&react.createElement("button",{type:"button",className:"section-action button-transparent",onClick:this.handleRequestedAddEvent},react.createElement(Icon.A,{name:"plus-circle"}),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"Create"))),this.state.canAdd&&react.createElement(AddResourceComment.A,{resource:this.resource,onAdd:this.handleAddedEvent,onCancel:this.handleCancelledAddEvent,cancellable:this.state.canAddByIcon}),react.createElement(DisplayResourceCommentList.A,{resource:this.resource,onFetch:this.handleFetchedEvent,mustRefresh:this.state.mustRefresh})))}}DisplayResourceDetailsComment.propTypes={resourceWorkspaceContext:prop_types_default().any};const DisplayResourceDetails_DisplayResourceDetailsComment=(0,ResourceWorkspaceContext.Qw)((0,es.CI)("common")(DisplayResourceDetailsComment));DisplayResourceDetailsComment.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleResourceChange",docblock:"Check if the resource has changed and fetch\n@param previousResource",modifiers:["async"],params:[{name:"previousResource",optional:!1}],returns:null,description:"Check if the resource has changed and fetch"},{name:"handleTitleClickedEvent",docblock:"Whenever the user clicks on the section title",modifiers:["async"],params:[],returns:null,description:"Whenever the user clicks on the section title"},{name:"handleAddedEvent",docblock:"Whenever the user added a new comment\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Whenever the user added a new comment"},{name:"handleCancelledAddEvent",docblock:"Whenever the user cancelled the adding of new comment",modifiers:["async"],params:[],returns:null,description:"Whenever the user cancelled the adding of new comment"},{name:"handleRequestedAddEvent",docblock:"Whenever the user requested to add a new comment ( call-to-action )",modifiers:["async"],params:[],returns:null,description:"Whenever the user requested to add a new comment ( call-to-action )"},{name:"handleFetchedEvent",docblock:"Whenever the comments to display has been fetched\n@param comments The fetched comments",modifiers:["async"],params:[{name:"comments",description:"The fetched comments",optional:!1}],returns:null,description:"Whenever the comments to display has been fetched"},{name:"resource",docblock:"Get the current detailed resource",modifiers:["get"],params:[],returns:null,description:"Get the current detailed resource"}],displayName:"DisplayResourceDetailsComment",props:{resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1}}};var DisplayResourceDetailsDescription=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsDescription.js"),UserAvatar=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),GroupAvatar=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),spinner=__webpack_require__("./src/img/svg/spinner.svg"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ShareDialog=__webpack_require__("./src/react-extension/components/Share/ShareDialog.js"),userUtils=__webpack_require__("./src/shared/utils/userUtils.js");const PERMISSIONS_LABEL={1:"can read",7:"can update",15:"is owner"};class DisplayResourceDetailsPermission extends react.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{permissions:null,open:!1,loading:!0}}bindCallbacks(){this.handlePermissionsEditClickEvent=this.handlePermissionsEditClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}async componentDidUpdate(prevProps){await this.handleResourceChange(prevProps.resourceWorkspaceContext.details.resource),await this.handleResourcePermissionsRefresh(prevProps.resourceWorkspaceContext.refresh.permissions)}get resource(){return this.props.resourceWorkspaceContext.details.resource}handleResourceChange(previousResource){this.resource.id!==previousResource.id&&this.state.open&&this.fetch()}async handleResourcePermissionsRefresh(hasPreviouslyRefreshed){!hasPreviouslyRefreshed&&this.props.resourceWorkspaceContext.refresh.permissions&&(await this.fetch(),await this.props.resourceWorkspaceContext.onResourcePermissionsRefreshed())}async fetch(){this.setState({loading:!0});const permissions=await this.props.context.port.request("passbolt.permissions.find-aco-permissions-for-display",this.resource.id,"Resource");permissions&&permissions.sort(((permissionA,permissionB)=>this.sortPermissions(permissionA,permissionB))),this.setState({permissions,loading:!1})}sortPermissions(permissionA,permissionB){return permissionA.user&&permissionB.user?permissionA.user.profile.first_name===permissionB.user.profile.first_name?permissionA.user.profile.last_name<permissionB.user.profile.last_name?-1:1:permissionA.user.profile.first_name<permissionB.user.profile.first_name?-1:1:!permissionA.user&&permissionB.user?1:permissionA.user&&!permissionB.user||permissionA.group.name<permissionB.group.name?-1:1}handleTitleClickEvent(){const open=!this.state.open;open&&this.fetch(),this.setState({open})}handlePermissionsEditClickEvent(){const resourcesIds=[this.resource.id];this.props.context.setContext({shareDialogProps:{resourcesIds}}),this.props.dialogContext.open(ShareDialog.A)}getPermissionAroName(permission){if(permission.user){const profile=permission.user.profile;return`${profile.first_name} ${profile.last_name} (${permission.user.username})`}return permission.group.name}isLoading(){return this.state.loading}canShare(){return this.resource.permission&&15===this.resource.permission.type}isUserSuspended(user){return this.props.context.siteSettings.canIUse("disableUser")&&(0,userUtils.B7)(user)}render(){return react.createElement("div",{className:"sharedwith accordion sidebar-section "+(this.state.open?"":"closed")},react.createElement("div",{className:"accordion-header"},react.createElement("h4",null,react.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickEvent},react.createElement(es.x6,null,"Shared with"),this.state.open&&react.createElement(Icon.A,{name:"caret-down"}),!this.state.open&&react.createElement(Icon.A,{name:"caret-right"})))),react.createElement("div",{className:"accordion-content"},this.canShare()&&react.createElement("button",{type:"button",onClick:this.handlePermissionsEditClickEvent,className:"section-action button-transparent"},react.createElement(Icon.A,{name:"edit"}),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"modify"))),this.isLoading()&&react.createElement("div",{className:"processing-wrapper"},react.createElement(spinner.A,null),react.createElement("span",{className:"processing-text"},react.createElement(es.x6,null,"Retrieving permissions"))),!this.isLoading()&&react.createElement("ul",{className:"shared-with ready"},this.state.permissions&&this.state.permissions.map((permission=>react.createElement("li",{key:permission.id,className:"usercard-col-2 "+(this.isUserSuspended(permission.user)?"suspended":"")},react.createElement("div",{className:"content-wrapper"},react.createElement("div",{className:"content"},react.createElement("div",{className:"name"},this.getPermissionAroName(permission),this.isUserSuspended(permission.user)&&react.createElement("span",{className:"suspended"}," ",react.createElement(es.x6,null,"(suspended)"))),react.createElement("div",{className:"subinfo"},this.props.t(PERMISSIONS_LABEL[permission.type])))),permission.user&&react.createElement(UserAvatar.A,{user:permission.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),permission.group&&react.createElement(GroupAvatar.A,{group:permission.group})))))))}}DisplayResourceDetailsPermission.propTypes={context:prop_types_default().any,resourceWorkspaceContext:prop_types_default().object,dialogContext:prop_types_default().any,t:prop_types_default().func};const DisplayResourceDetails_DisplayResourceDetailsPermission=(0,AppContext.L)((0,DialogContext.z9)((0,ResourceWorkspaceContext.Qw)((0,es.CI)("common")(DisplayResourceDetailsPermission))));DisplayResourceDetailsPermission.__docgenInfo={description:"This component display the permission section (Shared With)",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"resource",docblock:"Returns the current detailed resource",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed resource"},{name:"handleResourceChange",docblock:"Check if the resource has changed and fetch\n@param previousResource",modifiers:[],params:[{name:"previousResource",optional:!1}],returns:null,description:"Check if the resource has changed and fetch"},{name:"handleResourcePermissionsRefresh",docblock:"Handle the refresh of resource permissions\n@param hasPreviouslyRefreshed True if one previously refreshed the permissions",modifiers:["async"],params:[{name:"hasPreviouslyRefreshed",description:"True if one previously refreshed the permissions",optional:!1}],returns:null,description:"Handle the refresh of resource permissions"},{name:"fetch",docblock:"Get the folder permissions.",modifiers:["async"],params:[],returns:null,description:"Get the folder permissions."},{name:"sortPermissions",docblock:"Sort permission by user firstname and by group name\n@param permissionA\n@param permissionB\n@returns {number}",modifiers:[],params:[{name:"permissionA",optional:!1},{name:"permissionB",optional:!1}],returns:{type:{name:"number"}},description:"Sort permission by user firstname and by group name"},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handlePermissionsEditClickEvent",docblock:"Handle when the user edits the permissions.",modifiers:[],params:[],returns:null,description:"Handle when the user edits the permissions."},{name:"getPermissionAroName",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"isLoading",docblock:"check if no permission is present\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"check if no permission is present"},{name:"canShare",docblock:"Check if the user can share the folder.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the user can share the folder."},{name:"isUserSuspended",docblock:"Returns true if the feature flag disableUser is enabled and the given user is suspended.\n@param {object} user\n@returns {boolean}",modifiers:[],params:[{name:"user",type:{name:"object"},optional:!1}],returns:{type:{name:"boolean"}},description:"Returns true if the feature flag disableUser is enabled and the given user is suspended."}],displayName:"DisplayResourceDetailsPermission",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var DisplayResourceDetailsActivity=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsActivity.js");class DisplayResourceDetails extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handlePermalinkClick=this.handlePermalinkClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this)}get subtitle(){const resource=this.props.resourceWorkspaceContext.details.resource;if(!this.props.resourceTypes)return"";switch(this.props.resourceTypes.getFirstById(resource.resource_type_id).slug){case"password-string":return this.translate("Password");case"password-and-description":return this.translate("Password and Encrypted description");case"password-description-totp":return this.translate("Password, Encrypted description and TOTP");case"totp":return this.translate("TOTP");default:return this.translate("Resource")}}async handlePermalinkClick(){const permalink=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.props.resourceWorkspaceContext.details.resource.id}`;await clipBoard.A.copy(permalink,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard"))}handleCloseClick(){this.props.resourceWorkspaceContext.onLockDetail()}get isStandaloneTotpResource(){return this.props.resourceTypes?.getFirstById(this.props.resourceWorkspaceContext.details.resource.resource_type_id)?.isStandaloneTotp()}get translate(){return this.props.t}render(){const canUseTags=this.props.context.siteSettings.canIUse("tags")&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.TAGS_USE),canUseAuditLog=(this.props.context.siteSettings.canIUse("auditLog")||this.props.context.siteSettings.canIUse("audit_log"))&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.RESOURCES_SEE_ACTIVITIES),canViewShare=this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.SHARE_VIEW_LIST),canSeeComments=this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.RESOURCES_SEE_COMMENTS);return react.createElement("div",{className:"panel aside ready"},react.createElement("div",{className:"sidebar resource"},react.createElement("div",{className:"sidebar-header"},react.createElement("div",{className:"teaser-image"},react.createElement(Icon.A,{name:"key"})),react.createElement("h3",null,react.createElement("div",{className:"title-wrapper"},react.createElement("span",{className:"name"},this.props.resourceWorkspaceContext.details.resource.metadata.name),react.createElement("button",{type:"button",className:"title-link link no-border",title:this.translate("Copy the link to this password"),onClick:this.handlePermalinkClick},react.createElement(Icon.A,{name:"link"}),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"Copy the link to this password")))),react.createElement("span",{className:"subtitle"},this.subtitle)),react.createElement("button",{type:"button",className:"dialog-close button-transparent",onClick:this.handleCloseClick},react.createElement(Icon.A,{name:"close"}),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"Close")))),react.createElement(DisplayResourceDetails_DisplayResourceDetailsInformation,null),!this.isStandaloneTotpResource&&react.createElement(DisplayResourceDetailsDescription.A,null),canViewShare&&react.createElement(DisplayResourceDetails_DisplayResourceDetailsPermission,null),canUseTags&&react.createElement(DisplayResourceDetailsTag.A,null),canSeeComments&&react.createElement(DisplayResourceDetails_DisplayResourceDetailsComment,null),canUseAuditLog&&react.createElement(DisplayResourceDetailsActivity.A,null)))}}DisplayResourceDetails.propTypes={context:prop_types_default().any,rbacContext:prop_types_default().any,resourceWorkspaceContext:prop_types_default().object,resourceTypes:prop_types_default().instanceOf(resourceTypesCollection.A),actionFeedbackContext:prop_types_default().any,t:prop_types_default().func};const DisplayResourceDetails_DisplayResourceDetails=(0,AppContext.L)((0,RbacContext.x6)((0,ResourceWorkspaceContext.Qw)((0,ResourceTypesLocalStorageContext.KH)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(DisplayResourceDetails))))));DisplayResourceDetails.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"subtitle",docblock:"Get the sidebar subtitle",modifiers:["get"],params:[],returns:null,description:"Get the sidebar subtitle"},{name:"handlePermalinkClick",docblock:"Handle when the user copies the permalink.",modifiers:["async"],params:[],returns:null,description:"Handle when the user copies the permalink."},{name:"handleCloseClick",docblock:"Handle close sidebar click",modifiers:[],params:[],returns:null,description:"Handle close sidebar click"},{name:"isStandaloneTotpResource",docblock:"Is TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceDetails",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var FilterResourcesByTags=__webpack_require__("./src/react-extension/components/Resource/FilterResourcesByTags/FilterResourcesByTags.js"),FilterResourcesByText=__webpack_require__("./src/react-extension/components/Resource/FilterResourcesByText/FilterResourcesByText.js"),FilterResourcesByShortcuts=__webpack_require__("./src/react-extension/components/Resource/FilterResourcesByShortcuts/FilterResourcesByShortcuts.js"),FilterResourcesByBreadcrumb=__webpack_require__("./src/react-extension/components/Resource/FilterResourcesByBreadcrumb/FilterResourcesByBreadcrumb.js"),DisplayResourcesWorkspaceMenu=__webpack_require__("./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspaceMenu.js"),Logo=__webpack_require__("./src/react-extension/components/Common/Navigation/Header/Logo.js"),DisplayResourcesWorkspaceMainMenu=__webpack_require__("./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspaceMainMenu.js"),FilterResourcesByGroups=__webpack_require__("./src/react-extension/components/Resource/FilterResourcesByGroups/FilterResourcesByGroups.js"),DisplayResourcesList=__webpack_require__("./src/react-extension/components/Resource/DisplayResourcesList/DisplayResourcesList.js"),Dropdown=__webpack_require__("./src/react-extension/components/Common/Dropdown/Dropdown.js"),DropdownButton=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownButton.js"),DropdownMenu=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenu.js"),DropdownMenuItem=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenuItem.js"),columns=__webpack_require__("./src/img/svg/columns.svg"),caret_down=__webpack_require__("./src/img/svg/caret_down.svg"),info=__webpack_require__("./src/img/svg/info.svg");class Workspace extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleOnChangeColumnView=this.handleOnChangeColumnView.bind(this),this.handleViewDetailClickEvent=this.handleViewDetailClickEvent.bind(this)}hasLockDetail(){return this.props.resourceWorkspaceContext.lockDisplayDetail}get columnsResourceSetting(){return this.props.resourceWorkspaceContext.columnsResourceSetting?.items}handleOnChangeColumnView(event){const target=event.target;this.props.resourceWorkspaceContext.onChangeColumnView(target.id,target.checked)}handleViewDetailClickEvent(){this.props.resourceWorkspaceContext.onLockDetail()}render(){const canUseFolders=this.props.context.siteSettings.canIUse("folders")&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.FOLDERS_USE),canUseTags=this.props.context.siteSettings.canIUse("tags")&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.TAGS_USE);return react.createElement("div",{className:"panel main"},react.createElement("div",{className:"panel left"},react.createElement("div",{className:"sidebar-content"},react.createElement(Logo.A,null),react.createElement("div",{className:"main-action-wrapper"},react.createElement(DisplayResourcesWorkspaceMainMenu.A,null)),react.createElement("div",{className:"sidebar-content-left"},react.createElement(FilterResourcesByShortcuts.A,null),canUseFolders&&react.createElement(FilterResourcesByFolders.A,null),react.createElement(FilterResourcesByGroups.A,null),canUseTags&&react.createElement(FilterResourcesByTags.A,null)))),react.createElement("div",{className:"panel middle"},react.createElement("div",{className:"header"},react.createElement("div",{className:"header-left"},react.createElement(FilterResourcesByText.A,{placeholder:this.props.t("Search resource")})),react.createElement("div",{className:"header-right"},react.createElement(DisplayUserBadgeMenu.A,{baseUrl:this.props.context.userSettings.getTrustedDomain(),user:this.props.context.loggedInUser}))),react.createElement("div",{className:"middle-right"},react.createElement("div",{className:"breadcrumbs-and-grid"},react.createElement("div",{className:"top-bar"},react.createElement(FilterResourcesByBreadcrumb.A,null),react.createElement("div",{className:"action-bar"},react.createElement("div",{className:"col2_3 actions-wrapper"},this.props.resourceWorkspaceContext.selectedResources?.length>0?react.createElement(DisplayResourcesWorkspaceMenu.A,null):react.createElement(react.Fragment,null),react.createElement("div",{className:"actions secondary"},react.createElement("ul",null,react.createElement("li",null,react.createElement(Dropdown.A,null,react.createElement(DropdownButton.A,null,react.createElement(columns.A,null),react.createElement(es.x6,null,"Columns"),react.createElement(caret_down.A,null)),react.createElement(DropdownMenu.A,{direction:"left"},this.columnsResourceSetting?.map((column=>react.createElement(DropdownMenuItem.A,{keepOpenOnClick:!0,key:column.id,separator:"uri"===column.id},react.createElement("div",{className:"input checkbox"},react.createElement("input",{type:"checkbox",checked:column.show,id:column.id,name:column.id,onChange:this.handleOnChangeColumnView}),react.createElement("label",{htmlFor:column.id},react.createElement(es.x6,null,column.label))))))))),react.createElement("li",null,react.createElement("button",{type:"button",className:"button-toggle button-action button-action-icon info "+(this.hasLockDetail()?"active":""),onClick:this.handleViewDetailClickEvent},react.createElement(info.A,null),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"View detail"))))))))),react.createElement(DisplayResourcesList.A,null)),this.props.resourceWorkspaceContext.details.folder&&this.hasLockDetail()&&react.createElement(DisplayResourceFolderDetails_DisplayResourceFolderDetails,null),this.props.resourceWorkspaceContext.details.resource&&this.hasLockDetail()&&react.createElement(DisplayResourceDetails_DisplayResourceDetails,null))))}}Workspace.propTypes={context:prop_types_default().any,rbacContext:prop_types_default().any,resourceWorkspaceContext:prop_types_default().any,t:prop_types_default().func};const DisplayResourcesWorkspace=(0,AppContext.L)((0,RbacContext.x6)((0,ResourceWorkspaceContext.Qw)((0,es.CI)("common")(Workspace))));Workspace.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"hasLockDetail",docblock:"Has lock for the detail display\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has lock for the detail display"},{name:"columnsResourceSetting",docblock:"Get the columns list of resource\n@return {[Object]}",modifiers:["get"],params:[],returns:{type:{name:"tuple",elements:[{name:"Object"}]}},description:"Get the columns list of resource"},{name:"handleOnChangeColumnView",docblock:"Handle the event on when the column view is changing.\n@param {React.Event} event",modifiers:[],params:[{name:"event",type:{name:"React.Event"},optional:!1}],returns:null,description:"Handle the event on when the column view is changing."},{name:"handleViewDetailClickEvent",docblock:"handle view detail click event",modifiers:[],params:[],returns:null,description:"handle view detail click event"}],displayName:"Workspace",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var ManageContextualMenu=__webpack_require__("./src/react-extension/components/Common/ContextualMenu/ManageContextualMenu.js"),ManageDialogs=__webpack_require__("./src/react-extension/components/Common/Dialog/ManageDialogs/ManageDialogs.js"),ResourcePasswordGeneratorContext=__webpack_require__("./src/react-extension/contexts/ResourcePasswordGeneratorContext.js"),DragContext=__webpack_require__("./src/react-extension/contexts/DragContext.js"),ContextualMenuContext=__webpack_require__("./src/react-extension/contexts/ContextualMenuContext.js"),ExtAppContext=__webpack_require__("./src/react-extension/contexts/ExtAppContext.js"),NavigationContext=__webpack_require__("./src/react-extension/contexts/NavigationContext.js"),mockPort=__webpack_require__("./test/mocks/mockPort.js"),mockStorage=__webpack_require__("./test/mocks/mockStorage.js"),siteSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js"),MetadataTypesSettingsLocalStorageContext=__webpack_require__("./src/shared/context/MetadataTypesSettingsLocalStorageContext/MetadataTypesSettingsLocalStorageContext.js");const DisplayResourcesWorkspace_test_stories={title:"Workspaces/Resource",component:DisplayResourcesWorkspace,parameters:{docs:{description:{component:"DisplayResourcesWorkspace stories"}}}},ExtApp=({...args})=>react.createElement(react_router.fS,{initialEntries:["/app/passwords"]},react.createElement(ExtAppContext.A,{storage:args.storage,port:args.port},react.createElement(RbacContext.Ay,null,react.createElement(DialogContext.Ay,null,react.createElement(NavigationContext.Ay,null,react.createElement(ContextualMenuContext.Ay,null,react.createElement(ResourceWorkspaceContext.Ay,null,react.createElement(MetadataTypesSettingsLocalStorageContext.Ay,null,react.createElement(ResourceTypesLocalStorageContext.Ay,null,react.createElement(ResourcePasswordGeneratorContext.Ay,null,react.createElement(ManageContextualMenu.A,null),react.createElement(ManageDialogs.A,null),react.createElement(DragContext.Ay,null,react.createElement("div",{id:"container",className:"page password"},react.createElement("div",{id:"app",className:"app ready",tabIndex:"1000"},react.createElement(DisplayResourcesWorkspace,args)))))))))))))),storage=(0,mockStorage.A)(),proVersion={args:{port:(0,mockPort.A)(storage),storage},render:ExtApp},ceStorage=(0,mockStorage.A)(),cePort=(0,mockPort.A)(ceStorage);cePort.addRequestListener("passbolt.organization-settings.get",(()=>siteSettings.B));const ceVersion={args:{port:cePort,storage:ceStorage},render:ExtApp},__namedExportsOrder=["proVersion","ceVersion"];proVersion.parameters={...proVersion.parameters,docs:{...proVersion.parameters?.docs,source:{originalSource:"{\n  args: {\n    port: port,\n    storage: storage\n  },\n  render: ExtApp\n}",...proVersion.parameters?.docs?.source}}},ceVersion.parameters={...ceVersion.parameters,docs:{...ceVersion.parameters?.docs,source:{originalSource:"{\n  args: {\n    port: cePort,\n    storage: ceStorage\n  },\n  render: ExtApp\n}",...ceVersion.parameters?.docs?.source}}}},"./src/img/svg/columns.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgColumns(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25 2.25H3.75a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V3.75a1.5 1.5 0 0 0-1.5-1.5M6.75 2.25v13.5M11.25 2.25v13.5"})))}},"./src/img/svg/folder_plus.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgFolderPlus(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 7.5V12M6.75 9.75h4.5M15 15a1.5 1.5 0 0 0 1.5-1.5V6A1.5 1.5 0 0 0 15 4.5H9.075a1.5 1.5 0 0 1-1.267-.675l-.608-.9a1.5 1.5 0 0 0-1.253-.675H3a1.5 1.5 0 0 0-1.5 1.5v9.75A1.5 1.5 0 0 0 3 15z"})))}},"./src/img/svg/info.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgInfo(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:17,height:18,fill:"none",viewBox:"0 0 17 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.5 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15M8.5 12V9M8.5 6h.008"})))}},"./src/img/svg/upload_file.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgUploadFile(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.25 1.5H4.5A1.5 1.5 0 0 0 3 3v12a1.5 1.5 0 0 0 1.5 1.5h9A1.5 1.5 0 0 0 15 15V5.25z"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.5 1.5v3A1.5 1.5 0 0 0 12 6h3M9 9v4.5M11.25 11.25 9 9l-2.25 2.25"})))}},"./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspaceMainMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_29__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_ResourceFolder_CreateResourceFolder_CreateResourceFolder__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/ResourceFolder/CreateResourceFolder/CreateResourceFolder.js"),_ImportResources_ImportResources__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Resource/ImportResources/ImportResources.js"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_CreateResource_CreateResource__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Resource/CreateResource/CreateResource.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_contexts_WorkflowContext__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/react-extension/contexts/WorkflowContext.js"),_HandleTotpWorkflow_HandleTotpWorkflow__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/react-extension/components/Resource/HandleTotpWorkflow/HandleTotpWorkflow.js"),_HandleTotpWorkflow_HandleTotpWorkflowMode__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/react-extension/components/Resource/HandleTotpWorkflow/HandleTotpWorkflowMode.js"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),_shared_context_MetadataTypesSettingsLocalStorageContext_MetadataTypesSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/shared/context/MetadataTypesSettingsLocalStorageContext/MetadataTypesSettingsLocalStorageContext.js"),_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js"),_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js"),_shared_models_entity_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js"),_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownButton.js"),_img_svg_add_svg__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/img/svg/add.svg"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/img/svg/caret_down.svg"),_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenuItem.js"),_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/img/svg/key.svg"),_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/img/svg/totp.svg"),_img_svg_folder_plus_svg__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/img/svg/folder_plus.svg"),_img_svg_upload_file_svg__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/img/svg/upload_file.svg"),_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./src/react-extension/components/Common/Dropdown/Dropdown.js"),_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenu.js");class DisplayResourcesWorkspaceMainMenu extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleCreateMenuPasswordClickEvent=this.handleCreateMenuPasswordClickEvent.bind(this),this.handleMenuCreateTotpClickEvent=this.handleMenuCreateTotpClickEvent.bind(this),this.handleMenuCreateFolderClickEvent=this.handleMenuCreateFolderClickEvent.bind(this),this.handleImportClickEvent=this.handleImportClickEvent.bind(this)}handleCreateMenuPasswordClickEvent(){this.openPasswordCreateDialog()}handleImportClickEvent(){this.props.dialogContext.open(_ImportResources_ImportResources__WEBPACK_IMPORTED_MODULE_5__.A)}openPasswordCreateDialog(){let resourceType;this.props.metadataTypeSettings.isDefaultResourceTypeV5?resourceType=this.props.resourceTypes.getFirstBySlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.gG):this.props.metadataTypeSettings.isDefaultResourceTypeV4&&(resourceType=this.props.resourceTypes.getFirstBySlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.Bo)),this.props.dialogContext.open(_CreateResource_CreateResource__WEBPACK_IMPORTED_MODULE_7__.A,{folderParentId:this.folderIdSelected,resourceType})}handleMenuCreateTotpClickEvent(){this.openStandaloneTotpCreateDialog()}openStandaloneTotpCreateDialog(){let resourceType;this.props.metadataTypeSettings.isDefaultResourceTypeV5?resourceType=this.props.resourceTypes.getFirstBySlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.uQ):this.props.metadataTypeSettings.isDefaultResourceTypeV4&&(resourceType=this.props.resourceTypes.getFirstBySlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.KY)),this.props.workflowContext.start(_HandleTotpWorkflow_HandleTotpWorkflow__WEBPACK_IMPORTED_MODULE_11__.A,{mode:_HandleTotpWorkflow_HandleTotpWorkflowMode__WEBPACK_IMPORTED_MODULE_12__._.CREATE_STANDALONE_TOTP,folderParentId:this.folderIdSelected,resourceType})}handleMenuCreateFolderClickEvent(){this.openFolderCreateDialog()}openFolderCreateDialog(){this.props.dialogContext.open(_ResourceFolder_CreateResourceFolder_CreateResourceFolder__WEBPACK_IMPORTED_MODULE_4__.A,{folderParentId:this.folderIdSelected})}get folderSelected(){const filter=this.props.resourceWorkspaceContext.filter;return filter&&filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.FM.FOLDER?filter.payload.folder:null}get folderIdSelected(){return this.folderSelected&&this.folderSelected.id}canCreate(){return null===this.folderSelected||this.folderSelected.permission.type>=7}hasMetadataTypesSettings(){return Boolean(this.props.metadataTypeSettings)}canCreatePassword(){return this.props.metadataTypeSettings.isDefaultResourceTypeV5?this.props.resourceTypes?.hasOneWithSlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.gG):!!this.props.metadataTypeSettings.isDefaultResourceTypeV4&&this.props.resourceTypes?.hasOneWithSlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.Bo)}canCreateStandaloneTotp(){return this.props.metadataTypeSettings.isDefaultResourceTypeV5?this.props.resourceTypes?.hasOneWithSlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.uQ):!!this.props.metadataTypeSettings.isDefaultResourceTypeV4&&this.props.resourceTypes?.hasOneWithSlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_17__.KY)}render(){const canImport=this.props.context.siteSettings.canIUse("import")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_9__.e.RESOURCES_IMPORT),canUseFolders=this.props.context.siteSettings.canIUse("folders")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_9__.e.FOLDERS_USE),canUseTotp=this.props.context.siteSettings.canIUse("totpResourceTypes");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_27__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_19__.A,{className:"create primary",disabled:!this.canCreate()},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_add_svg__WEBPACK_IMPORTED_MODULE_20__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Create"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_21__.A,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_28__.A,null,!this.hasMetadataTypesSettings()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_22__.A,{separator:!canUseTotp},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_16__.A,{message:this.props.t("Loading metadata types settings")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"password_action",type:"button",className:"no-border",disabled:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_23__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Password"))))),canUseTotp&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_22__.A,{separator:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_16__.A,{message:this.props.t("Loading metadata types settings")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"totp_action",type:"button",className:"no-border",disabled:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_24__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"TOTP")))))),this.hasMetadataTypesSettings()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.canCreatePassword()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_22__.A,{separator:!canUseTotp},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"password_action",type:"button",className:"no-border",onClick:this.handleCreateMenuPasswordClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_23__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Password")))),canUseTotp&&this.canCreateStandaloneTotp()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_22__.A,{separator:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"totp_action",type:"button",className:"no-border",onClick:this.handleMenuCreateTotpClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_24__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"TOTP"))))),canUseFolders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_22__.A,{separator:canImport},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"folder_action",type:"button",className:"no-border",onClick:this.handleMenuCreateFolderClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_folder_plus_svg__WEBPACK_IMPORTED_MODULE_25__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Folder")))),canImport&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_22__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"import_action",type:"button",className:"no-border",onClick:this.handleImportClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_upload_file_svg__WEBPACK_IMPORTED_MODULE_26__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Import resources"))))))}}DisplayResourcesWorkspaceMainMenu.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_29___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_29___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_29___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_29___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_29___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_14__.A),metadataTypeSettings:prop_types__WEBPACK_IMPORTED_MODULE_29___default().instanceOf(_shared_models_entity_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_18__.Ay),workflowContext:prop_types__WEBPACK_IMPORTED_MODULE_29___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_29___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_8__.x6)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_2__.z9)((0,_contexts_WorkflowContext__WEBPACK_IMPORTED_MODULE_10__.AV)((0,_shared_context_MetadataTypesSettingsLocalStorageContext_MetadataTypesSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_15__.mw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_13__.KH)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.CI)("common")(DisplayResourcesWorkspaceMainMenu))))))));DisplayResourcesWorkspaceMainMenu.__docgenInfo={description:"This component allows the current user to create a new resource",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleCreateMenuPasswordClickEvent",docblock:"Handle password click event",modifiers:[],params:[],returns:null,description:"Handle password click event"},{name:"handleImportClickEvent",docblock:"Handle the import click event",modifiers:[],params:[],returns:null,description:"Handle the import click event"},{name:"openPasswordCreateDialog",docblock:"Open create password dialog",modifiers:[],params:[],returns:null,description:"Open create password dialog"},{name:"handleMenuCreateTotpClickEvent",docblock:"Handle folder click event",modifiers:[],params:[],returns:null,description:"Handle folder click event"},{name:"openStandaloneTotpCreateDialog",docblock:"Open create password dialog",modifiers:[],params:[],returns:null,description:"Open create password dialog"},{name:"handleMenuCreateFolderClickEvent",docblock:"Handle folder click event",modifiers:[],params:[],returns:null,description:"Handle folder click event"},{name:"openFolderCreateDialog",docblock:"Open create password dialog",modifiers:[],params:[],returns:null,description:"Open create password dialog"},{name:"folderSelected",docblock:"Get the currently selected folder. Return null if none selected.\n@returns {null|object}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[{name:"object"}]}},description:"Get the currently selected folder. Return null if none selected."},{name:"folderIdSelected",docblock:"the folder id selected\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"the folder id selected"},{name:"canCreate",docblock:"can create a resource\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"can create a resource"},{name:"hasMetadataTypesSettings",docblock:"Has metadata types settings\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has metadata types settings"},{name:"canCreatePassword",docblock:"Can create password\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can create password"},{name:"canCreateStandaloneTotp",docblock:"Can create standalone totp\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can create standalone totp"}],displayName:"DisplayResourcesWorkspaceMainMenu",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},metadataTypeSettings:{description:"",type:{name:"instanceOf",value:"MetadataTypesSettingsEntity"},required:!1},workflowContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/FilterResourcesByBreadcrumb/FilterResourcesByBreadcrumb.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_Common_Navigation_Breadcrumbs_Breadcrumbs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Navigation/Breadcrumbs/Breadcrumbs.js"),_Common_Navigation_Breadcrumbs_Breadcrumb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Navigation/Breadcrumbs/Breadcrumb.js"),_contexts_NavigationContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/NavigationContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FilterResourcesByBreadcrumb extends react__WEBPACK_IMPORTED_MODULE_0__.Component{get items(){const items=[this.allItemsBreadcrumb];switch(this.props.resourceWorkspaceContext.filter.type){case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.NONE:return[];case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.ALL:return items;case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.TEXT:{const isEmptySearchText=!this.props.resourceWorkspaceContext.filter.payload,filterText=this.props.resourceWorkspaceContext.filter.payload;return isEmptySearchText?items:[...items,this.getLastBreadcrumb(`${this.translate("Search:")} ${filterText}`)]}case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.FAVORITE:return[...items,this.getLastBreadcrumb(this.translate("Favorite"))];case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.RECENTLY_MODIFIED:return[...items,this.getLastBreadcrumb(this.translate("Recently modified"))];case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.SHARED_WITH_ME:return[...items,this.getLastBreadcrumb(this.translate("Shared with me"))];case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.EXPIRED:return[...items,this.getLastBreadcrumb(this.translate("Expired"))];case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.ITEMS_I_OWN:return[...items,this.getLastBreadcrumb(this.translate("Items I own"))];case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.TAG:{const filteredTagName=this.props.resourceWorkspaceContext.filter.payload.tag.slug;return[...items,this.getLastBreadcrumb(`${filteredTagName} ${this.translate("(tag)")}`)]}case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.ROOT_FOLDER:return[this.getLastBreadcrumb(this.translate("My workspace"))];case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.FOLDER:{const folder=this.props.resourceWorkspaceContext.filter.payload.folder,currentFolderName=folder&&folder.name||this.translate("N/A");return[this.getLastBreadcrumb(this.translate("My workspace")),this.getLastBreadcrumb(`${currentFolderName} ${this.translate("(folder)")}`)]}case _contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.GROUP:{const group=this.props.resourceWorkspaceContext.filter.payload.group,currentGroupName=group&&group.name||this.translate("N/A");return[...items,this.getLastBreadcrumb(`${currentGroupName} ${this.translate("(group)")}`)]}}return items}get allItemsBreadcrumb(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Navigation_Breadcrumbs_Breadcrumb__WEBPACK_IMPORTED_MODULE_3__.A,{name:this.translate("Home"),onClick:this.props.navigationContext.onGoToPasswordsRequested})}getLastBreadcrumb(name){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Navigation_Breadcrumbs_Breadcrumb__WEBPACK_IMPORTED_MODULE_3__.A,{name,onClick:this.onLastBreadcrumbClick.bind(this)})}async onLastBreadcrumbClick(){const pathname=this.props.location.pathname;this.props.history.push({pathname})}get isResourceNotNull(){return null!==this.props.resourceWorkspaceContext.filteredResources}get translate(){return this.props.t}render(){const count=this.props.resourceWorkspaceContext.filteredResources?.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Navigation_Breadcrumbs_Breadcrumbs__WEBPACK_IMPORTED_MODULE_2__.A,{items:this.items},this.isResourceNotNull&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"counter"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,{count},{count}," items")))}}FilterResourcesByBreadcrumb.propTypes={resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,location:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,history:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,navigationContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.y)((0,_contexts_NavigationContext__WEBPACK_IMPORTED_MODULE_4__.qN)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(FilterResourcesByBreadcrumb))));FilterResourcesByBreadcrumb.__docgenInfo={description:"The component displays a navigation breadcrumb given the applied resources filter",methods:[{name:"items",docblock:"Returns the current list of breadcrumb items",modifiers:["get"],params:[],returns:null,description:"Returns the current list of breadcrumb items"},{name:"allItemsBreadcrumb",docblock:"Returns the home breadcrumb items\n@return {JSX.Element}",modifiers:["get"],params:[],returns:{type:{name:"JSX.Element"}},description:"Returns the home breadcrumb items"},{name:"getLastBreadcrumb",docblock:"Return the last breadcrumb\n@param {string} name the breadcrumb name\n@return {JSX.Element}",modifiers:[],params:[{name:"name",description:"the breadcrumb name",type:{name:"string"},optional:!1}],returns:{type:{name:"JSX.Element"}},description:"Return the last breadcrumb"},{name:"onLastBreadcrumbClick",docblock:"Whenever the user click on the last breadcrumb\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Whenever the user click on the last breadcrumb"},{name:"isResourceNotNull",docblock:"Is resources not null\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is resources not null"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"FilterResourcesByBreadcrumb",props:{resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},location:{description:"",type:{name:"object"},required:!1},history:{description:"",type:{name:"object"},required:!1},navigationContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/FilterResourcesByGroups/FilterResourcesByGroups.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react_router_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FilterResourcesByGroups extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{open:!0,groups:null,loading:!1}}async componentDidMount(){await this.loadGroupsData()}async loadGroupsData(){if(!this.state.loading){this.setState({loading:!0});const groups=await this.props.context.port.request("passbolt.groups.find-my-groups");this.setState({groups,loading:!1})}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleClickGroupEvent=this.handleClickGroupEvent.bind(this)}async handleTitleClickEvent(){const open=!this.state.open;this.setState({open}),open&&await this.loadGroupsData()}handleClickGroupEvent(group){const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.FM.GROUP,payload:{group}};this.props.history.push({pathname:"/app/passwords",state:{filter}})}isSelected(groupId){const filter=this.props.resourceWorkspaceContext.filter;return filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.FM.GROUP&&filter.payload.group.id===groupId}hasGroup(){return this.groups&&this.groups.length>0}get groups(){return this.state.groups}get groupsSorted(){return this.groups.sort(((groupA,groupB)=>groupA.name.localeCompare(groupB.name)))}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.hasGroup()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"navigation-secondary-tree navigation-secondary navigation-groups accordion"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"node root "+(this.state.open?"open":"close")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row title",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h3",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"folders-label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"caret-down"}),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"caret-right"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Groups"))))))))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"tree ready"},this.groupsSorted.map((group=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"node root group-item",key:group.id},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row "+(this.isSelected(group.id)?"selected":""),onClick:()=>this.handleClickGroupEvent(group)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",title:group.name},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"users"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ellipsis"},group.name))))))))))))}}FilterResourcesByGroups.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,history:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object};const __WEBPACK_DEFAULT_EXPORT__=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_6__.y)((0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.CI)("common")(FilterResourcesByGroups))));FilterResourcesByGroups.__docgenInfo={description:"This component display groups to filter the resources",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"loadGroupsData",docblock:"Loads the groups the current user is member of.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Loads the groups the current user is member of."},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleTitleClickEvent",docblock:"Handle when the user click on the title.",modifiers:["async"],params:[],returns:null,description:"Handle when the user click on the title."},{name:"handleClickGroupEvent",docblock:"Handle when the user selects a group.",modifiers:[],params:[{name:"group",optional:!1}],returns:null,description:"Handle when the user selects a group."},{name:"isSelected",docblock:"Check if the tag associated to this component is selected.\n@returns {boolean}\n@param tagId\n@returns {boolean}",modifiers:[],params:[{name:"groupId",optional:!1}],returns:{type:{name:"boolean"}},description:"Check if the tag associated to this component is selected."},{name:"hasGroup",docblock:"has at least one group that the user belongs to\n@returns {*|boolean}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"mixed"},{name:"boolean"}]}},description:"has at least one group that the user belongs to"},{name:"groups",docblock:"get groups that the user belongs to\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"get groups that the user belongs to"},{name:"groupsSorted",docblock:"get the groups sorted\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"get the groups sorted"}],displayName:"FilterResourcesByGroups",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},history:{description:"",type:{name:"object"},required:!1}}}},"./src/react-extension/components/Resource/FilterResourcesByShortcuts/FilterResourcesByShortcuts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js");class FilterResourcesByShortcuts extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindHandlers()}bindHandlers(){this.handleAllItemsClick=this.handleAllItemsClick.bind(this),this.handleItemsIOwnClick=this.handleItemsIOwnClick.bind(this),this.handleFavoriteClick=this.handleFavoriteClick.bind(this),this.handleSharedWithMeClick=this.handleSharedWithMeClick.bind(this),this.handleRecentlyModifiedClick=this.handleRecentlyModifiedClick.bind(this),this.handleResourcesExpiredClick=this.handleResourcesExpiredClick.bind(this)}componentDidMount(){this.props.passwordExpiryContext.findSettings()}get isAllItemsSelected(){return this.props.resourceWorkspaceContext.filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.ALL}get isItemsIOwnSelected(){return this.props.resourceWorkspaceContext.filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.ITEMS_I_OWN}get isFavoriteSelected(){return this.props.resourceWorkspaceContext.filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.FAVORITE}get isSharedWithMeSelected(){return this.props.resourceWorkspaceContext.filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.SHARED_WITH_ME}get isRecentlyModifiedSelected(){return this.props.resourceWorkspaceContext.filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.RECENTLY_MODIFIED}get isResourcesExpiredSelected(){return this.props.resourceWorkspaceContext.filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.EXPIRED}handleAllItemsClick(){const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.ALL};this.props.history.push({pathname:"/app/passwords",state:{filter}})}handleRecentlyModifiedClick(){const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.RECENTLY_MODIFIED};this.props.history.push({pathname:"/app/passwords",state:{filter}})}handleFavoriteClick(){const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.FAVORITE};this.props.history.push({pathname:"/app/passwords",state:{filter}})}handleItemsIOwnClick(){const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.ITEMS_I_OWN};this.props.history.push({pathname:"/app/passwords",state:{filter}})}handleSharedWithMeClick(){const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.SHARED_WITH_ME};this.props.history.push({pathname:"/app/passwords",state:{filter}})}handleResourcesExpiredClick(){const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.FM.EXPIRED};this.props.history.push({pathname:"/app/passwords/filter/expired",state:{filter}})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"navigation-secondary navigation-shortcuts"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row "+(this.isAllItemsSelected?"selected":""),onClick:this.handleAllItemsClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Home"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row "+(this.isFavoriteSelected?"selected":""),onClick:this.handleFavoriteClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Favorites"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row "+(this.isRecentlyModifiedSelected?"selected":""),onClick:this.handleRecentlyModifiedClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Recently modified"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row "+(this.isSharedWithMeSelected?"selected":""),onClick:this.handleSharedWithMeClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Shared with me"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row "+(this.isItemsIOwnSelected?"selected":""),onClick:this.handleItemsIOwnClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Owned by me"))))))),this.props.passwordExpiryContext.isFeatureEnabled()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row "+(this.isResourcesExpiredSelected?"selected":""),onClick:this.handleResourcesExpiredClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Expired")))))))))}}FilterResourcesByShortcuts.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,history:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,passwordExpiryContext:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object};const __WEBPACK_DEFAULT_EXPORT__=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_6__.y)((0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.Qw)((0,_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_4__.f4)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(FilterResourcesByShortcuts)))));FilterResourcesByShortcuts.__docgenInfo={description:"This component allows to select shortcut filters applied on resources",methods:[{name:"bindHandlers",docblock:"Bind the component handlers",modifiers:[],params:[],returns:null,description:"Bind the component handlers"},{name:"isAllItemsSelected",docblock:"Returns true if the Home shortcut is currently selected",modifiers:["get"],params:[],returns:null,description:"Returns true if the Home shortcut is currently selected"},{name:"isItemsIOwnSelected",docblock:"Returns true if the Home shortcut is currently selected",modifiers:["get"],params:[],returns:null,description:"Returns true if the Home shortcut is currently selected"},{name:"isFavoriteSelected",docblock:"Returns true if the Favorite shortcut is currently selected",modifiers:["get"],params:[],returns:null,description:"Returns true if the Favorite shortcut is currently selected"},{name:"isSharedWithMeSelected",docblock:"Returns true if the Shared With Me shortcut is currently selected",modifiers:["get"],params:[],returns:null,description:"Returns true if the Shared With Me shortcut is currently selected"},{name:"isRecentlyModifiedSelected",docblock:"Returns true if the Recently modified shortcut is currently selected",modifiers:["get"],params:[],returns:null,description:"Returns true if the Recently modified shortcut is currently selected"},{name:"isResourcesExpiredSelected",docblock:"Returns true if the Expired shortcut is currently selected",modifiers:["get"],params:[],returns:null,description:"Returns true if the Expired shortcut is currently selected"},{name:"handleAllItemsClick",docblock:'Whenever the shortcut "Home" has been selected',modifiers:[],params:[],returns:null,description:'Whenever the shortcut "Home" has been selected'},{name:"handleRecentlyModifiedClick",docblock:'Whenever the shortcut "Recently modified" has been selected',modifiers:[],params:[],returns:null,description:'Whenever the shortcut "Recently modified" has been selected'},{name:"handleFavoriteClick",docblock:'Whenever the shortcut "Favorite" has been selected',modifiers:[],params:[],returns:null,description:'Whenever the shortcut "Favorite" has been selected'},{name:"handleItemsIOwnClick",docblock:'Whenever the shortcut "Items I own" has been selected',modifiers:[],params:[],returns:null,description:'Whenever the shortcut "Items I own" has been selected'},{name:"handleSharedWithMeClick",docblock:'Whenever the shortcut "Shared with me" has been selected',modifiers:[],params:[],returns:null,description:'Whenever the shortcut "Shared with me" has been selected'},{name:"handleResourcesExpiredClick",docblock:'Whenever the shortcut "Expired" has been selected',modifiers:[],params:[],returns:null,description:'Whenever the shortcut "Expired" has been selected'}],displayName:"FilterResourcesByShortcuts",props:{context:{description:"",type:{name:"object"},required:!1},history:{description:"",type:{name:"object"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1}}}},"./src/react-extension/components/Resource/FilterResourcesByText/FilterResourcesByText.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_router_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),_Common_Navigation_Search_SearchBar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Navigation/Search/SearchBar.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js");class FilterResourcesByText extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}bindCallbacks(){this.handleSearchEvent=this.handleSearchEvent.bind(this)}get defaultState(){return{text:"",debounceTimeoutIt:null}}componentDidUpdate(previousProps){this.handleFilterChanged(previousProps.resourceWorkspaceContext.filter)}componentWillUnmount(){clearTimeout(this.state.debounceTimeoutIt)}handleFilterChanged(previousFilter){const wasTextFilter=previousFilter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.FM.TEXT,isTextFilter=this.props.resourceWorkspaceContext.filter.type===_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.FM.TEXT;wasTextFilter&&!isTextFilter&&this.setState({text:""})}handleSearchEvent(text){this.search(text)}search(text){clearTimeout(this.state.debounceTimeoutId);const debounceTimeoutId=setTimeout((()=>{const filter=this.generateFilter(text);this.props.history.push({pathname:"/app/passwords",state:{filter}})}),300);this.setState({debounceTimeoutId,text})}generateFilter(text){return text.length>0?{type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.FM.TEXT,payload:text}:{type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.FM.ALL}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Navigation_Search_SearchBar__WEBPACK_IMPORTED_MODULE_1__.A,{disabled:this.props.disabled,onSearch:this.handleSearchEvent,placeholder:this.props.placeholder,value:this.state.text})}}FilterResourcesByText.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,history:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object},FilterResourcesByText.defaultProps={disabled:!1,placeholder:"Search"};const __WEBPACK_DEFAULT_EXPORT__=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.y)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)(FilterResourcesByText));FilterResourcesByText.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"handleFilterChanged",docblock:"Whenever the resource filter changed",modifiers:[],params:[{name:"previousFilter",optional:!1}],returns:null,description:"Whenever the resource filter changed"},{name:"handleSearchEvent",docblock:"Handle search input change\n@params {string} text The entered text",modifiers:[],params:[{name:"text",optional:!1}],returns:null,description:"Handle search input change"},{name:"search",docblock:"Search for the text\n@param text",modifiers:[],params:[{name:"text",optional:!1}],returns:null,description:"Search for the text"},{name:"generateFilter",docblock:"Generate the filter to apply on resources\n@param text\n@returns {{payload, type: string}|{type: string}}",modifiers:[],params:[{name:"text",optional:!1}],returns:{type:{name:"union",elements:[]}},description:"Generate the filter to apply on resources"}],displayName:"FilterResourcesByText",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},placeholder:{defaultValue:{value:"'Search'",computed:!1},description:"",type:{name:"string"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},history:{description:"",type:{name:"object"},required:!1}}}},"./src/react-extension/components/Resource/ImportResources/ImportResourcesResult.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class ImportResourcesResult extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{showErrorsDetails:!1}}bindHandlers(){this.handleClose=this.handleClose.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleErrorDetailsToggle=this.handleErrorDetailsToggle.bind(this),this.handleReferenceFolderClick=this.handleReferenceFolderClick.bind(this),this.handleReferenceTagClick=this.handleReferenceTagClick.bind(this)}handleClose(){this.close()}handleSubmit(e){e.preventDefault(),this.close()}handleErrorDetailsToggle(){this.toggleErrorDetails()}handleReferenceFolderClick(){const folder=this.resultReferenceFolder;this.props.history.push(`/app/folders/view/${folder.id}`),this.close()}handleReferenceTagClick(){const tag=this.resultReferenceTag,filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.FM.TAG,payload:{tag}};this.props.history.push({pathname:"/app/passwords",state:{filter}}),this.close()}close(){this.props.onClose()}toggleErrorDetails(){this.setState({showErrorDetails:!this.state.showErrorDetails})}get canIUseTags(){return this.props.context.siteSettings.canIUse("tags")}get canIUseFolders(){return this.props.context.siteSettings.canIUse("folders")}get result(){return this.props.resourceWorkspaceContext.resourceFileImportResult||{}}get resultCreated(){return this.result.created||{}}get resultCreatedFoldersCount(){return this.resultCreated.foldersCount||0}get resultCreatedResourcesCount(){return this.resultCreated.resourcesCount||0}get resultReferences(){return this.result.references||{}}get resultReferenceTag(){return this.resultReferences.tag||null}get resultReferenceFolder(){return this.resultReferences.folder||null}get resultErrors(){return this.result.errors||{}}get resultErrorsResources(){return this.resultErrors.resources||[]}get resultErrorsFolders(){return this.resultErrors.folders||[]}get hasErrorsResources(){return this.resultErrorsResources.length>0}get resultHasErrorsFolders(){return this.resultErrorsFolders.length>0}get resultHasErrors(){return this.hasErrorsResources||this.resultHasErrorsFolders}get formatErrors(){let result="";return this.hasErrorsResources&&(result+=`----------------------------\n${this.translate("Resources errors")}\n----------------------------\n${JSON.stringify(this.resultErrorsResources,null,4)}\n\n`),this.resultHasErrorsFolders&&(result+=`----------------------------\n${this.translate("Folder errors")}\n----------------------------\n${JSON.stringify(this.resultErrorsFolders,null,4)}`),result}get translate(){return this.props.t}render(){const createAndErrorResourcesCount=this.resultCreatedResourcesCount+this.resultErrorsResources.length,createAndErrorFoldersCount=this.resultCreatedFoldersCount+this.resultErrorsFolders.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_4__.A,{title:this.resultHasErrors?this.translate("Something went wrong!"):this.translate("Import success!"),onClose:this.handleClose},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},!this.hasErrorsResources&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,this.translate("{{count}} password has been imported successfully.",{count:this.resultCreatedResourcesCount}))),this.hasErrorsResources&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"error inline-error"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"There was an issue while importing passwords:")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,{count:createAndErrorResourcesCount},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,{numberResourceSuccess:this.resultCreatedResourcesCount}," out of ",{count:this.resultCreatedResourcesCount+this.resultErrorsResources.length})," password has been imported."))),this.canIUseFolders&&!this.resultHasErrorsFolders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,this.translate("{{count}} folder has been imported successfully.",{count:this.resultCreatedFoldersCount}))),this.canIUseFolders&&this.resultHasErrorsFolders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"error inline-error"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"There was an issue while importing folders:")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,{count:createAndErrorFoldersCount},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,{numberFolderSuccess:this.resultCreatedFoldersCount}," out of ",{count:this.resultCreatedFoldersCount+this.resultErrorsFolders.length})," folder has been imported."))),this.canIUseFolders&&this.resultReferenceFolder&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"You can find these newly imported passwords in the folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link inline no-border",onClick:this.handleReferenceFolderClick},{folderName:this.resultReferenceFolder.name}),".")),this.canIUseTags&&!this.resultReferenceFolder&&this.resultReferenceTag&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"You can find these newly imported passwords under the tag ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link inline no-border",onClick:this.handleReferenceTagClick},{tagName:this.resultReferenceTag.slug}),".")),this.resultHasErrors&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion error-details"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",onClick:this.handleErrorDetailsToggle},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Error details"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_6__.A,{name:this.state.showErrorDetails?"caret-up":"caret-down"}))),this.state.showErrorDetails&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"js_field_debug",className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Error details")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{id:"js_field_debug",defaultValue:`${this.formatErrors}`,readOnly:!0}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__.A,{value:this.translate("Ok")}))))}}ImportResourcesResult.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,history:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_9__.y)((0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.CI)("common")(ImportResourcesResult)))));ImportResourcesResult.__docgenInfo={description:"This component displays the success of a resource file import",methods:[{name:"defaultState",docblock:"Returns the component default state",modifiers:["get"],params:[],returns:null,description:"Returns the component default state"},{name:"bindHandlers",docblock:"Bind the component handlers",modifiers:[],params:[],returns:null,description:"Bind the component handlers"},{name:"handleClose",docblock:"Whenever the user intends to close the dialog",modifiers:[],params:[],returns:null,description:"Whenever the user intends to close the dialog"},{name:"handleSubmit",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleErrorDetailsToggle",docblock:"Handle the toggle display of error details",modifiers:[],params:[],returns:null,description:"Handle the toggle display of error details"},{name:"handleReferenceFolderClick",docblock:"Handle the click on the reference folder",modifiers:[],params:[],returns:null,description:"Handle the click on the reference folder"},{name:"handleReferenceTagClick",docblock:"Handle the click on the reference tag",modifiers:[],params:[],returns:null,description:"Handle the click on the reference tag"},{name:"close",docblock:"Closes the dialog",modifiers:[],params:[],returns:null,description:"Closes the dialog"},{name:"toggleErrorDetails",docblock:"Toggle the display of the error details",modifiers:[],params:[],returns:null,description:"Toggle the display of the error details"},{name:"canIUseTags",docblock:"Is the user allowed to use the tags capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the tags capability"},{name:"canIUseFolders",docblock:"Is the user allowed to use the folders capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the folders capability"},{name:"result",docblock:"Returns the import result",modifiers:["get"],params:[],returns:null,description:"Returns the import result"},{name:"resultCreated",docblock:"Created content\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Created content"},{name:"resultCreatedFoldersCount",docblock:"Created folders count\n@returns {int}",modifiers:["get"],params:[],returns:{type:{name:"int"}},description:"Created folders count"},{name:"resultCreatedResourcesCount",docblock:"Created resources count\n@returns {int}",modifiers:["get"],params:[],returns:{type:{name:"int"}},description:"Created resources count"},{name:"resultReferences",docblock:"The import references\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"The import references"},{name:"resultReferenceTag",docblock:"The unique tag used to mark the resources\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"The unique tag used to mark the resources"},{name:"resultReferenceFolder",docblock:"The folder used as root folder.\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"The folder used as root folder."},{name:"resultErrors",docblock:"Import errors\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Import errors"},{name:"resultErrorsResources",docblock:"Import resources errors\n@returns {array}",modifiers:["get"],params:[],returns:{type:{name:"array"}},description:"Import resources errors"},{name:"resultErrorsFolders",docblock:"Import folders errors\n@returns {array}",modifiers:["get"],params:[],returns:{type:{name:"array"}},description:"Import folders errors"},{name:"hasErrorsResources",docblock:"Errors occurred while importing the resources\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Errors occurred while importing the resources"},{name:"resultHasErrorsFolders",docblock:"Errors occurred while importing the folders\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Errors occurred while importing the folders"},{name:"resultHasErrors",docblock:"Errors occurred while importing the file\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Errors occurred while importing the file"},{name:"formatErrors",docblock:"Format the errors that occurred while importing\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Format the errors that occurred while importing"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ImportResourcesResult",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},history:{description:"",type:{name:"object"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceComment/AddResourceComment/AddResourceComment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/LoadingContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class AddResourceComment extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks(),this.createRefs()}componentDidMount(){this.textareaRef.current.focus()}getDefaultState(){return{content:"",actions:{processing:!1},errors:{}}}bindCallbacks(){this.handleSubmitEvent=this.handleSubmitEvent.bind(this),this.handleCancelEvent=this.handleCancelEvent.bind(this),this.handleContentChanged=this.handleContentChanged.bind(this),this.handleEscapeKeyPressed=this.handleEscapeKeyPressed.bind(this)}createRefs(){this.textareaRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}get isValid(){return Object.values(this.state.errors).every((value=>!value))}async handleSubmitEvent(event){if(event.preventDefault(),await this.validate(),this.isValid)try{await this.setState({actions:{processing:!0}}),this.props.loadingContext.add();const addedComment=await this.add();await this.handleSubmitSuccess(addedComment)}catch(error){await this.handleSubmitFailure(error)}}async handleSubmitSuccess(addedComment){this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The comment has been added successfully")),this.props.onAdd(addedComment)}async handleSubmitFailure(error){this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displayError(error.message),await this.setState({actions:{processing:!1},errors:{technicalError:error.message}})}handleCancelEvent(){this.props.onCancel()}handleContentChanged(event){this.setState({content:event.target.value})}handleEscapeKeyPressed(event){27===event.keyCode&&this.props.cancellable&&(event.stopPropagation(),this.props.onCancel())}async add(){const commentToAdd=this.state.content.trim(),payload={foreign_key:this.props.resource.id,foreign_model:"Resource",content:commentToAdd,user_id:this.props.context.loggedInUser.id};return await this.props.context.port.request("passbolt.comments.create",payload)}async validate(){const errors={isEmpty:""===this.state.content.trim(),isTooLong:this.state.content.length>256};await this.setState({errors})}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{className:"comment",autoComplete:"off"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"wrap-right-column"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"right-column"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input textarea required"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{ref:this.textareaRef,placeholder:this.translate("Add a comment"),"aria-required":!0,onChange:this.handleContentChanged,onKeyDown:this.handleEscapeKeyPressed,disabled:this.state.actions.processing}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"error-message"},this.state.errors.isEmpty&&this.translate("A comment is required."),this.state.errors.isTooLong&&this.translate("A comment must be less than 256 characters"),this.state.errors.technicalError)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"metadata"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"author username"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"You")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"modified"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"right now"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"},this.props.cancellable&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button cancel",onClick:this.handleCancelEvent,disabled:this.state.actions.processing},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Cancel"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"button primary comment-submit",type:"submit",onClick:this.handleSubmitEvent,disabled:this.state.actions.processing},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Save")))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"left-column"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:this.props.context.loggedInUser,baseUrl:this.props.context.siteSettings.settings.app.url,className:"author profile picture avatar"})))}}AddResourceComment.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,resource:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,onAdd:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func,onCancel:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func,cancellable:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,loadingContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_4__.$A)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_2__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(AddResourceComment))));AddResourceComment.__docgenInfo={description:"This component allows the current user to add a new comment on a resource",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"createRefs",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"isValid",docblock:"@returns {boolean} Returns true if the form is valid",modifiers:["get"],params:[],returns:{description:"Returns true if the form is valid",type:{name:"boolean"}},description:null},{name:"handleSubmitEvent",docblock:"Handle the submitting of the new comment\n@param event The event object",modifiers:["async"],params:[{name:"event",description:"The event object",optional:!1}],returns:null,description:"Handle the submitting of the new comment"},{name:"handleSubmitSuccess",docblock:"Whenever the submit action has been successful\n@param addedComment The added comment",modifiers:["async"],params:[{name:"addedComment",description:"The added comment",optional:!1}],returns:null,description:"Whenever the submit action has been successful"},{name:"handleSubmitFailure",docblock:"Whenever the submit action has not been successful\n@param error\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"error",optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Whenever the submit action has not been successful"},{name:"handleCancelEvent",docblock:"Handle the cancellation of the add of the comment",modifiers:[],params:[],returns:null,description:"Handle the cancellation of the add of the comment"},{name:"handleContentChanged",docblock:"Whenever the content has changed\n@param event The DOM event",modifiers:[],params:[{name:"event",description:"The DOM event",optional:!1}],returns:null,description:"Whenever the content has changed"},{name:"handleEscapeKeyPressed",docblock:"Whenever the user press the escape key\n@param event Keypressed event",modifiers:[],params:[{name:"event",description:"Keypressed event",optional:!1}],returns:null,description:"Whenever the user press the escape key"},{name:"add",docblock:"Add a new comment\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Add a new comment"},{name:"validate",docblock:"Validate the form.",modifiers:["async"],params:[],returns:null,description:"Validate the form."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"AddResourceComment",props:{context:{description:"",type:{name:"any"},required:!1},resource:{description:"",type:{name:"object"},required:!1},onAdd:{description:"",type:{name:"func"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},cancellable:{description:"",type:{name:"bool"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},loadingContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceComment/ConfirmResourceCommentDeletion/ConfirmResourceCommentDeletion.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/LoadingContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class ConfirmDeleteDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props,context){super(props,context),this.state=this.defaultState,this.bindEventHandlers()}get defaultState(){return{actions:{processing:!1}}}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleConfirm=this.handleConfirm.bind(this)}async handleConfirm(event){event.preventDefault();try{await this.setState({actions:{processing:!0}}),this.props.loadingContext.add(),await this.props.context.port.request("passbolt.comments.delete",this.props.context.resourceCommentId),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The comment has been deleted successfully")),await this.setState({actions:{processing:!1}}),this.props.context.setContext({resourceCommentId:null,mustRefreshComments:!0}),this.props.onClose()}catch(error){await this.setState({actions:{processing:!1}}),await this.props.actionFeedbackContext.displayError(error),this.props.context.setContext({resourceCommentId:null,mustRefreshComments:!1}),this.props.onClose()}}handleClose(){this.props.context.setContext({resourceCommentId:null}),this.props.onClose()}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_4__.A,{className:"comment-delete-dialog",title:this.translate("Delete comment?"),onClose:this.handleClose,disabled:this.state.actions.processing},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{className:"comment-delete-form",onSubmit:this.handleConfirm,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Are you sure you want to delete the comment?")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Once the comment is deleted, it will be removed permanently and will not be recoverable."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__.A,{disabled:this.state.actions.processing,onClick:this.handleClose}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_2__.A,{disabled:this.state.actions.processing,processing:this.state.processing,value:this.translate("Delete"),warning:!0})))))}}ConfirmDeleteDialog.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,loadingContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,onClose:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_6__.$A)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_5__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.CI)("common")(ConfirmDeleteDialog))));ConfirmDeleteDialog.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Return default state\n@returns {Object} default state",modifiers:["get"],params:[],returns:{description:"default state",type:{name:"Object"}},description:"Return default state"},{name:"bindEventHandlers",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleConfirm",docblock:"Handle the confirm event\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle the confirm event"},{name:"handleClose",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ConfirmDeleteDialog",props:{context:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},loadingContext:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceComment/DisplayResourceCommentList/DisplayResourceCommentList.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DisplayResourceCommentList_DisplayResourceCommentList});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),UserAvatar=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ConfirmResourceCommentDeletion=__webpack_require__("./src/react-extension/components/ResourceComment/ConfirmResourceCommentDeletion/ConfirmResourceCommentDeletion.js");class DeleteComment extends react.Component{constructor(props){super(props),this.bindEventHandlers()}bindEventHandlers(){this.delete=this.delete.bind(this)}delete(){this.props.context.setContext({resourceCommentId:this.props.commentId}),this.props.dialogContext.open(ConfirmResourceCommentDeletion.A)}render(){return react.createElement("button",{type:"button",className:"delete-comment button-transparent",onClick:this.delete},react.createElement("span",{className:"svg-icon"},react.createElement(Icon.A,{name:"trash"})),react.createElement("span",{className:"visuallyhidden"},react.createElement(es.x6,null,"Delete")))}}DeleteComment.propTypes={context:prop_types_default().any,commentId:prop_types_default().string,dialogContext:prop_types_default().any};const DeleteResourceComment_DeleteComment=(0,AppContext.L)((0,DialogContext.z9)((0,es.CI)("common")(DeleteComment)));DeleteComment.__docgenInfo={description:"This component allows to delete a resource comment ( at least call-to-action )",methods:[{name:"bindEventHandlers",docblock:"Binds the component event handlers",modifiers:[],params:[],returns:null,description:"Binds the component event handlers"},{name:"delete",docblock:"Call to delete the comment",modifiers:[],params:[],returns:null,description:"Call to delete the comment"}],displayName:"DeleteComment",props:{context:{description:"",type:{name:"any"},required:!1},commentId:{description:"",type:{name:"string"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1}}};var luxon=__webpack_require__("./node_modules/luxon/src/luxon.js"),spinner=__webpack_require__("./src/img/svg/spinner.svg"),dateUtils=__webpack_require__("./src/shared/utils/dateUtils.js"),userUtils=__webpack_require__("./src/shared/utils/userUtils.js");class DisplayResourceCommentList extends react.Component{constructor(props){super(props),this.state=this.getDefaultState()}getDefaultState(){return{comments:[],actions:{loading:!1}}}async componentDidMount(){await this.fetch()}componentDidUpdate(prevProps){this.checkRefresh(prevProps.mustRefresh)}async fetch(){this.setState({actions:{loading:!0}});const resourceId=this.props.resource.id,comments=await this.props.context.port.request("passbolt.comments.find-all-by-resource",resourceId);this.setState({comments:comments.sort(((comment1,comment2)=>luxon.c9.fromISO(comment2.created)<luxon.c9.fromISO(comment1.created)?-1:1))}),this.props.onFetch(comments),this.setState({actions:{loading:!1}})}checkRefresh(previousValue){(this.props.mustRefresh&&!previousValue||this.props.context.mustRefreshComments)&&this.fetch(),this.props.context.mustRefreshComments&&this.props.context.setContext({mustRefreshComments:!1})}canDeleteComment(comment){return this.isOwner(comment)}isOwner(comment){return this.props.context.loggedInUser.id===comment.created_by}isUserSuspended(user){return this.props.context.siteSettings.canIUse("disableUser")&&(0,userUtils.B7)(user)}render(){return react.createElement(react.Fragment,null,!this.state.actions.loading&&react.createElement("ul",null,this.state.comments.map(((comment,index)=>react.createElement("li",{key:index,className:"comment "+(this.isUserSuspended(comment.creator)?"from-suspended-user":"")},react.createElement("div",{className:"wrap-right-column"},react.createElement("div",{className:"right-column"},react.createElement("p",null," ",comment.content," "),react.createElement("div",{className:"metadata"},this.isOwner(comment)&&react.createElement("span",{className:"author username"},react.createElement(es.x6,null,"You")),!this.isOwner(comment)&&react.createElement("span",{className:"author username"},comment.creator.profile.first_name," ",comment.creator.profile.last_name,this.isUserSuspended(comment.creator)&&react.createElement("span",{className:"suspended"}," ",react.createElement(es.x6,null,"(suspended)"))),react.createElement("span",{className:"modified"},(0,dateUtils.kD)(comment.created,this.props.t,this.props.context.locale))),react.createElement("div",{className:"actions"},react.createElement("ul",null,react.createElement("li",null,this.canDeleteComment(comment)&&react.createElement(DeleteResourceComment_DeleteComment,{commentId:comment.id})))))),react.createElement("div",{className:"left-column"},react.createElement(UserAvatar.A,{user:comment.creator,baseUrl:this.props.context.siteSettings.settings.app.url,className:"author profile picture avatar"})))))),this.state.actions.loading&&react.createElement("div",{className:"processing-wrapper"},react.createElement(spinner.A,null),react.createElement("span",{className:"processing-text"},react.createElement(es.x6,null,"Retrieving comments"))))}}const DisplayResourceCommentList_DisplayResourceCommentList=(0,AppContext.L)((0,es.CI)("common")(DisplayResourceCommentList));DisplayResourceCommentList.propTypes={context:prop_types_default().any,resource:prop_types_default().object,onFetch:prop_types_default().func,mustRefresh:prop_types_default().bool,t:prop_types_default().func},DisplayResourceCommentList.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"fetch",docblock:"Fetch the comments of the resource",modifiers:["async"],params:[],returns:null,description:"Fetch the comments of the resource"},{name:"checkRefresh",docblock:"Check if the comment list must be refreshed\n@param previousValue The previous props value of the mustRefresh flag",modifiers:[],params:[{name:"previousValue",description:"The previous props value of the mustRefresh flag",optional:!1}],returns:null,description:"Check if the comment list must be refreshed"},{name:"canDeleteComment",docblock:"Returns true if the givne comment can be deleted\n@param comment A comment",modifiers:[],params:[{name:"comment",description:"A comment",optional:!1}],returns:null,description:"Returns true if the givne comment can be deleted"},{name:"isOwner",docblock:"Returns true if the the comment owner is the current logged in user\n@param comment A comment",modifiers:[],params:[{name:"comment",description:"A comment",optional:!1}],returns:null,description:"Returns true if the the comment owner is the current logged in user"},{name:"isUserSuspended",docblock:"Returns true if the feature flag disableUser is enabled and the given user is suspended.\n@param {object} user\n@returns {boolean}",modifiers:[],params:[{name:"user",type:{name:"object"},optional:!1}],returns:{type:{name:"boolean"}},description:"Returns true if the feature flag disableUser is enabled and the given user is suspended."}],displayName:"DisplayResourceCommentList",props:{context:{description:"",type:{name:"any"},required:!1},resource:{description:"",type:{name:"object"},required:!1},onFetch:{description:"",type:{name:"func"},required:!1},mustRefresh:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDescription/EditResourceDescription/EditResourceDescription.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_13__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/LoadingContext.js"),_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_shared_models_resource_ResourcePasswordStringViewModel__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/shared/models/resource/ResourcePasswordStringViewModel.js"),_shared_models_resource_ResourcePasswordDescriptionViewModel__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/shared/models/resource/ResourcePasswordDescriptionViewModel.js"),_shared_models_resource_ResourcePasswordDescriptionTotpViewModel__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/shared/models/resource/ResourcePasswordDescriptionTotpViewModel.js"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");class EditResourceDescription extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.createInputRef()}get defaultState(){return{processing:!1,unexpectedError:null,resourceViewModel:null,originalResourceTypeSlug:null,hasAlreadyBeenValidated:!1}}bindCallbacks(){this.handleEditorClickEvent=this.handleEditorClickEvent.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleDescriptionToggle=this.handleDescriptionToggle.bind(this)}createInputRef(){this.elementRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.textareaRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}componentDidMount(){this.handleOutsideEditorClickEvent(),this.initializeResourceViewModel(),this.setFocusOnDescriptionEditor()}componentWillUnmount(){this.removeOutsideEditorClickEvent()}initializeResourceViewModel(){const originalResourceType=this.props.resourceTypes?.getFirstById(this.props.resource.resource_type_id);let resourceViewModel=this.getViewModelTypeBySlug(originalResourceType?.slug).createFromEntity(this.props.resource);this.props.plaintextSecretDto&&(resourceViewModel=resourceViewModel.updateSecret(this.props.plaintextSecretDto)),this.setState({resourceViewModel,originalResourceTypeSlug:originalResourceType?.slug})}getViewModelTypeBySlug(slug){switch(slug){case _shared_models_resource_ResourcePasswordStringViewModel__WEBPACK_IMPORTED_MODULE_8__.A.resourceTypeSlug:return _shared_models_resource_ResourcePasswordStringViewModel__WEBPACK_IMPORTED_MODULE_8__.A;case _shared_models_resource_ResourcePasswordDescriptionViewModel__WEBPACK_IMPORTED_MODULE_9__.A.resourceTypeSlug:return _shared_models_resource_ResourcePasswordDescriptionViewModel__WEBPACK_IMPORTED_MODULE_9__.A;case _shared_models_resource_ResourcePasswordDescriptionTotpViewModel__WEBPACK_IMPORTED_MODULE_10__.A.resourceTypeSlug:return _shared_models_resource_ResourcePasswordDescriptionTotpViewModel__WEBPACK_IMPORTED_MODULE_10__.A;default:throw new Error("There is no ResourceViewModel mathching the given slug")}}async save(){this.setState({processing:!0});try{const updateDescriptionResult=await this.updateResource();await this.props.actionFeedbackContext.displaySuccess(this.translate("The description has been updated successfully")),await this.props.resourceWorkspaceContext.onResourceDescriptionEdited(),this.props.onUpdate(updateDescriptionResult.description,updateDescriptionResult.plaintextSecretDto),this.close()}catch(error){if("UserAbortsOperationError"===error.name)return void this.setState({processing:!1});console.error(error),this.setState({unexpectedError:error.message,processing:!1})}}async updateResource(){let resourceViewModel=this.state.resourceViewModel;const resourceDto=resourceViewModel.toResourceDto(),hasResourceTypeChange=this.state.originalResourceTypeSlug!==resourceViewModel.constructor.resourceTypeSlug,hasSecretChanged=this.props.plaintextSecretDto&&resourceViewModel.areSecretsDifferent(this.props.plaintextSecretDto),shouldUpdateSecret=hasResourceTypeChange||hasSecretChanged;if(hasResourceTypeChange){const description=resourceViewModel.description,plaintextSecretDto=await this.props.context.port.request("passbolt.secret.find-by-resource-id",resourceViewModel.id);resourceViewModel=resourceViewModel.updateSecret(plaintextSecretDto).cloneWithMutation("description",description)}const secretDto=shouldUpdateSecret?resourceViewModel.toSecretDto():null;return await this.props.context.port.request("passbolt.resources.update",resourceDto,secretDto),{description:this.state.resourceViewModel.description,plaintextSecretDto:this.state.resourceViewModel.toSecretDto()}}close(){return this.props.onClose()}removeOutsideEditorClickEvent(){document.removeEventListener("click",this.handleEditorClickEvent,{capture:!0})}handleOutsideEditorClickEvent(){document.addEventListener("click",this.handleEditorClickEvent,{capture:!0})}setFocusOnDescriptionEditor(){const descriptionLength=this.state.resourceViewModel?.description?.length||0;this.textareaRef.current.selectionStart=descriptionLength,this.textareaRef.current.selectionEnd=descriptionLength,this.textareaRef.current.focus()}handleEditorClickEvent(event){this.elementRef.current.contains(event.target)||this.state.processing||this.close()}hasAllInputDisabled(){return this.state.processing||this.state.loading}handleKeyDown(event){27===event.keyCode&&(event.stopPropagation(),this.close())}handleCancel(){this.close()}handleInputChange(event){const target=event.target,name=target.name,value=target.value||null;this.setState({resourceViewModel:this.state.resourceViewModel.cloneWithMutation(name,value)})}async handleFormSubmit(event){event.preventDefault(),this.state.processing||(this.props.loadingContext.add(),await this.save(),this.props.loadingContext.remove())}async handleDescriptionToggle(){if(!(this.state.originalResourceTypeSlug===_shared_models_resource_ResourcePasswordStringViewModel__WEBPACK_IMPORTED_MODULE_8__.A.resourceTypeSlug))return;if(!this.state.resourceViewModel.canToggleDescription())return;const newResourceViewModelType=this.state.resourceViewModel.isDescriptionUnencrypted()?_shared_models_resource_ResourcePasswordDescriptionViewModel__WEBPACK_IMPORTED_MODULE_9__.A:_shared_models_resource_ResourcePasswordStringViewModel__WEBPACK_IMPORTED_MODULE_8__.A,resourceType=this.props.resourceTypes.getFirstBySlug(newResourceViewModelType.resourceTypeSlug),newResourceViewModel=new newResourceViewModelType({...this.state.resourceViewModel,resource_type_id:resourceType.id});this.setState({resourceViewModel:newResourceViewModel})}get translate(){return this.props.t}render(){const isReady=Boolean(this.state.resourceViewModel);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onKeyDown:this.handleKeyDown,noValidate:!0,className:"description-editor"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content",ref:this.elementRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input textarea required"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{name:"description",className:"fluid","aria-required":!0,ref:this.textareaRef,maxLength:"10000",placeholder:this.translate("Enter a description"),value:isReady?this.state.resourceViewModel.description:"",onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),autoComplete:"off"})),this.state.unexpectedError&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"feedbacks error-message"},this.state.unexpectedError),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"description-lock"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleDescriptionToggle,className:"link no-border lock-toggle"},isReady&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.state.resourceViewModel.isDescriptionUnencrypted()?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_4__.A,{message:this.translate("Do not store sensitive data or click here to enable encryption for the description field.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_7__.A,{name:"lock-open"})):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_4__.A,{message:this.translate("The description content will be encrypted."),icon:""},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_7__.A,{name:"lock"}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.hasAllInputDisabled(),className:"cancel",onClick:this.handleCancel},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.hasAllInputDisabled(),className:"primary description-editor-submit "+(this.hasAllInputDisabled()?"processing":""),onClick:this.handleFormSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Save"))))))}}EditResourceDescription.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_13___default().any,plaintextSecretDto:prop_types__WEBPACK_IMPORTED_MODULE_13___default().object,resource:prop_types__WEBPACK_IMPORTED_MODULE_13___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_13___default().func,onUpdate:prop_types__WEBPACK_IMPORTED_MODULE_13___default().func,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_13___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_13___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_12__.A),actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_13___default().any,loadingContext:prop_types__WEBPACK_IMPORTED_MODULE_13___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_13___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_5__.Qw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_11__.KH)((0,_contexts_LoadingContext__WEBPACK_IMPORTED_MODULE_3__.$A)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_2__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.CI)("common")(EditResourceDescription))))));EditResourceDescription.__docgenInfo={description:"This component allows the current user to edit the description of a resource",methods:[{name:"defaultState",docblock:"Get default state\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"createInputRef",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"initializeResourceViewModel",docblock:"initialize the resource view model",modifiers:[],params:[],returns:null,description:"initialize the resource view model"},{name:"getViewModelTypeBySlug",docblock:"Returns the corresponding ResourceViewModel type based on the given slug.\n@param {string} slug\n@returns {typeof ResourceViewModel}\n@throws {Error} if the slug is unknown",modifiers:[],params:[{name:"slug",type:{name:"string"},optional:!1}],returns:null,description:"Returns the corresponding ResourceViewModel type based on the given slug."},{name:"save",docblock:"Save the changes.",modifiers:["async"],params:[],returns:null,description:"Save the changes."},{name:"updateResource",docblock:"Update the resource\n@returns {Promise<Object>} updated resource",modifiers:["async"],params:[],returns:{description:"updated resource",type:{name:"Promise",elements:[{name:"Object"}]}},description:"Update the resource"},{name:"close",docblock:"Toggle the editor back to display mode",modifiers:[],params:[],returns:null,description:"Toggle the editor back to display mode"},{name:"removeOutsideEditorClickEvent",docblock:"Remove listener for outside description editor clicks that aims to closes the editor",modifiers:[],params:[],returns:null,description:"Remove listener for outside description editor clicks that aims to closes the editor"},{name:"handleOutsideEditorClickEvent",docblock:"handle a click outside of the editor",modifiers:[],params:[],returns:null,description:"handle a click outside of the editor"},{name:"setFocusOnDescriptionEditor",docblock:"set the focus at the end of the description editor",modifiers:[],params:[],returns:null,description:"set the focus at the end of the description editor"},{name:"handleEditorClickEvent",docblock:"Handle click events on editor. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle click events on editor. Hide the component if the click occurred outside of the component."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is loading or processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is loading or processing"},{name:"handleKeyDown",docblock:"Handle key down on the component.\n@params {ReactEvent} The react event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle key down on the component."},{name:"handleCancel",docblock:"On cancel button click",modifiers:[],params:[],returns:null,description:"On cancel button click"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"handleDescriptionToggle",docblock:"Switch to toggle description field encryption",modifiers:["async"],params:[],returns:null,description:"Switch to toggle description field encryption"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"EditResourceDescription",props:{context:{description:"",type:{name:"any"},required:!1},plaintextSecretDto:{description:"",type:{name:"object"},required:!1},resource:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},onUpdate:{description:"",type:{name:"func"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},loadingContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsActivity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/shared/utils/dateUtils.js");class DisplayResourceDetailsActivity extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{activities:null,activitiesPage:1,loadingMore:!1,open:!1,loading:!0}}async componentDidUpdate(prevProps){prevProps.resourceWorkspaceContext.details&&await this.handleResourceChange(prevProps.resourceWorkspaceContext.details.resource),prevProps.resourceWorkspaceContext.refresh&&await this.handleResourceActivitiesRefresh(prevProps.resourceWorkspaceContext.refresh.activities)}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this)}async handleResourceChange(previousResource){if(!this.state.open)return;if(this.resource.id===previousResource.id)return;const state=Object.assign({},this.getDefaultState(),{open:!0});await this.setState(state),await this.fetch(),this.setState({loading:!1})}async handleResourceActivitiesRefresh(hasPreviouslyRefreshed){!hasPreviouslyRefreshed&&this.props.resourceWorkspaceContext.refresh.activities&&(await this.fetch(),await this.props.resourceWorkspaceContext.onResourceActivitiesRefreshed())}async handleTitleClickEvent(){if(this.state.open){const defaultState=this.getDefaultState();this.setState(defaultState)}else await this.setState({loading:!0,open:!0}),await this.fetch(),this.setState({loading:!1})}async handleMoreClickEvent(){const activitiesPage=this.state.activitiesPage+1;await this.setState({activitiesPage,loadingMore:!0}),await this.fetch(),this.setState({loadingMore:!1})}async fetch(){const options={limit:5,page:this.state.activitiesPage},newActivities=await this.props.context.port.request("passbolt.actionlogs.find-all-for","Resource",this.resource.id,options);let activities;activities=this.state.activitiesPage>1?[...this.state.activities||[],...newActivities]:[...newActivities],this.setState({activities})}getActivityCreatorFullName(user){return`${user.profile.first_name} ${user.profile.last_name}`}getPermissionAroName(permission){if(permission.user){const profile=permission.user.profile;return`${profile.first_name} ${profile.last_name}`}return permission.group.name}getPermissionLabel(permission){switch(permission.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}getPermissionChangeTypeLabel(type){switch(type){case"created":return this.translate("new");case"updated":return this.translate("updated");case"removed":return this.translate("deleted")}}get baseUrl(){return this.props.context.userSettings.getTrustedDomain()}renderResouceCreatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," created item ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{resourceName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderResourceUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," updated item ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{resourceName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderSecretReadActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," accessed secret of item ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{resourceName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderSecretUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," updated secret of item ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{resourceName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderSharedActivityPermissionChangeItem(permission,changeType){const permissionLabel=this.getPermissionLabel(permission),permissionAroName=this.getPermissionAroName(permission),changeTypeLabel=this.getPermissionChangeTypeLabel(changeType);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:permission.id,className:"clearfix"},permission.user&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:permission.user,baseUrl:this.baseUrl}),permission.group&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__.A,{group:permission.group}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},permissionAroName),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"permission-type"}," - ",permissionLabel)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"type"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:changeType},changeTypeLabel)))}renderPermissionsUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," changed permissions of item ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{resourceName})," with")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate),react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"permissions-list"},activity.data.permissions.added.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"created"))),activity.data.permissions.updated.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"updated"))),activity.data.permissions.removed.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"removed")))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderUnknownActivity(activity){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Unknown activity, please contact your administrator."))))}renderActivity(activity){let render;switch(activity.type){case"Resources.created":render=this.renderResouceCreatedActivity(activity);break;case"Resources.updated":render=this.renderResourceUpdatedActivity(activity);break;case"Permissions.updated":render=this.renderPermissionsUpdatedActivity(activity);break;case"Resource.Secrets.read":render=this.renderSecretReadActivity(activity);break;case"Resource.Secrets.updated":render=this.renderSecretUpdatedActivity(activity);break;default:render=this.renderUnknownActivity(activity)}return render}mustDisplayMoreButton(){return!this.state.activities.some((activity=>"Resources.created"===activity.type))}get resource(){return this.props.resourceWorkspaceContext.details.resource}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"activity accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Activity"),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__.A,{name:"caret-down"}),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__.A,{name:"caret-right"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},this.state.loading&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"processing-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_6__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Retrieving activities"))),!this.state.loading&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"ready"},this.state.activities.map((activity=>this.renderActivity(activity)))),this.mustDisplayMoreButton()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleMoreClickEvent,disabled:this.state.loadingMore,className:"link no-border action-logs-load-more "+(this.state.loadingMore?"processing":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"More")))))))}}DisplayResourceDetailsActivity.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_9___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.CI)("common")(DisplayResourceDetailsActivity)));DisplayResourceDetailsActivity.__docgenInfo={description:"This component display activity section of a resource",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleResourceChange",docblock:"Check if the resource has changed and fetch\n@param previousResource",modifiers:["async"],params:[{name:"previousResource",optional:!1}],returns:null,description:"Check if the resource has changed and fetch"},{name:"handleResourceActivitiesRefresh",docblock:"Handle the refresh of the activities\n@param hasPreviouslyRefreshed True if one previously refreshed the activities",modifiers:["async"],params:[{name:"hasPreviouslyRefreshed",description:"True if one previously refreshed the activities",optional:!1}],returns:null,description:"Handle the refresh of the activities"},{name:"handleTitleClickEvent",docblock:"handle when the users click on the section header.\nOpen/Close it.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the section header.\nOpen/Close it."},{name:"handleMoreClickEvent",docblock:"handle when the users click on the more button.\nOpen/Close it.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the more button.\nOpen/Close it."},{name:"fetch",docblock:"Fetch the resource activities\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Fetch the resource activities"},{name:"getActivityCreatorFullName",docblock:"Get an activity creator full name\n@param {object} user The creator\n@return string",modifiers:[],params:[{name:"user",description:"The creator",type:{name:"object"},optional:!1}],returns:{description:"string"},description:"Get an activity creator full name"},{name:"getPermissionAroName",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionLabel",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionChangeTypeLabel",docblock:"Get permission change type label\n@param {string} type The target change type",modifiers:[],params:[{name:"type",description:"The target change type",type:{name:"string"},optional:!1}],returns:null,description:"Get permission change type label"},{name:"baseUrl",docblock:"Get the base url\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the base url"},{name:"renderResouceCreatedActivity",docblock:"Render a resource created activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a resource created activity."},{name:"renderResourceUpdatedActivity",docblock:"Render a resource updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a resource updated activity."},{name:"renderSecretReadActivity",docblock:"Render a secret read activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a secret read activity."},{name:"renderSecretUpdatedActivity",docblock:"Render a secret updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a secret updated activity."},{name:"renderSharedActivityPermissionChangeItem",docblock:"Render a shared activity permission change item.\n@param {object} permission The target permission\n@param {string} changeType The change type\n@returns {JSX}",modifiers:[],params:[{name:"permission",description:"The target permission",type:{name:"object"},optional:!1},{name:"changeType",description:"The change type",type:{name:"string"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a shared activity permission change item."},{name:"renderPermissionsUpdatedActivity",docblock:"Render a permissions updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a permissions updated activity."},{name:"renderUnknownActivity",docblock:"Render an unknown activity.\n@returns {JSX}",modifiers:[],params:[{name:"activity",optional:!1}],returns:{type:{name:"JSX"}},description:"Render an unknown activity."},{name:"renderActivity",docblock:"Render an activity\n@param {object} activity The activity to render",modifiers:[],params:[{name:"activity",description:"The activity to render",type:{name:"object"},optional:!1}],returns:null,description:"Render an activity"},{name:"mustDisplayMoreButton",docblock:"Check if the more button should be displayed.\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the more button should be displayed."},{name:"resource",docblock:"Returns the current detailed resource",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed resource"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceDetailsActivity",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsDescription.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/img/svg/spinner.svg"),_ResourceDescription_EditResourceDescription_EditResourceDescription__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/ResourceDescription/EditResourceDescription/EditResourceDescription.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");class DisplayResourceDetailsDescription extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1,error:!1,isSecretDecrypting:!1,showDescriptionEditor:!1,description:null,plaintextSecretDto:null}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.toggleInputDescriptionEditor=this.toggleInputDescriptionEditor.bind(this),this.onCloseDescriptionEditor=this.onCloseDescriptionEditor.bind(this),this.onUpdateDescription=this.onUpdateDescription.bind(this),this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleRetryDecryptClickEvent=this.handleRetryDecryptClickEvent.bind(this)}componentDidMount(){this.state.open&&this.loadDescription()}componentDidUpdate(prevProps){(this.resource.id!==prevProps.resourceWorkspaceContext.details.resource.id||this.resource.modified!==prevProps.resourceWorkspaceContext.details.resource.modified&&!this.state.showDescriptionEditor)&&(this.state.open?this.loadDescription():this.setState({description:null}))}async loadDescription(){if(this.isResourceDescriptionEncrypted())return this.decryptAndLoadEncryptedDescription();const description=this.resource.metadata.description;this.setState({description,plaintextSecretDto:null,error:!1})}isResourceDescriptionEncrypted(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasSecretDescription()}async decryptAndLoadEncryptedDescription(){this.setState({isSecretDecrypting:!0});try{const plaintextSecretDto=await this.props.context.port.request("passbolt.secret.find-by-resource-id",this.resource.id);this.setState({description:plaintextSecretDto.description,plaintextSecretDto,isSecretDecrypting:!1,error:!1}),this.props.resourceWorkspaceContext.onResourceDescriptionDecrypted()}catch(error){console.error(error),this.setState({description:null,plaintextSecretDto:null,isSecretDecrypting:!1,error:!0,errorMsg:this.props.t("Decryption failed, click here to retry")}),await this.props.actionFeedbackContext.displayError(error.message)}}get resource(){return this.props.resourceWorkspaceContext.details.resource}get description(){return this.state.description}handleTitleClickEvent(){const open=!this.state.open;open&&null===this.state.description&&this.loadDescription(),this.setState({open})}toggleInputDescriptionEditor(){if(!Boolean(window.getSelection().toString())&&this.canEdit()){const showDescriptionEditor=!this.state.showDescriptionEditor;this.setState({showDescriptionEditor})}}handleEditClickEvent(){null===this.state.description&&this.handleRetryDecryptClickEvent(),this.toggleInputDescriptionEditor()}handleRetryDecryptClickEvent(){this.loadDescription()}onCloseDescriptionEditor(){this.setState({showDescriptionEditor:!1})}onUpdateDescription(description,plaintextSecretDto){this.setState({description,plaintextSecretDto,showDescriptionEditor:!1})}hasNoDescription(){return null===this.state.description||0===this.state.description?.length}canEdit(){return this.resource.permission&&this.resource.permission.type>=7}mustShowDescriptionEditor(){return!this.state.error&&!this.state.isSecretDecrypting&&this.canEdit()&&this.state.showDescriptionEditor}mustShowEmptyDescription(){return!this.state.error&&!this.state.isSecretDecrypting&&this.hasNoDescription()&&!this.state.showDescriptionEditor}mustShowDescription(){return!(this.state.error||this.state.isSecretDecrypting||this.hasNoDescription()||this.state.showDescriptionEditor)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleTitleClickEvent,className:"link no-border section-opener"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Description"),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"caret-down"}),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"caret-right"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},this.canEdit()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"section-action button-transparent",onClick:this.handleEditClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"edit"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Edit"))),this.state.isSecretDecrypting&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_2__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Decrypting")))),this.state.error&&!this.state.isSecretDecrypting&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border empty-content",onClick:this.handleRetryDecryptClickEvent},this.state.errorMsg)),this.mustShowEmptyDescription()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content"},!this.canEdit()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"empty-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"There is no description.")),this.canEdit()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"empty-content",onClick:this.toggleInputDescriptionEditor},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"There is no description yet, click here to add one."))),this.mustShowDescription()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content",onClick:this.toggleInputDescriptionEditor},this.state.description),this.mustShowDescriptionEditor()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ResourceDescription_EditResourceDescription_EditResourceDescription__WEBPACK_IMPORTED_MODULE_3__.A,{plaintextSecretDto:this.state.plaintextSecretDto,resource:this.resource,onClose:this.onCloseDescriptionEditor,onUpdate:this.onUpdateDescription,onUpdateDescription:this.onUpdateDescription})))}}DisplayResourceDetailsDescription.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_10___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_9__.A),actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__.Qw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_8__.KH)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_7__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.CI)("common")(DisplayResourceDetailsDescription)))));DisplayResourceDetailsDescription.__docgenInfo={description:"This component display the description section of a resource",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"loadDescription",docblock:"Load the description.\nTrigger the secret decrypting if the description is part of the resource secret.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the description.\nTrigger the secret decrypting if the description is part of the resource secret."},{name:"isResourceDescriptionEncrypted",docblock:null,modifiers:[],params:[],returns:null},{name:"decryptAndLoadEncryptedDescription",docblock:"Decrypt the resource secret and load its description in the component.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Decrypt the resource secret and load its description in the component."},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"description",docblock:"Get the description if decrypted undefined otherwise\n@returns {string|undefined} description",modifiers:["get"],params:[],returns:{description:"description",type:{name:"union",elements:[{name:"string"}]}},description:"Get the description if decrypted undefined otherwise"},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"toggleInputDescriptionEditor",docblock:"Display or not the input tag editor",modifiers:[],params:[],returns:null,description:"Display or not the input tag editor"},{name:"handleEditClickEvent",docblock:"Check if description must be decrypted before editing",modifiers:[],params:[],returns:null,description:"Check if description must be decrypted before editing"},{name:"handleRetryDecryptClickEvent",docblock:"Retry to decrypted description",modifiers:[],params:[],returns:null,description:"Retry to decrypted description"},{name:"onCloseDescriptionEditor",docblock:"Handle the description editor closing.",modifiers:[],params:[],returns:null,description:"Handle the description editor closing."},{name:"onUpdateDescription",docblock:"Handle the description updated.\n@param {string} description The updated description\n@param {object} plaintextSecretDto The plaintext secret DTO updated if any.",modifiers:[],params:[{name:"description",description:"The updated description",type:{name:"string"},optional:!1},{name:"plaintextSecretDto",description:"The plaintext secret DTO updated if any.",type:{name:"object"},optional:!1}],returns:null,description:"Handle the description updated."},{name:"hasNoDescription",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null},{name:"canEdit",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null},{name:"mustShowDescriptionEditor",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null},{name:"mustShowEmptyDescription",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null},{name:"mustShowDescription",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null}],displayName:"DisplayResourceDetailsDescription",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/shared/utils/dateUtils.js");class DisplayResourceFolderDetailsActivity extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{activities:null,activitiesPage:1,loadingMore:!1,open:!1,loading:!0}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this)}async componentDidUpdate(prevProps){await this.handleResourceChange(prevProps.resourceWorkspaceContext.details.folder)}async handleResourceChange(previousFolder){if(this.state.open&&this.folder.id!==previousFolder.id){const state=Object.assign({},this.defaultState,{open:!0});await this.setState(state),await this.fetch(),this.setState({loading:!1})}}async handleTitleClickEvent(){if(this.state.open){const defaultState=this.defaultState;this.setState(defaultState)}else await this.setState({loading:!0,open:!0}),await this.fetch(),this.setState({loading:!1})}async handleMoreClickEvent(){const activitiesPage=this.state.activitiesPage+1;await this.setState({activitiesPage,loadingMore:!0}),await this.fetch(),this.setState({loadingMore:!1})}async fetch(){const options={limit:5,page:this.state.activitiesPage},newActivities=await this.props.context.port.request("passbolt.actionlogs.find-all-for","Folder",this.folder.id,options);let activities;activities=this.state.activitiesPage>1?[...this.state.activities||[],...newActivities]:[...newActivities],this.setState({activities})}getActivityCreatorFullName(user){return`${user.profile.first_name} ${user.profile.last_name}`}getPermissionAroName(permission){if(permission.user){const profile=permission.user.profile;return`${profile.first_name} ${profile.last_name}`}return permission.group.name}getPermissionLabel(permission){switch(permission.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}getPermissionChangeTypeLabel(type){switch(type){case"created":return this.translate("new");case"updated":return this.translate("updated");case"removed":return this.translate("deleted")}}renderFolderCreatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," created folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderFolderUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," updated folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderSharedActivityPermissionChangeItem(permission,changeType){const permissionLabel=this.getPermissionLabel(permission),permissionAroName=this.getPermissionAroName(permission),changeTypeLabel=this.getPermissionChangeTypeLabel(changeType);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:permission.id,className:"clearfix"},permission.user&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:permission.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),permission.group&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__.A,{group:permission.group}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},permissionAroName),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"permission-type"}," - ",permissionLabel)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"type"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:changeType},changeTypeLabel)))}renderPermissionsUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_8__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," changed permissions of folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName})," with")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate),react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"permissions-list"},activity.data.permissions.added.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"created"))),activity.data.permissions.updated.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"updated"))),activity.data.permissions.removed.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"removed")))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderUnknownActivity(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Unknown activity, please contact your administrator."))))}renderActivity(activity){let render;switch(activity.type){case"Folders.created":render=this.renderFolderCreatedActivity(activity);break;case"Folders.updated":render=this.renderFolderUpdatedActivity(activity);break;case"Permissions.updated":render=this.renderPermissionsUpdatedActivity(activity);break;default:render=this.renderUnknownActivity(activity)}return render}isMoreButtonVisible(){return null!==this.state.activities&&!this.state.activities.some((activity=>"Folders.created"===activity.type))}get folder(){return this.props.resourceWorkspaceContext.details.folder}get translate(){return this.props.t}render(){const loadingActivities=null===this.state.activities,isMoreButtonVisible=this.isMoreButtonVisible();return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"activity accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Activity"),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__.A,{name:"caret-down"}),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__.A,{name:"caret-right"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},loadingActivities&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"processing-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_6__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"Retrieving activities"))),!loadingActivities&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"ready"},this.state.activities.map((activity=>this.renderActivity(activity)))),isMoreButtonVisible&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleMoreClickEvent,disabled:this.state.loadingMore,className:"link no-border action-logs-load-more "+(this.state.loadingMore?"processing":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_7__.x6,null,"More")))))))}}DisplayResourceFolderDetailsActivity.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_9___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.CI)("common")(DisplayResourceFolderDetailsActivity)));DisplayResourceFolderDetailsActivity.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleResourceChange",docblock:"Check if the folder has changed and fetch\n@param previousFolder",modifiers:["async"],params:[{name:"previousFolder",optional:!1}],returns:null,description:"Check if the folder has changed and fetch"},{name:"handleTitleClickEvent",docblock:"handle when the users click on the section header.\nOpen/Close it.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the section header.\nOpen/Close it."},{name:"handleMoreClickEvent",docblock:"handle when the users click on the more button.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the more button."},{name:"fetch",docblock:"Fetch the folder activities\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Fetch the folder activities"},{name:"getActivityCreatorFullName",docblock:"Get an activity creator full name\n@param {object} user The creator\n@return string",modifiers:[],params:[{name:"user",description:"The creator",type:{name:"object"},optional:!1}],returns:{description:"string"},description:"Get an activity creator full name"},{name:"getPermissionAroName",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionLabel",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionChangeTypeLabel",docblock:"Get permission change type label\n@param {string} type The target change type",modifiers:[],params:[{name:"type",description:"The target change type",type:{name:"string"},optional:!1}],returns:null,description:"Get permission change type label"},{name:"renderFolderCreatedActivity",docblock:"Render a created activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a created activity."},{name:"renderFolderUpdatedActivity",docblock:"Render an updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render an updated activity."},{name:"renderSharedActivityPermissionChangeItem",docblock:"Render a shared activity permission change item.\n@param {object} permission The target permission\n@param {string} changeType The change type\n@returns {JSX}",modifiers:[],params:[{name:"permission",description:"The target permission",type:{name:"object"},optional:!1},{name:"changeType",description:"The change type",type:{name:"string"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a shared activity permission change item."},{name:"renderPermissionsUpdatedActivity",docblock:"Render a permissions updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a permissions updated activity."},{name:"renderUnknownActivity",docblock:"Render an unknown activity.\n@returns {JSX}",modifiers:[],params:[],returns:{type:{name:"JSX"}},description:"Render an unknown activity."},{name:"renderActivity",docblock:"Render an activity\n@param {object} activity The activity to render",modifiers:[],params:[{name:"activity",description:"The activity to render",type:{name:"object"},optional:!1}],returns:null,description:"Render an activity"},{name:"isMoreButtonVisible",docblock:"Is the more button visible\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is the more button visible"},{name:"folder",docblock:"Returns the current detailed folder",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed folder"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceFolderDetailsActivity",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsInformation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/utils/dateUtils.js");class DisplayResourceFolderDetailsInformation extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!0,creator:null,modifier:null}}bindCallbacks(){this.handleFolderParentClickEvent=this.handleFolderParentClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}componentDidMount(){this.state.open&&this.loadUserInformation()}componentDidUpdate(prevProps){this.handleFolderChange(prevProps.resourceWorkspaceContext.details.folder)}handleFolderChange(previousFolder){(this.folder.created_by!==previousFolder.created_by||this.folder.modified_by!==previousFolder.modified_by)&&this.state.open&&this.loadUserInformation()}async loadUserInformation(){const folderInformation=await this.props.context.port.request("passbolt.folders.find-details",this.folder.id);this.setState({creator:folderInformation?.creator,modifier:folderInformation?.modifier})}handleFolderParentClickEvent(){if(this.folder.folder_parent_id){const folderParent=this.props.context.folders.find((item=>item.id===this.folder.folder_parent_id));this.props.history.push(`/app/folders/view/${folderParent.id}`)}else{const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.FM.ROOT_FOLDER};this.props.history.push("/app/passwords",{filter})}}handleTitleClickEvent(){const open=!this.state.open;this.setState({open})}get folder(){return this.props.resourceWorkspaceContext.details.folder}getFolderName(folderId){if(null===folderId)return"/";if(this.props.context.folders){const folder=this.props.context.folders.find((item=>item.id===folderId));return folder?.name}return""}isFolderParentShared(){if(null!==this.folder.folder_parent_id&&this.props.context.folders){const folder=this.props.context.folders.find((item=>item.id===this.folder.folder_parent_id));if(folder)return!folder.personal}return!1}render(){const creatorUsername=this.state.creator?.username||"",modifierUsername=this.state.modifier?.username||"",createdDateTimeAgo=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_5__.kD)(this.folder.created,this.props.t,this.props.context.locale),modifiedDateTimeAgo=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_5__.kD)(this.folder.modified,this.props.t,this.props.context.locale),folderParentName=this.getFolderName(this.folder.folder_parent_id);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Information"),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"caret-down"}),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"caret-right"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"username"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Name")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"value"},this.folder.name)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"modified"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Modified")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"value",title:this.folder.modified},modifiedDateTimeAgo)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"modified-by"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Modified by")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"value"},modifierUsername)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"modified"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Created")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"value",title:this.folder.created},createdDateTimeAgo)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"modified-by"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Created by")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"value"},creatorUsername)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"location"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Location")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleFolderParentClickEvent,disabled:!this.props.context.folders,className:"link no-border folder-link"},this.isFolderParentShared()?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"folder-shared"}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"folder"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,folderParentName)))))))}}DisplayResourceFolderDetailsInformation.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,history:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)((0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.y)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.CI)("common")(DisplayResourceFolderDetailsInformation))));DisplayResourceFolderDetailsInformation.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleFolderChange",docblock:"Check if the folder has changed and fetch\n@param {object} previousFolder The previously selected folder",modifiers:[],params:[{name:"previousFolder",description:"The previously selected folder",type:{name:"object"},optional:!1}],returns:null,description:"Check if the folder has changed and fetch"},{name:"loadUserInformation",docblock:"Loads the information about the creator and the modifier of the current selected folder.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Loads the information about the creator and the modifier of the current selected folder."},{name:"handleFolderParentClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"folder",docblock:"Returns the current detailed folder",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed folder"},{name:"getFolderName",docblock:"Get the folder name.\n@param {string} folderId The folder id\n@returns {string}",modifiers:[],params:[{name:"folderId",description:"The folder id",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Get the folder name."},{name:"isFolderParentShared",docblock:"Check if folder parent is shared\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if folder parent is shared"}],displayName:"DisplayResourceFolderDetailsInformation",props:{context:{description:"",type:{name:"any"},required:!1},history:{description:"",type:{name:"object"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsPermissions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/img/svg/spinner.svg"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Share/ShareDialog.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class DisplayResourceFolderDetailsPermissions extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{permissions:null,open:!1,loading:!0}}bindCallbacks(){this.handlePermissionsEditClickEvent=this.handlePermissionsEditClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}async componentDidUpdate(prevProps){await this.handleFolderChange(prevProps.resourceWorkspaceContext.details.folder)}handleFolderChange(previousFolder){this.folder.id!==previousFolder.id&&this.state.open&&this.fetch()}async fetch(){this.setState({loading:!0});const permissions=await this.props.context.port.request("passbolt.permissions.find-aco-permissions-for-display",this.folder.id,"Folder");permissions&&permissions.sort(((permissionA,permissionB)=>this.sortPermissions(permissionA,permissionB))),this.setState({permissions,loading:!1})}sortPermissions(permissionA,permissionB){return permissionA.user&&permissionB.user?permissionA.user.profile.first_name===permissionB.user.profile.first_name?permissionA.user.profile.last_name<permissionB.user.profile.last_name?-1:1:permissionA.user.profile.first_name<permissionB.user.profile.first_name?-1:1:!permissionA.user&&permissionB.user?1:permissionA.user&&!permissionB.user||permissionA.group.name<permissionB.group.name?-1:1}handleTitleClickEvent(){const open=!this.state.open;open&&this.fetch(),this.setState({open})}handlePermissionsEditClickEvent(){const foldersIds=[this.folder.id];this.props.context.setContext({shareDialogProps:{foldersIds}}),this.props.dialogContext.open(_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_7__.A)}get folder(){return this.props.resourceWorkspaceContext.details.folder}getPermissionAroName(permission){if(permission.user){const profile=permission.user.profile;return`${profile.first_name} ${profile.last_name}`}return permission.group.name}getPermissionLabel(permission){switch(permission.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}isLoading(){return this.state.loading}canShare(){return this.folder.permission&&15===this.folder.permission.type}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sharedwith accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"Shared with"),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_3__.A,{name:"caret-down"}),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_3__.A,{name:"caret-right"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},this.canShare()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handlePermissionsEditClickEvent,id:"share-folder",className:"section-action button-transparent"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_3__.A,{name:"edit"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"modify"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"shared-with ready"},this.isLoading()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"processing-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_4__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"Retrieving permissions"))),this.state.permissions&&this.state.permissions.map((permission=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:permission.id,className:"usercard-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},this.getPermissionAroName(permission)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo"},this.getPermissionLabel(permission)))),permission.user&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:permission.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),permission.group&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__.A,{group:permission.group}))))))))}}DisplayResourceFolderDetailsPermissions.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__.L)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_6__.z9)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_9__.CI)("common")(DisplayResourceFolderDetailsPermissions))));DisplayResourceFolderDetailsPermissions.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleFolderChange",docblock:"Check if the folder has changed and fetch\n@param previousFolder",modifiers:[],params:[{name:"previousFolder",optional:!1}],returns:null,description:"Check if the folder has changed and fetch"},{name:"fetch",docblock:"Get the folder permissions.",modifiers:["async"],params:[],returns:null,description:"Get the folder permissions."},{name:"sortPermissions",docblock:"Sort permission by user firstname and by group name\n@param permissionA\n@param permissionB\n@returns {number}",modifiers:[],params:[{name:"permissionA",optional:!1},{name:"permissionB",optional:!1}],returns:{type:{name:"number"}},description:"Sort permission by user firstname and by group name"},{name:"handleTitleClickEvent",docblock:"handle when the users click on the section header.\nOpen/Close it.",modifiers:[],params:[],returns:null,description:"handle when the users click on the section header.\nOpen/Close it."},{name:"handlePermissionsEditClickEvent",docblock:"Handle when the user edits the folder permissions.",modifiers:[],params:[],returns:null,description:"Handle when the user edits the folder permissions."},{name:"folder",docblock:"Returns the current detailed resource",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed resource"},{name:"getPermissionAroName",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionLabel",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"isLoading",docblock:"check if no permission is present\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"check if no permission is present"},{name:"canShare",docblock:"Check if the user can share the folder.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the user can share the folder."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceFolderDetailsPermissions",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/AccountRecoveryUserContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Le:()=>withAccountRecovery,On:()=>AccountRecoveryUserContextProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js");const AccountRecoveryUserContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({accountRecoveryOrganizationPolicy:null,status:null,isDataLoaded:!1,findAccountRecoveryPolicy:()=>{},getOrganizationPolicy:()=>{},getRequestor:()=>{},getRequestedDate:()=>{},getPolicy:()=>{},getUserAccountRecoverySubscriptionStatus:()=>{},isAccountRecoveryChoiceRequired:()=>{},isPolicyEnabled:()=>{},loadAccountRecoveryPolicy:()=>{},reloadAccountRecoveryPolicy:()=>{},isReady:()=>{}});class AccountRecoveryUserContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{accountRecoveryOrganizationPolicy:null,status:null,isDataLoaded:!1,findAccountRecoveryPolicy:this.findAccountRecoveryPolicy.bind(this),getOrganizationPolicy:this.getOrganizationPolicy.bind(this),getRequestor:this.getRequestor.bind(this),getRequestedDate:this.getRequestedDate.bind(this),getPolicy:this.getPolicy.bind(this),getUserAccountRecoverySubscriptionStatus:this.getUserAccountRecoverySubscriptionStatus.bind(this),setUserAccountRecoveryStatus:this.setUserAccountRecoveryStatus.bind(this),isAccountRecoveryChoiceRequired:this.isAccountRecoveryChoiceRequired.bind(this),isPolicyEnabled:this.isPolicyEnabled.bind(this),loadAccountRecoveryPolicy:this.loadAccountRecoveryPolicy.bind(this),reloadAccountRecoveryPolicy:this.reloadAccountRecoveryPolicy.bind(this),isReady:this.isReady.bind(this)}}async loadAccountRecoveryPolicy(){this.state.isDataLoaded||await this.findAccountRecoveryPolicy()}async reloadAccountRecoveryPolicy(){await this.findAccountRecoveryPolicy()}async findAccountRecoveryPolicy(){if(!this.props.context.siteSettings.canIUse("accountRecovery"))return;const loggedInUser=this.props.context.loggedInUser;if(!loggedInUser)return;const accountRecoveryOrganizationPolicy=await this.props.accountRecoveryUserService.getOrganizationAccountRecoverySettings(),status=loggedInUser.account_recovery_user_setting?.status||AccountRecoveryUserContextProvider.STATUS_PENDING;this.setState({accountRecoveryOrganizationPolicy,status,isDataLoaded:!0})}isReady(){return this.state.isDataLoaded}getOrganizationPolicy(){return this.state.accountRecoveryOrganizationPolicy}getRequestedDate(){return this.getOrganizationPolicy()?.modified}getRequestor(){return this.getOrganizationPolicy()?.creator}getPolicy(){return this.getOrganizationPolicy()?.policy}getUserAccountRecoverySubscriptionStatus(){return this.state.status}setUserAccountRecoveryStatus(status){this.setState({status})}isAccountRecoveryChoiceRequired(){if(null===this.getOrganizationPolicy())return!1;const policy=this.getPolicy();return this.state.status===AccountRecoveryUserContextProvider.STATUS_PENDING&&policy!==AccountRecoveryUserContextProvider.POLICY_DISABLED}isPolicyEnabled(){const policy=this.getPolicy();return policy&&policy!==AccountRecoveryUserContextProvider.POLICY_DISABLED}static get STATUS_PENDING(){return"pending"}static get POLICY_DISABLED(){return"disabled"}static get POLICY_MANDATORY(){return"mandatory"}static get POLICY_OPT_OUT(){return"opt-out"}static get STATUS_APPROVED(){return"approved"}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(AccountRecoveryUserContext.Provider,{value:this.state},this.props.children)}}AccountRecoveryUserContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any.isRequired,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,accountRecoveryUserService:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object.isRequired};(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(AccountRecoveryUserContextProvider);function withAccountRecovery(WrappedComponent){return class WithAccountRecovery extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(AccountRecoveryUserContext.Consumer,null,(accountRecoveryContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{accountRecoveryContext,...this.props})))}}}AccountRecoveryUserContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"loadAccountRecoveryPolicy",docblock:"Run the initial load of the account recovery policy.",modifiers:["async"],params:[],returns:null,description:"Run the initial load of the account recovery policy."},{name:"reloadAccountRecoveryPolicy",docblock:"Reload the account recovery policy regardless of having it cached or not.",modifiers:["async"],params:[],returns:null,description:"Reload the account recovery policy regardless of having it cached or not."},{name:"findAccountRecoveryPolicy",docblock:"Find the account recovery policy",modifiers:["async"],params:[],returns:null,description:"Find the account recovery policy"},{name:"isReady",docblock:"Returns true when the data has been loaded\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true when the data has been loaded"},{name:"getOrganizationPolicy",docblock:"Returns the full organization policy settings.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Returns the full organization policy settings."},{name:"getRequestedDate",docblock:"Get the date at when an administrator asked users to set their account recovery policy setting.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get the date at when an administrator asked users to set their account recovery policy setting."},{name:"getRequestor",docblock:"Get the user that asked the account recovery policy settings to be set.\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get the user that asked the account recovery policy settings to be set."},{name:"getPolicy",docblock:"Get the organization policy.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the organization policy."},{name:"getUserAccountRecoverySubscriptionStatus",docblock:"Get the current user account recovery setting status.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the current user account recovery setting status."},{name:"setUserAccountRecoveryStatus",docblock:"Set the current user account recovery setting.\n@param {string} status",modifiers:[],params:[{name:"status",type:{name:"string"},optional:!1}],returns:null,description:"Set the current user account recovery setting."},{name:"isAccountRecoveryChoiceRequired",docblock:'Returns true if the current user has to choose for an account recovery setting.\nIn that case, the organization account recovery setting has to be set with "mandatory" or "opt-out",\nplus the user shouldn\'t have made a choice yet.\n@returns {bool}',modifiers:[],params:[],returns:{type:{name:"bool"}},description:'Returns true if the current user has to choose for an account recovery setting.\nIn that case, the organization account recovery setting has to be set with "mandatory" or "opt-out",\nplus the user shouldn\'t have made a choice yet.'},{name:"isPolicyEnabled",docblock:"Return true if the policy is not set to POLICY_DISABLED\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the policy is not set to POLICY_DISABLED"},{name:"STATUS_PENDING",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"POLICY_DISABLED",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"POLICY_MANDATORY",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"POLICY_OPT_OUT",docblock:null,modifiers:["static","get"],params:[],returns:null},{name:"STATUS_APPROVED",docblock:null,modifiers:["static","get"],params:[],returns:null}],displayName:"AccountRecoveryUserContextProvider",props:{context:{description:"",type:{name:"any"},required:!0},children:{description:"",type:{name:"any"},required:!1},accountRecoveryUserService:{description:"",type:{name:"object"},required:!0}}}}}]);