/*! For license information please see 6922.b2803aed.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6922],{"./src/img/svg/alarm_clock.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgAlarmClock(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 15.75a6 6 0 1 0 0-12 6 6 0 0 0 0 12"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 6.75v3l1.5 1.5M3.75 2.25 1.5 4.5M16.5 4.5l-2.25-2.25M4.785 14.025 3 15.75M13.23 14.003 15 15.75"})))}},"./src/img/svg/calendar_cog.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCalendarCog(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:19,height:18,fill:"none",viewBox:"0 0 19 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m12.23 12.675-.675-.3M12.23 14.325l-.675.3M12.83 1.5v3M13.505 11.4l-.3-.675M13.505 15.6l-.3.675M15.455 10.725l-.3.675M15.455 16.275l-.3-.675M16.58 7.875V4.5a1.5 1.5 0 0 0-1.5-1.5H4.58a1.5 1.5 0 0 0-1.5 1.5V15a1.5 1.5 0 0 0 1.5 1.5h4.5M17.105 12.375l-.675.3M17.105 14.625l-.675-.3M3.08 7.5h13.5M6.83 1.5v3"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.33 15.75a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5"})))}},"./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspaceMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_DeleteResource_DeleteResource__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Resource/DeleteResource/DeleteResource.js"),_EditResource_EditResource__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Resource/EditResource/EditResource.js"),_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/components/Share/ShareDialog.js"),_ExportResources_ExportResources__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/components/Resource/ExportResources/ExportResources.js"),react_i18next__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/shared/services/otp/TotpCodeGeneratorService.js"),_PasswordExpiryDialog_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/react-extension/components/Resource/PasswordExpiryDialog/PasswordExpiryDialog.js"),_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/shared/utils/dateUtils.js"),luxon__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/luxon/build/es6/luxon.mjs"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownButton.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/img/svg/caret_down.svg"),_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/react-extension/components/Common/Dropdown/Dropdown.js"),_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenu.js"),_img_svg_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/img/svg/more_horizontal.svg"),_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenuItem.js"),_img_svg_download_file_svg__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./src/img/svg/download_file.svg"),_img_svg_calendar_cog_svg__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./src/img/svg/calendar_cog.svg"),_img_svg_alarm_clock_svg__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./src/img/svg/alarm_clock.svg"),_img_svg_copy_svg__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./src/img/svg/copy.svg"),_img_svg_owned_by_me_svg__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./src/img/svg/owned_by_me.svg"),_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./src/img/svg/key.svg"),_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./src/img/svg/totp.svg"),_img_svg_globe_svg__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./src/img/svg/globe.svg"),_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("./src/img/svg/link.svg"),_img_svg_delete_svg__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("./src/img/svg/delete.svg"),_img_svg_edit_svg__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("./src/img/svg/edit.svg"),_img_svg_share_svg__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("./src/img/svg/share.svg"),_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("./src/img/svg/close.svg"),_img_svg_history_svg__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("./src/img/svg/history.svg"),_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js"),_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("./src/shared/context/MetadataKeysSettingsLocalStorageContext/MetadataKeysSettingsLocalStorageContext.js"),_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js"),_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("./src/react-extension/components/Metadata/ActionAbortedMissingMetadataKeys/ActionAbortedMissingMetadataKeys.js"),_shared_utils_logger__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("./src/shared/utils/logger.js"),_shared_context_SecretRevisionSettingsContext_SecretRevisionsSettingsContext__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("./src/shared/context/SecretRevisionSettingsContext/SecretRevisionsSettingsContext.js"),_shared_models_entity_secretRevision_secretRevisionsSettingsEntity__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("./src/shared/models/entity/secretRevision/secretRevisionsSettingsEntity.js"),_SecretHistory_DisplayResourceSecretHistory__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("./src/react-extension/components/SecretHistory/DisplayResourceSecretHistory.js");class DisplayResourcesWorkspaceMenu extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleCopyPermalinkClickEvent=this.handleCopyPermalinkClickEvent.bind(this),this.handleCopyUsernameClickEvent=this.handleCopyUsernameClickEvent.bind(this),this.handleCopyUriClickEvent=this.handleCopyUriClickEvent.bind(this),this.handleShareClickEvent=this.handleShareClickEvent.bind(this),this.handleCopySecretClickEvent=this.handleCopySecretClickEvent.bind(this),this.handleCopyTotpClickEvent=this.handleCopyTotpClickEvent.bind(this),this.handleExportClickEvent=this.handleExportClickEvent.bind(this),this.handleMarkAsExpiredClick=this.handleMarkAsExpiredClick.bind(this),this.handleSetExpiryDateClickEvent=this.handleSetExpiryDateClickEvent.bind(this),this.handleClearSelectionClick=this.handleClearSelectionClick.bind(this),this.handleSecretHistoryClick=this.handleSecretHistoryClick.bind(this)}handleDeleteClickEvent(){this.props.dialogContext.open(_DeleteResource_DeleteResource__WEBPACK_IMPORTED_MODULE_6__.A,{resources:this.selectedResources})}async handleMarkAsExpiredClick(){const resourcesExpiryDateToUpdate=this.selectedResources.map(resource=>({id:resource.id,expired:(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_17__.B7)(luxon__WEBPACK_IMPORTED_MODULE_18__.c9.utc())}));try{await this.props.context.port.request("passbolt.resources.set-expiration-date",resourcesExpiryDateToUpdate),await this.props.actionFeedbackContext.displaySuccess(this.translate("The resource has been marked as expired.",{count:resourcesExpiryDateToUpdate.length}))}catch(error){_shared_utils_logger__WEBPACK_IMPORTED_MODULE_45__.A.error(error),await this.props.actionFeedbackContext.displayError(this.translate("Unable to mark the resource as expired.",{count:resourcesExpiryDateToUpdate.length}))}}handleSecretHistoryClick(){this.props.dialogContext.open(_SecretHistory_DisplayResourceSecretHistory__WEBPACK_IMPORTED_MODULE_48__.A,{resource:this.selectedResources[0]})}handleEditClickEvent(){this.canEditResource()?this.props.dialogContext.open(_EditResource_EditResource__WEBPACK_IMPORTED_MODULE_7__.A,{resource:this.selectedResources[0]}):this.displayActionAborted()}canEditResource(){if(this.props.resourceTypes.getFirstById(this.selectedResources[0].resource_type_id).isV5()){const isMetadataSharedKeyEnforced=!this.props.metadataKeysSettings?.allowUsageOfPersonalKeys,isPersonalResource=this.selectedResources[0].personal,userHasMissingKeys=this.props.context.loggedInUser.missing_metadata_key_ids?.length>0;if(isPersonalResource&&isMetadataSharedKeyEnforced&&userHasMissingKeys)return!1;if(!isPersonalResource&&userHasMissingKeys)return!1}return!0}async handleShareClickEvent(){if(this.canShareResource()){const resourcesIds=this.selectedResources.map(resource=>resource.id);await this.props.context.setContext({shareDialogProps:{resourcesIds}}),this.props.dialogContext.open(_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_8__.A)}else this.displayActionAborted()}canShareResource(){if(this.props.resourceTypes.getFirstById(this.selectedResources[0].resource_type_id).isV5()){return!(this.props.context.loggedInUser.missing_metadata_key_ids?.length>0)}return!0}async handleCopyPermalinkClickEvent(){const permalink=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.selectedResources[0].id}`;await this.props.clipboardContext.copy(permalink,this.translate("The permalink has been copied to clipboard."))}async handleCopyUsernameClickEvent(){await this.props.clipboardContext.copy(this.selectedResources[0].metadata.username,this.translate("The username has been copied to clipboard."))}async handleCopyUriClickEvent(){await this.props.clipboardContext.copy(this.selectedResources[0].metadata.uris[0],this.translate("The uri has been copied to clipboard."))}async handleClearSelectionClick(){await this.props.resourceWorkspaceContext.onResourceSelected.none()}decryptResourceSecret(){return this.props.context.port.request("passbolt.secret.find-by-resource-id",this.selectedResources[0].id)}async copyPasswordToClipboard(plaintextSecretDto){const password=plaintextSecretDto.password;if(!password)throw new TypeError(this.translate("The password is empty."));await this.props.clipboardContext.copyTemporarily(password,this.translate("The secret has been copied to clipboard."))}async handleCopySecretClickEvent(){let plaintextSecretDto;this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret()}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecretDto?.password?.length?(await this.copyPasswordToClipboard(plaintextSecretDto),this.props.resourceWorkspaceContext.onResourceCopied()):await this.props.actionFeedbackContext.displayWarning(this.translate("The password is empty and cannot be copied to clipboard."))}async handleCopyTotpClickEvent(){let plaintextSecretDto,code;this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret()}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}if(this.props.progressContext.close(),plaintextSecretDto)if(plaintextSecretDto.totp){try{code=_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__.l.generate(plaintextSecretDto.totp)}catch(error){return _shared_utils_logger__WEBPACK_IMPORTED_MODULE_45__.A.error(error),void await this.props.actionFeedbackContext.displayError(this.translate("Unable to copy the TOTP"))}await this.props.clipboardContext.copyTemporarily(code,this.translate("The TOTP has been copied to clipboard.")),await this.props.resourceWorkspaceContext.onResourceCopied()}else await this.props.actionFeedbackContext.displayError(this.translate("The TOTP is empty and cannot be copied to clipboard."))}handleSetExpiryDateClickEvent(){this.props.dialogContext.open(_PasswordExpiryDialog_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_15__.A,{resources:this.selectedResources})}handleExportClickEvent(){this.export()}displayActionAborted(){this.props.dialogContext.open(_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_44__.A)}get selectedResources(){return this.props.resourceWorkspaceContext.selectedResources}hasOneResourceSelected(){return 1===this.selectedResources.length}canUpdate(){return this.selectedResources.every(resource=>resource.permission.type>=7)}canShare(){return this.selectedResources.every(resource=>15===resource.permission.type)}canExport(){return this.props.context.siteSettings.canIUse("export")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__.e.RESOURCES_EXPORT)}canCopyUsername(){return this.selectedResources[0].metadata?.username}canCopyUri(){return Boolean(this.selectedResources[0].metadata?.uris?.[0])}canCopyPassword(){return this.isPasswordResources}get canDisplaySecretHistory(){return this.props.context.siteSettings.canIUse("secretRevisions")&&this.props.secretRevisionsSettings?.isFeatureEnabled}get isPasswordResources(){return this.props.resourceTypes?.getFirstById(this.selectedResources[0].resource_type_id)?.hasPassword()}canCopyTotp(){return this.props.resourceTypes?.getFirstById(this.selectedResources[0].resource_type_id)?.hasTotp()}get isStandaloneTotpResource(){return this.props.resourceTypes?.getFirstById(this.selectedResources[0].resource_type_id).isStandaloneTotp()}get hasResourceUsername(){return!this.isStandaloneTotpResource}hasMoreActionAllowed(){return this.canExport()||this.canOverridePasswordExpiry&&this.canUpdate()}async export(){const resourcesIds=this.selectedResources.map(resource=>resource.id);await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds}),await this.props.dialogContext.open(_ExportResources_ExportResources__WEBPACK_IMPORTED_MODULE_9__.A)}get canUseTotp(){return this.props.context.siteSettings.canIUse("totpResourceTypes")}get canOverridePasswordExpiry(){const passwordExpirySettings=this.props.passwordExpiryContext.getSettings();return this.props.passwordExpiryContext.isFeatureEnabled()&&passwordExpirySettings?.policy_override}get translate(){return this.props.t}render(){const hasOneResourceSelected=this.hasOneResourceSelected(),canShare=this.canShare(),canUpdate=this.canUpdate(),canCopySecret=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__.e.SECRETS_COPY),canViewShare=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__.e.SHARE_VIEW_LIST)&&canShare,canViewCopy=hasOneResourceSelected,canViewEdit=hasOneResourceSelected&&canUpdate,canViewDelete=canUpdate,canViewSecretHistory=hasOneResourceSelected&&this.canDisplaySecretHistory,count=this.props.resourceWorkspaceContext.selectedResources?.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions",ref:this.props.actionsButtonRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",null,canViewShare&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"share_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-action-contextual",onClick:this.handleShareClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_share_svg__WEBPACK_IMPORTED_MODULE_38__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Share")))),canViewCopy&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"copy_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_23__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_21__.A,{className:"button-action-contextual"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_copy_svg__WEBPACK_IMPORTED_MODULE_30__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_22__.A,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_24__.A,{className:"menu-action-contextual"},this.hasResourceUsername&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"username_action",type:"button",className:"no-border",disabled:!this.canCopyUsername(),onClick:this.handleCopyUsernameClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_owned_by_me_svg__WEBPACK_IMPORTED_MODULE_31__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy username")))),canCopySecret&&this.canCopyPassword()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"secret_action",type:"button",className:"no-border",onClick:this.handleCopySecretClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_32__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy password")))),this.canUseTotp&&this.canCopyTotp()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"totp_action",type:"button",className:"no-border",onClick:this.handleCopyTotpClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_33__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy TOTP")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"uri_action",type:"button",className:"no-border",disabled:!this.canCopyUri(),onClick:this.handleCopyUriClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_globe_svg__WEBPACK_IMPORTED_MODULE_34__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy URI")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"permalink_action",type:"button",className:"no-border",onClick:this.handleCopyPermalinkClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_35__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy permalink"))))))),canViewEdit&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"edit_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-action-contextual",onClick:this.handleEditClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_edit_svg__WEBPACK_IMPORTED_MODULE_37__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Edit")))),canViewDelete&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"delete_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-action-contextual",onClick:this.handleDeleteClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_delete_svg__WEBPACK_IMPORTED_MODULE_36__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Delete")))),this.hasMoreActionAllowed()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_23__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_21__.A,{className:"more button-action-contextual button-action-icon"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_25__.A,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_24__.A,{className:"menu-action-contextual"},this.canExport()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,{separator:!(this.canOverridePasswordExpiry&&canUpdate)&&canViewSecretHistory},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"export_action",type:"button",className:"no-border",onClick:this.handleExportClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_download_file_svg__WEBPACK_IMPORTED_MODULE_27__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Export")))),this.canOverridePasswordExpiry&&canUpdate&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"set_expiry_date_action",type:"button",className:"no-border",onClick:this.handleSetExpiryDateClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_calendar_cog_svg__WEBPACK_IMPORTED_MODULE_28__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Set expiry date")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,{separator:canViewSecretHistory},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"mark_as_expired_action",type:"button",className:"no-border",onClick:this.handleMarkAsExpiredClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_alarm_clock_svg__WEBPACK_IMPORTED_MODULE_29__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Mark as expired"))))),canViewSecretHistory&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"secret_history_action",type:"button",className:"no-border",onClick:this.handleSecretHistoryClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_history_svg__WEBPACK_IMPORTED_MODULE_40__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Secret history")))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"counter"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,{count},{count}," selected")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-transparent inline",onClick:this.handleClearSelectionClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_39__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Clear selection")))))}}DisplayResourcesWorkspaceMenu.propTypes={actionsButtonRef:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,context:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_2___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_20__.A),passwordExpiryContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,progressContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,clipboardContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,metadataKeysSettings:prop_types__WEBPACK_IMPORTED_MODULE_2___default().instanceOf(_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_43__.A),secretRevisionsSettings:prop_types__WEBPACK_IMPORTED_MODULE_2___default().instanceOf(_shared_models_entity_secretRevision_secretRevisionsSettingsEntity__WEBPACK_IMPORTED_MODULE_47__.A),t:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_42__.XF)((0,_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_41__.nJ)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_11__.x6)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__.z9)((0,_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__.E0)((0,_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_16__.f4)((0,_shared_context_SecretRevisionSettingsContext_SecretRevisionsSettingsContext__WEBPACK_IMPORTED_MODULE_46__.ac)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__.Qw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_19__.KH)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_1__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_10__.CI)("common")(DisplayResourcesWorkspaceMenu))))))))))));DisplayResourcesWorkspaceMenu.__docgenInfo={description:"This component allows the current user to add a new comment on a resource",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleDeleteClickEvent",docblock:"handle delete one or more resources",modifiers:[],params:[],returns:null,description:"handle delete one or more resources"},{name:"handleMarkAsExpiredClick",docblock:"Handle mark as expired\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle mark as expired"},{name:"handleSecretHistoryClick",docblock:"Handle secret history click",modifiers:[],params:[],returns:null,description:"Handle secret history click"},{name:"handleEditClickEvent",docblock:"handle edit one resource",modifiers:[],params:[],returns:null,description:"handle edit one resource"},{name:"canEditResource",docblock:"Can edit the resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can edit the resource"},{name:"handleShareClickEvent",docblock:"handle share resources",modifiers:["async"],params:[],returns:null,description:"handle share resources"},{name:"canShareResource",docblock:"Can share the resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can share the resource"},{name:"handleCopyPermalinkClickEvent",docblock:"handle copy permalink of one resource",modifiers:["async"],params:[],returns:null,description:"handle copy permalink of one resource"},{name:"handleCopyUsernameClickEvent",docblock:"handle copy username of one resource",modifiers:["async"],params:[],returns:null,description:"handle copy username of one resource"},{name:"handleCopyUriClickEvent",docblock:"handle copy uri of one resource",modifiers:["async"],params:[],returns:null,description:"handle copy uri of one resource"},{name:"handleClearSelectionClick",docblock:"Handle the event on the 'close' icon to clear the current selection.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle the event on the 'close' icon to clear the current selection."},{name:"decryptResourceSecret",docblock:"Decrypt the resource secret\n@returns {Promise<object>} The secret in plaintext format\n@throw UserAbortsOperationError If the user cancel the operation",modifiers:[],params:[],returns:{description:"The secret in plaintext format",type:{name:"Promise",elements:[{name:"object"}]}},description:"Decrypt the resource secret"},{name:"copyPasswordToClipboard",docblock:"Copy password from dto to clipboard\nSupport original password (a simple string) and composed objects)\n\n@param {object} plaintextSecretDto The plaintext secret DTO.\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"plaintextSecretDto",description:"The plaintext secret DTO.",type:{name:"object"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copy password from dto to clipboard\nSupport original password (a simple string) and composed objects)"},{name:"handleCopySecretClickEvent",docblock:"handle copy to clipboard the secret of the selected resource",modifiers:["async"],params:[],returns:null,description:"handle copy to clipboard the secret of the selected resource"},{name:"handleCopyTotpClickEvent",docblock:"handle copy to clipboard the totp of the selected resource",modifiers:["async"],params:[],returns:null,description:"handle copy to clipboard the totp of the selected resource"},{name:"handleSetExpiryDateClickEvent",docblock:"Whenever the user intends to set the expiration date on the selected resources",modifiers:[],params:[],returns:null,description:"Whenever the user intends to set the expiration date on the selected resources"},{name:"handleExportClickEvent",docblock:"Whenever the user intends to export the selected resources",modifiers:[],params:[],returns:null,description:"Whenever the user intends to export the selected resources"},{name:"displayActionAborted",docblock:"Display action aborted",modifiers:[],params:[],returns:null,description:"Display action aborted"},{name:"selectedResources",docblock:"selected resources\n@returns {[]|null}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[{name:"tuple",elements:[]}]}},description:"selected resources"},{name:"hasOneResourceSelected",docblock:"has at least one resource selected\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"has at least one resource selected"},{name:"canUpdate",docblock:"Can update the selected resources\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can update the selected resources"},{name:"canShare",docblock:"Can share the selected resources\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can share the selected resources"},{name:"canExport",docblock:"Check if the user can export.\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the user can export."},{name:"canCopyUsername",docblock:"Can copy username\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy username"},{name:"canCopyUri",docblock:"Can copy uri\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy uri"},{name:"canCopyPassword",docblock:"Can copy password\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy password"},{name:"canDisplaySecretHistory",docblock:"Can display secret history\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Can display secret history"},{name:"isPasswordResources",docblock:"Is password resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is password resource"},{name:"canCopyTotp",docblock:"Can copy totp\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy totp"},{name:"isStandaloneTotpResource",docblock:"Is TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"hasResourceUsername",docblock:"Returns true if the resource type has a username associated.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the resource type has a username associated."},{name:"hasMoreActionAllowed",docblock:"Has at least one action of the more menu allowed.\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has at least one action of the more menu allowed."},{name:"export",docblock:"Exports the selected resources",modifiers:["async"],params:[],returns:null,description:"Exports the selected resources"},{name:"canUseTotp",docblock:"Can use Totp\n@return {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Can use Totp"},{name:"canOverridePasswordExpiry",docblock:"Can use password expiry\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Can use password expiry"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourcesWorkspaceMenu",props:{actionsButtonRef:{description:"",type:{name:"object"},required:!1},context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},progressContext:{description:"",type:{name:"any"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},metadataKeysSettings:{description:"",type:{name:"instanceOf",value:"MetadataKeysSettingsEntity"},required:!1},secretRevisionsSettings:{description:"",type:{name:"instanceOf",value:"SecretRevisionsSettingsEntity"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/ExportResources/ExportResourcesCredentials.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),react_i18next__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/shared/components/Password/Password.js");class ExportResourcesCredentials extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}get defaultState(){return{password:"",keyFile:null,actions:{processing:!1}}}bindHandlers(){this.handleInputChange=this.handleInputChange.bind(this),this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFileSelected=this.handleFileSelected.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}createReferences(){this.fileUploaderRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.passwordInputRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}get selectedFilename(){return this.state.keyFile?this.state.keyFile.name:""}get isProcessing(){return this.state.actions.processing}get areActionsAllowed(){return!this.isProcessing}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFileSelected(event){const[keyFile]=event.target.files;await this.setState({keyFile})}handleInputChange(event){const target=event.target,value=target.value,name=target.name;this.setState({[name]:value})}handleCancel(){this.close()}async handleSubmit(event){event.preventDefault(),await this.setState({actions:{processing:!0}}),await this.export().then(this.onExportSuccess.bind(this)).catch(this.onExportFailure.bind(this))}async export(){const options={credentials:{password:this.state.password,keyfile:await this.readFile()}},foldersIds=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,resourcesIds=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds,exportDto={format:this.props.format,folders_ids:foldersIds,resources_ids:resourcesIds,options};await this.props.context.port.request("passbolt.export-resources.export-to-file",exportDto)}readFile(){if(!this.state.keyFile)return;const reader=new FileReader;return new Promise((resolve,reject)=>{reader.onloadend=event=>{try{const fileBase64=event.target.result.split(",")[1];resolve(fileBase64)}catch(e){reject(e)}},reader.readAsDataURL(this.state.keyFile)})}async onExportSuccess(){await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),await this.props.actionFeedbackContext.displaySuccess(this.translate("The passwords have been exported successfully")),this.close()}onExportFailure(error){if("UserAbortsOperationError"===error.name)return void this.setState({actions:{processing:!1}});const errorDialogProps={error};this.setState({actions:{processing:!1}}),this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_9__.A,errorDialogProps)}close(){this.props.onClose()}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_5__.A,{title:this.translate("Enter the password and/or key file"),className:"export-password-dialog",onClose:this.handleCancel,disabled:!this.areActionsAllowed},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input-password-wrapper input "+(this.areActionsAllowed?"":"disabled")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"password"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Keepass password")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_11__.A,{id:"password",name:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:this.translate("Passphrase"),autoComplete:"off",inputRef:this.passwordInputRef,preview:!0,disabled:!this.areActionsAllowed})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input file "+(this.areActionsAllowed?"":"disabled")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"file",ref:this.fileUploaderRef,id:"dialog-exports-passwords",onChange:this.handleFileSelected}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"dialog-exports-passwords"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Keepass key file (optional)")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input-file-inline"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"text",placeholder:this.translate("No key file selected"),disabled:!0,value:this.selectedFilename}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button primary",disabled:!this.areActionsAllowed,onClick:this.handleSelectFile},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Choose a file")))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__.A,{disabled:!this.areActionsAllowed,onClick:this.handleCancel}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__.A,{disabled:!this.areActionsAllowed,processing:this.isProcessing,value:this.translate("Export")}))))}}ExportResourcesCredentials.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,format:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__.Qw)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_4__.z9)((0,react_i18next__WEBPACK_IMPORTED_MODULE_10__.CI)("common")(ExportResourcesCredentials)))));ExportResourcesCredentials.__docgenInfo={description:"This component is the second step of the export dialog when the file to import is KDB(X) file",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"bindHandlers",docblock:"Bind component handlers",modifiers:[],params:[],returns:null,description:"Bind component handlers"},{name:"createReferences",docblock:"Create elements references",modifiers:[],params:[],returns:null,description:"Create elements references"},{name:"selectedFilename",docblock:"Returns the selected file's name",modifiers:["get"],params:[],returns:null,description:"Returns the selected file's name"},{name:"isProcessing",docblock:"Return trus if the export is processing",modifiers:["get"],params:[],returns:null,description:"Return trus if the export is processing"},{name:"areActionsAllowed",docblock:"Returns true if actions can be performed",modifiers:["get"],params:[],returns:null,description:"Returns true if actions can be performed"},{name:"handleSelectFile",docblock:"Handle the selection of a file by file explorer",modifiers:[],params:[],returns:null,description:"Handle the selection of a file by file explorer"},{name:"handleFileSelected",docblock:"Handle the event that a file has been selected\n@param event A dom event",modifiers:["async"],params:[{name:"event",description:"A dom event",optional:!1}],returns:null,description:"Handle the event that a file has been selected"},{name:"handleInputChange",docblock:"Handle input change\n@param event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle input change"},{name:"handleCancel",docblock:"Handle the cancellation of the import",modifiers:[],params:[],returns:null,description:"Handle the cancellation of the import"},{name:"handleSubmit",docblock:"Handle the export submit event\n@param event A dom event",modifiers:["async"],params:[{name:"event",description:"A dom event",optional:!1}],returns:null,description:"Handle the export submit event"},{name:"export",docblock:"Export the resource file",modifiers:["async"],params:[],returns:null,description:"Export the resource file"},{name:"readFile",docblock:"Read the selected file and returns its content in a base 64\n@return {Promise<string>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"string"}]}},description:"Read the selected file and returns its content in a base 64"},{name:"onExportSuccess",docblock:"Whenever the export has been performed succesfully",modifiers:["async"],params:[],returns:null,description:"Whenever the export has been performed succesfully"},{name:"onExportFailure",docblock:"Whenever the export has been performed with failure",modifiers:[],params:[{name:"error",optional:!1}],returns:null,description:"Whenever the export has been performed with failure"},{name:"close",docblock:"Close the dialog",modifiers:[],params:[],returns:null,description:"Close the dialog"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ExportResourcesCredentials",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},format:{description:"",type:{name:"string"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}}}]);