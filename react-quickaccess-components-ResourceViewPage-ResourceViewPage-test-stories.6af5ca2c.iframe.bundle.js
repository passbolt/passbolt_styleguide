/*! For license information please see react-quickaccess-components-ResourceViewPage-ResourceViewPage-test-stories.6af5ca2c.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[7964],{"./src/react-quickaccess/components/ResourceViewPage/ResourceViewPage.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllApiFlagDisabled:()=>AllApiFlagDisabled,AllRbacsDenied:()=>AllRbacsDenied,ResourceMultipleUrisView:()=>ResourceMultipleUrisView,ResourceView:()=>ResourceView,StandaloneTotpResourceView:()=>StandaloneTotpResourceView,TotpResourceView:()=>TotpResourceView,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ResourceViewPage_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Transition=__webpack_require__("./node_modules/react-transition-group/esm/Transition.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),spinner=__webpack_require__("./src/img/svg/spinner.svg"),uiActionEnumeration=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),RbacContext=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),HiddenPassword=__webpack_require__("./src/shared/components/Password/HiddenPassword.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),Totp=__webpack_require__("./src/shared/components/Totp/Totp.js"),TotpCodeGeneratorService=__webpack_require__("./src/shared/services/otp/TotpCodeGeneratorService.js"),sanitizeUrl=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js"),ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),ResourceTypesLocalStorageContext=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),caret_down=__webpack_require__("./src/img/svg/caret_down.svg"),caret_right=__webpack_require__("./src/img/svg/caret_right.svg"),caret_left=__webpack_require__("./src/img/svg/caret_left.svg"),go=__webpack_require__("./src/img/svg/go.svg"),copy=__webpack_require__("./src/img/svg/copy.svg"),healthcheck_success=__webpack_require__("./src/img/svg/healthcheck_success.svg"),eye_close=__webpack_require__("./src/img/svg/eye_close.svg"),eye_open=__webpack_require__("./src/img/svg/eye_open.svg"),timer=__webpack_require__("./src/img/svg/timer.svg"),clipboardServiceWorkerService=__webpack_require__("./src/shared/services/serviceWorker/clipboard/clipboardServiceWorkerService.js");class ResourceViewPage extends react.Component{constructor(props){super(props),this.state=this.initState(),this.initEventHandlers(),this.loadResource(),this.currentTimeout=null,this.clipboardServiceWorkerService=new clipboardServiceWorkerService.A(props.context.port)}initEventHandlers(){this.handleGoBackClick=this.handleGoBackClick.bind(this),this.handleCopyLoginClick=this.handleCopyLoginClick.bind(this),this.handleCopyPasswordClick=this.handleCopyPasswordClick.bind(this),this.handleGoToUrlClick=this.handleGoToUrlClick.bind(this),this.handleUseOnThisTabClick=this.handleUseOnThisTabClick.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this),this.handleCopyTotpClick=this.handleCopyTotpClick.bind(this),this.handlePreviewTotpButtonClick=this.handlePreviewTotpButtonClick.bind(this),this.handleClickAdditionalUrisSection=this.handleClickAdditionalUrisSection.bind(this)}initState(){return{resource:{},passphrase:"",usingOnThisTab:!1,copyPasswordState:"default",copyLoginState:"default",copyTotpState:"default",error:"",errorTimeout:null,previewedSecret:null,plaintextSecretDto:null,isPasswordDecrypting:!1,isTotpDecrypting:!1,isOpenAdditionalUris:!1,copiedProperty:null}}componentWillUnmount(){this.currentTimeout&&clearTimeout(this.currentTimeout)}get translate(){return this.props.t}handleGoBackClick(ev){ev.preventDefault(),this.props.location.state&&this.props.location.state.goBackEntriesCount?this.props.history.go(this.props.location.state.goBackEntriesCount):this.props.history.goBack()}async loadResource(){const resource=(await this.props.context.storage.local.get(["resources"])).resources.find((item=>item.id===this.props.match.params.id));this.setState({resource})}resetError(){this.setState({error:""})}async handleCopyLoginClick(event){if(event.preventDefault(),this.resetError(),this.state.resource.metadata?.username)try{this.setState({copiedProperty:"username",copyLoginState:"processing",copyPasswordState:"default",copyTotpState:"default"}),this.currentTimeout&&clearTimeout(this.currentTimeout),await this.clipboardServiceWorkerService.copy(this.state.resource.metadata?.username),this.setState({copyLoginState:"done"}),this.currentTimeout=setTimeout((()=>{this.setState({copyLoginState:"default"})}),15e3)}catch(error){console.error("An unexpected error occured",error)}}async handleCopyPasswordClick(){await this.copyPasswordToClipboard()}async handleViewPasswordButtonClick(){await this.togglePreviewPassword()}async copyPasswordToClipboard(){const isPasswordPreviewed=this.isPasswordPreviewed();let plaintextSecretDto;if(this.resetError(),this.setState({copyPasswordState:"processing"}),isPasswordPreviewed)plaintextSecretDto=this.state.plaintextSecretDto;else try{plaintextSecretDto=await this.decryptResourceSecret(this.state.resource.id)}catch(error){if("UserAbortsOperationError"!==error.name)return}finally{this.setState({copyPasswordState:"default"})}if(!plaintextSecretDto)return void this.setState({copyPasswordState:"default"});if(!plaintextSecretDto.password?.length)return this.displayTemporarilyError(this.translate("The password is empty and cannot be copied to clipboard.")),void this.setState({copyPasswordState:"default"});await this.clipboardServiceWorkerService.copyTemporarily(plaintextSecretDto.password);this.setState({copyLoginState:"default",copyPasswordState:"done",copyTotpState:"default",copiedProperty:null},(()=>{this.setState({copiedProperty:"password"})})),this.currentTimeout&&clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout((()=>{this.setState({copyPasswordState:"default",copiedProperty:null})}),3e4)}async togglePreviewPassword(){const isPasswordPreviewed=this.isPasswordPreviewed();this.hidePreviewedSecret(),isPasswordPreviewed||await this.previewPassword()}hidePreviewedSecret(){this.setState({plaintextSecretDto:null,previewedSecret:null})}async previewPassword(){let plaintextSecretDto;await this.setState({error:"",isPasswordDecrypting:!0});try{plaintextSecretDto=await this.decryptResourceSecret(this.state.resource.id)}catch(error){if("UserAbortsOperationError"!==error.name)return}finally{this.setState({isPasswordDecrypting:!1})}plaintextSecretDto&&(plaintextSecretDto.password?.length?await this.setState({plaintextSecretDto,previewedSecret:"password"}):this.displayTemporarilyError(this.translate("The password is empty and cannot be previewed.")))}displayTemporarilyError(error,time=5e3){clearTimeout(this.state.errorTimeout);const errorTimeout=setTimeout((()=>this.setState({error:""})),time);this.setState({errorTimeout,error})}decryptResourceSecret(resourceId){return this.props.context.port.request("passbolt.secret.find-by-resource-id",resourceId)}async handleCopyTotpClick(){let plaintextSecretDto;const isTotpPreviewed=this.isTotpPreviewed();if(this.resetError(),this.setState({copyTotpState:"processing"}),isTotpPreviewed)plaintextSecretDto=this.state.plaintextSecretDto;else try{plaintextSecretDto=await this.decryptResourceSecret(this.state.resource.id)}catch(error){if("UserAbortsOperationError"!==error.name)return}finally{this.setState({copyTotpState:"default"})}if(!plaintextSecretDto)return void this.setState({copyTotpState:"default"});if(!plaintextSecretDto.totp)return this.displayTemporarilyError(this.translate("The TOTP is empty and cannot be copied to clipboard.")),void this.setState({copyTotpState:"default"});const code=TotpCodeGeneratorService.l.generate(plaintextSecretDto.totp);await this.clipboardServiceWorkerService.copyTemporarily(code);this.setState({copyLoginState:"default",copyTotpState:"done",copyPasswordState:"default",copiedProperty:null},(()=>{this.setState({copiedProperty:"totp"})})),this.currentTimeout&&clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout((()=>{this.setState({copyTotpState:"default",copiedProperty:null})}),3e4)}async handlePreviewTotpButtonClick(){const isTotpPreviewed=this.isTotpPreviewed();this.hidePreviewedSecret(),isTotpPreviewed||await this.previewTotp()}async previewTotp(){let plaintextSecretDto;await this.setState({error:"",isTotpDecrypting:!0});try{plaintextSecretDto=await this.decryptResourceSecret(this.state.resource.id)}catch(error){if("UserAbortsOperationError"!==error.name)return}finally{this.setState({isTotpDecrypting:!1})}plaintextSecretDto&&(plaintextSecretDto.totp?this.setState({plaintextSecretDto,previewedSecret:"totp"}):this.displayTemporarilyError(this.translate("The TOTP is empty and cannot be previewed.")))}handleGoToUrlClick(event){const primaryUri=this.state.resource.metadata?.uris?.[0];this.resetError(),this.sanitizeResourceUrl(primaryUri)||event.preventDefault()}async handleUseOnThisTabClick(event){event.preventDefault(),this.setState({usingOnThisTab:!0});try{await this.props.context.port.request("passbolt.quickaccess.use-resource-on-current-tab",this.state.resource.id,this.props.context.getOpenerTabId()),window.close()}catch(error){error&&"UserAbortsOperationError"===error.name?this.setState({usingOnThisTab:!1}):(console.error("An error occured",error),this.setState({usingOnThisTab:!1,error:this.props.t("Unable to use the password on this page. Copy and paste the information instead.")}))}}handleClickAdditionalUrisSection(){this.setState({isOpenAdditionalUris:!this.state.isOpenAdditionalUris})}sanitizeResourceUrl(url){return(0,sanitizeUrl.A)(url,{whiteListedProtocols:ResourceWorkspaceContext.XH,defaultProtocol:sanitizeUrl.P.HTTPS})}isPasswordPreviewed(){return"password"===this.state.previewedSecret}isTotpPreviewed(){return"totp"===this.state.previewedSecret}get canPreviewSecret(){return this.props.context.siteSettings.canIUse("previewPassword")&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.SECRETS_PREVIEW)}get isTotpResources(){return Boolean(this.state.resource.resource_type_id)&&this.props.resourceTypes?.getFirstById(this.state.resource.resource_type_id)?.hasTotp()}get isStandaloneTotpResource(){return Boolean(this.state.resource.resource_type_id)&&this.props.resourceTypes?.getFirstById(this.state.resource.resource_type_id)?.isStandaloneTotp()}render(){const primaryUri=this.state.resource.metadata?.uris?.[0],additionalUris=this.state.resource.metadata?.uris?.slice(1),isPasswordPreviewed=this.isPasswordPreviewed(),isTotpPreviewed=this.isTotpPreviewed(),canCopySecret=this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.SECRETS_COPY);return react.createElement("div",{className:"resource item-browse"},react.createElement("div",{className:"back-link"},react.createElement("a",{href:"#",className:"primary-action",onClick:this.handleGoBackClick},react.createElement(caret_left.A,null),react.createElement("span",{className:"primary-action-title"},this.state.resource.metadata?.name)),react.createElement("a",{href:`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.props.match.params.id}`,className:"secondary-action button-transparent button",target:"_blank",rel:"noopener noreferrer",title:this.translate("View it in passbolt")},react.createElement(go.A,null),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"Edit in passbolt")))),react.createElement("ul",{className:"properties"},!this.isStandaloneTotpResource&&react.createElement(react.Fragment,null,react.createElement("li",{className:"property"},react.createElement("div",{className:"information"},react.createElement("span",{className:"property-name"},react.createElement(es.x6,null,"Username")),this.state.resource.metadata?.username&&react.createElement("a",{href:"#",role:"button",className:"property-value",onClick:this.handleCopyLoginClick},this.state.resource.metadata?.username),!this.state.resource.metadata?.username&&react.createElement("span",{className:"property-value empty"},react.createElement(es.x6,null,"no username provided"))),react.createElement("a",{role:"button",className:"button button-transparent property-action "+(this.state.resource.metadata?.username?"":"disabled"),onClick:this.handleCopyLoginClick,title:this.translate("Copy to clipboard")},react.createElement(Transition.Ay,{in:"default"===this.state.copyLoginState,appear:!1,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"default"!==this.state.copyLoginState?"visually-hidden":""}`},react.createElement(copy.A,null)))),react.createElement(Transition.Ay,{in:"processing"===this.state.copyLoginState,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"processing"!==this.state.copyLoginState?"visually-hidden":""}`},react.createElement(spinner.A,null)))),react.createElement(Transition.Ay,{in:"done"===this.state.copyLoginState,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"done"!==this.state.copyLoginState?"visually-hidden":""}`},react.createElement(healthcheck_success.A,null)))),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"Copy to clipboard")))),react.createElement("li",{className:"property"},react.createElement("div",{className:"information"},react.createElement("span",{className:"property-name"},react.createElement(es.x6,null,"Password")),react.createElement("div",{className:"password-wrapper"},react.createElement("div",{className:"property-value secret secret-password "+(isPasswordPreviewed?"":"secret-copy"),title:isPasswordPreviewed?this.state.plaintextSecretDto?.password:this.translate("Click to copy")},react.createElement(HiddenPassword.A,{canClick:canCopySecret,preview:this.state.plaintextSecretDto?.password,onClick:this.handleCopyPasswordClick})),this.canPreviewSecret&&react.createElement("button",{onClick:this.handleViewPasswordButtonClick,className:"password-view inline button-transparent",disabled:this.state.isPasswordDecrypting},react.createElement(Transition.Ay,{in:!this.state.isPasswordDecrypting,appear:!1,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${this.state.isPasswordDecrypting?"visually-hidden":""}`},isPasswordPreviewed?react.createElement(eye_close.A,null):react.createElement(eye_open.A,null)))),react.createElement(Transition.Ay,{in:this.state.isPasswordDecrypting,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${this.state.isPasswordDecrypting?"":"visually-hidden"}`},react.createElement(spinner.A,null)))),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"View"))))),canCopySecret&&react.createElement(react.Fragment,null,react.createElement("a",{role:"button",className:"button button-transparent property-action copy-password",onClick:this.handleCopyPasswordClick,title:this.translate("Copy to clipboard")},react.createElement(Transition.Ay,{in:"default"===this.state.copyPasswordState,appear:!1,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"default"!==this.state.copyPasswordState?"visually-hidden":""}`},react.createElement(copy.A,null)))),react.createElement(Transition.Ay,{in:"processing"===this.state.copyPasswordState,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"processing"!==this.state.copyPasswordState?"visually-hidden":""}`},react.createElement(spinner.A,null)))),react.createElement(Transition.Ay,{in:"done"===this.state.copyPasswordState,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"done"!==this.state.copyPasswordState?"visually-hidden":""}`},react.createElement(healthcheck_success.A,null)))),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"Copy to clipboard"))),"password"===this.state.copiedProperty&&react.createElement(timer.A,{style:{"--timer-duration":"30s"}})))),this.isTotpResources&&react.createElement("li",{className:"property"},react.createElement("div",{className:"information"},react.createElement("span",{className:"property-name"},react.createElement(es.x6,null,"TOTP")),react.createElement("div",{className:"totp-wrapper"},react.createElement("div",{className:"property-value secret secret-totp "+(isTotpPreviewed?"":"secret-copy"),title:isTotpPreviewed?this.state.plaintextSecretDto?.totp:this.translate("Click to copy")},isTotpPreviewed&&react.createElement(Totp.A,{totp:this.state.plaintextSecretDto?.totp,canClick:canCopySecret,onClick:this.handleCopyTotpClick}),!isTotpPreviewed&&react.createElement("button",{type:"button",className:"no-border",onClick:this.handleCopyTotpClick,disabled:!canCopySecret},react.createElement("span",null,"Copy TOTP to clipboard"))),this.canPreviewSecret&&react.createElement("button",{onClick:this.handlePreviewTotpButtonClick,className:"totp-view inline button-transparent",disabled:this.state.isTotpDecrypting},react.createElement(Transition.Ay,{in:!this.state.isTotpDecrypting,appear:!1,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${this.state.isTotpDecrypting?"visually-hidden":""}`},isTotpPreviewed?react.createElement(eye_close.A,null):react.createElement(eye_open.A,null)))),react.createElement(Transition.Ay,{in:this.state.isTotpDecrypting,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${this.state.isTotpDecrypting?"":"visually-hidden"}`},react.createElement(spinner.A,null)))),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"View"))))),canCopySecret&&react.createElement(react.Fragment,null,react.createElement("a",{role:"button",className:"button button-transparent property-action copy-totp",onClick:this.handleCopyTotpClick,title:this.translate("Copy to clipboard")},react.createElement(Transition.Ay,{in:"default"===this.state.copyTotpState,appear:!1,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"default"!==this.state.copyTotpState?"visually-hidden":""}`},react.createElement(copy.A,null)))),react.createElement(Transition.Ay,{in:"processing"===this.state.copyTotpState,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"processing"!==this.state.copyTotpState?"visually-hidden":""}`},react.createElement(spinner.A,null)))),react.createElement(Transition.Ay,{in:"done"===this.state.copyTotpState,appear:!0,timeout:500},(status=>react.createElement("span",{className:`transition fade-${status} ${"done"!==this.state.copyTotpState?"visually-hidden":""}`},react.createElement(healthcheck_success.A,null)))),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"Copy to clipboard"))),"totp"===this.state.copiedProperty&&react.createElement(timer.A,{style:{"--timer-duration":"30s"}}))),react.createElement("li",{className:"property"},react.createElement("div",{className:"information"},react.createElement("span",{className:"property-name"},"URI"),primaryUri&&this.sanitizeResourceUrl(primaryUri)&&react.createElement("a",{href:this.sanitizeResourceUrl(primaryUri),role:"button",className:"property-value",target:"_blank",rel:"noopener noreferrer"},primaryUri),primaryUri&&!this.sanitizeResourceUrl(primaryUri)&&react.createElement("span",{className:"property-value"},primaryUri),!primaryUri&&react.createElement("span",{className:"property-value empty"},react.createElement(es.x6,null,"no url provided"))),react.createElement("a",{href:`${this.sanitizeResourceUrl(primaryUri)?this.sanitizeResourceUrl(primaryUri):"#"}`,role:"button",className:"button button-transparent property-action "+(this.sanitizeResourceUrl(primaryUri)?"":"disabled"),onClick:this.handleGoToUrlClick,target:"_blank",rel:"noopener noreferrer",title:this.translate("open in a new tab")},react.createElement(go.A,null),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"Open in new window")))),additionalUris?.length>0&&react.createElement("li",{className:"property"},react.createElement("div",{className:"information"},react.createElement("div",{className:"accordion"},react.createElement("div",{className:"accordion-header additional-uris",onClick:this.handleClickAdditionalUrisSection},react.createElement("button",{type:"button",className:"link no-border property-name"},this.state.isOpenAdditionalUris?react.createElement(caret_down.A,{className:"caret-down"}):react.createElement(caret_right.A,{className:"caret-right"}),react.createElement("span",null,react.createElement(es.x6,null,"Additional URIs")))),this.state.isOpenAdditionalUris&&react.createElement("div",{className:"accordion-content"},react.createElement("div",{className:"list-uris"},additionalUris.map(((uri,index)=>{const safeUri=this.sanitizeResourceUrl(uri);return safeUri?react.createElement("a",{href:safeUri,className:"property-value",key:index,target:"_blank",rel:"noopener noreferrer"},react.createElement("span",{className:"ellipsis"},uri)):react.createElement("span",{className:"property-value",key:index},uri)})))))))),react.createElement("div",{className:"submit-wrapper input"},react.createElement("a",{href:"#",id:"popupAction",className:"button primary big full-width "+(this.state.usingOnThisTab?"disabled":""),role:"button",onClick:this.handleUseOnThisTabClick},this.state.usingOnThisTab&&react.createElement(spinner.A,null),!this.state.usingOnThisTab&&react.createElement(es.x6,null,"Use on this page")),this.state.error&&react.createElement("div",{className:"error-message"},this.state.error)))}}ResourceViewPage.propTypes={context:prop_types_default().any,rbacContext:prop_types_default().any,resourceTypes:prop_types_default().instanceOf(resourceTypesCollection.A),match:prop_types_default().object,location:prop_types_default().object,history:prop_types_default().object,t:prop_types_default().func};const ResourceViewPage_ResourceViewPage=(0,AppContext.L)((0,RbacContext.x6)((0,react_router.withRouter)((0,ResourceTypesLocalStorageContext.KH)((0,es.CI)("common")(ResourceViewPage)))));ResourceViewPage.__docgenInfo={description:"",methods:[{name:"initEventHandlers",docblock:null,modifiers:[],params:[],returns:null},{name:"initState",docblock:null,modifiers:[],params:[],returns:null},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"},{name:"handleGoBackClick",docblock:null,modifiers:[],params:[{name:"ev",optional:!1,type:null}],returns:null},{name:"loadResource",docblock:null,modifiers:["async"],params:[],returns:null},{name:"resetError",docblock:null,modifiers:[],params:[],returns:null},{name:"handleCopyLoginClick",docblock:null,modifiers:["async"],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"handleCopyPasswordClick",docblock:"Handle copy password click.",modifiers:["async"],params:[],returns:null,description:"Handle copy password click."},{name:"handleViewPasswordButtonClick",docblock:"Handle preview password button click.",modifiers:["async"],params:[],returns:null,description:"Handle preview password button click."},{name:"copyPasswordToClipboard",docblock:"Copy the resource password to clipboard.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copy the resource password to clipboard."},{name:"togglePreviewPassword",docblock:"Toggle preview password\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle preview password"},{name:"hidePreviewedSecret",docblock:"Hide the previewed resource secret.",modifiers:[],params:[],returns:null,description:"Hide the previewed resource secret."},{name:"previewPassword",docblock:"Preview password\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Preview password"},{name:"displayTemporarilyError",docblock:"Display error temporarily.\n@param {string} error The error message\n@param {number} time The time to persist the error.",modifiers:[],params:[{name:"error",description:"The error message",type:{name:"string"},optional:!1},{name:"time",description:"The time to persist the error.",type:{name:"number"},optional:!0}],returns:null,description:"Display error temporarily."},{name:"decryptResourceSecret",docblock:"Decrypt the resource secret\n@param {string} resourceId The target resource id\n@returns {Promise<object>} The secret in plaintext format\n@throw UserAbortsOperationError If the user cancel the operation",modifiers:[],params:[{name:"resourceId",description:"The target resource id",type:{name:"string"},optional:!1}],returns:{description:"The secret in plaintext format",type:{name:"Promise",elements:[{name:"object"}]}},description:"Decrypt the resource secret"},{name:"handleCopyTotpClick",docblock:"Handle copy totp\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle copy totp"},{name:"handlePreviewTotpButtonClick",docblock:"Handle preview totp button click.",modifiers:["async"],params:[],returns:null,description:"Handle preview totp button click."},{name:"previewTotp",docblock:"Preview totp\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Preview totp"},{name:"handleGoToUrlClick",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"handleUseOnThisTabClick",docblock:null,modifiers:["async"],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"handleClickAdditionalUrisSection",docblock:"Handle click on additional uris",modifiers:[],params:[],returns:null,description:"Handle click on additional uris"},{name:"sanitizeResourceUrl",docblock:"Sanitize resource url\n@param url\n@returns {string|boolean|*}",modifiers:[],params:[{name:"url",optional:!1}],returns:{type:{name:"union",elements:[{name:"string"},{name:"boolean"},{name:"mixed"}]}},description:"Sanitize resource url"},{name:"isPasswordPreviewed",docblock:"Check if the password is previewed\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the password is previewed"},{name:"isTotpPreviewed",docblock:"Check if the totp is previewed\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the totp is previewed"},{name:"canPreviewSecret",docblock:"Returns true if the logged in user can use the preview password capability.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the logged in user can use the preview password capability."},{name:"isTotpResources",docblock:"Is TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"isStandaloneTotpResource",docblock:"Is standalone TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is standalone TOTP resource"}],displayName:"ResourceViewPage",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},match:{description:"",type:{name:"object"},required:!1},location:{description:"",type:{name:"object"},required:!1},history:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var AppContext_test_data=__webpack_require__("./src/react-quickaccess/contexts/AppContext.test.data.js"),RbacContext_test_data=__webpack_require__("./src/shared/context/Rbac/RbacContext.test.data.js"),MockStorage=__webpack_require__("./src/react-extension/test/mock/MockStorage.js"),resourceEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/resourceEntity.test.data.js"),resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js"),resourceTypeEntity_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.test.data.js"),resourceMetadataEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/metadata/resourceMetadataEntity.test.data.js");function defaultProps(props={}){const storage=new MockStorage.A,resources=[(0,resourceEntity_test_data.j8)(),(0,resourceEntity_test_data.f1)()];return storage.local.set({resources}),{context:(0,AppContext_test_data.s)({storage}),resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)()),rbacContext:(0,RbacContext_test_data.E2)(),initialEntries:`/${resources[0].id}`,...props}}const ResourceViewPage_test_stories={title:"Components/QuickAccess/ResourceView",component:ResourceViewPage_ResourceViewPage},Template=({context,initialEntries,...args})=>react.createElement(AppContext.A.Provider,{value:context},react.createElement(react_router.MemoryRouter,{initialEntries:[initialEntries]},react.createElement(react_router.Route,{path:"/:id",component:routerProps=>react.createElement("div",{className:"container quickaccess"},react.createElement(ResourceViewPage_ResourceViewPage,{...args,...routerProps}))})));Template.propTypes={context:prop_types_default().object,initialEntries:prop_types_default().array};const parameters={css:"ext_quickaccess"},ResourceView=Template.bind({});ResourceView.args=defaultProps(),ResourceView.parameters=parameters;const AllApiFlagDisabled=Template.bind({});AllApiFlagDisabled.args=function disabledApiFlagsProps(props={}){const storage=new MockStorage.A,resources=[(0,resourceEntity_test_data.j8)(),(0,resourceEntity_test_data.f1)()];return storage.local.set({resources}),defaultProps({context:(0,AppContext_test_data.s)({siteSettings:{getServerTimezone:()=>"",canIUse:()=>!1},storage}),initialEntries:`/${resources[0].id}`,...props})}(),AllApiFlagDisabled.parameters=parameters;const AllRbacsDenied=Template.bind({});AllRbacsDenied.args=function deniedRbacProps(props={}){return defaultProps({rbacContext:(0,RbacContext_test_data.UO)(),...props})}(),AllRbacsDenied.parameters=parameters;const TotpResourceView=Template.bind({});TotpResourceView.args=function totpResourceProps(props={}){const storage=new MockStorage.A,resources=[(0,resourceEntity_test_data.f1)(),(0,resourceEntity_test_data.j8)()];return storage.local.set({resources}),defaultProps({context:(0,AppContext_test_data.s)({storage}),initialEntries:`/${resources[0].id}`,...props})}(),TotpResourceView.parameters=parameters;const StandaloneTotpResourceView=Template.bind({});StandaloneTotpResourceView.args=function standaloneTotpResourceProps(props={}){const storage=new MockStorage.A,resources=[(0,resourceEntity_test_data.Ge)(),(0,resourceEntity_test_data.j8)()];return storage.local.set({resources}),defaultProps({context:(0,AppContext_test_data.s)({storage}),initialEntries:`/${resources[0].id}`,...props})}(),StandaloneTotpResourceView.parameters=parameters;const ResourceMultipleUrisView=Template.bind({});ResourceMultipleUrisView.args=function multipleUrisResourceProps(props={}){const storage=new MockStorage.A,resources=[(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.Vv,metadata:(0,resourceMetadataEntity_test_data.m)({resource_type_id:resourceTypeEntity_test_data.Vv,uris:["https://passbolt.com","https://community.passbolt.com","https://www.passbolt.com/docs","https://www.passbolt.com/blog","https://www.passbolt.com/security"]})})];return storage.local.set({resources}),defaultProps({context:(0,AppContext_test_data.s)({storage}),initialEntries:`/${resources[0].id}`,...props})}(),ResourceMultipleUrisView.parameters=parameters;const __namedExportsOrder=["ResourceView","AllApiFlagDisabled","AllRbacsDenied","TotpResourceView","StandaloneTotpResourceView","ResourceMultipleUrisView"];ResourceView.parameters={...ResourceView.parameters,docs:{...ResourceView.parameters?.docs,source:{originalSource:'({\n  context,\n  initialEntries,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={[initialEntries]}>\n      <Route path="/:id" component={routerProps => <div className="container quickaccess"><ResourceViewPage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>',...ResourceView.parameters?.docs?.source}}},AllApiFlagDisabled.parameters={...AllApiFlagDisabled.parameters,docs:{...AllApiFlagDisabled.parameters?.docs,source:{originalSource:'({\n  context,\n  initialEntries,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={[initialEntries]}>\n      <Route path="/:id" component={routerProps => <div className="container quickaccess"><ResourceViewPage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>',...AllApiFlagDisabled.parameters?.docs?.source}}},AllRbacsDenied.parameters={...AllRbacsDenied.parameters,docs:{...AllRbacsDenied.parameters?.docs,source:{originalSource:'({\n  context,\n  initialEntries,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={[initialEntries]}>\n      <Route path="/:id" component={routerProps => <div className="container quickaccess"><ResourceViewPage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>',...AllRbacsDenied.parameters?.docs?.source}}},TotpResourceView.parameters={...TotpResourceView.parameters,docs:{...TotpResourceView.parameters?.docs,source:{originalSource:'({\n  context,\n  initialEntries,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={[initialEntries]}>\n      <Route path="/:id" component={routerProps => <div className="container quickaccess"><ResourceViewPage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>',...TotpResourceView.parameters?.docs?.source}}},StandaloneTotpResourceView.parameters={...StandaloneTotpResourceView.parameters,docs:{...StandaloneTotpResourceView.parameters?.docs,source:{originalSource:'({\n  context,\n  initialEntries,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={[initialEntries]}>\n      <Route path="/:id" component={routerProps => <div className="container quickaccess"><ResourceViewPage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>',...StandaloneTotpResourceView.parameters?.docs?.source}}},ResourceMultipleUrisView.parameters={...ResourceMultipleUrisView.parameters,docs:{...ResourceMultipleUrisView.parameters?.docs,source:{originalSource:'({\n  context,\n  initialEntries,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={[initialEntries]}>\n      <Route path="/:id" component={routerProps => <div className="container quickaccess"><ResourceViewPage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>',...ResourceMultipleUrisView.parameters?.docs?.source}}}},"./src/img/svg/caret_down.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCaretDown(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:10,height:8,fill:"none",viewBox:"0 0 10 8"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 2 4 4 4-4"})))}},"./src/img/svg/caret_left.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCaretLeft(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:8,height:10,fill:"none",viewBox:"0 0 8 10"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 9 1 5l4-4"})))}},"./src/img/svg/caret_right.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCaretRight(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:8,height:10,fill:"none",viewBox:"0 0 8 10"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m2 9 4-4-4-4"})))}},"./src/img/svg/copy.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCopy(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#copy_svg__clip0_57_467942)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M15 6H7.5A1.5 1.5 0 0 0 6 7.5V15a1.5 1.5 0 0 0 1.5 1.5H15a1.5 1.5 0 0 0 1.5-1.5V7.5A1.5 1.5 0 0 0 15 6"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M3 12c-.825 0-1.5-.675-1.5-1.5V3c0-.825.675-1.5 1.5-1.5h7.5c.825 0 1.5.675 1.5 1.5"}))))}},"./src/img/svg/eye_close.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEyeClose(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#eye_close_svg__clip0_27_140048)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M6.587 6.587a2 2 0 1 0 2.826 2.827M7.153 3.386q.422-.052.847-.053C12.667 3.333 14.667 8 14.667 8a8.8 8.8 0 0 1-1.114 1.786"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M4.407 4.406A9 9 0 0 0 1.333 8s2 4.666 6.667 4.666a6.5 6.5 0 0 0 3.593-1.073M1.333 1.333l13.334 13.333"}))))}},"./src/img/svg/eye_open.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEyeOpen(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.333 8s2-4.667 6.667-4.667S14.667 8 14.667 8s-2 4.666-6.667 4.666S1.333 8 1.333 8"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"})))}},"./src/img/svg/go.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgGo(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.75 9.75v4.5a1.5 1.5 0 0 1-1.5 1.5H3.75a1.5 1.5 0 0 1-1.5-1.5V3.75a1.5 1.5 0 0 1 1.5-1.5h4.5M15.75 2.25 9 9M11.25 2.25h4.5v4.5"})))}},"./src/img/svg/healthcheck_success.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgHealthcheckSuccess(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:14,height:11,fill:"none",viewBox:"0 0 14 11"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 1.5 4.75 9.75 1 6"})))}},"./src/img/svg/spinner.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSpinner(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:18,height:18,fill:"none",className:"svg-icon spinner",viewBox:"0 0 18 18"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"background",cx:8,cy:8,r:8,fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(1 1)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"loading",r:8,fill:"none",stroke:"var(--spinner-color)",strokeLinecap:"round",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(9 9)"})))}},"./src/img/svg/timer.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgTimer(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:16,height:16,fill:"none",className:"svg-icon timer",viewBox:"0 0 20 20"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{r:8,stroke:"var(--timer-background)",strokeWidth:"var(--timer-stroke-width)",transform:"translate(10 10)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"timer-progress",r:8,fill:"none",stroke:"var(--timer-color)",strokeLinecap:"round",strokeWidth:"var(--timer-stroke-width)",transform:"rotate(-90 10 0)"})))}},"./src/react-extension/test/fixture/Settings/userSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={"user.settings.trustedDomain":new URL(window.location.href).origin,"user.firstname":"Ada","user.id":"f848277c-5398-58f8-a82a-72397af2d450","user.lastname":"Lovelace","user.settings.securityToken.code":"TST","user.settings.securityToken.color":"#000000","user.settings.securityToken.textColor":"#FFFFFF","user.username":"ada@passbolt.com","user.settings.locale":"en-UK","user.settings.theme":"default"}},"./src/react-extension/test/mock/MockPort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function delay(t,v){return new Promise((resolve=>{setTimeout((()=>resolve(v)),t)}))}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class MockPort{constructor(storage){this.storage=storage,this.onListeners={},this.requestListeners={},this.emitListener={},this.onConnectErrorHandler={}}async emit(name,eventObject){let result;return console.debug(`PORT EMIT: ${name}`),console.debug("Arguments",eventObject),this.emitListener[name]?(result=await this.emitListener[name](eventObject),console.debug("response: ",result)):console.debug(`The emit ${name} has not been mocked`),delay(0,result)}on(name,callback){console.debug(`PORT ON: ${name}`),console.debug("PORT ON PARAMETERS:",callback),this.addOnListener(name,callback)}async request(name){let result;if(console.debug(`PORT REQUEST: ${name}`),console.debug("PORT REQUEST PARAMETERS:",Array.prototype.slice.call(arguments)),this.requestListeners[name]){const listenerArguments=Array.prototype.slice.call(arguments,1,arguments.length);console.debug("listenerArguments",listenerArguments),listenerArguments.push(this.storage),console.debug("listenerArguments",listenerArguments),result=await this.requestListeners[name](...listenerArguments),console.debug("response: ",result)}else console.debug(`The request ${name} has not been mocked`);return delay(0,result)}addEmitListener(name){console.debug(`PORT EMIT: ${name}`),console.debug("PORT EMIT PARAMETERS:",Array.prototype.slice.call(arguments))}addOnListener(name,callback){this.emitListener[name]=callback}addRequestListener(name,callback){this.requestListeners[name]=callback}onConnectError(callback){this.onConnectErrorHandler.callback=callback}}},"./src/react-extension/test/mock/MockStorage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class LocalStorage{constructor(changeCallbacks){this.storage={},this.changeCallbacks=changeCallbacks}get(keys){return keys.reduce(((accumulator,key)=>(this.storage[key]&&(accumulator[key]=this.storage[key]),accumulator)),{})}set(data){const storageChangeEventValue={};Object.keys(data).forEach((key=>{this.storage[key]=data[key],storageChangeEventValue[key]={},storageChangeEventValue[key].newValue=data[key]})),this.changeCallbacks.forEach((callback=>callback(storageChangeEventValue)))}}const __WEBPACK_DEFAULT_EXPORT__=class MockStorage{constructor(){this.changeCallbacks=[],this.local=new LocalStorage(this.changeCallbacks),this.onChanged={addListener:listener=>{this.changeCallbacks.push(listener)},removeListener:listener=>{const listenerIndex=this.changeCallbacks.indexOf(listener);listenerIndex>-1&&this.changeCallbacks.splice(listenerIndex,1)}}}}},"./src/react-quickaccess/contexts/AppContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>defaultAppContext});var _shared_lib_Settings_SiteSettings__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/lib/Settings/SiteSettings.js"),_react_extension_test_fixture_Settings_siteSettings__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js"),_react_extension_test_mock_MockPort__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),_react_extension_test_mock_MockStorage__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/test/mock/MockStorage.js"),_shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),_react_extension_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js"),_shared_models_entity_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");function defaultAppContext(data={}){const siteSettings=new _shared_lib_Settings_SiteSettings__WEBPACK_IMPORTED_MODULE_0__.A(_react_extension_test_fixture_Settings_siteSettings__WEBPACK_IMPORTED_MODULE_1__.A);return{locale:"en-UK",userSettings:new _shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_4__.A(_react_extension_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__.A),siteSettings,port:new _react_extension_test_mock_MockPort__WEBPACK_IMPORTED_MODULE_5__.A,storage:new _react_extension_test_mock_MockStorage__WEBPACK_IMPORTED_MODULE_6__.A,loggedInUser:(0,_shared_models_entity_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_3__.cI)(),users:[],resources:[],focusSearch:jest.fn(),updateSearch:jest.fn(),getOpenerTabId:()=>1,search:"",searchHistory:{},...data}}},"./src/shared/components/Password/HiddenPassword.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class HiddenPassword extends react__WEBPACK_IMPORTED_MODULE_0__.Component{handleClick(ev){ev.stopPropagation(),this.props.onClick()}render(){const isPasswordDecrypted="string"==typeof this.props.preview,isPasswordEmpty=isPasswordDecrypted&&0===this.props.preview.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"no-border",onClick:this.handleClick.bind(this),disabled:!this.props.canClick},isPasswordEmpty?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"password-empty"},this.props.emptySecretSentence):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"password-typography"},isPasswordDecrypted&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,Array.from(this.props.preview).map(((char,index)=>/\p{L}/u.test(char)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index},char):/\p{N}/u.test(char)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index,className:"digit"},char):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index,className:"special-char"},char)))),!isPasswordDecrypted&&this.props.t("Copy to clipboard")))}}HiddenPassword.defaultProps={preview:null,canClick:!0,emptySecretSentence:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"There is no password")},HiddenPassword.propTypes={preview:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,emptySecretSentence:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,canClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(HiddenPassword);HiddenPassword.__docgenInfo={description:"",methods:[{name:"handleClick",docblock:"Handle click on the previewed password component.\n@param ev",modifiers:[],params:[{name:"ev",optional:!1}],returns:null,description:"Handle click on the previewed password component."}],displayName:"HiddenPassword",props:{preview:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},canClick:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},emptySecretSentence:{defaultValue:{value:"<Trans>There is no password</Trans>",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/components/Totp/Totp.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_img_svg_timer_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/timer.svg"),_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/services/otp/TotpCodeGeneratorService.js"),react_i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_react_extension_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_utils_logger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/utils/logger.js");class Totp extends react__WEBPACK_IMPORTED_MODULE_0__.Component{updateCodeOnPeriodTimeout=null;dateOnCreation=null;constructor(props){super(props),this.bindCallbacks(),this.dateOnCreation=new Date(Date.now()),this.state=this.defaultState}bindCallbacks(){this.updateCodeOnPeriod=this.updateCodeOnPeriod.bind(this),this.onClick=this.onClick.bind(this)}calculateDelayFromMounted(){return(3600*this.dateOnCreation.getUTCHours()+60*this.dateOnCreation.getUTCMinutes()+this.dateOnCreation.getUTCSeconds())%this.period}calculateDelayFromNow(){const now=new Date(Date.now());return(3600*now.getUTCHours()+60*now.getUTCMinutes()+now.getUTCSeconds())%this.period}get defaultState(){return{code:this.generateCode(),delay:this.calculateDelayFromMounted()}}generateCode(){try{return _services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_2__.l.generate(this.props.totp)}catch(error){return _utils_logger__WEBPACK_IMPORTED_MODULE_5__.A.error(error),this.props.actionFeedbackContext.displayError(this.props.t("Unable to preview the TOTP")),""}}componentDidMount(){this.updateCodeOnPeriodTimeout=this.updateCodeOnPeriod(this.period-this.state.delay)}componentDidUpdate(prevProps){prevProps.totp!==this.props.totp&&(clearTimeout(this.updateCodeOnPeriodTimeout),this.updateCode())}componentWillUnmount(){clearTimeout(this.updateCodeOnPeriodTimeout)}updateCode(){const delay=this.calculateDelayFromMounted(),delayTotp=this.calculateDelayFromNow(),code=this.generateCode();this.updateCodeOnPeriodTimeout=this.updateCodeOnPeriod(this.period-delayTotp),this.setState({code,delay})}updateCodeOnPeriod(when){return setTimeout((()=>{const code=this.generateCode();this.setState({code}),this.updateCodeOnPeriodTimeout=this.updateCodeOnPeriod(this.period)}),1e3*when)}get period(){return this.props.totp?.period||30}onClick(ev){ev.stopPropagation(),this.props.canClick&&this.props?.onClick()}render(){const halfLength=Math.round(this.state.code.length/2),firstHalfCode=this.state.code.substring(0,halfLength),secondHalfCode=this.state.code.substring(halfLength);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"no-border",onClick:this.onClick,disabled:!this.props.canClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"totp-code"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,firstHalfCode),"",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,secondHalfCode)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_timer_svg__WEBPACK_IMPORTED_MODULE_1__.A,{style:{"--timer-duration":`${this.period}s`,"--timer-delay":`-${this.state.delay}s`}}))}}Totp.defaultProps={canClick:!1,onClick:()=>{}},Totp.propTypes={totp:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object.isRequired,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,canClick:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_react_extension_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_4__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_3__.CI)("common")(Totp));Totp.__docgenInfo={description:"This component represents an OTP viewer",methods:[{name:"bindCallbacks",docblock:"Bind component callbacks.",modifiers:[],params:[],returns:null,description:"Bind component callbacks."},{name:"calculateDelayFromMounted",docblock:"Return the delay with the previous period start from the mounted component.\n@return {number}",modifiers:[],params:[],returns:{type:{name:"number"}},description:"Return the delay with the previous period start from the mounted component."},{name:"calculateDelayFromNow",docblock:"Return the delay with the previous period start.\n@return {number}",modifiers:[],params:[],returns:{type:{name:"number"}},description:"Return the delay with the previous period start."},{name:"defaultState",docblock:"Get the default state\n@return {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Get the default state"},{name:"generateCode",docblock:"Generate the code.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Generate the code."},{name:"updateCode",docblock:"Update the code, the delay and the period timeout",modifiers:[],params:[],returns:null,description:"Update the code, the delay and the period timeout"},{name:"updateCodeOnPeriod",docblock:"Update TOTP code when period ends.\n@param {number} when When to update",modifiers:[],params:[{name:"when",description:"When to update",type:{name:"number"},optional:!1}],returns:null,description:"Update TOTP code when period ends."},{name:"period",docblock:"Return the OTP period\n@return {number}",modifiers:["get"],params:[],returns:{type:{name:"number"}},description:"Return the OTP period"},{name:"onClick",docblock:"Whenever the user click on the OTP.\n@param {HtmlEvent} ev The associated html event.",modifiers:[],params:[{name:"ev",description:"The associated html event.",type:{name:"HtmlEvent"},optional:!1}],returns:null,description:"Whenever the user click on the OTP."}],displayName:"Totp",props:{canClick:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},totp:{description:"",type:{name:"object"},required:!0},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/context/Rbac/RbacContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E2:()=>defaultAdministratorRbacContext,UO:()=>denyRbacContext,mM:()=>defaultUserRbacContext});__webpack_require__("./src/shared/models/entity/groupUser/groupUserEntity.test.data.js"),__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");function defaultAdministratorRbacContext(data={}){return{canIUseUiAction:()=>!0,...data}}function defaultUserRbacContext(data={}){return{canIUseUiAction:()=>!0,...data}}function denyRbacContext(data={}){return{canIUseUiAction:()=>!1,...data}}},"./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,KH:()=>withResourceTypesLocalStorage,dA:()=>ResourceTypesLocalStorageContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");const ResourceTypesLocalStorageContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({get:()=>{},resourceTypes:null,updateLocalStorage:()=>{}});class ResourceTypesLocalStorageContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.runningLocalStorageUpdatePromise=null,this.initEventHandlers()}get defaultState(){return{get:this.get.bind(this),resourceTypes:null,updateLocalStorage:this.updateLocalStorage.bind(this)}}initEventHandlers(){this.handleStorageChange=this.handleStorageChange.bind(this)}componentDidMount(){this.props.context.storage.onChanged.addListener(this.handleStorageChange)}componentWillUnmount(){this.props.context.storage.onChanged.removeListener(this.handleStorageChange)}handleStorageChange(changes){changes.resourceTypes&&this.set(changes.resourceTypes.newValue)}set(resourceTypes){const resourceTypesCollection=new _models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__.A(resourceTypes);this.setState({resourceTypes:resourceTypesCollection})}get(){return null===this.state.resourceTypes?(this.loadLocalStorage(),null):this.state.resourceTypes}async loadLocalStorage(){const storageData=await this.props.context.storage.local.get(["resourceTypes"]);storageData.resourceTypes?this.set(storageData.resourceTypes):this.updateLocalStorage()}async updateLocalStorage(){null===this.runningLocalStorageUpdatePromise?(this.runningLocalStorageUpdatePromise=this.props.context.port.request("passbolt.resource-type.get-or-find-all"),await this.runningLocalStorageUpdatePromise,this.runningLocalStorageUpdatePromise=null):await this.runningLocalStorageUpdatePromise}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Provider,{value:this.state},this.props.children)}}ResourceTypesLocalStorageContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(ResourceTypesLocalStorageContextProvider);function withResourceTypesLocalStorage(WrappedComponent){return class withResourceTypesLocalStorage extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Consumer,null,(resourceTypesLocalStorageContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{resourceTypesLocalStorageContext,resourceTypes:resourceTypesLocalStorageContext.get(),...this.props})))}}}ResourceTypesLocalStorageContextProvider.__docgenInfo={description:"The resource types local storage context provider",methods:[{name:"defaultState",docblock:"Returns the default component state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Returns the default component state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"handleStorageChange",docblock:"Handles update of the resource types in the local storage.",modifiers:[],params:[{name:"changes",optional:!1}],returns:null,description:"Handles update of the resource types in the local storage."},{name:"set",docblock:"Set resourceTypes.\n@param {Array<Object>} resourceTypes The resource types to set.\n@private",modifiers:[],params:[{name:"resourceTypes",description:"The resource types to set.",type:{name:"Array",elements:[{name:"Object"}]},optional:!1}],returns:null,description:"Set resourceTypes."},{name:"get",docblock:"Get the resource types from the local storage and/or init them if not the case already.\n@returns {ResourceTypesCollection|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"ResourceTypesCollection"}]}},description:"Get the resource types from the local storage and/or init them if not the case already."},{name:"loadLocalStorage",docblock:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation.\n@returns {Promise<void>}\n@private",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation."},{name:"updateLocalStorage",docblock:"Forces the update of the resource types in the local storage.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Forces the update of the resource types in the local storage."}],displayName:"ResourceTypesLocalStorageContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/lib/Settings/UserSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>UserSettings});class UserSettings{constructor(settings){this.settings=settings}get id(){return this.settings["user.id"]}get fullName(){return`${this.settings["user.firstname"]} ${this.settings["user.lastname"]}`}get username(){return this.settings["user.username"]}getTheme(){return this.settings["user.settings.theme"]}getTrustedDomain(){return this.settings["user.settings.trustedDomain"]}getSecurityToken(){return{code:this.settings["user.settings.securityToken.code"],backgroundColor:this.settings["user.settings.securityToken.color"],textColor:this.settings["user.settings.securityToken.textColor"]}}get locale(){return this.settings["user.settings.locale"]}}},"./src/shared/models/entity/avatar/avatarEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fp:()=>defaultFullAvatarDto,KA:()=>defaultAvatarDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const defaultAvatarDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),url:{medium:"/avatars/view/e6927385-195c-4c7f-a107-a202ea86de40/medium.jpg",small:"/avatars/view/e6927385-195c-4c7f-a107-a202ea86de40/small.jpg"},created:"2023-06-03T12:03:46+00:00",modified:"2023-06-03T12:03:46+00:00",...data}),defaultFullAvatarDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),created:"2023-06-03T12:03:46+00:00",modified:"2023-06-03T12:03:46+00:00",user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),foreign_key:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),model:"Avatar",filename:"carol.png",filesize:733439,mime_type:"image/png",extension:"png",hash:"7445a736df60a1ac1bfdab8fc5b842a95c495aec",path:"Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.png",adapter:"Local",url:{medium:"img/public/Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.a99472d5.png",small:"img/public/Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.65a0ba70.png"},...data})},"./src/shared/models/entity/groupUser/groupUserEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M2:()=>defaultGroupUser});var uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");const defaultGroupUser=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),group_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),is_admin:!1,created:"2022-01-13T13:19:04.661Z",...data})},"./src/shared/models/entity/profile/ProfileEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>defaultProfileDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_avatar_avatarEntity_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/avatar/avatarEntity.test.data.js");const defaultProfileDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),first_name:"Ada",last_name:"Lovelace",created:"2020-04-20T11:32:17+00:00",modified:"2020-04-20T11:32:17+00:00",avatar:(0,_avatar_avatarEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.KA)(),...data})},"./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V1:()=>resourceTypesCollectionDto,XB:()=>resourceTypesV4CollectionDto,Yd:()=>resourceTypesV5CollectionDto});var _resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.test.data.js");const resourceTypesCollectionDto=()=>[(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.m$)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.KD)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G6)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Lt)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G9)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Tl)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.tS)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.mF)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.hl)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Uz)()],resourceTypesV4CollectionDto=()=>[(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.m$)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.KD)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G6)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Lt)()],resourceTypesV5CollectionDto=()=>[(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G9)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Tl)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.tS)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.mF)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.hl)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Uz)()]},"./src/shared/models/entity/role/role.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Dm:()=>userRoleDto,ES:()=>TEST_ROLE_ADMIN_ID,bd:()=>adminRoleDto,ol:()=>TEST_ROLE_USER_ID});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const TEST_ROLE_USER_ID=(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),TEST_ROLE_ADMIN_ID=(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),userRoleDto=data=>({id:TEST_ROLE_USER_ID,name:"user",...data}),adminRoleDto=data=>({id:TEST_ROLE_ADMIN_ID,name:"admin",...data})},"./src/shared/models/entity/role/roleEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js");class RoleEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",enum:[RoleEntity.ROLE_ADMIN,RoleEntity.ROLE_USER,RoleEntity.ROLE_GUEST,RoleEntity.ROLE_ROOT]},description:{type:"string",maxLength:255},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"}}}}get id(){return this._props.id}get name(){return this._props.name}get description(){return this._props.description||null}get created(){return this._props.created||null}get modified(){return this._props.modified||null}isAdmin(){return this.name===RoleEntity.ROLE_ADMIN}static get ENTITY_NAME(){return"Role"}static get ROLE_ADMIN(){return"admin"}static get ROLE_USER(){return"user"}static get ROLE_GUEST(){return"guest"}static get ROLE_ROOT(){return"root"}}const __WEBPACK_DEFAULT_EXPORT__=RoleEntity},"./src/shared/models/entity/user/userEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HI:()=>defaultAdminUserDto,cI:()=>defaultUserDto,VV:()=>users});var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ProfileEntity_test_data=__webpack_require__("./src/shared/models/entity/profile/ProfileEntity.test.data.js"),role_test_data=__webpack_require__("./src/shared/models/entity/role/role.test.data.js"),groupUserEntity_test_data=__webpack_require__("./src/shared/models/entity/groupUser/groupUserEntity.test.data.js"),keys=__webpack_require__("./test/fixture/pgpKeys/keys.js");const defaultUserDto=(data={},options={})=>{const defaultData={id:(0,v4.A)(),role_id:role_test_data.ol,username:"ada@passbolt.com",active:!0,deleted:!1,created:"2020-04-20T11:32:16+00:00",modified:"2020-04-20T11:32:16+00:00",last_logged_in:"2022-07-04T13:39:25+00:00",is_mfa_enabled:!1,...data};!data.role&&options?.withRole&&(defaultData.role=(0,role_test_data.Dm)({id:defaultData.role_id}));const profile=data?.profile||(0,ProfileEntity_test_data.S)({user_id:defaultData.id,...data?.profile});if(defaultData.profile=profile,!data.groups_users&&options?.withGroupsUsers){const groupsUsersCount="number"==typeof options?.withGroupsUsers?options?.withGroupsUsers:1;defaultData.groups_users=[];for(let i=0;i<groupsUsersCount;i++){const groupUserDto=(0,groupUserEntity_test_data.M2)({user_id:defaultData.id});defaultData.groups_users.push(groupUserDto)}}return!data.gpgkey&&options?.withGpgkey&&(defaultData.gpgkey=((data={})=>({id:"91d8a7fd-3ab3-5e98-a4a5-0d8694ff23b9",user_id:"d57c10f5-639d-5160-9c81-8a0c6c4ec856",armored_key:keys.u.ada.public,bits:4096,uid:"Passbolt Default Admin <admin@passbolt.com>",key_id:"D06426D3",fingerprint:"0C1D1761110D1E33C9006D1A5B1B332ED06426D3",type:"RSA",expires:null,key_created:"2015-10-31T16:21:43+00:00",deleted:!1,created:"2020-04-20T11:32:18+00:00",modified:"2020-04-20T11:32:18+00:00",...data}))()),!data.account_recovery_user_setting&&options?.withAccountRecoveryUserSetting&&(defaultData.account_recovery_user_setting=(data=>{const defaultData={user_id:(0,v4.A)(),status:"approved"};return Object.assign(defaultData,data||{})})()),!data.pending_account_recovery_request&&options?.withPendingAccountRecoveryUserRequest&&(defaultData.pending_account_recovery_request=((data={})=>({id:(0,v4.A)(),status:"pending",created:"2020-05-04T20:31:45+00:00",modified:"2020-05-04T20:31:45+00:00",created_by:(0,v4.A)(),modified_by:(0,v4.A)(),...data}))()),defaultData},defaultAdminUserDto=(data={})=>{const role=(0,role_test_data.bd)();return defaultUserDto({role,...data})},users={ada:defaultUserDto({id:"f848277c-5398-58f8-a82a-72397af2d450",username:"ada@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Ada",last_name:"Lovelace"})}),admin:defaultAdminUserDto({id:"f642271d-bbb1-401e-bbd1-7ec370f8e19b",username:"admin@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Admin",last_name:"User"})}),betty:defaultUserDto({id:"e97b14ba-8957-57c9-a357-f78a6e1e1a46",username:"betty@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Betty",last_name:"Holberton"})})}},"./src/shared/services/otp/TotpCodeGeneratorService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>TotpCodeGeneratorService});var otpauth__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/otpauth/dist/otpauth.esm.js");class TotpCodeGeneratorService{static createTotpObject(totpDto){return new otpauth__WEBPACK_IMPORTED_MODULE_0__._k({algorithm:totpDto.algorithm,digits:totpDto.digits,period:totpDto.period,secret:totpDto.secret_key.replace(/(\W|_|\s)/g,""),issuer:totpDto.issuer,label:totpDto.label,timestamp:Date.now()})}static generate(totpDto){return this.createTotpObject(totpDto).generate()}static generateUri(totpDto){return this.createTotpObject(totpDto).toString()}}},"./src/shared/services/serviceWorker/clipboard/clipboardServiceWorkerService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ClipboardServiceWorkerService});var validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js");class ClipboardServiceWorkerService{constructor(port){this.port=port}async copyTemporarily(clipboardContent){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__.A)(clipboardContent),await this.port.request("passbolt.clipboard.copy-temporarily",clipboardContent)}async copy(clipboardContent){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__.A)(clipboardContent),await this.port.request("passbolt.clipboard.copy",clipboardContent)}async cancelClipboardFlush(){await this.port.request("passbolt.clipboard.cancel-content-flush")}}}}]);