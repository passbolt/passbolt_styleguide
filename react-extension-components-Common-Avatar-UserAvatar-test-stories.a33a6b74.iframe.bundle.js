/*! For license information please see react-extension-components-Common-Avatar-UserAvatar-test-stories.a33a6b74.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[8237],{"./src/react-extension/components/Common/Avatar/UserAvatar.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>UserAvatar_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),UserAvatar=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js");const UserAvatar_test_stories={title:"Components/Common/UserAvatar",component:UserAvatar.A},Initial=(args=>react.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},react.createElement("div",{style:{width:"50%"}},react.createElement(UserAvatar.A,args)),react.createElement("div",{style:{width:"50%"}},react.createElement(UserAvatar.A,{...args,attentionRequired:!0})),react.createElement("div",{className:"avatar-with-name",style:{width:"50%",marginTop:"2.3rem"}},react.createElement(UserAvatar.A,args),react.createElement("div",{className:"details center-cell"},react.createElement("span",{className:"name"},"Name"),react.createElement("span",{className:"email"},"name@passbolt.com"))),react.createElement("div",{className:"avatar-with-name",style:{width:"50%",marginTop:"2.3rem"}},react.createElement(UserAvatar.A,{...args,attentionRequired:!0}),react.createElement("div",{className:"details center-cell"},react.createElement("span",{className:"name"},"Name"),react.createElement("span",{className:"email"},"name@passbolt.com"))))).bind({});Initial.args=function defaultProps(props={}){const _props={user:{first_name:"Dame Steve",last_name:"Shirley"},baseUrl:new URL(window.location.href).origin};return Object.assign(_props,props)}({baseUrl:"https://passbolt.github.io/passbolt_styleguide"});const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:'args => <div style={{\n  display: "flex",\n  flexWrap: "wrap"\n}}>\n    <div style={{\n    width: "50%"\n  }}>\n      <UserAvatar {...args} />\n    </div>\n    <div style={{\n    width: "50%"\n  }}>\n      <UserAvatar {...args} attentionRequired={true} />\n    </div>\n    <div className="avatar-with-name" style={{\n    width: "50%",\n    marginTop: "2.3rem"\n  }}>\n      <UserAvatar {...args} />\n      <div className="details center-cell">\n        <span className="name">Name</span>\n        <span className="email">name@passbolt.com</span>\n      </div>\n    </div>\n    <div className="avatar-with-name" style={{\n    width: "50%",\n    marginTop: "2.3rem"\n  }}>\n      <UserAvatar {...args} attentionRequired={true} />\n      <div className="details center-cell">\n        <span className="name">Name</span>\n        <span className="email">name@passbolt.com</span>\n      </div>\n    </div>\n  </div>',...Initial.parameters?.docs?.source}}}},"./src/react-extension/components/Common/Avatar/UserAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const DEFAULT_AVATAR_URL_REGEXP=/img\/avatar\/user(_medium)?\.png$/;class UserAvatar extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{error:!1}}bindCallbacks(){this.handleError=this.handleError.bind(this)}get avatarUrl(){return this.props?.user?.profile?.avatar?.url?.medium}propsHasUrl(){return Boolean(this.avatarUrl)}propsUrlHasProtocol(){return this.avatarUrl.startsWith("https://")||this.avatarUrl.startsWith("http://")}formatUrl(url){return`${this.props.baseUrl}/${url}`}isDefaultAvatarUrlFromApi(){return DEFAULT_AVATAR_URL_REGEXP.test(this.avatarUrl)}getAvatarSrc(){return this.propsHasUrl()?this.propsUrlHasProtocol()?this.avatarUrl:this.formatUrl(this.avatarUrl):null}handleError(){console.error(`Could not load avatar image url: ${this.getAvatarSrc()}`),this.setState({error:!0})}getAltText(){const user=this.props?.user;return user?.first_name&&user?.last_name?this.props.t("Avatar of user {{first_name}} {{last_name}}.",{firstname:user.first_name,lastname:user.last_name}):"..."}render(){const srcAvatar=this.getAvatarSrc(),shouldDisplayDefaultAvatar=this.state.error||this.isDefaultAvatarUrlFromApi()||!srcAvatar;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`${this.props.className} ${this.props.attentionRequired?"attention-required":""}`},shouldDisplayDefaultAvatar&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 42","aria-labelledby":"svg-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:"svg-title"},this.getAltText()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{fill:"#939598",cx:"21",cy:"21",r:"21"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#ffffff",d:"m21,23.04c-4.14,0-7.51-3.37-7.51-7.51s3.37-7.51,7.51-7.51,7.51,3.37,7.51,7.51-3.37,7.51-7.51,7.51Z"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#ffffff",d:"m27.17,26.53h-12.33c-2.01,0-3.89.78-5.31,2.2-1.42,1.42-2.2,3.3-2.2,5.31v1.15c3.55,3.42,8.36,5.53,13.67,5.53s10.13-2.11,13.67-5.53v-1.15c0-2.01-.78-3.89-2.2-5.31-1.42-1.42-3.3-2.2-5.31-2.2Z"})),!shouldDisplayDefaultAvatar&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{src:srcAvatar,onError:this.handleError,alt:this.getAltText()}),this.props.attentionRequired&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"exclamation"}))}}UserAvatar.defaultProps={className:"avatar user-avatar"},UserAvatar.propTypes={baseUrl:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,user:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,attentionRequired:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,className:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,t:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(UserAvatar);UserAvatar.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"avatarUrl",docblock:"Returns the current avatar URL from the props\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the current avatar URL from the props"},{name:"propsHasUrl",docblock:"Return true if the user from props contains a valid profile with avatar url properties\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the user from props contains a valid profile with avatar url properties"},{name:"propsUrlHasProtocol",docblock:"Check if the url has a protocol like http or https?\n@todo only check https for now\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the url has a protocol like http or https?"},{name:"formatUrl",docblock:"Format the avatar url to point on the site url.\n@param {string} url The relative url\n@returns {string}",modifiers:[],params:[{name:"url",description:"The relative url",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Format the avatar url to point on the site url."},{name:"isDefaultAvatarUrlFromApi",docblock:"Returns true if the given URL matches a default avatar from the API\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given URL matches a default avatar from the API"},{name:"getAvatarSrc",docblock:"Get the user avatar url. If the user has no avatar defined, return the default one.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar url. If the user has no avatar defined, return the default one."},{name:"handleError",docblock:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server."},{name:"getAltText",docblock:"Get the user avatar image alternative text.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar image alternative text."}],displayName:"UserAvatar",props:{className:{defaultValue:{value:'"avatar user-avatar"',computed:!1},description:"",type:{name:"string"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},attentionRequired:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}}}]);