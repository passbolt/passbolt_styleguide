/*! For license information please see 7567.5d513ca6.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[7567],{"./src/react-extension/components/Resource/CreateResource/CreateResource.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_35__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/components/Icons/Icon.js"),_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),react_i18next__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_ResourcePassword_GenerateResourcePassword_GenerateResourcePassword__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/react-extension/components/ResourcePassword/GenerateResourcePassword/GenerateResourcePassword.js"),_shared_lib_SecretGenerator_SecretGenerator__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/shared/lib/SecretGenerator/SecretGenerator.js"),_contexts_ResourcePasswordGeneratorContext__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/contexts/ResourcePasswordGeneratorContext.js"),_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/shared/components/Password/Password.js"),_shared_components_PasswordComplexity_PasswordComplexity__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/shared/components/PasswordComplexity/PasswordComplexity.js"),_shared_services_api_secrets_pownedService__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./src/shared/services/api/secrets/pownedService.js"),_shared_context_PasswordPoliciesContext_PasswordPoliciesContext__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/shared/context/PasswordPoliciesContext/PasswordPoliciesContext.js"),_HandleTotpWorkflow_HandleTotpWorkflow__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/react-extension/components/Resource/HandleTotpWorkflow/HandleTotpWorkflow.js"),_HandleTotpWorkflow_HandleTotpWorkflowMode__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/react-extension/components/Resource/HandleTotpWorkflow/HandleTotpWorkflowMode.js"),_contexts_WorkflowContext__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/react-extension/contexts/WorkflowContext.js"),_shared_components_Totp_Totp__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/shared/components/Totp/Totp.js"),_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),luxon__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/luxon/src/luxon.js"),_ConfirmCreateEdit_ConfirmCreateEdit__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/react-extension/components/Resource/ConfirmCreateEdit/ConfirmCreateEdit.js"),_shared_lib_SecretGenerator_SecretGeneratorComplexity__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/shared/lib/SecretGenerator/SecretGeneratorComplexity.js"),_shared_models_resource_ResourcePasswordDescriptionViewModel__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/shared/models/resource/ResourcePasswordDescriptionViewModel.js"),_shared_models_resource_ResourcePasswordStringViewModel__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/shared/models/resource/ResourcePasswordStringViewModel.js"),_shared_models_entity_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js"),_shared_models_resource_ResourceViewModel__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./src/shared/models/resource/ResourceViewModel.js"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),_shared_models_entity_resourceType_resourceTypeEntity__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.js"),_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js"),_shared_models_resource_ResourceViewModelFactory__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./src/shared/models/resource/ResourceViewModelFactory.js");class CreateResource extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.initEventHandlers(),this.createInputRef()}get defaultState(){return{resourceViewModel:null,errors:new _shared_models_entity_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_27__.A,hasAlreadyBeenValidated:!1,isPasswordDictionaryCheckRequested:!0,isPasswordDictionaryCheckServiceAvailable:!0,passwordInDictionary:!1,passwordEntropy:null,generatorSettings:null,processing:!1}}initEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleGeneratePasswordButtonClick=this.handleGeneratePasswordButtonClick.bind(this),this.handleDescriptionToggle=this.handleDescriptionToggle.bind(this),this.handleOpenGenerator=this.handleOpenGenerator.bind(this),this.handleLastGeneratedPasswordChanged=this.handleLastGeneratedPasswordChanged.bind(this),this.handleTotpClick=this.handleTotpClick.bind(this),this.applyTotp=this.applyTotp.bind(this),this.handleDeleteTotpClick=this.handleDeleteTotpClick.bind(this),this.save=this.save.bind(this),this.rejectCreationConfirmation=this.rejectCreationConfirmation.bind(this)}createInputRef(){this.nameInputRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.passwordInputRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}async componentDidMount(){this.initResourceViewModel(),await Promise.all([this.props.passwordPoliciesContext.findPolicies(),this.props.passwordExpiryContext.findSettings()]),this.initPwnedPasswordService(),this.initPasswordGeneratorConfiguration()}componentDidUpdate(prevProps){this.handleLastGeneratedPasswordChanged(prevProps.resourcePasswordGeneratorContext.lastGeneratedPassword)}initResourceViewModel(){const dto={folder_parent_id:this.props.folderParentId,resource_type_id:this.props.resourceType.id},expiryDate=this.getResourceExpirationDate();void 0!==expiryDate&&(dto.expired=expiryDate);const resourceViewModel=_shared_models_resource_ResourceViewModelFactory__WEBPACK_IMPORTED_MODULE_33__.A.createFromResourceTypeAndResourceViewModelDto(this.props.resourceType,dto);this.setState({resourceViewModel})}initPwnedPasswordService(){const isPasswordDictionaryCheckRequested=this.props.passwordPoliciesContext.shouldRunDictionaryCheck();isPasswordDictionaryCheckRequested&&(this.pownedService=new _shared_services_api_secrets_pownedService__WEBPACK_IMPORTED_MODULE_34__.A(this.props.context.port)),this.setState({isPasswordDictionaryCheckRequested})}initPasswordGeneratorConfiguration(){this.setState({generatorSettings:this.props.resourcePasswordGeneratorContext.getSettings()})}handleLastGeneratedPasswordChanged(previousLastGeneratedPassword){const lastGeneratedPassword=this.props.resourcePasswordGeneratorContext.lastGeneratedPassword;if(!lastGeneratedPassword)return;if(!(previousLastGeneratedPassword!==this.props.resourcePasswordGeneratorContext.consumeLastGeneratedPassword()))return;const passwordEntropy=_shared_lib_SecretGenerator_SecretGenerator__WEBPACK_IMPORTED_MODULE_12__.M.entropy(lastGeneratedPassword),generatorSettings=this.props.resourcePasswordGeneratorContext.getSettings(),resourceViewModel=this.state.resourceViewModel.cloneWithMutation("password",lastGeneratedPassword);this.setState({resourceViewModel,generatorSettings,passwordEntropy,passwordInDictionary:!1})}async handleFormSubmit(event){if(event.preventDefault(),this.state.processing)return;this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing();const validationErrors=this.validate();if(validationErrors.hasErrors())return await this.toggleProcessing(),void this.focusFirstFieldError(validationErrors);this.isMinimumRequiredEntropyReached()?await this.isPasswordInDictionary()?this.handlePasswordInDictionary():await this.save():this.handlePasswordMinimumEntropyNotReached()}handlePasswordMinimumEntropyNotReached(){const confirmCreationDialog={operation:_ConfirmCreateEdit_ConfirmCreateEdit__WEBPACK_IMPORTED_MODULE_23__.OL.CREATE,rule:_ConfirmCreateEdit_ConfirmCreateEdit__WEBPACK_IMPORTED_MODULE_23__.BJ.MINIMUM_ENTROPY,resourceName:this.state.resourceViewModel.name,onConfirm:this.save,onReject:this.rejectCreationConfirmation};this.props.dialogContext.open(_ConfirmCreateEdit_ConfirmCreateEdit__WEBPACK_IMPORTED_MODULE_23__.Ay,confirmCreationDialog)}handlePasswordInDictionary(){this.setState({passwordInDictionary:!0});const confirmCreationDialog={operation:_ConfirmCreateEdit_ConfirmCreateEdit__WEBPACK_IMPORTED_MODULE_23__.OL.CREATE,rule:_ConfirmCreateEdit_ConfirmCreateEdit__WEBPACK_IMPORTED_MODULE_23__.BJ.IN_DICTIONARY,resourceName:this.state.resourceViewModel.name,onConfirm:this.save,onReject:this.rejectCreationConfirmation};this.props.dialogContext.open(_ConfirmCreateEdit_ConfirmCreateEdit__WEBPACK_IMPORTED_MODULE_23__.Ay,confirmCreationDialog)}async rejectCreationConfirmation(){await this.toggleProcessing(),this.passwordInputRef.current.focus()}async save(){try{const createdResource=await this.createResource();await this.handleSaveSuccess(createdResource)}catch(error){await this.toggleProcessing(),this.handleSaveError(error)}}async toggleProcessing(){const prev=this.state.processing;return new Promise((resolve=>{this.setState({processing:!prev},resolve())}))}validate(){const errors=this.state.resourceViewModel.validate(_shared_models_resource_ResourceViewModel__WEBPACK_IMPORTED_MODULE_28__.A.CREATE_MODE);return this.setState({errors}),errors}isMinimumRequiredEntropyReached(){return this.state.passwordEntropy&&this.state.passwordEntropy>=_shared_lib_SecretGenerator_SecretGeneratorComplexity__WEBPACK_IMPORTED_MODULE_24__.JP.WEAK}async isPasswordInDictionary(){if(!this.state.isPasswordDictionaryCheckRequested||!this.state.isPasswordDictionaryCheckServiceAvailable)return!1;const{isPwnedServiceAvailable,inDictionary}=await this.pownedService.evaluateSecret(this.state.resourceViewModel.password);return isPwnedServiceAvailable?inDictionary:(this.setState({isPasswordDictionaryCheckServiceAvailable:!1}),!1)}createResource(){const resourceDto=this.state.resourceViewModel.toResourceDto(),secretDto=this.state.resourceViewModel.toSecretDto();return this.props.context.port.request("passbolt.resources.create",resourceDto,secretDto)}getResourceExpirationDate(){if(!this.props.passwordExpiryContext.isFeatureEnabled())return;const passwordExpirySettings=this.props.passwordExpiryContext.getSettings();return passwordExpirySettings?.automatic_update?null==passwordExpirySettings.default_expiry_period?null:luxon__WEBPACK_IMPORTED_MODULE_22__.c9.utc().plus({days:passwordExpirySettings.default_expiry_period}).toISO():void 0}async handleSaveSuccess(createdResource){await this.props.actionFeedbackContext.displaySuccess(this.translate("The password has been added successfully")),this.props.history.push(`/app/passwords/view/${createdResource.id}`),this.handleClose()}handleSaveError(error){"UserAbortsOperationError"!==error.name&&(console.error(error),this.handleError(error))}handleError(error){this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_5__.A,{error})}focusFirstFieldError(validationErrors){validationErrors.hasError("name")?this.nameInputRef.current.focus():validationErrors.hasError("password")&&this.passwordInputRef.current.focus()}handleInputChange(event){const target=event.target,name=target.name,value=target.value||null,newState={resourceViewModel:this.state.resourceViewModel.cloneWithMutation(name,value)};"password"===name&&(newState.passwordInDictionary=!1,newState.passwordEntropy=value?.length?_shared_lib_SecretGenerator_SecretGenerator__WEBPACK_IMPORTED_MODULE_12__.M.entropy(value):null),this.state.hasAlreadyBeenValidated&&(newState.errors=newState.resourceViewModel.validate()),this.setState(newState)}isFieldMaxSizeReached(fieldName){const schema=this.state.resourceViewModel.constructor.getSchema();return void 0!==schema.properties[fieldName]?.maxLength&&this.state.resourceViewModel[fieldName]?.length>=schema.properties[fieldName].maxLength}handleGeneratePasswordButtonClick(){if(this.state.processing)return;const password=_shared_lib_SecretGenerator_SecretGenerator__WEBPACK_IMPORTED_MODULE_12__.M.generate(this.state.generatorSettings),passwordEntropy=_shared_lib_SecretGenerator_SecretGenerator__WEBPACK_IMPORTED_MODULE_12__.M.entropy(password),resourceViewModel=this.state.resourceViewModel.cloneWithMutation("password",password);this.setState({resourceViewModel,passwordError:"",passwordInDictionary:!1,passwordEntropy})}handleOpenGenerator(){this.props.dialogContext.open(_ResourcePassword_GenerateResourcePassword_GenerateResourcePassword__WEBPACK_IMPORTED_MODULE_11__.A)}handleTotpClick(){const totp=this.state.resourceViewModel.totp,mode=totp?_HandleTotpWorkflow_HandleTotpWorkflowMode__WEBPACK_IMPORTED_MODULE_18__._.EDIT_TOTP:_HandleTotpWorkflow_HandleTotpWorkflowMode__WEBPACK_IMPORTED_MODULE_18__._.ADD_TOTP,onApply=this.applyTotp;this.props.workflowContext.start(_HandleTotpWorkflow_HandleTotpWorkflow__WEBPACK_IMPORTED_MODULE_17__.A,{mode,totp,onApply})}handleDeleteTotpClick(){const dto={...this.state.resourceViewModel,resource_type_id:this.props.resourceType.id},resourceViewModel=_shared_models_resource_ResourceViewModelFactory__WEBPACK_IMPORTED_MODULE_33__.A.createFromResourceTypeAndResourceViewModelDto(this.props.resourceType,dto);this.setState({resourceViewModel})}applyTotp(totp){let resourceType;this.props.resourceType.isV5()?resourceType=this.props.resourceTypes.getFirstBySlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_32__.a5):this.props.resourceType.isV4()&&(resourceType=this.props.resourceTypes.getFirstBySlug(_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_32__.fl));const dto={...this.state.resourceViewModel,resource_type_id:resourceType.id,totp},resourceViewModel=_shared_models_resource_ResourceViewModelFactory__WEBPACK_IMPORTED_MODULE_33__.A.createFromResourceTypeAndResourceViewModelDto(resourceType,dto);this.setState({resourceViewModel})}async handleClose(){await this.props.resourcePasswordGeneratorContext.resetSecretGeneratorSettings(),this.props.onClose()}handleDescriptionToggle(){const resourceViewModel=this.state.resourceViewModel;if(!resourceViewModel.canToggleDescription())return;const newResourceViewModelType=resourceViewModel.isDescriptionUnencrypted()?_shared_models_resource_ResourcePasswordDescriptionViewModel__WEBPACK_IMPORTED_MODULE_25__.A:_shared_models_resource_ResourcePasswordStringViewModel__WEBPACK_IMPORTED_MODULE_26__.A,resourceType=this.props.resourceTypes.getFirstBySlug(newResourceViewModelType.resourceTypeSlug),newResourceViewModel=new newResourceViewModelType({...this.state.resourceViewModel,resource_type_id:resourceType.id});this.setState({resourceViewModel:newResourceViewModel})}get canUsePasswordGenerator(){return this.props.context.siteSettings.canIUse("passwordGenerator")}get canUseTotp(){return this.props.context.siteSettings.canIUse("totpResourceTypes")}get hasTotp(){return Boolean(this.state.resourceViewModel.totp)}get translate(){return this.props.t}render(){if(!(null!==this.state.resourceViewModel))return null;const isNameError=this.state.errors.hasError("name","required"),isPasswordError=this.state.errors.hasError("password","required"),isMaxLengthNameWarning=this.isFieldMaxSizeReached("name"),isMaxLengthUriWarning=this.isFieldMaxSizeReached("uri"),isMaxLengthUsernameWarning=this.isFieldMaxSizeReached("username"),isMaxLengthPasswordWarning=this.isFieldMaxSizeReached("password"),isMaxLengthDescriptionWarning=this.isFieldMaxSizeReached("description"),resourceViewModel=this.state.resourceViewModel,passwordEntropy=this.state.passwordInDictionary?0:this.state.passwordEntropy;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_7__.A,{title:this.translate("Create a password"),className:"create-password-dialog",disabled:this.state.processing,onClose:this.handleClose},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input text required ${isNameError?"error":""} ${this.state.processing?"disabled":""}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"create-password-form-name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Name"),isMaxLengthNameWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"exclamation"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:"create-password-form-name",name:"name",type:"text",value:resourceViewModel.name||"",onChange:this.handleInputChange,disabled:this.state.processing,ref:this.nameInputRef,className:"required fluid",maxLength:"255",required:"required",autoComplete:"off",autoFocus:!0,placeholder:this.translate("Name")}),isNameError&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"A name is required.")),isMaxLengthNameWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name warning-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Warning:"))," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"this is the maximum size for this field, make sure your data was not truncated"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input text "+(this.state.processing?"disabled":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"create-password-form-uri"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"URI"),isMaxLengthUriWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"exclamation"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:"create-password-form-uri",name:"uri",className:"fluid",maxLength:"1024",type:"text",autoComplete:"off",value:resourceViewModel.uri||"",onChange:this.handleInputChange,placeholder:this.translate("URI"),disabled:this.state.processing}),isMaxLengthUriWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"uri warning-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Warning:"))," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"this is the maximum size for this field, make sure your data was not truncated"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input text "+(this.state.processing?"disabled":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"create-password-form-username"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Username"),isMaxLengthUsernameWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"exclamation"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:"create-password-form-username",name:"username",type:"text",className:"fluid",maxLength:"255",autoComplete:"off",value:resourceViewModel.username||"",onChange:this.handleInputChange,placeholder:this.translate("Username"),disabled:this.state.processing}),isMaxLengthUsernameWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"username warning-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Warning:"))," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"this is the maximum size for this field, make sure your data was not truncated"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input-password-wrapper input required ${isPasswordError?"error":""} ${this.state.processing?"disabled":""}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"create-password-form-password"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Password"),isMaxLengthPasswordWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"exclamation"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-button-inline"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_14__.A,{id:"create-password-form-password",name:"password",autoComplete:"new-password",placeholder:this.translate("Password"),preview:!0,value:resourceViewModel.password||"",onChange:this.handleInputChange,disabled:this.state.processing,inputRef:this.passwordInputRef}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleGeneratePasswordButtonClick,className:"password-generate button-icon "+(this.state.processing?"disabled":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"dice",big:!0}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Generate"))),this.canUsePasswordGenerator&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleOpenGenerator,className:"password-generator button-icon "+(this.state.processing?"disabled":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"settings",big:!0}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Open generator")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_PasswordComplexity_PasswordComplexity__WEBPACK_IMPORTED_MODULE_15__.A,{entropy:passwordEntropy,error:isPasswordError}),isPasswordError&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"A password is required.")),isMaxLengthPasswordWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password warning-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Warning:"))," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"this is the maximum size for this field, make sure your data was not truncated"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input textarea "+(this.state.processing?"disabled":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"create-password-form-description"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Description"),isMaxLengthDescriptionWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"exclamation"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleDescriptionToggle,className:"link inline lock-toggle"},resourceViewModel.isDescriptionUnencrypted()?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__.A,{message:this.translate("Do not store sensitive data or click here to enable encryption for the description field.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"lock-open"})):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__.A,{message:this.translate("The description content will be encrypted.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"lock"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{id:"create-password-form-description",name:"description",maxLength:"10000",placeholder:this.translate("Add a description"),value:resourceViewModel.description||"",disabled:this.state.processing,onChange:this.handleInputChange}),isMaxLengthDescriptionWarning&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"description warning-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Warning:"))," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"this is the maximum size for this field, make sure your data was not truncated"))),this.canUseTotp&&!this.hasTotp&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input input-totp-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"add-totp link no-border link-icon",onClick:this.handleTotpClick,disabled:this.state.processing},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"plus-circle"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"link-label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Add TOTP")))),this.canUseTotp&&this.hasTotp&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input input-totp-wrapper "+(this.state.processing?"disabled":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"create-password-form-totp"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"TOTP")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input-wrapper-inline totp"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Totp_Totp__WEBPACK_IMPORTED_MODULE_20__.A,{totp:resourceViewModel.totp}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"edit-totp button-icon",onClick:this.handleTotpClick,disabled:this.state.processing},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"edit",big:!0})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"delete-totp button-icon",onClick:this.handleDeleteTotpClick,disabled:this.state.processing},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_2__.A,{name:"trash",big:!0}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_9__.A,{disabled:this.state.processing,onClick:this.handleClose}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_8__.A,{value:this.translate("Create"),disabled:this.state.processing,processing:this.state.processing}))))}}CreateResource.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_35___default().any,history:prop_types__WEBPACK_IMPORTED_MODULE_35___default().object,folderParentId:prop_types__WEBPACK_IMPORTED_MODULE_35___default().string,onClose:prop_types__WEBPACK_IMPORTED_MODULE_35___default().func,resourcePasswordGeneratorContext:prop_types__WEBPACK_IMPORTED_MODULE_35___default().any,passwordExpiryContext:prop_types__WEBPACK_IMPORTED_MODULE_35___default().object,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_35___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_35___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_35___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_30__.A),resourceType:prop_types__WEBPACK_IMPORTED_MODULE_35___default().instanceOf(_shared_models_entity_resourceType_resourceTypeEntity__WEBPACK_IMPORTED_MODULE_31__.Ay),t:prop_types__WEBPACK_IMPORTED_MODULE_35___default().func,passwordPoliciesContext:prop_types__WEBPACK_IMPORTED_MODULE_35___default().object,workflowContext:prop_types__WEBPACK_IMPORTED_MODULE_35___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_36__.y)((0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_shared_context_PasswordPoliciesContext_PasswordPoliciesContext__WEBPACK_IMPORTED_MODULE_16__.WJ)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_29__.KH)((0,_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_21__.f4)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_4__.ot)((0,_contexts_ResourcePasswordGeneratorContext__WEBPACK_IMPORTED_MODULE_13__.Yv)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_6__.z9)((0,_contexts_WorkflowContext__WEBPACK_IMPORTED_MODULE_19__.AV)((0,react_i18next__WEBPACK_IMPORTED_MODULE_10__.CI)("common")(CreateResource))))))))));CreateResource.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"initEventHandlers",docblock:null,modifiers:[],params:[],returns:null},{name:"createInputRef",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"initResourceViewModel",docblock:"Initialize the resource view model",modifiers:[],params:[],returns:null,description:"Initialize the resource view model"},{name:"initPwnedPasswordService",docblock:"Initialize the pwned password service",modifiers:[],params:[],returns:null,description:"Initialize the pwned password service"},{name:"initPasswordGeneratorConfiguration",docblock:"Initialize the password generator configuration",modifiers:[],params:[],returns:null,description:"Initialize the password generator configuration"},{name:"handleLastGeneratedPasswordChanged",docblock:"Whenever a new password has been generated through the generator\n@param previousLastGeneratedPassword The previous last generated password value",modifiers:[],params:[{name:"previousLastGeneratedPassword",description:"The previous last generated password value",optional:!1}],returns:null,description:"Whenever a new password has been generated through the generator"},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle form submit event."},{name:"handlePasswordMinimumEntropyNotReached",docblock:"Request password not reaching minimum entropy creation confirmation.",modifiers:[],params:[],returns:null,description:"Request password not reaching minimum entropy creation confirmation."},{name:"handlePasswordInDictionary",docblock:"Request password in dictionary creation confirmation.",modifiers:[],params:[],returns:null,description:"Request password in dictionary creation confirmation."},{name:"rejectCreationConfirmation",docblock:"Reject the creation confirmation.",modifiers:["async"],params:[],returns:null,description:"Reject the creation confirmation."},{name:"save",docblock:"Save the resource\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Save the resource"},{name:"toggleProcessing",docblock:"Toggle processing state when validating / saving\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle processing state when validating / saving"},{name:"validate",docblock:"Validate the form.\n@returns {EntityValidationError}",modifiers:[],params:[],returns:{type:{name:"EntityValidationError"}},description:"Validate the form."},{name:"isMinimumRequiredEntropyReached",docblock:"Returns true if the given entropy is greater or equal to the minimum required entropy.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given entropy is greater or equal to the minimum required entropy."},{name:"isPasswordInDictionary",docblock:"Check if the password is part of a dictionary.\n@returns {Promise<boolean>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Check if the password is part of a dictionary."},{name:"createResource",docblock:"Create the resource\n@returns {Promise<Object>} returns the newly created resource",modifiers:[],params:[],returns:{description:"returns the newly created resource",type:{name:"Promise",elements:[{name:"Object"}]}},description:"Create the resource"},{name:"getResourceExpirationDate",docblock:"Get the expiration date on the given resource according to the password expiry settings.\nThe value is set to `undefined` if the feature is not activated,\notherwise it is set to `null` if the expiration date must be unset\nor else a `DateTime` at when the expiration should occur.\n@returns {DateTime|null|undefined}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"DateTime"}]}},description:"Get the expiration date on the given resource according to the password expiry settings.\nThe value is set to `undefined` if the feature is not activated,\notherwise it is set to `null` if the expiration date must be unset\nor else a `DateTime` at when the expiration should occur."},{name:"handleSaveSuccess",docblock:"Handle save operation success.\n@param {object} createdResource\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"createdResource",type:{name:"object"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle save operation success."},{name:"handleSaveError",docblock:"Handle save operation error.\n@param {object} error The returned error",modifiers:[],params:[{name:"error",description:"The returned error",type:{name:"object"},optional:!1}],returns:null,description:"Handle save operation error."},{name:"handleError",docblock:"Handle any unexpected errors.\n@param error",modifiers:[],params:[{name:"error",optional:!1}],returns:null,description:"Handle any unexpected errors."},{name:"focusFirstFieldError",docblock:"Focus the first field of the form which is in error state.\n@param {EntityValidationError} validationErrors",modifiers:[],params:[{name:"validationErrors",type:{name:"EntityValidationError"},optional:!1}],returns:null,description:"Focus the first field of the form which is in error state."},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"isFieldMaxSizeReached",docblock:"Returns true if the `maxLength` property of the given field has been reached.\n@param {string} fieldName\n@returns {boolean}",modifiers:[],params:[{name:"fieldName",type:{name:"string"},optional:!1}],returns:{type:{name:"boolean"}},description:"Returns true if the `maxLength` property of the given field has been reached."},{name:"handleGeneratePasswordButtonClick",docblock:"Handle generate password button click.",modifiers:[],params:[],returns:null,description:"Handle generate password button click."},{name:"handleOpenGenerator",docblock:"Whenever the user wants to open the password generator",modifiers:[],params:[],returns:null,description:"Whenever the user wants to open the password generator"},{name:"handleTotpClick",docblock:"Handle click on totp button",modifiers:[],params:[],returns:null,description:"Handle click on totp button"},{name:"handleDeleteTotpClick",docblock:"Handle delete totp",modifiers:[],params:[],returns:null,description:"Handle delete totp"},{name:"applyTotp",docblock:"Apply the totp\n@param {object} totp",modifiers:[],params:[{name:"totp",type:{name:"object"},optional:!1}],returns:null,description:"Apply the totp"},{name:"handleClose",docblock:"Handle close\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle close"},{name:"handleDescriptionToggle",docblock:"Switch to toggle description field encryption",modifiers:[],params:[],returns:null,description:"Switch to toggle description field encryption"},{name:"canUsePasswordGenerator",docblock:"Returns true if the logged in user can use the password generator capability.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the logged in user can use the password generator capability."},{name:"canUseTotp",docblock:"Returns true if the logged in user can use the totp capability.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the logged in user can use the totp capability."},{name:"hasTotp",docblock:"Has a totp\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Has a totp"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"CreateResource",props:{context:{description:"",type:{name:"any"},required:!1},history:{description:"",type:{name:"object"},required:!1},folderParentId:{description:"",type:{name:"string"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},resourcePasswordGeneratorContext:{description:"",type:{name:"any"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},resourceType:{description:"",type:{name:"instanceOf",value:"ResourceTypeEntity"},required:!1},t:{description:"",type:{name:"func"},required:!1},passwordPoliciesContext:{description:"",type:{name:"object"},required:!1},workflowContext:{description:"",type:{name:"any"},required:!1}}}}}]);