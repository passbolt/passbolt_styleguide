/*! For license information please see 6885.27565cfd.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6885],{"./src/img/svg/revert.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgRevert(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25 9A6.75 6.75 0 1 0 9 2.25a7.31 7.31 0 0 0-5.055 2.055L2.25 6"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25 2.25V6H6"})))}},"./src/react-extension/components/Resource/DisplayResourceUrisBadge/DisplayResourceUrisBadge.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js"),_Common_Tooltip_TooltipPortal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Tooltip/TooltipPortal.js");const linkAuthorizedProtocols=[_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__.P.FTP,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__.P.FTPS,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__.P.HTTPS,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__.P.HTTP,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__.P.SSH];class DisplayResourceUrisBadge extends react__WEBPACK_IMPORTED_MODULE_0__.Component{safeLink(link){return(0,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__.A)(link,{whiteListedProtocols:linkAuthorizedProtocols,defaultProtocol:_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_1__.P.HTTPS})||""}handleClick(safeUri){window.open(safeUri,"_blank","noopener,noreferrer")}get additionalUrisLinks(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"list-uris"},this.props.additionalUris?.map(((uri,index)=>{const safeUri=this.safeLink(uri);return safeUri?react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link",key:index,type:"button",onClick:()=>this.handleClick(safeUri)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ellipsis"},uri)):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"link ellipsis",key:index},uri)})))}get numberOfUris(){const urisLength=this.props.additionalUris?.length;return urisLength>99?"99+":`+${urisLength}`}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"badge"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_TooltipPortal__WEBPACK_IMPORTED_MODULE_2__.A,{direction:"bottom",message:this.additionalUrisLinks,className:"additional-uris"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"count"},this.numberOfUris)))}}DisplayResourceUrisBadge.propTypes={additionalUris:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().string)};const __WEBPACK_DEFAULT_EXPORT__=DisplayResourceUrisBadge;DisplayResourceUrisBadge.__docgenInfo={description:"",methods:[{name:"safeLink",docblock:"Get safe uri of a resource\n@param {string} link The resource to get the safe uri for\n@return {string}",modifiers:[],params:[{name:"link",description:"The resource to get the safe uri for",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Get safe uri of a resource"},{name:"handleClick",docblock:"Handle click on uri\n@param {string} safeUri The safe URI to open in the new window.",modifiers:[],params:[{name:"safeUri",description:"The safe URI to open in the new window.",type:{name:"string"},optional:!1}],returns:null,description:"Handle click on uri"},{name:"additionalUrisLinks",docblock:"Get the additional uris links\n@returns {Element}",modifiers:["get"],params:[],returns:{type:{name:"Element"}},description:"Get the additional uris links"},{name:"numberOfUris",docblock:"Get the number of additional uris\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the number of additional uris"}],displayName:"DisplayResourceUrisBadge",props:{additionalUris:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetails.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_36__),_DisplayResourceDetailsInformation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsInformation.js"),_DisplayResourceDetailsTag__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsTag.js"),_DisplayResourceDetailsComment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsComment.js"),_DisplayResourceDetailsDescription__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsDescription.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_DisplayResourceDetailsPermission__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsPermission.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_DisplayResourceDetailsActivity__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsActivity.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),_DisplayResourceDetailsPassword__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsPassword.js"),_DisplayResourceDetailsTotp__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsTotp.js"),_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/img/svg/link.svg"),_Common_Tab_Tabs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/react-extension/components/Common/Tab/Tabs.js"),_Common_Tab_Tab__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/react-extension/components/Common/Tab/Tab.js"),_DisplayResourceDetailsNote__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsNote.js"),_shared_components_Icons_ResourceIcon__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/shared/components/Icons/ResourceIcon.js"),_img_svg_arrow_big_up_dash_svg__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/img/svg/arrow_big_up_dash.svg"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/img/svg/caret_right.svg"),_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js"),_shared_context_MetadataTypesSettingsLocalStorageContext_MetadataTypesSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/shared/context/MetadataTypesSettingsLocalStorageContext/MetadataTypesSettingsLocalStorageContext.js"),_shared_models_entity_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js"),_shared_models_entity_resource_resourceFormEntity__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./src/shared/models/entity/resource/resourceFormEntity.js"),_DisplayResourceDetailsCustomFields__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsCustomFields.js"),_DisplayResourceDetailsURIs__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsURIs.js"),_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js"),_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./src/shared/context/MetadataKeysSettingsLocalStorageContext/MetadataKeysSettingsLocalStorageContext.js"),_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("./src/react-extension/components/Metadata/ActionAbortedMissingMetadataKeys/ActionAbortedMissingMetadataKeys.js");class DisplayResourceDetails extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{displayUpgrade:!0,processing:!1}}bindCallbacks(){this.handlePermalinkClick=this.handlePermalinkClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleDisplayUpgradeClick=this.handleDisplayUpgradeClick.bind(this),this.handleUpgradeClick=this.handleUpgradeClick.bind(this)}get subtitle(){const resource=this.resource;if(!this.props.resourceTypes)return"";const resourceType=this.props.resourceTypes.getFirstById(resource.resource_type_id);switch(resourceType?.slug){case"password-string":case"v5-password-string":return this.translate("Password");case"password-and-description":case"v5-default":return this.translate("Password and Note");case"password-description-totp":case"v5-default-with-totp":return this.translate("Password, Note and TOTP");case"totp":case"v5-totp-standalone":return this.translate("TOTP");case"v5-custom-fields-standalone":return this.translate("Custom fields");default:return this.translate("Resource")}}async handlePermalinkClick(){const permalink=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.resource.id}`;await this.props.clipboardContext.copy(permalink,this.translate("The permalink has been copied to clipboard."))}handleCloseClick(){this.props.resourceWorkspaceContext.onLockDetail()}handleDisplayUpgradeClick(){this.setState({displayUpgrade:!this.state.displayUpgrade})}async handleUpgradeClick(){this.canUpgradeResource()?await this.upgradeResource():this.displayActionAborted()}canUpgradeResource(){const isMetadataSharedKeyEnforced=!this.props.metadataKeysSettings?.allowUsageOfPersonalKeys,isPersonalResource=this.resource.personal,userHasMissingKeys=this.props.context.loggedInUser.missing_metadata_key_ids?.length>0;return!(isPersonalResource&&isMetadataSharedKeyEnforced&&userHasMissingKeys)&&!(!isPersonalResource&&userHasMissingKeys)}displayActionAborted(){this.props.dialogContext.open(_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_35__.A)}async upgradeResource(){this.setState({processing:!0});try{const resourceFormEntity=await this.createResourceFormEntity();resourceFormEntity.upgradeToV5(),await this.save(resourceFormEntity)}catch(error){await this.handleSaveError(error)}finally{this.setState({processing:!1})}}async createResourceFormEntity(){const resourceDto={...this.resource};return resourceDto.secret=await this.getDecryptedSecret(),new _shared_models_entity_resource_resourceFormEntity__WEBPACK_IMPORTED_MODULE_28__.A(resourceDto,{resourceTypes:this.props.resourceTypes})}async getDecryptedSecret(){return await this.props.context.port.request("passbolt.secret.find-by-resource-id",this.resource.id)}async save(resource){await this.updateResource(resource),await this.handleSaveSuccess()}async updateResource(resource){const resourceDto=resource.toResourceDto(),secretDto=resource.toSecretDto();await this.props.context.port.request("passbolt.resources.update",resourceDto,secretDto)}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The resource has been updated successfully"))}async handleSaveError(error){"UserAbortsOperationError"!==error?.name&&"UntrustedMetadataKeyError"!==error?.name?await this.props.actionFeedbackContext.displayError(error.message):console.warn(error)}get resource(){return this.props.resourceWorkspaceContext.details.resource}get isStandaloneTotpResource(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.isStandaloneTotp()}get isPasswordResources(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasPassword()}get isTotpResources(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasTotp()}get hasDescription(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasMetadataDescription()}get hasSecureNote(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasSecretDescription()}get hasCustomFields(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasCustomFields()&&this.resource.metadata.custom_fields?.length>0}get hasMultipleUris(){return this.resource.metadata.uris?.length>1}get shouldDisplayUpgradeResource(){const resourceType=this.props.resourceTypes?.getFirstById(this.resource.resource_type_id),v5ResourceTypeSlug=_shared_models_entity_resourceType_resourceTypeSchemasDefinition__WEBPACK_IMPORTED_MODULE_25__.WC[resourceType?.slug];return this.canUpdate&&this.props.metadataTypeSettings?.allowV4V5Upgrade&&resourceType?.isV4()&&this.props.resourceTypes.hasOneWithSlug(v5ResourceTypeSlug)}get canUpdate(){return this.resource.permission.type>=7}get translate(){return this.props.t}renderResourceDetail(){const canUseTags=this.props.context.siteSettings.canIUse("tags")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__.e.TAGS_USE),canViewShare=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__.e.SHARE_VIEW_LIST),canSeeComments=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__.e.RESOURCES_SEE_COMMENTS);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.isPasswordResources&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsPassword__WEBPACK_IMPORTED_MODULE_15__.A,null),this.isTotpResources&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsTotp__WEBPACK_IMPORTED_MODULE_16__.A,{isStandaloneTotp:this.isStandaloneTotpResource}),this.hasCustomFields&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsCustomFields__WEBPACK_IMPORTED_MODULE_29__.A,null),this.hasSecureNote&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsNote__WEBPACK_IMPORTED_MODULE_20__.A,null),this.hasMultipleUris&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsURIs__WEBPACK_IMPORTED_MODULE_30__.A,null),canViewShare&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsPermission__WEBPACK_IMPORTED_MODULE_6__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsInformation__WEBPACK_IMPORTED_MODULE_1__.A,null),this.hasDescription&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsDescription__WEBPACK_IMPORTED_MODULE_4__.A,null),canUseTags&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsTag__WEBPACK_IMPORTED_MODULE_2__.A,null),canSeeComments&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsComment__WEBPACK_IMPORTED_MODULE_3__.A,null))}render(){const canUseAuditLog=(this.props.context.siteSettings.canIUse("auditLog")||this.props.context.siteSettings.canIUse("audit_log"))&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__.e.RESOURCES_SEE_ACTIVITIES);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sidebar resource"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sidebar-header "+(canUseAuditLog?"":"with-separator")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_ResourceIcon__WEBPACK_IMPORTED_MODULE_21__.A,{resource:this.resource}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"title-area"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h3",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"title-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"name"},this.resource.metadata.name)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"subtitle"},this.subtitle)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"title-link button-transparent inline",title:this.translate("Copy the link to this password"),onClick:this.handlePermalinkClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_17__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy the link to this password"))))),this.shouldDisplayUpgradeResource&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"section-card"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"card"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"title no-border",onClick:this.handleDisplayUpgradeClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_arrow_big_up_dash_svg__WEBPACK_IMPORTED_MODULE_22__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"text ellipsis"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Resource upgrade available")),this.state.displayUpgrade?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_23__.A,{className:"caret-down"}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_24__.A,{className:"caret-right"})),this.state.displayUpgrade&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Upgrade for security improvements and new features.")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{className:"link",href:"https://www.passbolt.com/blog/the-road-to-passbolt-v5-encrypted-metadata-and-other-core-security-changes-2",target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ellipsis"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Learn more"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{disabled:this.state.processing,type:"button",onClick:this.handleUpgradeClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ellipsis"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Upgrade"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sidebar-content"},canUseAuditLog?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tab_Tabs__WEBPACK_IMPORTED_MODULE_18__.A,{activeTabName:"Details"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tab_Tab__WEBPACK_IMPORTED_MODULE_19__.A,{key:"Details",name:this.props.t("Details"),type:"Details"},this.renderResourceDetail()),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tab_Tab__WEBPACK_IMPORTED_MODULE_19__.A,{key:"Activity",name:this.props.t("Activity"),type:"Activity"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsActivity__WEBPACK_IMPORTED_MODULE_8__.A,null))):this.renderResourceDetail()))}}DisplayResourceDetails.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().object,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_36___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_14__.A),actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,metadataTypeSettings:prop_types__WEBPACK_IMPORTED_MODULE_36___default().instanceOf(_shared_models_entity_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_27__.Ay),metadataKeysSettings:prop_types__WEBPACK_IMPORTED_MODULE_36___default().instanceOf(_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_33__.A),clipboardContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_36___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_7__.L)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_34__.z9)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_12__.x6)((0,_shared_context_MetadataTypesSettingsLocalStorageContext_MetadataTypesSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_26__.mw)((0,_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_32__.XF)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_13__.KH)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_9__.ot)((0,_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_31__.nJ)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_5__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_10__.CI)("common")(DisplayResourceDetails))))))))));DisplayResourceDetails.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get the default state\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Get the default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"subtitle",docblock:"Get the sidebar subtitle",modifiers:["get"],params:[],returns:null,description:"Get the sidebar subtitle"},{name:"handlePermalinkClick",docblock:"Handle when the user copies the permalink.",modifiers:["async"],params:[],returns:null,description:"Handle when the user copies the permalink."},{name:"handleCloseClick",docblock:"Handle close sidebar click",modifiers:[],params:[],returns:null,description:"Handle close sidebar click"},{name:"handleDisplayUpgradeClick",docblock:"Handles the click on the display upgrade button.",modifiers:[],params:[],returns:null,description:"Handles the click on the display upgrade button."},{name:"handleUpgradeClick",docblock:"Handle upgrade resource",modifiers:["async"],params:[],returns:null,description:"Handle upgrade resource"},{name:"canUpgradeResource",docblock:"Can upgrade resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can upgrade resource"},{name:"displayActionAborted",docblock:"Display action aborted",modifiers:[],params:[],returns:null,description:"Display action aborted"},{name:"upgradeResource",docblock:"Upgrade the resource",modifiers:["async"],params:[],returns:null,description:"Upgrade the resource"},{name:"createResourceFormEntity",docblock:"Create resource form entity\n@returns {Promise<ResourceFormEntity>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"ResourceFormEntity"}]}},description:"Create resource form entity"},{name:"getDecryptedSecret",docblock:"Get the decrypted secret associated to the resource\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Get the decrypted secret associated to the resource"},{name:"save",docblock:"Save the resource\n@param {ResourceFormEntity} resource\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"resource",type:{name:"ResourceFormEntity"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Save the resource"},{name:"updateResource",docblock:"Update the resource\n@param {ResourceFormEntity} resource\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"resource",type:{name:"ResourceFormEntity"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Update the resource"},{name:"handleSaveSuccess",docblock:"Handle save operation success.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle save operation success."},{name:"handleSaveError",docblock:"Handle save operation error.\n@param {object} error The returned error",modifiers:["async"],params:[{name:"error",description:"The returned error",type:{name:"object"},optional:!1}],returns:null,description:"Handle save operation error."},{name:"resource",docblock:"Get the resource selected\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get the resource selected"},{name:"isStandaloneTotpResource",docblock:"Is TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"isPasswordResources",docblock:"Is password resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is password resource"},{name:"isTotpResources",docblock:"Is totp resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is totp resource"},{name:"hasDescription",docblock:"Has description\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Has description"},{name:"hasSecureNote",docblock:null,modifiers:["get"],params:[],returns:null},{name:"hasCustomFields",docblock:null,modifiers:["get"],params:[],returns:null},{name:"hasMultipleUris",docblock:"Checks if the resource has multiple URIs.\n@returns {boolean} True if the resource has more than one URI, false otherwise.",modifiers:["get"],params:[],returns:{description:"True if the resource has more than one URI, false otherwise.",type:{name:"boolean"}},description:"Checks if the resource has multiple URIs."},{name:"shouldDisplayUpgradeResource",docblock:"Should display the upgrade resource section\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Should display the upgrade resource section"},{name:"canUpdate",docblock:"Can update the resource",modifiers:["get"],params:[],returns:null,description:"Can update the resource"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"},{name:"renderResourceDetail",docblock:'Renders the "Details" section tab of a resource.\n@returns {JSX}',modifiers:[],params:[],returns:{type:{name:"JSX"}},description:'Renders the "Details" section tab of a resource.'}],displayName:"DisplayResourceDetails",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},metadataTypeSettings:{description:"",type:{name:"instanceOf",value:"MetadataTypesSettingsEntity"},required:!1},metadataKeysSettings:{description:"",type:{name:"instanceOf",value:"MetadataKeysSettingsEntity"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsActivity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DisplayResourceDetails_DisplayResourceDetailsActivity});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),UserAvatar=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),GroupAvatar=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),spinner=__webpack_require__("./src/img/svg/spinner.svg"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),dateUtils=__webpack_require__("./src/shared/utils/dateUtils.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js");const DisplayResourceDetails_ActivitiesServiceWorkerService=class ActivitiesServiceWorkerService{constructor(port){this.port=port}async findAllFromResourceId(resourceId,{page,limit=5}){return await this.port.request("passbolt.actionlogs.find-all-for","Resource",resourceId,{limit,page})}};var DisplayAroName=__webpack_require__("./src/shared/components/Aro/DisplayAroName.js");class DisplayResourceDetailsActivity extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.activitiesServiceWorkerService=new DisplayResourceDetails_ActivitiesServiceWorkerService(props.context.port),this.bindCallbacks()}get defaultState(){return{activities:[],activitiesPage:1,loadingMore:!1,loading:!0}}async componentDidMount(){await this.fetch(this.state.activitiesPage),this.setState({loading:!1})}async componentDidUpdate(prevProps){prevProps.resourceWorkspaceContext.details&&await this.handleResourceChange(prevProps.resourceWorkspaceContext.details.resource),prevProps.resourceWorkspaceContext.refresh&&await this.handleResourceActivitiesRefresh(prevProps.resourceWorkspaceContext.refresh.activities)}bindCallbacks(){this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this)}async handleResourceChange(previousResource){this.resource.id!==previousResource.id&&(this.setState(this.defaultState),await this.fetch(this.state.activitiesPage),this.setState({loading:!1}))}async handleResourceActivitiesRefresh(hasPreviouslyRefreshed){!hasPreviouslyRefreshed&&this.props.resourceWorkspaceContext.refresh.activities&&(await this.fetch(this.state.activitiesPage),await this.props.resourceWorkspaceContext.onResourceActivitiesRefreshed())}async handleMoreClickEvent(){const activitiesPage=this.state.activitiesPage+1;this.setState({activitiesPage,loadingMore:!0}),await this.fetch(activitiesPage),this.setState({loadingMore:!1})}async fetch(page){try{const newActivities=await this.activitiesServiceWorkerService.findAllFromResourceId(this.resource.id,{page})||[];this.mergeActivities(newActivities)}catch(error){console.error(error),this.props.actionFeedbackContext.displayError(error.message)}}mergeActivities(fetchActivities){const newActivities=fetchActivities.filter((activity=>!this.state.activities.find((a=>a.id===activity.id)))),activities=[...this.state.activities,...newActivities];activities.sort(((a,b)=>new Date(b.created)-new Date(a.created))),this.setState({activities})}getActivityCreatorFullName(user){return`${user.profile.first_name} ${user.profile.last_name}`}getPermissionLabel(permission){switch(permission.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}getPermissionChangeTypeLabel(type){switch(type){case"created":return this.translate("new");case"updated":return this.translate("updated");case"removed":return this.translate("deleted")}}get baseUrl(){return this.props.context.userSettings.getTrustedDomain()}renderResouceCreatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,dateUtils.kD)(activity.created,this.props.t,this.props.context.locale);return react.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react.createElement("div",{className:"content-wrapper"},react.createElement("div",{className:"content"},react.createElement("div",{className:"name"},react.createElement(es.x6,null,react.createElement("span",{className:"creator"},{activityCreatorName})," created item ",react.createElement("span",{className:"item"},{resourceName}))),react.createElement("div",{className:"subinfo third-level light"},activityFormattedDate))),react.createElement(UserAvatar.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderResourceUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,dateUtils.kD)(activity.created,this.props.t,this.props.context.locale);return react.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react.createElement("div",{className:"content-wrapper"},react.createElement("div",{className:"content"},react.createElement("div",{className:"name"},react.createElement(es.x6,null,react.createElement("span",{className:"creator"},{activityCreatorName})," updated item ",react.createElement("span",{className:"item"},{resourceName}))),react.createElement("div",{className:"subinfo third-level light"},activityFormattedDate))),react.createElement(UserAvatar.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderSecretReadActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,dateUtils.kD)(activity.created,this.props.t,this.props.context.locale);return react.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react.createElement("div",{className:"content-wrapper"},react.createElement("div",{className:"content"},react.createElement("div",{className:"name"},react.createElement(es.x6,null,react.createElement("span",{className:"creator"},{activityCreatorName})," accessed secret of item ",react.createElement("span",{className:"item"},{resourceName}))),react.createElement("div",{className:"subinfo third-level light"},activityFormattedDate))),react.createElement(UserAvatar.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderSecretUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,dateUtils.kD)(activity.created,this.props.t,this.props.context.locale);return react.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react.createElement("div",{className:"content-wrapper"},react.createElement("div",{className:"content"},react.createElement("div",{className:"name"},react.createElement(es.x6,null,react.createElement("span",{className:"creator"},{activityCreatorName})," updated secret of item ",react.createElement("span",{className:"item"},{resourceName}))),react.createElement("div",{className:"subinfo third-level light"},activityFormattedDate))),react.createElement(UserAvatar.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderSharedActivityPermissionChangeItem(permission,changeType){const permissionLabel=this.getPermissionLabel(permission),changeTypeLabel=this.getPermissionChangeTypeLabel(changeType);return react.createElement("li",{key:permission.id},permission.user&&react.createElement(UserAvatar.A,{user:permission.user,baseUrl:this.baseUrl}),permission.group&&react.createElement(GroupAvatar.A,{group:permission.group}),react.createElement("div",{className:"name"},react.createElement("span",{className:"creator"},react.createElement(DisplayAroName.A,{displayAs:permission.aro,user:permission.user,group:permission.group})),react.createElement("span",{className:"permission-type"}," ",permissionLabel)),react.createElement("div",{className:"type"},react.createElement("span",{className:changeType},changeTypeLabel)))}renderPermissionsUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),resourceName=this.resource.metadata.name,activityFormattedDate=(0,dateUtils.kD)(activity.created,this.props.t,this.props.context.locale);return react.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react.createElement("div",{className:"content-wrapper"},react.createElement("div",{className:"content"},react.createElement("div",{className:"name"},react.createElement(es.x6,null,react.createElement("span",{className:"creator"},{activityCreatorName})," changed permissions of item ",react.createElement("span",{className:"item"},{resourceName})," with")),react.createElement("ul",{className:"permissions-list"},activity.data.permissions.added.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"created"))),activity.data.permissions.updated.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"updated"))),activity.data.permissions.removed.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"removed")))),react.createElement("div",{className:"subinfo third-level light"},activityFormattedDate))),react.createElement(UserAvatar.A,{user:activity.creator,baseUrl:this.baseUrl}))}renderUnknownActivity(activity){return react.createElement("li",{key:activity.id,className:"usercard-detailed-col-2"},react.createElement("div",{className:"content-wrapper"},react.createElement("div",{className:"content"},react.createElement(es.x6,null,"Unknown activity, please contact your administrator."))))}renderActivity(activity){let render;switch(activity.type){case"Resources.created":render=this.renderResouceCreatedActivity(activity);break;case"Resources.updated":render=this.renderResourceUpdatedActivity(activity);break;case"Permissions.updated":render=this.renderPermissionsUpdatedActivity(activity);break;case"Resource.Secrets.read":render=this.renderSecretReadActivity(activity);break;case"Resource.Secrets.updated":render=this.renderSecretUpdatedActivity(activity);break;default:render=this.renderUnknownActivity(activity)}return render}mustDisplayMoreButton(){return!this.state.activities.some((activity=>"Resources.created"===activity.type))}get resource(){return this.props.resourceWorkspaceContext.details.resource}get translate(){return this.props.t}render(){return react.createElement("div",{className:"activity accordion sidebar-section"},react.createElement("div",{className:"accordion-content"},this.state.loading&&react.createElement("div",{className:"processing-wrapper"},react.createElement(spinner.A,null),react.createElement("span",{className:"processing-text"},react.createElement(es.x6,null,"Retrieving activities"))),!this.state.loading&&react.createElement(react.Fragment,null,react.createElement("ul",{className:"ready"},this.state.activities.map((activity=>this.renderActivity(activity)))),this.mustDisplayMoreButton()&&react.createElement("div",{className:"actions"},react.createElement("button",{type:"button",onClick:this.handleMoreClickEvent,disabled:this.state.loadingMore,className:"link no-border action-logs-load-more "+(this.state.loadingMore?"processing":"")},react.createElement("span",null,react.createElement(es.x6,null,"More")))))))}}DisplayResourceDetailsActivity.propTypes={context:prop_types_default().any,resourceWorkspaceContext:prop_types_default().any,actionFeedbackContext:prop_types_default().object,t:prop_types_default().func};const DisplayResourceDetails_DisplayResourceDetailsActivity=(0,AppContext.L)((0,ResourceWorkspaceContext.Qw)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(DisplayResourceDetailsActivity))));DisplayResourceDetailsActivity.__docgenInfo={description:"This component display activity section of a resource",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleResourceChange",docblock:"Check if the resource has changed and fetch\n@param previousResource",modifiers:["async"],params:[{name:"previousResource",optional:!1}],returns:null,description:"Check if the resource has changed and fetch"},{name:"handleResourceActivitiesRefresh",docblock:"Handle the refresh of the activities\n@param hasPreviouslyRefreshed True if one previously refreshed the activities",modifiers:["async"],params:[{name:"hasPreviouslyRefreshed",description:"True if one previously refreshed the activities",optional:!1}],returns:null,description:"Handle the refresh of the activities"},{name:"handleMoreClickEvent",docblock:"handle when the users click on the more button.\nOpen/Close it.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the more button.\nOpen/Close it."},{name:"fetch",docblock:"Fetch the resource activitiesPage\n@param {number} page the page to load\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"page",description:"the page to load",type:{name:"number"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Fetch the resource activitiesPage"},{name:"mergeActivities",docblock:"Merge current activities with newly fetched ones.\nIt avoids to have duplicated activities especially when a refresh is asked.\n@param {array} fetchActivities",modifiers:[],params:[{name:"fetchActivities",type:{name:"array"},optional:!1}],returns:null,description:"Merge current activities with newly fetched ones.\nIt avoids to have duplicated activities especially when a refresh is asked."},{name:"getActivityCreatorFullName",docblock:"Get an activity creator full name\n@param {object} user The creator\n@return string",modifiers:[],params:[{name:"user",description:"The creator",type:{name:"object"},optional:!1}],returns:{description:"string"},description:"Get an activity creator full name"},{name:"getPermissionLabel",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionChangeTypeLabel",docblock:"Get permission change type label\n@param {string} type The target change type",modifiers:[],params:[{name:"type",description:"The target change type",type:{name:"string"},optional:!1}],returns:null,description:"Get permission change type label"},{name:"baseUrl",docblock:"Get the base url\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the base url"},{name:"renderResouceCreatedActivity",docblock:"Render a resource created activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a resource created activity."},{name:"renderResourceUpdatedActivity",docblock:"Render a resource updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a resource updated activity."},{name:"renderSecretReadActivity",docblock:"Render a secret read activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a secret read activity."},{name:"renderSecretUpdatedActivity",docblock:"Render a secret updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a secret updated activity."},{name:"renderSharedActivityPermissionChangeItem",docblock:"Render a shared activity permission change item.\n@param {object} permission The target permission\n@param {string} changeType The change type\n@returns {JSX}",modifiers:[],params:[{name:"permission",description:"The target permission",type:{name:"object"},optional:!1},{name:"changeType",description:"The change type",type:{name:"string"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a shared activity permission change item."},{name:"renderPermissionsUpdatedActivity",docblock:"Render a permissions updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a permissions updated activity."},{name:"renderUnknownActivity",docblock:"Render an unknown activity.\n@returns {JSX}",modifiers:[],params:[{name:"activity",optional:!1}],returns:{type:{name:"JSX"}},description:"Render an unknown activity."},{name:"renderActivity",docblock:"Render an activity\n@param {object} activity The activity to render",modifiers:[],params:[{name:"activity",description:"The activity to render",type:{name:"object"},optional:!1}],returns:null,description:"Render an activity"},{name:"mustDisplayMoreButton",docblock:"Check if the more button should be displayed.\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the more button should be displayed."},{name:"resource",docblock:"Returns the current detailed resource",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed resource"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceDetailsActivity",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsCustomFields.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_shared_components_Password_HiddenPassword__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/components/Password/HiddenPassword.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/img/svg/caret_right.svg"),_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/img/svg/eye_close.svg"),_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/img/svg/eye_open.svg"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/img/svg/spinner.svg"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js");class DisplayResourceDetailsCustomFields extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}componentDidUpdate(prevProps){const previousResource=prevProps.resourceWorkspaceContext?.details?.resource,currentResource=this.props.resourceWorkspaceContext?.details?.resource;(previousResource?.id!==currentResource?.id||previousResource?.modified!==currentResource?.modified)&&this.setState({secrets:[],secretPreviewed:[]})}getDefaultState(){return{open:!0,secrets:[],secretPreviewed:[],isSecretsDecrypting:!1}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handlePreviewSecretClickEvent=this.handlePreviewSecretClickEvent.bind(this),this.handleShowAllEvent=this.handleShowAllEvent.bind(this),this.handleCopySecretEvent=this.handleCopySecretEvent.bind(this),this.handleCopyKeyEvent=this.handleCopyKeyEvent.bind(this)}get resource(){return this.props.resourceWorkspaceContext.details.resource}handleTitleClickEvent(){const open=!this.state.open;this.setState({open})}isPreviewed(id){return this.state.secretPreviewed.includes(id)}getSecretValue(id){const secretValue=this.state.secrets?.find((secret=>secret.id===id))?.secret_value;return secretValue||""}async handlePreviewSecretClickEvent(id){const{secretPreviewed}=this.state;if(secretPreviewed.includes(id)){const updatedSecretPreviewed=secretPreviewed.filter((secretId=>secretId!==id)),secrets=0===updatedSecretPreviewed.length?[]:this.state.secrets;this.setState({secretPreviewed:updatedSecretPreviewed,secrets})}else{const secrets=await this.decryptCustomFieldSecrets();await this.props.resourceWorkspaceContext.onResourcePreviewed(),this.setState({secrets,secretPreviewed:[...secretPreviewed,id]})}}async decryptCustomFieldSecrets(){const resourceId=this.resource.id;let customFieldsSecrets;if(this.props.progressContext.open(this.props.t("Decrypting secret(s)")),0===this.state.secrets?.length)try{const plaintextSecretDto=await this.props.context.port.request("passbolt.secret.find-by-resource-id",resourceId);customFieldsSecrets=plaintextSecretDto?.custom_fields}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}else customFieldsSecrets=this.state.secrets;return customFieldsSecrets||(customFieldsSecrets=[]),this.props.progressContext.close(),customFieldsSecrets}async handleShowAllEvent(){if(this.showAll)this.setState({secrets:[],secretPreviewed:[]});else{this.setState({isSecretsDecrypting:!0});const secrets=await this.decryptCustomFieldSecrets();this.setState({secrets,isSecretsDecrypting:!1});const secretPreviewed=this.resource.metadata.custom_fields.map((customField=>customField.id));this.setState({secretPreviewed})}}async handleCopySecretEvent(id){const secret=(await this.decryptCustomFieldSecrets()).find((secret=>secret.id===id));this.props.progressContext.close(),secret&&0!==secret.secret_value.length?(this.props.clipboardContext.copyTemporarily(secret.secret_value,this.props.t("The custom field value has been copied to clipboard.")),await this.props.resourceWorkspaceContext.onResourceCopied()):await this.props.actionFeedbackContext.displayWarning(this.props.t("The custom field value is empty and cannot be copied to clipboard."))}async handleCopyKeyEvent(key){this.props.clipboardContext.copy(key,this.props.t("The custom field key has been copied to clipboard.")),await this.props.resourceWorkspaceContext.onResourceCopied()}get showAll(){return this.state.secretPreviewed.length===this.resource.metadata.custom_fields.length}render(){const canCopySecret=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_10__.e.SECRETS_COPY),canPreviewSecret=this.props.context.siteSettings?.canIUse("previewPassword")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_10__.e.SECRETS_PREVIEW);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-information accordion sidebar-section custom-fields"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleTitleClickEvent,className:"link no-border section-opener"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Custom fields")),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_6__.A,null),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_7__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"fields"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-label"},this.resource.metadata.custom_fields.map(((customField,index)=>customField.metadata_key.length>0?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index,title:customField.metadata_key,className:`${customField.metadata_key} label ${canCopySecret&&"can-copy"}`,onClick:()=>canCopySecret&&this.handleCopyKeyEvent(customField.metadata_key)},customField.metadata_key):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index,className:"label empty",title:"no key"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"no key"))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-value"},this.resource.metadata.custom_fields.map((customField=>{const isPreviewed=this.isPreviewed(customField.id);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:customField.id,className:`${customField.metadata_key} field-secret-value`},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`secret secret-custom-fields ${canPreviewSecret?"secret-with-preview":""} ${isPreviewed?"":"secret-copy"}`,title:isPreviewed?this.getSecretValue(customField.id):this.props.t("Click to copy")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Password_HiddenPassword__WEBPACK_IMPORTED_MODULE_3__.A,{canClick:canCopySecret,isPassword:!1,preview:isPreviewed?this.getSecretValue(customField.id):"",onClick:()=>this.handleCopySecretEvent(customField.id)})),canPreviewSecret&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:()=>this.handlePreviewSecretClickEvent(customField.id),className:"password-view inline button-transparent"},isPreviewed?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_8__.A,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_9__.A,null)))})))),!this.showAll&&canPreviewSecret?react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.state.isSecretsDecrypting,onClick:this.handleShowAllEvent,id:"show-all-button"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_9__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Show all"),this.state.isSecretsDecrypting&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_11__.A,null)):react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleShowAllEvent,id:"hide-all-button"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_8__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Hide all"))))}}DisplayResourceDetailsCustomFields.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_15___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().any,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().any,progressContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().any,clipboardContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__.L)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_12__.ot)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_4__.x6)((0,_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__.E0)((0,_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_14__.nJ)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(DisplayResourceDetailsCustomFields)))))));DisplayResourceDetailsCustomFields.__docgenInfo={description:"This component display the custom fields section of a resource",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callback methods to the component instance\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callback methods to the component instance"},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"handleTitleClickEvent",docblock:"Handle when the user clicks the accordion title to toggle open/closed state\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle when the user clicks the accordion title to toggle open/closed state"},{name:"isPreviewed",docblock:"Check if a secret is currently being previewed\n@param {string} id - The ID of the secret to check\n@returns {boolean} True if the secret is previewed or show all is active",modifiers:[],params:[{name:"id",description:"The ID of the secret to check",type:{name:"string"},optional:!1}],returns:{description:"True if the secret is previewed or show all is active",type:{name:"boolean"}},description:"Check if a secret is currently being previewed"},{name:"getSecretValue",docblock:"Get the decrypted secret value for a given ID\n@param {string} id - The ID of the secret to retrieve\n@returns {string|number|boolean} The secret value or undefined if not found",modifiers:[],params:[{name:"id",description:"The ID of the secret to retrieve",type:{name:"string"},optional:!1}],returns:{description:"The secret value or undefined if not found",type:{name:"union",elements:[{name:"string"},{name:"number"},{name:"boolean"}]}},description:"Get the decrypted secret value for a given ID"},{name:"handlePreviewSecretClickEvent",docblock:"Handle preview secret button click event\n@param {string} id - The ID of the secret to preview/hide\n@returns {Promise<void>}\n@todo Implement secret decryption logic in the next ticket",modifiers:["async"],params:[{name:"id",description:"The ID of the secret to preview/hide",type:{name:"string"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle preview secret button click event"},{name:"decryptCustomFieldSecrets",docblock:"Asynchronously decrypts a custom fields secrets.\n@returns {Promise<Array>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"Array"}]}},description:"Asynchronously decrypts a custom fields secrets."},{name:"handleShowAllEvent",docblock:"Handle show/hide all secrets button click event\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle show/hide all secrets button click event"},{name:"handleCopySecretEvent",docblock:"Handles the copying of a secret to the clipboard.\n@param {string} id - The ID of the secret to be copied.\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"id",description:"The ID of the secret to be copied.",type:{name:"string"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handles the copying of a secret to the clipboard."},{name:"handleCopyKeyEvent",docblock:"Handles the event when a key is copied.\n@param {string} key - The key to be copied.\n@returns {Promise<void>} A promise that resolves when the key has been copied and feedback is displayed.",modifiers:["async"],params:[{name:"key",description:"The key to be copied.",type:{name:"string"},optional:!1}],returns:{description:"A promise that resolves when the key has been copied and feedback is displayed.",type:{name:"Promise",elements:[{name:"void"}]}},description:"Handles the event when a key is copied."},{name:"showAll",docblock:"Determines whether all custom fields are currently being previewed.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Determines whether all custom fields are currently being previewed."}],displayName:"DisplayResourceDetailsCustomFields",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},progressContext:{description:"",type:{name:"any"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsDescription.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/img/svg/caret_right.svg");class DisplayResourceDetailsDescription extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}get resource(){return this.props.resourceWorkspaceContext.details.resource}handleTitleClickEvent(){const open=!this.state.open;this.setState({open})}hasNoDescription(){return!this.resource.metadata.description||0===this.resource.metadata.description?.length}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-description accordion sidebar-section"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleTitleClickEvent,className:"link no-border section-opener"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Description")),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_3__.A,null),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_4__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},this.hasNoDescription()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"empty-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"There is no description."))),!this.hasNoDescription()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content"},this.resource.metadata.description)))}}DisplayResourceDetailsDescription.propTypes={resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_1__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(DisplayResourceDetailsDescription));DisplayResourceDetailsDescription.__docgenInfo={description:"This component display the description section of a resource",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {object}",modifiers:[],params:[],returns:{type:{name:"object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"hasNoDescription",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null}],displayName:"DisplayResourceDetailsDescription",props:{resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsInformation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),react_i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/utils/dateUtils.js"),_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/img/svg/attention.svg"),_img_svg_share_folder_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/img/svg/share_folder.svg"),_img_svg_folder_svg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/img/svg/folder.svg"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/img/svg/caret_right.svg"),_Common_Tooltip_TooltipPortal__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/components/Common/Tooltip/TooltipPortal.js"),_img_svg_cabinet_svg__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/img/svg/cabinet.svg");class DisplayResourceDetailsInformation extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1,creator:null,modifier:null}}bindCallbacks(){this.handleFolderParentClickEvent=this.handleFolderParentClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.isFolderParentShared=this.isFolderParentShared.bind(this)}componentDidMount(){this.props.passwordExpiryContext.findSettings(),this.state.open&&this.loadUserInformation()}componentDidUpdate(prevProps){this.handleResourceChange(prevProps.resourceWorkspaceContext.details.resource)}async loadUserInformation(){const resourceInformation=await this.props.context.port.request("passbolt.resources.find-details",this.resource.id);this.resource.created_by!==resourceInformation.created_by||this.resource.modified_by!==resourceInformation.modified_by||this.setState({creator:resourceInformation?.creator,modifier:resourceInformation?.modifier})}handleResourceChange(previousResource){const hasResourceChanged=this.resource.id!==previousResource.id,hasResourceUpdated=this.resource.modified!==previousResource.modified;if((hasResourceChanged||hasResourceUpdated)&&this.state.open&&this.setState({plaintextSecretDto:null,previewedSecret:null}),!hasResourceChanged)return;(this.resource.created_by!==previousResource.created_by||this.resource.modified_by!==previousResource.modified_by)&&(this.setState({creator:null,modifier:null}),this.state.open&&this.loadUserInformation())}get resource(){return this.props.resourceWorkspaceContext.details.resource}handleFolderParentClickEvent(){if(this.resource.folder_parent_id){const folderParent=this.props.context.folders.find((item=>item.id===this.resource.folder_parent_id));this.props.resourceWorkspaceContext.filter.payload?.folder?.id!==folderParent.id&&this.props.history.push(`/app/folders/view/${folderParent.id}`)}else{const filter={type:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.FM.ROOT_FOLDER};this.props.history.push("/app/passwords",{filter})}}handleTitleClickEvent(){const open=!this.state.open;this.setState({open}),open?this.loadUserInformation():this.setState({creator:null,modifier:null})}getFolderName(folderParentId){if(null===folderParentId)return this.translate("My workspace");if(this.props.context.folders){const folder=this.props.context.folders.find((item=>item.id===folderParentId));if(folder)return folder.name}return""}isFolderParentShared(){if(null!==this.resource.folder_parent_id&&this.props.context.folders){const folder=this.props.context.folders.find((item=>item.id===this.resource.folder_parent_id));if(folder)return!folder.personal}return!1}get isAttentionRequired(){return this.isAttentionRequiredOnExpiryDate}get resourceExpirationStatus(){return this.resource?.expired?(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.Br)(this.resource?.expired,this.props.t,this.props.context.locale):this.translate("Not set")}get isAttentionRequiredOnExpiryDate(){if(!this.resource?.expired)return!1;return new Date(this.resource.expired)<=new Date}get translate(){return this.props.t}renderTooltipFolderStructure(folderStructure){return 0===folderStructure.length?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"My workspace")):folderStructure?.map(((folder,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:folder.id,className:"folder-level",style:{marginLeft:5*index+"px"}},null!==folder.folder_parent_id&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"caret"},"›"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,folder.name))))}render(){const canUseFolders=this.props.context.siteSettings.canIUse("folders")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_5__.e.FOLDERS_USE),canUsePasswordExpiry=this.props.passwordExpiryContext.isFeatureEnabled(),creatorUsername=this.state.creator?.username||"",modifierUsername=this.state.modifier?.username||"",createdDateTimeAgo=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(this.resource.created,this.props.t,this.props.context.locale),modifiedDateTimeAgo=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(this.resource.modified,this.props.t,this.props.context.locale),folderStructure=this.props.context.getHierarchyFolderCache(this.resource.folder_parent_id);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Information"),canUsePasswordExpiry&&this.isAttentionRequired&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_8__.A,{className:"attention-required"})),this.state.open?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_11__.A,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_12__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"created label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Created")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"created-by label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Created by")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"modified label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Modified")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"modified-by label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Modified by")),canUseFolders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"location label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Location")),canUsePasswordExpiry&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"expiry label label-with-icon"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ellipsis"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"Expiry")),this.isAttentionRequiredOnExpiryDate&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_8__.A,{className:"attention-required"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"created value",title:this.resource.created},createdDateTimeAgo),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"created-by value"},creatorUsername),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"modified value",title:this.resource.modified},modifiedDateTimeAgo),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"modified-by value"},modifierUsername),canUseFolders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"location value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_TooltipPortal__WEBPACK_IMPORTED_MODULE_13__.A,{message:this.renderTooltipFolderStructure(folderStructure)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleFolderParentClickEvent,disabled:!this.props.context.folders,className:"no-border"},null===this.resource.folder_parent_id&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_cabinet_svg__WEBPACK_IMPORTED_MODULE_14__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"My workspace"))),null!==this.resource.folder_parent_id&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.isFolderParentShared()?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_share_folder_svg__WEBPACK_IMPORTED_MODULE_9__.A,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_folder_svg__WEBPACK_IMPORTED_MODULE_10__.A,null),folderStructure.map((folder=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{key:folder.id},null!==folder.folder_parent_id&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"caret"},"›"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,folder.name)))))))),canUsePasswordExpiry&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"expiry value"},this.resourceExpirationStatus))))}}DisplayResourceDetailsInformation.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_15___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().any,onSelectFolderParent:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func,onSelectRoot:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func,history:prop_types__WEBPACK_IMPORTED_MODULE_15___default().object,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().object,passwordExpiryContext:prop_types__WEBPACK_IMPORTED_MODULE_15___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_4__.x6)((0,react_router_dom__WEBPACK_IMPORTED_MODULE_16__.withRouter)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_6__.f4)((0,react_i18next__WEBPACK_IMPORTED_MODULE_3__.CI)("common")(DisplayResourceDetailsInformation))))));DisplayResourceDetailsInformation.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"loadUserInformation",docblock:"Loads the information about the creator and the modifier of the current selected resource.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Loads the information about the creator and the modifier of the current selected resource."},{name:"handleResourceChange",docblock:"Check if the resource has changed and fetch\n@param previousResource",modifiers:[],params:[{name:"previousResource",optional:!1}],returns:null,description:"Check if the resource has changed and fetch"},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"handleFolderParentClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"getFolderName",docblock:"Get the folder name.\n@param {string} folderParentId The folder parent id\n@returns {string}",modifiers:[],params:[{name:"folderParentId",description:"The folder parent id",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Get the folder name."},{name:"isFolderParentShared",docblock:"Check if folder parent is shared\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if folder parent is shared"},{name:"isAttentionRequired",docblock:"Returns true if the resource requires some attention.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the resource requires some attention."},{name:"resourceExpirationStatus",docblock:"Returns the expiration status of the current resource.\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the expiration status of the current resource."},{name:"isAttentionRequiredOnExpiryDate",docblock:"Returns true if the current resource is expired or about to expire.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the current resource is expired or about to expire."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"},{name:"renderTooltipFolderStructure",docblock:"Render the tooltip folders structure.\n@param {array<FolderEntity>} folderStructure The folders structure.\n@render {JSX}",modifiers:[],params:[{name:"folderStructure",description:"The folders structure.",type:{name:"array",elements:[{name:"FolderEntity"}]},optional:!1}],returns:null,description:"Render the tooltip folders structure."}],displayName:"DisplayResourceDetailsInformation",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},onSelectFolderParent:{description:"",type:{name:"func"},required:!1},onSelectRoot:{description:"",type:{name:"func"},required:!1},history:{description:"",type:{name:"object"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsNote.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_12__),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/spinner.svg"),_img_svg_revert_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/img/svg/revert.svg"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/img/svg/caret_right.svg"),_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/img/svg/eye_open.svg");class DisplayResourceDetailsNote extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{open:!0,error:!1,isSecretDecrypting:!1,isSecretDecrypted:!1,note:null}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleRetryDecryptClickEvent=this.handleRetryDecryptClickEvent.bind(this)}componentDidUpdate(prevProps){this.resource?.id===prevProps.resourceWorkspaceContext.details.resource?.id&&this.resource?.modified===prevProps.resourceWorkspaceContext.details.resource?.modified||this.setState({note:null,isSecretDecrypted:!1})}async decryptAndLoadEncryptedNote(){this.setState({isSecretDecrypting:!0});try{const plaintextSecretDto=await this.props.context.port.request("passbolt.secret.find-by-resource-id",this.resource.id);this.setState({note:plaintextSecretDto.description,isSecretDecrypting:!1,isSecretDecrypted:!0,error:!1}),this.props.resourceWorkspaceContext.onResourceDescriptionDecrypted()}catch(error){console.error(error),this.setState({note:null,isSecretDecrypting:!1,isSecretDecrypted:!1,error:!0}),await this.props.actionFeedbackContext.displayError(error.message)}}get resource(){return this.props.resourceWorkspaceContext.details.resource}handleTitleClickEvent(){this.setState({open:!this.state.open,note:null,isSecretDecrypted:!1})}handleRetryDecryptClickEvent(){this.decryptAndLoadEncryptedNote()}hasNoNote(){return void 0===this.state.note||null===this.state.note||0===this.state.note?.length}mustShowEmptyNote(){return!this.state.error&&this.hasNoNote()&&this.state.isSecretDecrypted}mustShowNote(){return!this.state.error&&!this.hasNoNote()&&this.state.isSecretDecrypted}mustShowEncryptedNote(){return!this.state.isSecretDecrypted&&!this.state.error}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-information accordion sidebar-section secure-note"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleTitleClickEvent,className:"link no-border section-opener"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Note")),this.state.open?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_9__.A,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_10__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content "+(this.state.error?"error-message":"")},this.state.error&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,"Error: "),"Decryption failed")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.state.isSecretDecrypting,onClick:this.handleRetryDecryptClickEvent},this.state.isSecretDecrypting?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__.A,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_revert_svg__WEBPACK_IMPORTED_MODULE_2__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Retry"))),this.mustShowEmptyNote()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"empty-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"There is no note."))),this.mustShowNote()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"description-content"},this.state.note),this.mustShowEncryptedNote()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"encrypted-description"},"Never gonna give you up. Never gonna let you down. Never gonna run around and desert you. Never gonna make you cry. Never gonna say goodbye. Never gonna tell a lie and hurt you."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.state.isSecretDecrypting,onClick:this.handleRetryDecryptClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_11__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Show"),this.state.isSecretDecrypting&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__.A,null)))))}}DisplayResourceDetailsNote.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_12___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_12___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_12___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_8__.A),actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_12___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_12___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_3__.Qw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_7__.KH)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_6__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(DisplayResourceDetailsNote)))));DisplayResourceDetailsNote.__docgenInfo={description:"This component display the note section of a resource",methods:[{name:"defaultState",docblock:"Get default state\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"decryptAndLoadEncryptedNote",docblock:"Decrypt the resource secret and load its note in the component.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Decrypt the resource secret and load its note in the component."},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handleRetryDecryptClickEvent",docblock:"Retry to decrypted note",modifiers:[],params:[],returns:null,description:"Retry to decrypted note"},{name:"hasNoNote",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null},{name:"mustShowEmptyNote",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null},{name:"mustShowNote",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null},{name:"mustShowEncryptedNote",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:null}],displayName:"DisplayResourceDetailsNote",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsPassword.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_16__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_shared_components_Password_HiddenPassword__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/shared/components/Password/HiddenPassword.js"),_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/img/svg/caret_right.svg"),_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/img/svg/eye_close.svg"),_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/img/svg/eye_open.svg"),_Resource_DisplayResourceUrisBadge_DisplayResourceUrisBadge__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/react-extension/components/Resource/DisplayResourceUrisBadge/DisplayResourceUrisBadge.js"),_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js");class DisplayResourceDetailsPassword extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}componentDidUpdate(prevProps){const previousResource=prevProps.resourceWorkspaceContext?.details?.resource,currentResource=this.props.resourceWorkspaceContext?.details?.resource;(previousResource?.id!==currentResource?.id||previousResource?.modified!==currentResource?.modified)&&this.setState({isSecretPreviewed:null,plaintextSecret:null})}getDefaultState(){return{open:!0,isSecretPreviewed:null,plaintextSecret:null}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleUsernameClickEvent=this.handleUsernameClickEvent.bind(this),this.handlePasswordClickEvent=this.handlePasswordClickEvent.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this),this.handleGoToResourceUriClick=this.handleGoToResourceUriClick.bind(this)}get resource(){return this.props.resourceWorkspaceContext.details.resource}get safeUri(){return(0,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_4__.A)(this.mainUri,{whiteListedProtocols:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.XH,defaultProtocol:_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_4__.P.HTTPS})}handleTitleClickEvent(){const open=!this.state.open;this.setState({open}),open||this.setState({plaintextSecret:null,isSecretPreviewed:!1})}async handleUsernameClickEvent(){await this.props.clipboardContext.copy(this.resource.metadata.username,this.translate("The username has been copied to clipboard."))}async handlePasswordClickEvent(){await this.copyPasswordToClipboard()}async handleViewPasswordButtonClick(){await this.togglePreviewPassword()}async copyPasswordToClipboard(){const resourceId=this.resource.id,isPasswordPreviewed=this.state.isSecretPreviewed;let plaintextSecret;if(this.props.progressContext.open(this.props.t("Decrypting secret")),isPasswordPreviewed)plaintextSecret=this.state.plaintextSecret;else try{const plaintextSecretDto=await this.decryptResourceSecret(resourceId);plaintextSecret=plaintextSecretDto?.password}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecret?.length?(await this.props.clipboardContext.copyTemporarily(plaintextSecret,this.translate("The secret has been copied to clipboard.")),await this.props.resourceWorkspaceContext.onResourceCopied()):await this.props.actionFeedbackContext.displayWarning(this.translate("The password is empty and cannot be copied to clipboard."))}async togglePreviewPassword(){const isPasswordPreviewed=this.state.isSecretPreviewed;this.hidePreviewedSecret(),isPasswordPreviewed||(await this.previewPassword(),await this.props.resourceWorkspaceContext.onResourcePreviewed())}hidePreviewedSecret(){this.setState({plaintextSecret:null,isSecretPreviewed:!1})}async previewPassword(){const resourceId=this.resource.id;let plaintextSecret;this.props.progressContext.open(this.props.t("Decrypting secret"));try{const plaintextSecretDto=await this.decryptResourceSecret(resourceId);plaintextSecret=plaintextSecretDto?.password}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecret?.length||(plaintextSecret=""),this.setState({plaintextSecret,isSecretPreviewed:!0})}decryptResourceSecret(resourceId){return this.props.context.port.request("passbolt.secret.find-by-resource-id",resourceId)}handleGoToResourceUriClick(){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(this.mainUri)}displaySuccessNotification(message){this.props.actionFeedbackContext.displaySuccess(message)}get mainUri(){return this.resource.metadata.uris?.[0]}get additionalUris(){return this.resource.metadata.uris?.slice(1)}get translate(){return this.props.t}render(){const canPreviewSecret=this.props.context.siteSettings.canIUse("previewPassword")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_7__.e.SECRETS_PREVIEW),canCopySecret=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_7__.e.SECRETS_COPY),isPasswordPreviewed=this.state.isSecretPreviewed;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-password accordion sidebar-section"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"no-border",type:"button",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Password")),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_10__.A,null),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_11__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"username label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Username")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"password label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Password")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"uri label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"URI"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"username value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"no-border",onClick:this.handleUsernameClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.resource.metadata.username))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`secret secret-password ${canPreviewSecret?"secret-with-preview":""} ${isPasswordPreviewed?"":"secret-copy"}`,title:isPasswordPreviewed?this.state.plaintextSecret:this.translate("Click to copy")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Password_HiddenPassword__WEBPACK_IMPORTED_MODULE_8__.A,{canClick:canCopySecret,preview:this.state.plaintextSecret,onClick:this.handlePasswordClickEvent})),canPreviewSecret&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleViewPasswordButtonClick,className:"password-view inline button-transparent"},isPasswordPreviewed?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_12__.A,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_13__.A,null))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"uri value"},this.safeUri&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",onClick:this.handleGoToResourceUriClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.mainUri)),!this.safeUri&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.mainUri),this.additionalUris?.length>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Resource_DisplayResourceUrisBadge_DisplayResourceUrisBadge__WEBPACK_IMPORTED_MODULE_14__.A,{additionalUris:this.additionalUris})))))}}DisplayResourceDetailsPassword.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_16___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_16___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_16___default().object,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_16___default().any,progressContext:prop_types__WEBPACK_IMPORTED_MODULE_16___default().any,clipboardContext:prop_types__WEBPACK_IMPORTED_MODULE_16___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_16___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_15__.nJ)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_6__.x6)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_9__.E0)((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(DisplayResourceDetailsPassword)))))));DisplayResourceDetailsPassword.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"safeUri",docblock:"the resource safe uri\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"the resource safe uri"},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handleUsernameClickEvent",docblock:"Handle when the user select the username of the resource",modifiers:["async"],params:[],returns:null,description:"Handle when the user select the username of the resource"},{name:"handlePasswordClickEvent",docblock:"Handle copy password click.",modifiers:["async"],params:[],returns:null,description:"Handle copy password click."},{name:"handleViewPasswordButtonClick",docblock:"Handle preview password button click.",modifiers:["async"],params:[],returns:null,description:"Handle preview password button click."},{name:"copyPasswordToClipboard",docblock:"Copy the resource password to clipboard.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copy the resource password to clipboard."},{name:"togglePreviewPassword",docblock:"Toggle preview password\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle preview password"},{name:"hidePreviewedSecret",docblock:"Hide the previewed resource secret.",modifiers:[],params:[],returns:null,description:"Hide the previewed resource secret."},{name:"previewPassword",docblock:"Preview password\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Preview password"},{name:"decryptResourceSecret",docblock:"Decrypt the resource secret\n@param {string} resourceId The target resource id\n@returns {Promise<object>} The plaintext secret DTO\n@throw UserAbortsOperationError If the user cancel the operation",modifiers:[],params:[{name:"resourceId",description:"The target resource id",type:{name:"string"},optional:!1}],returns:{description:"The plaintext secret DTO",type:{name:"Promise",elements:[{name:"object"}]}},description:"Decrypt the resource secret"},{name:"handleGoToResourceUriClick",docblock:"Whenever the user wants to follow a resource uri.",modifiers:[],params:[],returns:null,description:"Whenever the user wants to follow a resource uri."},{name:"displaySuccessNotification",docblock:"display a success notification message\n@param message",modifiers:[],params:[{name:"message",optional:!1}],returns:null,description:"display a success notification message"},{name:"mainUri",docblock:"Get the main uri\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the main uri"},{name:"additionalUris",docblock:"Get the additional uris\n@return {Array<string>}",modifiers:["get"],params:[],returns:{type:{name:"Array",elements:[{name:"string"}]}},description:"Get the additional uris"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceDetailsPassword",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},progressContext:{description:"",type:{name:"any"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsPermission.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/img/svg/spinner.svg"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_utils_userUtils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/utils/userUtils.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/img/svg/caret_right.svg"),_shared_components_Aro_DisplayAroName__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/shared/components/Aro/DisplayAroName.js");const PERMISSIONS_LABEL={1:"can read",7:"can update",15:"is owner"};class DisplayResourceDetailsPermission extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{permissions:null,open:!1,loading:!0}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}async componentDidUpdate(prevProps){await this.handleResourceChange(prevProps.resourceWorkspaceContext.details.resource),await this.handleResourcePermissionsRefresh(prevProps.resourceWorkspaceContext.refresh.permissions)}get resource(){return this.props.resourceWorkspaceContext.details.resource}handleResourceChange(previousResource){this.resource.id!==previousResource.id&&this.state.open&&this.fetch()}async handleResourcePermissionsRefresh(hasPreviouslyRefreshed){!hasPreviouslyRefreshed&&this.props.resourceWorkspaceContext.refresh.permissions&&(await this.fetch(),await this.props.resourceWorkspaceContext.onResourcePermissionsRefreshed())}async fetch(){this.setState({loading:!0});const permissions=await this.props.context.port.request("passbolt.permissions.find-aco-permissions-for-display",this.resource.id,"Resource");this.setState({permissions,loading:!1})}handleTitleClickEvent(){const open=!this.state.open;open&&this.fetch(),this.setState({open})}isLoading(){return this.state.loading}isUserSuspended(user){return this.props.context.siteSettings.canIUse("disableUser")&&(0,_shared_utils_userUtils__WEBPACK_IMPORTED_MODULE_7__.B7)(user)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-permission accordion sidebar-section"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link no-border",type:"button",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Shared with")),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_8__.A,null),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_9__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},this.isLoading()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"processing-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_3__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Retrieving permissions"))),!this.isLoading()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.state.permissions&&this.state.permissions.map((permission=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:permission.id,className:"usercard-col-2 "+(this.isUserSuspended(permission.user)?"suspended":"")},(permission.user||"User"===permission.aro)&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:permission.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),(permission.group||"Group"===permission.aro)&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__.A,{group:permission.group}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Aro_DisplayAroName__WEBPACK_IMPORTED_MODULE_10__.A,{displayAs:permission.aro,group:permission.group,user:permission.user,withUsername:!0}),this.isUserSuspended(permission.user)&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"suspended"}," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"(suspended)"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo"},this.props.t(PERMISSIONS_LABEL[permission.type]))))))))))}}DisplayResourceDetailsPermission.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_11___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_11___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_11___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_5__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.CI)("common")(DisplayResourceDetailsPermission)));DisplayResourceDetailsPermission.__docgenInfo={description:"This component display the permission section (Shared With)",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"resource",docblock:"Returns the current detailed resource",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed resource"},{name:"handleResourceChange",docblock:"Check if the resource has changed and fetch\n@param previousResource",modifiers:[],params:[{name:"previousResource",optional:!1}],returns:null,description:"Check if the resource has changed and fetch"},{name:"handleResourcePermissionsRefresh",docblock:"Handle the refresh of resource permissions\n@param hasPreviouslyRefreshed True if one previously refreshed the permissions",modifiers:["async"],params:[{name:"hasPreviouslyRefreshed",description:"True if one previously refreshed the permissions",optional:!1}],returns:null,description:"Handle the refresh of resource permissions"},{name:"fetch",docblock:"Get the folder permissions.",modifiers:["async"],params:[],returns:null,description:"Get the folder permissions."},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"isLoading",docblock:"check if no permission is present\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"check if no permission is present"},{name:"isUserSuspended",docblock:"Returns true if the feature flag disableUser is enabled and the given user is suspended.\n@param {object} user\n@returns {boolean}",modifiers:[],params:[{name:"user",type:{name:"object"},optional:!1}],returns:{type:{name:"boolean"}},description:"Returns true if the feature flag disableUser is enabled and the given user is suspended."}],displayName:"DisplayResourceDetailsPermission",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsTotp.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_17__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/img/svg/caret_right.svg"),_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/img/svg/eye_close.svg"),_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/img/svg/eye_open.svg"),_shared_components_Totp_Totp__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/shared/components/Totp/Totp.js"),_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/shared/services/otp/TotpCodeGeneratorService.js"),_Resource_DisplayResourceUrisBadge_DisplayResourceUrisBadge__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/react-extension/components/Resource/DisplayResourceUrisBadge/DisplayResourceUrisBadge.js"),_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js");class DisplayResourceDetailsTotp extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!0,isSecretPreviewed:null,plaintextSecret:null}}componentDidUpdate(prevProps){const previousResource=prevProps.resourceWorkspaceContext?.details?.resource,currentResource=this.props.resourceWorkspaceContext?.details?.resource;(previousResource?.id!==currentResource?.id||previousResource?.modified!==currentResource?.modified)&&this.setState({isSecretPreviewed:null,plaintextSecret:null})}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleTotpClickEvent=this.handleTotpClickEvent.bind(this),this.handleViewTotpButtonClick=this.handleViewTotpButtonClick.bind(this),this.handleGoToResourceUriClick=this.handleGoToResourceUriClick.bind(this)}get resource(){return this.props.resourceWorkspaceContext.details.resource}get safeUri(){return(0,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_4__.A)(this.mainUri,{whiteListedProtocols:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.XH,defaultProtocol:_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_4__.P.HTTPS})}handleTitleClickEvent(){const open=!this.state.open;this.setState({open}),open||this.setState({plaintextSecret:null,isSecretPreviewed:!1})}async handleTotpClickEvent(){await this.copyTotpToClipboard()}async handleViewTotpButtonClick(){await this.togglePreviewTotp()}async copyTotpToClipboard(){const resourceId=this.resource.id,isTotpPreviewed=this.state.isSecretPreviewed;let plaintextSecret,code;if(this.props.progressContext.open(this.props.t("Decrypting secret")),isTotpPreviewed)plaintextSecret=this.state.plaintextSecret;else try{const plaintextSecretDto=await this.decryptResourceSecret(resourceId);plaintextSecret=plaintextSecretDto?.totp}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}if(this.props.progressContext.close(),plaintextSecret){try{code=_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__.l.generate(plaintextSecret)}catch(error){return void await this.props.actionFeedbackContext.displayError(this.translate("Unable to copy the TOTP"))}await this.props.clipboardContext.copyTemporarily(code,this.translate("The TOTP has been copied to clipboard.")),await this.props.resourceWorkspaceContext.onResourceCopied()}else await this.props.actionFeedbackContext.displayError(this.translate("The TOTP is empty and cannot be copied to clipboard."))}async togglePreviewTotp(){const isTotpPreviewed=this.state.isSecretPreviewed;this.hidePreviewedSecret(),isTotpPreviewed||(await this.previewTotp(),await this.props.resourceWorkspaceContext.onResourcePreviewed())}hidePreviewedSecret(){this.setState({plaintextSecret:null,isSecretPreviewed:!1})}async previewTotp(){const resourceId=this.resource.id;let plaintextSecret;this.props.progressContext.open(this.props.t("Decrypting secret"));try{const plaintextSecretDto=await this.decryptResourceSecret(resourceId);plaintextSecret=plaintextSecretDto?.totp}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecret?this.setState({plaintextSecret,isSecretPreviewed:!0}):await this.props.actionFeedbackContext.displayError(this.translate("The TOTP is empty and cannot be previewed."))}decryptResourceSecret(resourceId){return this.props.context.port.request("passbolt.secret.find-by-resource-id",resourceId)}handleGoToResourceUriClick(){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(this.resource.metadata.uris[0])}get mainUri(){return this.resource.metadata.uris?.[0]}get additionalUris(){return this.resource.metadata.uris?.slice(1)}get translate(){return this.props.t}render(){const canPreviewSecret=this.props.context.siteSettings.canIUse("previewPassword")&&this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_7__.e.SECRETS_PREVIEW),canCopySecret=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_7__.e.SECRETS_COPY),isTotpPreviewed=this.state.isSecretPreviewed,isStandaloneTotp=this.props.isStandaloneTotp;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-totp accordion sidebar-section"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"no-border",type:"button",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"TOTP")),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_9__.A,null),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_10__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"totp label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"TOTP")),isStandaloneTotp&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"uri label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"URI"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"totp-value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`secret secret-totp ${canPreviewSecret?"secret-with-preview":""} ${isTotpPreviewed?"":"secret-copy"}`,title:isTotpPreviewed?this.state.plaintextSecret:this.translate("Click to copy")},isTotpPreviewed&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Totp_Totp__WEBPACK_IMPORTED_MODULE_13__.A,{totp:this.state.plaintextSecret,canClick:canCopySecret,onClick:this.handleTotpClickEvent}),!isTotpPreviewed&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"no-border",onClick:this.handleTotpClickEvent,disabled:!canCopySecret},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,"Copy TOTP to clipboard"))),canPreviewSecret&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleViewTotpButtonClick,className:"totp-view inline button-transparent"},isTotpPreviewed?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_11__.A,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_12__.A,null))),isStandaloneTotp&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"uri value"},this.safeUri&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",onClick:this.handleGoToResourceUriClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.mainUri)),!this.safeUri&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.mainUri),this.additionalUris?.length>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Resource_DisplayResourceUrisBadge_DisplayResourceUrisBadge__WEBPACK_IMPORTED_MODULE_15__.A,{additionalUris:this.additionalUris})))))}}DisplayResourceDetailsTotp.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_17___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_17___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_17___default().object,isStandaloneTotp:prop_types__WEBPACK_IMPORTED_MODULE_17___default().bool,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_17___default().any,progressContext:prop_types__WEBPACK_IMPORTED_MODULE_17___default().any,clipboardContext:prop_types__WEBPACK_IMPORTED_MODULE_17___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_17___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_16__.nJ)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_6__.x6)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_8__.E0)((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(DisplayResourceDetailsTotp)))))));DisplayResourceDetailsTotp.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"safeUri",docblock:"the resource safe uri\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"the resource safe uri"},{name:"handleTitleClickEvent",docblock:"Handle when the user selects the folder parent.",modifiers:[],params:[],returns:null,description:"Handle when the user selects the folder parent."},{name:"handleTotpClickEvent",docblock:"Handle copy totp click.",modifiers:["async"],params:[],returns:null,description:"Handle copy totp click."},{name:"handleViewTotpButtonClick",docblock:"Handle preview totp button click.",modifiers:["async"],params:[],returns:null,description:"Handle preview totp button click."},{name:"copyTotpToClipboard",docblock:"Copy the resource totp to clipboard.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copy the resource totp to clipboard."},{name:"togglePreviewTotp",docblock:"Toggle preview password\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle preview password"},{name:"hidePreviewedSecret",docblock:"Hide the previewed resource secret.",modifiers:[],params:[],returns:null,description:"Hide the previewed resource secret."},{name:"previewTotp",docblock:"Preview totp\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Preview totp"},{name:"decryptResourceSecret",docblock:"Decrypt the resource secret\n@param {string} resourceId The target resource id\n@returns {Promise<object>} The plaintext secret DTO\n@throw UserAbortsOperationError If the user cancel the operation",modifiers:[],params:[{name:"resourceId",description:"The target resource id",type:{name:"string"},optional:!1}],returns:{description:"The plaintext secret DTO",type:{name:"Promise",elements:[{name:"object"}]}},description:"Decrypt the resource secret"},{name:"handleGoToResourceUriClick",docblock:"Whenever the user wants to follow a resource uri.",modifiers:[],params:[],returns:null,description:"Whenever the user wants to follow a resource uri."},{name:"mainUri",docblock:"Get the main uri\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the main uri"},{name:"additionalUris",docblock:"Get the additional uris\n@return {Array<string>}",modifiers:["get"],params:[],returns:{type:{name:"Array",elements:[{name:"string"}]}},description:"Get the additional uris"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceDetailsTotp",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},isStandaloneTotp:{description:"",type:{name:"bool"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},progressContext:{description:"",type:{name:"any"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsURIs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/img/svg/caret_down.svg"),_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/img/svg/caret_right.svg"),_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js");class DisplayResourceDetailsURIs extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}get resource(){return this.props.resourceWorkspaceContext.details.resource}get mainUri(){return this.resource?.metadata.uris?.[0]}get additionalUris(){return this.resource?.metadata.uris?.slice(1)||[]}handleTitleClickEvent(){const open=!this.state.open;this.setState({open})}safeUri(uri){return(0,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_5__.A)(uri,{whiteListedProtocols:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.XH,defaultProtocol:_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_5__.P.HTTPS})}handleGoToResourceUriClick(uri){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(uri)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"detailed-information accordion sidebar-section uris"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleTitleClickEvent,className:"link no-border section-opener"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"accordion-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"URIs")),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_3__.A,null),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_right_svg__WEBPACK_IMPORTED_MODULE_4__.A,null)))),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"main-uri label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Main Uri")),this.additionalUris.length>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"addictional-uris label"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Additional URIs"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"information-value"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"main-uri value"},this.safeUri(this.mainUri)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link",onClick:()=>this.handleGoToResourceUriClick(this.mainUri)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.mainUri)):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,this.mainUri)),this.additionalUris.length>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"additional-uris value"},this.additionalUris.map(((uri,index)=>this.safeUri(uri)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{key:index,type:"button",className:"link",onClick:()=>this.handleGoToResourceUriClick(uri)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,uri)):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index},uri)))))))}}DisplayResourceDetailsURIs.propTypes={resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(DisplayResourceDetailsURIs));DisplayResourceDetailsURIs.__docgenInfo={description:"This component display the uris of a resource",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callback methods to the component instance\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callback methods to the component instance"},{name:"resource",docblock:"Get the currently selected resource from workspace context\n@returns {object} resource dto",modifiers:["get"],params:[],returns:{description:"resource dto",type:{name:"object"}},description:"Get the currently selected resource from workspace context"},{name:"mainUri",docblock:"Get the main uri\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the main uri"},{name:"additionalUris",docblock:"Getter for additional URIs.\n@returns {Array} An array of additional URIs, excluding the first one.",modifiers:["get"],params:[],returns:{description:"An array of additional URIs, excluding the first one.",type:{name:"Array"}},description:"Getter for additional URIs."},{name:"handleTitleClickEvent",docblock:"Handle when the user clicks the accordion title to toggle open/closed state\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle when the user clicks the accordion title to toggle open/closed state"},{name:"safeUri",docblock:"the resource safe uri\n@param {string} uri\n@return {string}",modifiers:[],params:[{name:"uri",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"the resource safe uri"},{name:"handleGoToResourceUriClick",docblock:"Handles the click event to navigate to the resource URI.\n@param {string} uri - The URI of the resource to navigate to.\n@return {void}",modifiers:[],params:[{name:"uri",description:"The URI of the resource to navigate to.",type:{name:"string"},optional:!1}],returns:{type:{name:"void"}},description:"Handles the click event to navigate to the resource URI."}],displayName:"DisplayResourceDetailsURIs",props:{resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/components/Aro/DisplayAroName.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>DisplayAroNameVariations,A:()=>Aro_DisplayAroName});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),userUtils=__webpack_require__("./src/shared/utils/userUtils.js");const DisplayAroNameVariations={USER:"User",GROUP:"Group"};class DisplayAroName extends react.PureComponent{render(){if(!this.props.displayAs&&!this.props.user&&!this.props.group)return react.createElement(react.Fragment,null,this.props.t("Unknown permission grantee"));const shouldDisplayAsUser=this.props.displayAs===DisplayAroNameVariations.USER||this.props.user;return react.createElement(react.Fragment,null,shouldDisplayAsUser?(0,userUtils.$2)(this.props.user,this.props.t,{withUsername:this.props.withUsername}):((group,t=null)=>group?.name?group.name:t("Unknown group"))(this.props.group,this.props.t))}}DisplayAroName.defaultProps={displayAs:null,withUsername:!1},DisplayAroName.propTypes={user:prop_types_default().object,group:prop_types_default().object,displayAs:prop_types_default().oneOf([DisplayAroNameVariations.USER,DisplayAroNameVariations.GROUP]),withUsername:prop_types_default().bool,t:prop_types_default().func};const Aro_DisplayAroName=(0,es.CI)("common")(DisplayAroName);DisplayAroName.__docgenInfo={description:"",methods:[],displayName:"DisplayAroName",props:{displayAs:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"enum",value:[{value:"'User'",computed:!1},{value:"'Group'",computed:!1}]},required:!1},withUsername:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},user:{description:"",type:{name:"object"},required:!1},group:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/components/Password/HiddenPassword.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class HiddenPassword extends react__WEBPACK_IMPORTED_MODULE_0__.Component{handleClick(ev){ev.stopPropagation(),this.props.onClick()}render(){const isPasswordDecrypted="string"==typeof this.props.preview,isPasswordEmpty=isPasswordDecrypted&&0===this.props.preview.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"no-border",onClick:this.handleClick.bind(this),disabled:!this.props.canClick},isPasswordEmpty?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"password-empty"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"There is no password")):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"password-typography"},isPasswordDecrypted&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,Array.from(this.props.preview).map(((char,index)=>/\p{L}/u.test(char)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index},char):/\p{N}/u.test(char)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index,className:"digit"},char):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:index,className:"special-char"},char)))),!isPasswordDecrypted&&this.props.t("Copy to clipboard")))}}HiddenPassword.defaultProps={preview:null,canClick:!0},HiddenPassword.propTypes={preview:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,canClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(HiddenPassword);HiddenPassword.__docgenInfo={description:"",methods:[{name:"handleClick",docblock:"Handle click on the previewed password component.\n@param ev",modifiers:[],params:[{name:"ev",optional:!1}],returns:null,description:"Handle click on the previewed password component."}],displayName:"HiddenPassword",props:{preview:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},canClick:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}}}]);