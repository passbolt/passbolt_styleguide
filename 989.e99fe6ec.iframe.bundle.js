/*! For license information please see 989.e99fe6ec.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[989],{"./src/img/svg/calendar.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCalendar(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:19,height:18,fill:"none",viewBox:"0 0 19 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6.83 1.5v3M12.83 1.5v3M15.08 3H4.58a1.5 1.5 0 0 0-1.5 1.5V15a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V4.5a1.5 1.5 0 0 0-1.5-1.5M3.08 7.5h13.5"})))}},"./src/img/svg/clock.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgClock(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.692 14.391a6.699 6.699 0 1 0 0-13.398 6.699 6.699 0 0 0 0 13.398"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.692 3.677v4.015l2.684 1.342"})))}},"./src/img/svg/globe.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgGlobe(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#globe_svg__clip0_99_1008706)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M9 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M9 1.5a10.875 10.875 0 0 0 0 15 10.875 10.875 0 0 0 0-15M1.5 9h15"}))))}},"./src/img/svg/go.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgGo(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.75 9.75v4.5a1.5 1.5 0 0 1-1.5 1.5H3.75a1.5 1.5 0 0 1-1.5-1.5V3.75a1.5 1.5 0 0 1 1.5-1.5h4.5M15.75 2.25 9 9M11.25 2.25h4.5v4.5"})))}},"./src/img/svg/owned_by_me.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgOwnedByMe(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:14,height:16,fill:"none",viewBox:"0 0 14 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 14.75v-1.5a3 3 0 0 0-3-3H4a3 3 0 0 0-3 3v1.5M7 7.25a3 3 0 1 0 0-6 3 3 0 0 0 0 6"})))}},"./src/img/svg/share.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgShare(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:17,fill:"none",viewBox:"0 0 16 17"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.302 5.921a2.21 2.21 0 1 0 0-4.421 2.21 2.21 0 0 0 0 4.421M3.46 11.08a2.21 2.21 0 1 0 0-4.422 2.21 2.21 0 0 0 0 4.421M12.302 16.236a2.21 2.21 0 1 0 0-4.42 2.21 2.21 0 0 0 0 4.42M5.366 9.979l5.04 2.937M10.396 4.82l-5.03 2.938"})))}},"./src/react-extension/components/Common/Progress/DisplayProgress/DisplayProgress.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/img/svg/spinner.svg");class DisplayProgress extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.infiniteTimerUpdateIntervalId=null,this.state=this.defaultState}get defaultState(){return{infiniteTimer:0}}componentDidMount(){this.startInfiniteTimerUpdateProgress()}startInfiniteTimerUpdateProgress(){this.isInfiniteProgressMode()&&(this.infiniteTimerUpdateIntervalId=setInterval((()=>{const infiniteTimer=this.state.infiniteTimer+2;this.setState({infiniteTimer})}),500))}componentDidUpdate(){!this.isInfiniteProgressMode()&&this.infiniteTimerUpdateIntervalId&&this.resetInterval()}componentWillUnmount(){this.resetInterval()}isInfiniteProgressMode(){return!this.props.progressContext.progressDialogProps.goals}resetInterval(){this.infiniteTimerUpdateIntervalId&&(clearInterval(this.infiniteTimerUpdateIntervalId),this.infiniteTimerUpdateIntervalId=null)}calculateProgress(){return this.props.progressContext.progressDialogProps?.goals>0?this.calculateGoalsProgress():this.calculateInfiniteProgress()}calculateInfiniteProgress(){return 100-100/Math.pow(1.1,this.state.infiniteTimer)}calculateGoalsProgress(){const completed=this.props.progressContext.progressDialogProps.completed||0;let progress=Math.round(100*completed/this.props.progressContext.progressDialogProps.goals);return progress>100&&(progress=100),progress}render(){const progress=this.calculateProgress(),progressBarStyle={width:`${progress}%`};return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"dialog-wrapper progress-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"dialog-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"dialog-title-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h2",null,this.props.progressContext.progressDialogProps.title||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Please wait...")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"dialog-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Take a deep breath and enjoy being in the present moment...")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"progress-bar-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"progress-bar"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"progress "+(100===progress?"completed":""),style:progressBarStyle})),!this.isInfiniteProgressMode()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"progress-details"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"progress-step-label"},this.props.progressContext.progressDialogProps.message||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Please wait...")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"progress-percent"},progress,"%")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:"disabled processing"},"Submit",react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_3__.A,null))))))}}DisplayProgress.propTypes={progressContext:prop_types__WEBPACK_IMPORTED_MODULE_4___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_1__.E0)((0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(DisplayProgress));DisplayProgress.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Returns the component default state\n@return {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Returns the component default state"},{name:"startInfiniteTimerUpdateProgress",docblock:"Start the infinite timer update.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Start the infinite timer update."},{name:"isInfiniteProgressMode",docblock:"Check if the component should display an infinite progress bar.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the component should display an infinite progress bar."},{name:"resetInterval",docblock:"Reset interval",modifiers:[],params:[],returns:null,description:"Reset interval"},{name:"calculateProgress",docblock:"Calculate the progress\n@return {number}",modifiers:[],params:[],returns:{type:{name:"number"}},description:"Calculate the progress"},{name:"calculateInfiniteProgress",docblock:"Calculate the infinite progress\n@return {number}",modifiers:[],params:[],returns:{type:{name:"number"}},description:"Calculate the infinite progress"},{name:"calculateGoalsProgress",docblock:"Calculate the progress based on the goals\n@return {number}",modifiers:[],params:[],returns:{type:{name:"number"}},description:"Calculate the progress based on the goals"}],displayName:"DisplayProgress",props:{progressContext:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/components/Metadata/ActionAbortedMissingMetadataKeys/ActionAbortedMissingMetadataKeys.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js");class ActionAbortedMissingMetadataKeys extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this)}close(){this.props.onClose()}handleCloseClick(){this.close()}async handleFormSubmit(event){event.preventDefault(),this.props.onClose()}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{className:"action-aborted-missing-metadata-keys-dialog",title:this.translate("Action aborted"),onClose:this.handleCloseClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleFormSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"You cannot perform this action because you lack access to the shared metadata key."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Please ask your administrator to share it with you."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__.A,{value:this.translate("Ok")}))))}}ActionAbortedMissingMetadataKeys.propTypes={onClose:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(ActionAbortedMissingMetadataKeys);ActionAbortedMissingMetadataKeys.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks",modifiers:[],params:[],returns:null,description:"Bind callbacks"},{name:"close",docblock:"Close the dialog.",modifiers:[],params:[],returns:null,description:"Close the dialog."},{name:"handleCloseClick",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ActionAbortedMissingMetadataKeys",props:{onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/DeleteResource/DeleteResource.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),react_i18next__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class DeleteResource extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.initEventHandlers()}getDefaultState(){return{processing:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}get resources(){return this.props.resources}async handleFormSubmit(event){event.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose()}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The resource has been deleted successfully.",{count:this.resources.length})),this.props.onClose()}handleSaveError(error){"UserAbortsOperationError"===error.name||(console.error(error),this.handleError(error)),this.setState({processing:!1})}async delete(){this.setState({processing:!0});try{const resourcesIds=this.resources.map((resource=>resource.id));await this.props.context.port.request("passbolt.resources.delete-all",resourcesIds),await this.handleSaveSuccess()}catch(error){this.handleSaveError(error)}}handleError(error){const errorDialogProps={error};this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_4__.A,errorDialogProps)}hasAllInputDisabled(){return this.state.processing}hasMultipleResources(){return this.resources.length>1}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{title:this.translate("Delete resource?",{count:this.resources.length}),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-password-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},!this.hasMultipleResources()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"Are you sure you want to delete the resource ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",{className:"dialog-variable"},{resourceName:this.resources[0].metadata.name}),"?")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"Once the resource is deleted, it will be removed permanently and will not be recoverable."))),this.hasMultipleResources()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_9__.x6,null,"Please confirm you really want to delete the resources. After clicking ok, the resources will be deleted permanently."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}DeleteResource.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_10___default().any,resources:prop_types__WEBPACK_IMPORTED_MODULE_10___default().array,t:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__.Qw)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__.z9)((0,react_i18next__WEBPACK_IMPORTED_MODULE_9__.CI)("common")(DeleteResource)))));DeleteResource.__docgenInfo={description:"This component allows user to delete a tag of the resources",methods:[{name:"getDefaultState",docblock:null,modifiers:[],params:[],returns:null},{name:"initEventHandlers",docblock:null,modifiers:[],params:[],returns:null},{name:"resources",docblock:"get the resources\n@returns {[]|null}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[{name:"tuple",elements:[]}]}},description:"get the resources"},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"handleCloseClick",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"handleSaveSuccess",docblock:"Handle save operation success.",modifiers:["async"],params:[],returns:null,description:"Handle save operation success."},{name:"handleSaveError",docblock:"Handle save operation error.\n@param {object} error The returned error",modifiers:[],params:[{name:"error",description:"The returned error",type:{name:"object"},optional:!1}],returns:null,description:"Handle save operation error."},{name:"delete",docblock:"Save the changes.",modifiers:["async"],params:[],returns:null,description:"Save the changes."},{name:"handleError",docblock:"handle error and display error dialog\n@param error",modifiers:[],params:[{name:"error",optional:!1}],returns:null,description:"handle error and display error dialog"},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"hasMultipleResources",docblock:"has multiple resources\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"has multiple resources"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DeleteResource",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resources:{description:"",type:{name:"array"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/DisplayResourcesList/DisplayResourcesListContextualMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_36__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Common_ContextualMenu_ContextualMenuWrapper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/ContextualMenu/ContextualMenuWrapper.js"),_EditResource_EditResource__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Resource/EditResource/EditResource.js"),_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Share/ShareDialog.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_DeleteResource_DeleteResource__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Resource/DeleteResource/DeleteResource.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/lib/Sanitize/sanitizeUrl.js"),react_i18next__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/shared/services/otp/TotpCodeGeneratorService.js"),_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/shared/utils/dateUtils.js"),luxon__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/luxon/src/luxon.js"),_PasswordExpiryDialog_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/react-extension/components/Resource/PasswordExpiryDialog/PasswordExpiryDialog.js"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),_img_svg_owned_by_me_svg__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/img/svg/owned_by_me.svg"),_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/img/svg/key.svg"),_img_svg_globe_svg__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/img/svg/globe.svg"),_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/img/svg/link.svg"),_img_svg_share_svg__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/img/svg/share.svg"),_img_svg_edit_svg__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/img/svg/edit.svg"),_img_svg_delete_svg__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./src/img/svg/delete.svg"),_img_svg_clock_svg__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./src/img/svg/clock.svg"),_img_svg_calendar_svg__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./src/img/svg/calendar.svg"),_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./src/img/svg/totp.svg"),_img_svg_go_svg__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./src/img/svg/go.svg"),_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js"),_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./src/react-extension/components/Metadata/ActionAbortedMissingMetadataKeys/ActionAbortedMissingMetadataKeys.js"),_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./src/shared/context/MetadataKeysSettingsLocalStorageContext/MetadataKeysSettingsLocalStorageContext.js"),_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js");class DisplayResourcesListContextualMenu extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleShareClickEvent=this.handleShareClickEvent.bind(this),this.handleUsernameClickEvent=this.handleUsernameClickEvent.bind(this),this.handleUriClickEvent=this.handleUriClickEvent.bind(this),this.handlePermalinkClickEvent=this.handlePermalinkClickEvent.bind(this),this.handlePasswordClickEvent=this.handlePasswordClickEvent.bind(this),this.handleTotpClickEvent=this.handleTotpClickEvent.bind(this),this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleGoToResourceUriClick=this.handleGoToResourceUriClick.bind(this),this.handleSetExpiryDateClick=this.handleSetExpiryDateClick.bind(this),this.handleMarkAsExpiredClick=this.handleMarkAsExpiredClick.bind(this)}handleEditClickEvent(){this.canEditResource()?this.props.dialogContext.open(_EditResource_EditResource__WEBPACK_IMPORTED_MODULE_4__.A,{resource:this.resource}):this.displayActionAborted(),this.props.hide()}canEditResource(){if(this.props.resourceTypes.getFirstById(this.resource.resource_type_id).isV5()){const isMetadataSharedKeyEnforced=!this.props.metadataKeysSettings.allowUsageOfPersonalKeys,isPersonalResource=this.resource.personal,userHasMissingKeys=this.props.context.loggedInUser.missing_metadata_key_ids?.length>0;if(isPersonalResource&&isMetadataSharedKeyEnforced&&userHasMissingKeys)return!1;if(!isPersonalResource&&userHasMissingKeys)return!1}return!0}handleShareClickEvent(){const resourcesIds=[this.resource.id];this.props.context.setContext({shareDialogProps:{resourcesIds}}),this.props.dialogContext.open(_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_5__.A),this.props.hide()}async handleUsernameClickEvent(){await this.props.clipboardContext.copy(this.resource.metadata.username,this.translate("The username has been copied to clipboard.")),this.props.hide()}async handleUriClickEvent(){await this.props.clipboardContext.copy(this.resource.metadata.uris[0],this.translate("The uri has been copied to clipboard.")),this.props.hide()}async handlePermalinkClickEvent(){const permalink=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.resource.id}`;await this.props.clipboardContext.copy(permalink,this.translate("The permalink has been copied to clipboard.")),this.props.hide()}decryptResourceSecret(){return this.props.context.port.request("passbolt.secret.find-by-resource-id",this.resource.id)}async copyPasswordToClipboard(plaintextSecretDto){const password=plaintextSecretDto.password;if(!password)throw new TypeError(this.translate("The password is empty."));await this.props.clipboardContext.copyTemporarily(password,this.translate("The secret has been copied to clipboard."))}async handlePasswordClickEvent(){let plaintextSecretDto;this.props.hide(),this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret()}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecretDto?.password?.length?(await this.copyPasswordToClipboard(plaintextSecretDto),this.props.resourceWorkspaceContext.onResourceCopied()):await this.props.actionFeedbackContext.displayWarning(this.translate("The password is empty and cannot be copied to clipboard."))}async handleTotpClickEvent(){let plaintextSecretDto,code;this.props.hide(),this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret()}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}if(this.props.progressContext.close(),plaintextSecretDto)if(plaintextSecretDto.totp){try{code=_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__.l.generate(plaintextSecretDto.totp)}catch(error){return void await this.props.actionFeedbackContext.displayError(this.translate("Unable to copy the TOTP"))}await this.props.clipboardContext.copyTemporarily(code,this.translate("The TOTP has been copied to clipboard.")),await this.props.resourceWorkspaceContext.onResourceCopied()}else await this.props.actionFeedbackContext.displayError(this.translate("The TOTP is empty and cannot be copied to clipboard."))}handleDeleteClickEvent(){const resources=[this.resource];this.props.dialogContext.open(_DeleteResource_DeleteResource__WEBPACK_IMPORTED_MODULE_7__.A,{resources}),this.props.hide()}handleGoToResourceUriClick(){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(this.resource.metadata.uris[0])}async handleMarkAsExpiredClick(){try{await this.props.context.port.request("passbolt.resources.set-expiration-date",[{id:this.resource.id,expired:(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_16__.B7)(luxon__WEBPACK_IMPORTED_MODULE_17__.c9.utc())}]),await this.props.actionFeedbackContext.displaySuccess(this.translate("The resource has been marked as expired.",{count:1}))}catch(error){await this.props.actionFeedbackContext.displayError(this.translate("Unable to mark the resource as expired.",{count:1}))}finally{this.props.hide()}}handleSetExpiryDateClick(){this.props.dialogContext.open(_PasswordExpiryDialog_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_18__.A,{resources:[this.resource]}),this.props.hide()}displayActionAborted(){this.props.dialogContext.open(_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_33__.A)}get resource(){return this.props.resource}get safeUri(){return(0,_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_9__.A)(this.resource.metadata.uris?.[0],{whiteListedProtocols:_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__.XH,defaultProtocol:_lib_Sanitize_sanitizeUrl__WEBPACK_IMPORTED_MODULE_9__.P.HTTPS})}canUpdate(){return this.resource.permission.type>=7}canShare(){return 15===this.resource.permission.type}canCopyUsername(){return this.resource.metadata?.username&&""!==this.resource.metadata.username}canCopyPassword(){return this.isPasswordResources}get isPasswordResources(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasPassword()}canCopyTotp(){return this.isTotpResources}get isTotpResources(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.hasTotp()}get isStandaloneTotpResource(){return this.props.resourceTypes?.getFirstById(this.resource.resource_type_id)?.isStandaloneTotp()}canCopyUri(){return this.resource.metadata?.uris?.length>0&&""!==this.resource.metadata.uris?.[0]}get canUseTotp(){return this.props.context.siteSettings.canIUse("totpResourceTypes")}get canUsePasswordExpiry(){const passwordExpirySettings=this.props.passwordExpiryContext.getSettings();return this.props.passwordExpiryContext.isFeatureEnabled()&&passwordExpirySettings?.policy_override}get translate(){return this.props.t}render(){const canCopySecret=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__.e.SECRETS_COPY),canViewShare=this.props.rbacContext.canIUseUiAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_11__.e.SHARE_VIEW_LIST);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_ContextualMenu_ContextualMenuWrapper__WEBPACK_IMPORTED_MODULE_3__.A,{hide:this.props.hide,left:this.props.left,top:this.props.top,className:"floating"},!this.isStandaloneTotpResource&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-username-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"username",className:"link no-border",disabled:!this.canCopyUsername(),onClick:this.handleUsernameClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_owned_by_me_svg__WEBPACK_IMPORTED_MODULE_21__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy username"))))))),canCopySecret&&this.canCopyPassword()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-copy-password-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",id:"password",onClick:this.handlePasswordClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_22__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy password"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-copy-uri-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"uri",className:"link no-border",disabled:!this.canCopyUri(),onClick:this.handleUriClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_globe_svg__WEBPACK_IMPORTED_MODULE_23__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy URI"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-permalink-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"link no-border",type:"button",id:"permalink",onClick:this.handlePermalinkClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_24__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy permalink"))))))),canCopySecret&&this.canUseTotp&&this.canCopyTotp()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-copy-totp-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",id:"totp",onClick:this.handleTotpClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_30__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy TOTP"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-open-uri-resource",className:"ready separator-after"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"open-uri",className:"link no-border",disabled:!this.safeUri,onClick:this.handleGoToResourceUriClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_go_svg__WEBPACK_IMPORTED_MODULE_31__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Open URI in a new Tab"))))))),this.canUsePasswordExpiry&&this.canUpdate()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-set-expiry-date",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"set-expiry-date",className:"link no-border",onClick:this.handleSetExpiryDateClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_calendar_svg__WEBPACK_IMPORTED_MODULE_29__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Set expiry date"))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-mark-as-expired-resource",className:"ready separator-after"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"mark-as-expired",className:"link no-border",onClick:this.handleMarkAsExpiredClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_clock_svg__WEBPACK_IMPORTED_MODULE_28__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Mark as expired")))))))),this.canUpdate()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-edit-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"edit",className:"link no-border",onClick:this.handleEditClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_edit_svg__WEBPACK_IMPORTED_MODULE_26__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Edit"))))))),canViewShare&&this.canShare()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-share-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"share",className:"link no-border",onClick:this.handleShareClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_share_svg__WEBPACK_IMPORTED_MODULE_25__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Share"))))))),this.canShare()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:"option-delete-resource",className:"ready"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"main-cell"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",id:"delete",className:"link no-border",onClick:this.handleDeleteClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_delete_svg__WEBPACK_IMPORTED_MODULE_27__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Delete"))))))))}}DisplayResourcesListContextualMenu.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,hide:prop_types__WEBPACK_IMPORTED_MODULE_36___default().func,left:prop_types__WEBPACK_IMPORTED_MODULE_36___default().number,top:prop_types__WEBPACK_IMPORTED_MODULE_36___default().number,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_36___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_20__.A),dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,progressContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,resource:prop_types__WEBPACK_IMPORTED_MODULE_36___default().object,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().any,passwordExpiryContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().object,clipboardContext:prop_types__WEBPACK_IMPORTED_MODULE_36___default().object,metadataKeysSettings:prop_types__WEBPACK_IMPORTED_MODULE_36___default().instanceOf(_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_35__.A),t:prop_types__WEBPACK_IMPORTED_MODULE_36___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)((0,_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_34__.XF)((0,_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_32__.nJ)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_12__.x6)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__.Qw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_19__.KH)((0,_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_15__.f4)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_2__.z9)((0,_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__.E0)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_6__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_10__.CI)("common")(DisplayResourcesListContextualMenu)))))))))));DisplayResourcesListContextualMenu.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleEditClickEvent",docblock:"handle edit resource",modifiers:[],params:[],returns:null,description:"handle edit resource"},{name:"canEditResource",docblock:"Can edit the resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can edit the resource"},{name:"handleShareClickEvent",docblock:"handle share resource",modifiers:[],params:[],returns:null,description:"handle share resource"},{name:"handleUsernameClickEvent",docblock:"handle username resource",modifiers:["async"],params:[],returns:null,description:"handle username resource"},{name:"handleUriClickEvent",docblock:"handle uri resource",modifiers:["async"],params:[],returns:null,description:"handle uri resource"},{name:"handlePermalinkClickEvent",docblock:"handle permalink resource",modifiers:["async"],params:[],returns:null,description:"handle permalink resource"},{name:"decryptResourceSecret",docblock:"Decrypt the resource secret\n@returns {Promise<object>} The secret in plaintext format\n@throw UserAbortsOperationError If the user cancel the operation",modifiers:[],params:[],returns:{description:"The secret in plaintext format",type:{name:"Promise",elements:[{name:"object"}]}},description:"Decrypt the resource secret"},{name:"copyPasswordToClipboard",docblock:"Copy password from dto to clipboard\nSupport original password (a simple string) and composed objects)\n\n@param {object} plaintextSecretDto The plain text secret DTO.\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"plaintextSecretDto",description:"The plain text secret DTO.",type:{name:"object"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copy password from dto to clipboard\nSupport original password (a simple string) and composed objects)"},{name:"handlePasswordClickEvent",docblock:"handle password resource",modifiers:["async"],params:[],returns:null,description:"handle password resource"},{name:"handleTotpClickEvent",docblock:"handle copy to clipboard the totp of the selected resource",modifiers:["async"],params:[],returns:null,description:"handle copy to clipboard the totp of the selected resource"},{name:"handleDeleteClickEvent",docblock:"handle delete resource",modifiers:[],params:[],returns:null,description:"handle delete resource"},{name:"handleGoToResourceUriClick",docblock:"handle open the uri in a new tab",modifiers:[],params:[],returns:null,description:"handle open the uri in a new tab"},{name:"handleMarkAsExpiredClick",docblock:"Handle mark as expired\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle mark as expired"},{name:"handleSetExpiryDateClick",docblock:"Handle set expiry date click.",modifiers:[],params:[],returns:null,description:"Handle set expiry date click."},{name:"displayActionAborted",docblock:"Display action aborted",modifiers:[],params:[],returns:null,description:"Display action aborted"},{name:"resource",docblock:"the resource selected\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"the resource selected"},{name:"safeUri",docblock:"the resource safe uri\n@return {string|bool} Return safe uri or false if not safe",modifiers:["get"],params:[],returns:{description:"Return safe uri or false if not safe",type:{name:"union",elements:[{name:"string"},{name:"bool"}]}},description:"the resource safe uri"},{name:"canUpdate",docblock:"Can update the resource",modifiers:[],params:[],returns:null,description:"Can update the resource"},{name:"canShare",docblock:"Can share the resource",modifiers:[],params:[],returns:null,description:"Can share the resource"},{name:"canCopyUsername",docblock:"Can copy username\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy username"},{name:"canCopyPassword",docblock:"Can copy password\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy password"},{name:"isPasswordResources",docblock:"Is password resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is password resource"},{name:"canCopyTotp",docblock:"Can copy totp\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy totp"},{name:"isTotpResources",docblock:"Is TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"isStandaloneTotpResource",docblock:"Is TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"canCopyUri",docblock:"Can copy uri\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy uri"},{name:"canUseTotp",docblock:"Can use Totp\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Can use Totp"},{name:"canUsePasswordExpiry",docblock:"Can use password expiry\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Can use password expiry"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourcesListContextualMenu",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},hide:{description:"",type:{name:"func"},required:!1},left:{description:"",type:{name:"number"},required:!1},top:{description:"",type:{name:"number"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},progressContext:{description:"",type:{name:"any"},required:!1},resource:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},metadataKeysSettings:{description:"",type:{name:"instanceOf",value:"MetadataKeysSettingsEntity"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/PasswordExpiryDialog/PasswordExpiryDialog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>PasswordExpiryDialog_PasswordExpiryDialog});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),DialogWrapper=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),FormCancelButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),FormSubmitButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),PasswordExpirySettingsContext=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),entityValidationError=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js"),entitySchema=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),luxon=__webpack_require__("./node_modules/luxon/src/luxon.js"),dateUtils=__webpack_require__("./src/shared/utils/dateUtils.js");const PasswordExpiryOptionEnum={AUTOMATIC:"automatic",MANUAL:"manual",NEVER:"never"};class PasswordExpiryDialogViewModel{constructor(settings={}){this.passwordExpiryDurationInDay=settings.passwordExpiryDurationInDay,this.passwordExpiryDate=settings.passwordExpiryDate,this.passwordExpiryOption=settings.passwordExpiryOption}static getSchema(){return{type:"object",required:["passwordExpiryDurationInDay","passwordExpiryDate","passwordExpiryOption"],properties:{passwordExpiryDurationInDay:{type:"integer",maximum:999,minimum:-99},passwordExpiryDate:{type:"string",pattern:/\d{4}-\d{2}-\d{2}/},passwordExpiryOption:{type:"string",enum:PasswordExpiryOptionEnum}}}}static fromEntityDto(entityDto){const passwordExpiryDurationInDay=entityDto?.default_expiry_period||90,passwordExpiryDate=luxon.c9.utc().plus({days:passwordExpiryDurationInDay}).toFormat("yyyy-MM-dd");return new PasswordExpiryDialogViewModel({passwordExpiryDurationInDay,passwordExpiryDate,passwordExpiryOption:PasswordExpiryOptionEnum.AUTOMATIC})}toDto(){return{passwordExpiryDurationInDay:this.passwordExpiryDurationInDay,passwordExpiryDate:this.passwordExpiryDate,passwordExpiryOption:this.passwordExpiryOption}}getExpiryDateToApply(){let date;switch(this.passwordExpiryOption){case PasswordExpiryOptionEnum.AUTOMATIC:date=luxon.c9.utc().plus({days:this.passwordExpiryDurationInDay});break;case PasswordExpiryOptionEnum.MANUAL:date=luxon.c9.fromFormat(this.passwordExpiryDate,"yyyy-MM-dd",{zone:"UTC"});break;case PasswordExpiryOptionEnum.NEVER:date=null;break;default:throw new Error(`Unsuppored Password Expiry dialog option '${this.passwordExpiryOption}'`)}return(0,dateUtils.B7)(date)}mapResourcesToPasswordExpiryDto(resourceList){const expiryDate=this.getExpiryDateToApply();return resourceList.map((resource=>({id:resource.id,expired:expiryDate})))}validate(){switch(this.passwordExpiryOption){case PasswordExpiryOptionEnum.AUTOMATIC:return this.validatePasswordExpiryDurationInDay();case PasswordExpiryOptionEnum.MANUAL:return this.validatePasswordExpiryDate()}return new entityValidationError.A}validatePasswordExpiryDurationInDay(){const schema=PasswordExpiryDialogViewModel.getSchema();try{entitySchema.A.validateProp("passwordExpiryDurationInDay",this.passwordExpiryDurationInDay,schema.properties.passwordExpiryDurationInDay)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}validatePasswordExpiryDate(){const schema=PasswordExpiryDialogViewModel.getSchema();try{entitySchema.A.validateProp("passwordExpiryDate",this.passwordExpiryDate,schema.properties.passwordExpiryDate)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}}const passwordExpirySettings_PasswordExpiryDialogViewModel=PasswordExpiryDialogViewModel;var copy=__webpack_require__("./src/img/svg/copy.svg");class PasswordExpiryDialog extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){const settings=this.props.passwordExpiryContext.getSettings();return{hasBeenSubmitted:!1,processing:!1,passwordExpiryDialogViewModel:passwordExpirySettings_PasswordExpiryDialogViewModel.fromEntityDto(settings),errors:null}}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleDurationInDayChange=this.handleDurationInDayChange.bind(this),this.handleDuration=this.handleDurationInDayChange.bind(this),this.handleDateChange=this.handleDateChange.bind(this),this.selectExpiryOption=this.selectExpiryOption.bind(this)}handleDurationInDayChange(event){if(event.target.value.toString().length>3)return void event.preventDefault();const newExpiryDurationInDay={passwordExpiryDurationInDay:parseInt(event.target.value,10)};this.selectExpiryOption(PasswordExpiryOptionEnum.AUTOMATIC,newExpiryDurationInDay)}handleDateChange(event){const newPasswordExpiryDate={passwordExpiryDate:event.target.value};this.selectExpiryOption(PasswordExpiryOptionEnum.MANUAL,newPasswordExpiryDate)}selectExpiryOption(passwordExpiryOption,newInputFieldDate={}){const data=Object.assign({},this.state.passwordExpiryDialogViewModel.toDto(),newInputFieldDate,{passwordExpiryOption}),newState={passwordExpiryDialogViewModel:new passwordExpirySettings_PasswordExpiryDialogViewModel(data)};this.state.hasBeenSubmitted?(newState.errors=this.state.passwordExpiryDialogViewModel.validate(),this.setState(newState)):this.setState(newState)}hasAllInputDisabled(){return this.state.processing}handleError(error){this.props.dialogContext.open(NotifyError.A,{error})}displayErrors(errors){return react.createElement("span",{className:"error-message"},Object.keys(errors).map((errorKey=>react.createElement(react.Fragment,null,errors[errorKey]))))}get resourceCount(){return this.props.resources.length}async handleFormSubmit(e){e.preventDefault();const errors=this.state.passwordExpiryDialogViewModel.validate();if(this.setState({hasBeenSubmitted:!0,errors}),errors.hasErrors())return;this.setState({processing:!0});const resourceExpirationDto=this.state.passwordExpiryDialogViewModel.mapResourcesToPasswordExpiryDto(this.props.resources);try{await this.props.context.port.request("passbolt.resources.set-expiration-date",resourceExpirationDto),this.props.actionFeedbackContext.displaySuccess(this.props.t("The expiry date of the selected resource has been updated.",{count:this.props.resources.length})),this.setState({processing:!1}),this.props.onClose()}catch(e){this.handleError(e),this.setState({processing:!1})}}render(){const viewModel=this.state.passwordExpiryDialogViewModel,isDisabled=this.hasAllInputDisabled(),errors=this.state.errors;return react.createElement(DialogWrapper.A,{className:"password-expiry-dialog",title:this.props.t("Set an expiry date",{count:this.resourceCount}),onClose:this.props.onClose,disabled:isDisabled},react.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react.createElement("div",{className:"form-content"},react.createElement("div",{className:"radiolist-alt"},react.createElement("div",{className:"input radio "+(viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.AUTOMATIC?"checked":"")},react.createElement("input",{type:"radio",value:PasswordExpiryOptionEnum.AUTOMATIC,onChange:()=>this.selectExpiryOption(PasswordExpiryOptionEnum.AUTOMATIC),name:"passwordExpiryOption",checked:viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.AUTOMATIC,id:"passwordExpiryOptionAutomatic",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"passwordExpiryOptionAutomatic"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Set the date automatically:")),react.createElement("span",{className:"info"},react.createElement("input",{type:"number",value:viewModel.passwordExpiryDurationInDay,id:"passwordExpiryDateAutomatic",name:"passwordExpiryDurationInDay",onChange:this.handleDurationInDayChange,disabled:this.hasAllInputDisabled(),min:"1",max:"365"}),react.createElement(es.x6,null,"days from now.")),errors?.hasError("passwordExpiryDurationInDay")&&this.displayErrors(errors.getError("passwordExpiryDurationInDay")))),react.createElement("div",{className:"input radio "+(viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.MANUAL?"checked":"")},react.createElement("input",{type:"radio",value:PasswordExpiryOptionEnum.MANUAL,onChange:()=>this.selectExpiryOption(PasswordExpiryOptionEnum.MANUAL),name:"passwordExpiryOption",checked:viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.MANUAL,id:"passwordExpiryOptionManual",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"passwordExpiryOptionManual"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Set the date manually:")),react.createElement("span",{className:"info date-wrapper"},react.createElement("div",{className:"button-inline"},react.createElement("input",{className:"fluid form-element "+(viewModel.passwordExpiryDate?"":"empty"),type:"date",value:viewModel.passwordExpiryDate,id:"passwordExpiryDateManual",name:"passwordExpiryDate",onChange:this.handleDateChange,disabled:this.hasAllInputDisabled()}),react.createElement(copy.A,null))),errors?.hasError("passwordExpiryDate")&&this.displayErrors(errors.getError("passwordExpiryDate")))),react.createElement("div",{className:"input radio "+(viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.NEVER?"checked":"")},react.createElement("input",{type:"radio",value:PasswordExpiryOptionEnum.NEVER,onChange:()=>this.selectExpiryOption(PasswordExpiryOptionEnum.NEVER),name:"passwordExpiryOption",checked:viewModel.passwordExpiryOption===PasswordExpiryOptionEnum.NEVER,id:"passwordExpiryOptionNever",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"passwordExpiryOptionNever"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Not set")),react.createElement("span",{className:"info"},react.createElement(es.x6,{count:this.resourceCount},"This resource does not need an expiry date.")))))),react.createElement("div",{className:"submit-wrapper clearfix"},react.createElement(FormCancelButton.A,{disabled:isDisabled,onClick:this.props.onClose}),react.createElement(FormSubmitButton.A,{disabled:isDisabled,processing:this.state.processing,value:this.props.t("Save")}))))}}PasswordExpiryDialog.propTypes={context:prop_types_default().any,onClose:prop_types_default().func,passwordExpiryContext:prop_types_default().object,dialogContext:prop_types_default().object,actionFeedbackContext:prop_types_default().object,t:prop_types_default().func,resources:prop_types_default().arrayOf(Object)};const PasswordExpiryDialog_PasswordExpiryDialog=(0,AppContext.L)((0,DialogContext.z9)((0,PasswordExpirySettingsContext.f4)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(PasswordExpiryDialog)))));PasswordExpiryDialog.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleDurationInDayChange",docblock:"Handle duration in day input change\n@param {Event} event",modifiers:[],params:[{name:"event",type:{name:"Event"},optional:!1}],returns:null,description:"Handle duration in day input change"},{name:"handleDateChange",docblock:"Handle manual date input change\n@param {Event} event",modifiers:[],params:[{name:"event",type:{name:"Event"},optional:!1}],returns:null,description:"Handle manual date input change"},{name:"selectExpiryOption",docblock:"Change the currently selected expiration option\n@param {string} passwordExpiryOption\n@param {object} [newInputFieldDate]",modifiers:[],params:[{name:"passwordExpiryOption",type:{name:"string"},optional:!1},{name:"newInputFieldDate",optional:!0}],returns:null,description:"Change the currently selected expiration option"},{name:"hasAllInputDisabled",docblock:"Returns true if the input must be disabled.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the input must be disabled."},{name:"handleError",docblock:"Handles error by displaying the NotifyError dialog.\n@param {Error} error",modifiers:[],params:[{name:"error",type:{name:"Error"},optional:!1}],returns:null,description:"Handles error by displaying the NotifyError dialog."},{name:"displayErrors",docblock:"Handles EntityValidationError for displaying on the UI.\n@param {object} errors",modifiers:[],params:[{name:"errors",type:{name:"object"},optional:!1}],returns:null,description:"Handles EntityValidationError for displaying on the UI."},{name:"resourceCount",docblock:"Returns the count of selected resources.\nThis is mainly used to adapt the translations accordingly.\n@returns {number}",modifiers:["get"],params:[],returns:{type:{name:"number"}},description:"Returns the count of selected resources.\nThis is mainly used to adapt the translations accordingly."},{name:"handleFormSubmit",docblock:"Handles form submission\n@param {Event} e",modifiers:["async"],params:[{name:"e",type:{name:"Event"},optional:!1}],returns:null,description:"Handles form submission"}],displayName:"PasswordExpiryDialog",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1},resources:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"Object"}},required:!1}}}},"./src/react-extension/contexts/ProgressContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,E0:()=>withProgress});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_components_Common_Progress_DisplayProgress_DisplayProgress__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Progress/DisplayProgress/DisplayProgress.js"),_DialogContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/DialogContext.js");const ProgressContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({progressDialogProps:null,dialogIndex:null,open:()=>{},updateMessage:()=>{},updateGoals:()=>{},close:()=>{}});class ProgressContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks(),this.state=this.defaultState}get defaultState(){return{progressDialogProps:null,dialogIndex:null,open:this.open,updateMessage:this.updateMessage,updateGoals:this.updateGoals,close:this.close}}bindCallbacks(){this.open=this.open.bind(this),this.updateGoals=this.updateGoals.bind(this),this.updateMessage=this.updateMessage.bind(this),this.close=this.close.bind(this)}open(title,goals,message){const progressDialogProps={title,goals,message};this.setState({progressDialogProps});const dialogIndex=this.props.dialogContext.open(_components_Common_Progress_DisplayProgress_DisplayProgress__WEBPACK_IMPORTED_MODULE_1__.A);this.setState({dialogIndex})}updateMessage(message,completed=!1){const progressDialogProps={...this.state.progressDialogProps,message:message||this.state.progressDialogProps.message,completed};this.setState({progressDialogProps})}async updateGoals(goals){const progressDialogProps={...this.state.progressDialogProps,goals};this.setState({progressDialogProps})}async close(){this.props.dialogContext.close(this.state.dialogIndex);this.setState({progressDialogProps:{},dialogIndex:null})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProgressContext.Provider,{value:this.state},this.props.children)}}ProgressContextProvider.displayName="ProgressContextProvider",ProgressContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object};const __WEBPACK_DEFAULT_EXPORT__=(0,_DialogContext__WEBPACK_IMPORTED_MODULE_2__.z9)(ProgressContextProvider);function withProgress(WrappedComponent){return class WithProgress extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProgressContext.Consumer,null,(progressContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{progressContext,...this.props})))}}}ProgressContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"bindCallbacks",docblock:"Bind callbacks",modifiers:[],params:[],returns:null,description:"Bind callbacks"},{name:"open",docblock:"Open the progress dialog\n@param {string} title The title\n@param {integer} goals The goals\n@param {string} message The message",modifiers:[],params:[{name:"title",description:"The title",type:{name:"string"},optional:!1},{name:"goals",description:"The goals",type:{name:"integer"},optional:!1},{name:"message",description:"The message",type:{name:"string"},optional:!1}],returns:null,description:"Open the progress dialog"},{name:"updateMessage",docblock:"Update the progress dialog message.\n@param {string} message The message\n@param {boolean} completed The progress is completed.",modifiers:[],params:[{name:"message",description:"The message",type:{name:"string"},optional:!1},{name:"completed",description:"The progress is completed.",type:{name:"boolean"},optional:!0}],returns:null,description:"Update the progress dialog message."},{name:"updateGoals",docblock:"Upate the progress dialog goals.\n@param {integer} goals the goals",modifiers:["async"],params:[{name:"goals",description:"the goals",type:{name:"integer"},optional:!1}],returns:null,description:"Upate the progress dialog goals."},{name:"close",docblock:"Close the progress dialog.",modifiers:["async"],params:[],returns:null,description:"Close the progress dialog."}],displayName:"ProgressContextProvider",props:{children:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1}}}},"./src/shared/context/MetadataKeysSettingsLocalStorageContext/MetadataKeysSettingsLocalStorageContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{XF:()=>withMetadataKeysSettingsLocalStorage});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js");const MetadataKeysSettingsLocalStorageContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({get:()=>{},metadataKeysSettings:null,updateLocalStorage:()=>{}});class MetadataKeysSettingsLocalStorageContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.runningLocalStorageUpdatePromise=null,this.initEventHandlers()}get defaultState(){return{get:this.get.bind(this),metadataKeysSettings:null,updateLocalStorage:this.updateLocalStorage.bind(this)}}initEventHandlers(){this.handleStorageChange=this.handleStorageChange.bind(this)}componentDidMount(){this.props.context.storage.onChanged.addListener(this.handleStorageChange)}componentWillUnmount(){this.props.context.storage.onChanged.removeListener(this.handleStorageChange)}handleStorageChange(changes){changes[this.storageKey]&&this.set(changes[this.storageKey].newValue)}set(metadataKeysSettings){const metadataKeysSettingsEntity=new _models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_2__.A(metadataKeysSettings);this.setState({metadataKeysSettings:metadataKeysSettingsEntity})}get(){return null===this.state.metadataKeysSettings?(this.loadLocalStorage(),null):this.state.metadataKeysSettings}get storageKey(){return`metadata_keys_settings-${this.props.context.account?.id}`}async loadLocalStorage(){const storageData=await this.props.context.storage.local.get([this.storageKey]);storageData[this.storageKey]?this.set(storageData[this.storageKey]):this.updateLocalStorage()}async updateLocalStorage(){null===this.runningLocalStorageUpdatePromise?(this.runningLocalStorageUpdatePromise=this.props.context.port.request("passbolt.metadata.get-or-find-metadata-keys-settings"),await this.runningLocalStorageUpdatePromise,this.runningLocalStorageUpdatePromise=null):await this.runningLocalStorageUpdatePromise}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MetadataKeysSettingsLocalStorageContext.Provider,{value:this.state},this.props.children)}}MetadataKeysSettingsLocalStorageContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any};(0,_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(MetadataKeysSettingsLocalStorageContextProvider);function withMetadataKeysSettingsLocalStorage(WrappedComponent){return class withMetadataKeysSettingsKeysLocalStorage extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MetadataKeysSettingsLocalStorageContext.Consumer,null,(metadataKeySettingsLocalStorageContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{metadataKeySettingsLocalStorageContext,metadataKeysSettings:metadataKeySettingsLocalStorageContext.get(),...this.props})))}}}MetadataKeysSettingsLocalStorageContextProvider.__docgenInfo={description:"The metadata key settings local storage context provider",methods:[{name:"defaultState",docblock:"Returns the default component state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Returns the default component state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"handleStorageChange",docblock:"Handles update of the metadata key settings in the local storage.",modifiers:[],params:[{name:"changes",optional:!1}],returns:null,description:"Handles update of the metadata key settings in the local storage."},{name:"set",docblock:"Set metadataKeysSettings.\n@param {Object} metadataKeysSettings The metadata keys settings to set.\n@private",modifiers:[],params:[{name:"metadataKeysSettings",description:"The metadata keys settings to set.",type:{name:"Object"},optional:!1}],returns:null,description:"Set metadataKeysSettings."},{name:"get",docblock:"Get the metadata key settings from the local storage and/or init them if not the case already.\n@returns {MetadataKeysSettingsEntity|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"MetadataKeysSettingsEntity"}]}},description:"Get the metadata key settings from the local storage and/or init them if not the case already."},{name:"storageKey",docblock:"Get the storage key.\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the storage key."},{name:"loadLocalStorage",docblock:"Load the metadata key settings from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation.\n@returns {Promise<void>}\n@private",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the metadata key settings from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation."},{name:"updateLocalStorage",docblock:"Forces the update of the metadata key settings in the local storage.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Forces the update of the metadata key settings in the local storage."}],displayName:"MetadataKeysSettingsLocalStorageContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}}}]);