/*! For license information please see react-extension-components-ResourceDetails-DisplayResourceDetails-DisplayResourceDetailsTag-test-stories.01609be1.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6615],{"./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsTag.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DecryptedDescription:()=>DecryptedDescription,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js"),_DisplayResourceDetailsTag__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/ResourceDetails/DisplayResourceDetails/DisplayResourceDetailsTag.js"),_Common_Internationalisation_TranslationProvider__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Internationalisation/TranslationProvider.js"),_test_mock_MockPort__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/test/mock/MockPort.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/ResourceDetails/DisplayResourceDetailsTag",component:_DisplayResourceDetailsTag__WEBPACK_IMPORTED_MODULE_3__.A},tags=[{id:1,slug:"apache"}],mockedPort=new _test_mock_MockPort__WEBPACK_IMPORTED_MODULE_5__.A;mockedPort.addRequestListener("passbolt.tags.find-all",(()=>tags));const context={siteSettings:{getServerTimezone:()=>(new Date).toDateString()},userSettings:new _shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_6__.A(_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__.A),port:mockedPort},DecryptedDescription=(args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Internationalisation_TranslationProvider__WEBPACK_IMPORTED_MODULE_4__.A,{loadingPath:"/webAccessibleResources/locales/{{lng}}/{{ns}}.json"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.A.Provider,{value:context},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.fS,{initialEntries:["/"]},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"panel aside"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.qh,{component:routerProps=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceDetailsTag__WEBPACK_IMPORTED_MODULE_3__.A,{...args,...routerProps})})))))).bind({});DecryptedDescription.args={resourceWorkspaceContext:{details:{resource:{permission:{type:15},tags}}}};const __namedExportsOrder=["DecryptedDescription"];DecryptedDescription.parameters={...DecryptedDescription.parameters,docs:{...DecryptedDescription.parameters?.docs,source:{originalSource:'args => <TranslationProvider loadingPath="/webAccessibleResources/locales/{{lng}}/{{ns}}.json">\n    <AppContext.Provider value={context}>\n      <MemoryRouter initialEntries={[\'/\']}>\n        <div className="panel aside">\n          <Route component={routerProps => <DisplayResourceDetailsTag {...args} {...routerProps} />}></Route>\n        </div>\n      </MemoryRouter>\n    </AppContext.Provider>\n  </TranslationProvider>',...DecryptedDescription.parameters?.docs?.source}}}},"./src/react-extension/components/Common/Internationalisation/TranslationProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/i18next/dist/esm/i18next.js"),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),i18next_http_backend__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/i18next-http-backend/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/context/AppContext/AppContext.js");class TranslationProvider extends react__WEBPACK_IMPORTED_MODULE_3__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{ready:!1}}async componentDidMount(){await i18next__WEBPACK_IMPORTED_MODULE_0__.Ay.use(react_i18next__WEBPACK_IMPORTED_MODULE_1__.r9).use(i18next_http_backend__WEBPACK_IMPORTED_MODULE_2__.A).init({lng:this.locale,load:"currentOnly",interpolation:{escapeValue:!1},react:{useSuspense:!1},backend:{loadPath:this.props.loadingPath||"/locales/{{lng}}/{{ns}}.json"},supportedLngs:this.supportedLocales,fallbackLng:!1,ns:["common"],defaultNS:"common",keySeparator:!1,nsSeparator:!1,debug:!1}),this.setState({ready:!0})}get supportedLocales(){return this.props.context.siteSettings?.supportedLocales?this.props.context.siteSettings?.supportedLocales.map((supportedLocale=>supportedLocale.locale)):[this.locale]}get locale(){return this.props.context.locale}async componentDidUpdate(prevProps){await this.handleLocaleChange(prevProps.context.locale)}async handleLocaleChange(previousLocale){this.locale!==previousLocale&&await i18next__WEBPACK_IMPORTED_MODULE_0__.Ay.changeLanguage(this.locale)}get isReady(){return this.state.ready}render(){return react__WEBPACK_IMPORTED_MODULE_3__.createElement(react__WEBPACK_IMPORTED_MODULE_3__.Fragment,null,this.isReady&&this.props.children)}}TranslationProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,loadingPath:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_5___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__.L)(TranslationProvider);TranslationProvider.__docgenInfo={description:"This component set up the translation process",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"supportedLocales",docblock:"Get supported locales.\n@returns {string[]}",modifiers:["get"],params:[],returns:{type:{name:"Array",elements:[{name:"string"}]}},description:"Get supported locales."},{name:"locale",docblock:"Get the locale\n@type {string}",modifiers:["get"],params:[],returns:null,description:"Get the locale"},{name:"handleLocaleChange",docblock:"Check if the locale has changed and update\n@param previousLocale",modifiers:["async"],params:[{name:"previousLocale",optional:!1}],returns:null,description:"Check if the locale has changed and update"},{name:"isReady",docblock:"Returns true when the component can be rendered",modifiers:["get"],params:[],returns:null,description:"Returns true when the component can be rendered"}],displayName:"TranslationProvider",props:{context:{description:"",type:{name:"any"},required:!1},loadingPath:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/lib/Object/getPropValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(obj,path)=>path.split(".").reduce(((accumulator,key)=>accumulator?.[key]),obj)},"./src/react-extension/lib/Sanitize/sanitizeUrl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,P:()=>urlProtocols});const __WEBPACK_DEFAULT_EXPORT__=(uri,options)=>{if(void 0===uri||"string"!=typeof uri||!uri.length)return!1;if((options=options||{}).whitelistedProtocols&&!Array.isArray(options.whitelistedProtocols))throw new TypeError("The whitelistedProtocols should be an array of string.");if(options.defaultProtocol&&"string"!=typeof options.defaultProtocol)throw new TypeError("The defaultProtocol should be a string.");const whitelistedProtocols=options.whitelistedProtocols||[urlProtocols.HTTP,urlProtocols.HTTPS],blacklistedProtocols=[urlProtocols.JAVASCRIPT],defaultProtocol=options.defaultProtocol||"";!/^((?!:\/\/).)*:\/\//.test(uri)&&defaultProtocol&&(uri=`${defaultProtocol}//${uri}`);try{const url=new URL(uri);return!blacklistedProtocols.includes(url.protocol)&&(!!whitelistedProtocols.includes(url.protocol)&&url.href)}catch(error){return!1}},urlProtocols={FTP:"http:",FTPS:"https:",HTTP:"http:",HTTPS:"https:",JAVASCRIPT:"javascript:",SSH:"ssh:"}},"./src/react-extension/test/fixture/Settings/userSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={"user.settings.trustedDomain":new URL(window.location.href).origin,"user.firstname":"Ada","user.id":"f848277c-5398-58f8-a82a-72397af2d450","user.lastname":"Lovelace","user.settings.securityToken.code":"TST","user.settings.securityToken.color":"#000000","user.settings.securityToken.textColor":"#FFFFFF","user.username":"ada@passbolt.com","user.settings.locale":"en-UK","user.settings.theme":"default"}},"./src/react-extension/test/mock/MockPort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function delay(t,v){return new Promise((resolve=>{setTimeout((()=>resolve(v)),t)}))}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class MockPort{constructor(storage){this.storage=storage,this.onListeners={},this.requestListeners={},this.emitListener={},this.onConnectErrorHandler={}}async emit(name,eventObject){let result;return console.debug(`PORT EMIT: ${name}`),console.debug("Arguments",eventObject),this.emitListener[name]?(result=await this.emitListener[name](eventObject),console.debug("response: ",result)):console.debug(`The emit ${name} has not been mocked`),delay(0,result)}on(name,callback){console.debug(`PORT ON: ${name}`),console.debug("PORT ON PARAMETERS:",callback),this.addOnListener(name,callback)}async request(name){let result;if(console.debug(`PORT REQUEST: ${name}`),console.debug("PORT REQUEST PARAMETERS:",Array.prototype.slice.call(arguments)),this.requestListeners[name]){const listenerArguments=Array.prototype.slice.call(arguments,1,arguments.length);console.debug("listenerArguments",listenerArguments),listenerArguments.push(this.storage),console.debug("listenerArguments",listenerArguments),result=await this.requestListeners[name](...listenerArguments),console.debug("response: ",result)}else console.debug(`The request ${name} has not been mocked`);return delay(0,result)}addEmitListener(name){console.debug(`PORT EMIT: ${name}`),console.debug("PORT EMIT PARAMETERS:",Array.prototype.slice.call(arguments))}addOnListener(name,callback){this.emitListener[name]=callback}addRequestListener(name,callback){this.requestListeners[name]=callback}onConnectError(callback){this.onConnectErrorHandler.callback=callback}}},"./src/shared/lib/Settings/UserSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>UserSettings});class UserSettings{constructor(settings){this.settings=settings}get id(){return this.settings["user.id"]}get fullName(){return`${this.settings["user.firstname"]} ${this.settings["user.lastname"]}`}get username(){return this.settings["user.username"]}getTheme(){return this.settings["user.settings.theme"]}getTrustedDomain(){return this.settings["user.settings.trustedDomain"]}getSecurityToken(){return{code:this.settings["user.settings.securityToken.code"],backgroundColor:this.settings["user.settings.securityToken.color"],textColor:this.settings["user.settings.securityToken.textColor"]}}get locale(){return this.settings["user.settings.locale"]}}}}]);