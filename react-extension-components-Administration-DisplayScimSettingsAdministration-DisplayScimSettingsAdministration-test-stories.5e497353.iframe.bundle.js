/*! For license information please see react-extension-components-Administration-DisplayScimSettingsAdministration-DisplayScimSettingsAdministration-test-stories.5e497353.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[2269],{"./src/img/svg/copy.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCopy(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#copy_svg__clip0_57_467942)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M15 6H7.5A1.5 1.5 0 0 0 6 7.5V15a1.5 1.5 0 0 0 1.5 1.5H15a1.5 1.5 0 0 0 1.5-1.5V7.5A1.5 1.5 0 0 0 15 6"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M3 12c-.825 0-1.5-.675-1.5-1.5V3c0-.825.675-1.5 1.5-1.5h7.5c.825 0 1.5.675 1.5 1.5"}))))}},"./src/img/svg/eye_close.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEyeClose(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#eye_close_svg__clip0_27_140048)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M6.587 6.587a2 2 0 1 0 2.826 2.827M7.153 3.386q.422-.052.847-.053C12.667 3.333 14.667 8 14.667 8a8.8 8.8 0 0 1-1.114 1.786"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M4.407 4.406A9 9 0 0 0 1.333 8s2 4.666 6.667 4.666a6.5 6.5 0 0 0 3.593-1.073M1.333 1.333l13.334 13.333"}))))}},"./src/img/svg/eye_open.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEyeOpen(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.333 8s2-4.667 6.667-4.667S14.667 8 14.667 8s-2 4.666-6.667 4.666S1.333 8 1.333 8"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"})))}},"./src/img/svg/refresh.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,_path3,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgRefresh(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25 9A6.75 6.75 0 0 1 9 2.25a7.31 7.31 0 0 1 5.055 2.055L15.75 6"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.75 2.25V6H12M15.75 9A6.75 6.75 0 0 1 9 15.75a7.3 7.3 0 0 1-5.055-2.055L2.25 12"})),_path3||(_path3=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 12H2.25v3.75"})))}},"./src/react-extension/components/Administration/DisplayScimSettingsAdministration/DisplayScimSettingsAdministration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DisplayScimSettingsAdministration_DisplayScimSettingsAdministration});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),scimSettingsEntity=__webpack_require__("./src/shared/models/entity/scimSettings/scimSettingsEntity.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");class ScimSettingsFormEntity extends scimSettingsEntity.A{static getSchema(){return{type:"object",required:["scim_user_id","setting_id"],properties:{...scimSettingsEntity.A.getSchema().properties}}}static createFromDefault(userId){return new ScimSettingsFormEntity({scim_user_id:userId,setting_id:(0,v4.A)(),secret_token:this.generateScimSecretToken()})}}const scimSettingsFormEntity=ScimSettingsFormEntity;var ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js");const scimSettingsServiceWorkerService=class ScimSettingsServiceWorkerService{constructor(port){this.port=port}async findSettings(){const settingsDto=await this.port.request("passbolt.scim.find-settings");return settingsDto?new scimSettingsEntity.A(settingsDto):null}async createSettings(formSettings){if(!(formSettings instanceof scimSettingsEntity.A))throw new TypeError("The 'settings' property should be of type 'ScimSettingsEntity'.");const savedSettingsDto=await this.port.request("passbolt.scim.create-settings",formSettings.toDto());return new scimSettingsEntity.A(savedSettingsDto)}async updateSettings(formSettings,id){if(!(formSettings instanceof scimSettingsEntity.A))throw new TypeError("The 'settings' property should be of type 'ScimSettingsEntity'.");const updated=formSettings.toDto(),savedSettingsDto=await this.port.request("passbolt.scim.update-settings",id,updated);return new scimSettingsEntity.A(savedSettingsDto)}async disableSettings(id){await this.port.request("passbolt.scim.disable-settings",id)}};var copy=__webpack_require__("./src/img/svg/copy.svg"),refresh=__webpack_require__("./src/img/svg/refresh.svg"),ManagedClipboardServiceProvider=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js"),Password=__webpack_require__("./src/shared/components/Password/Password.js"),Select=__webpack_require__("./src/react-extension/components/Common/Select/Select.js"),userUtils=__webpack_require__("./src/shared/utils/userUtils.js"),portals=__webpack_require__("./src/shared/utils/portals.js"),info=__webpack_require__("./src/img/svg/info.svg");class DisplayScimSettingsAdministrationHelp extends react.Component{render(){return react.createElement(react.Fragment,null,this.props.shouldDisplayWarning&&react.createElement("div",{className:"sidebar-help-section warning message"},react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement("b",null,react.createElement(es.x6,null,"Warning:"))," ",react.createElement(es.x6,null,"if you think the secret has been compromised please regenerate and update it in your provider settings.")))),react.createElement("div",{className:"sidebar-help-section"},react.createElement("h3",null,react.createElement(es.x6,null,"Need help?")),react.createElement("p",null,react.createElement(es.x6,null,"For more information about SCIM, checkout the dedicated page on the official website.")),react.createElement("a",{className:"button",target:"_blank",rel:"noopener noreferrer",href:"https://www.passbolt.com/docs/admin/user-provisioning/scim"},react.createElement(info.A,null),react.createElement("span",null,react.createElement(es.x6,null,"Read the documentation")))))}}DisplayScimSettingsAdministrationHelp.propTypes={shouldDisplayWarning:prop_types_default().bool.isRequired};const DisplayScimSettingsAdministration_DisplayScimSettingsAdministrationHelp=DisplayScimSettingsAdministrationHelp;DisplayScimSettingsAdministrationHelp.__docgenInfo={description:"This component displays the help section for SCIM Settings Administration",methods:[],displayName:"DisplayScimSettingsAdministrationHelp",props:{shouldDisplayWarning:{description:"",type:{name:"bool"},required:!0}}};var RoleContext=__webpack_require__("./src/react-extension/contexts/RoleContext.js"),rolesCollection=__webpack_require__("./src/shared/models/entity/role/rolesCollection.js");class DisplayScimSettingsAdministration extends react.Component{originalSettings=null;formSettings=null;scimSettingsService=null;constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.scimSettingsService=props.scimSettingsServiceWorkerService??new scimSettingsServiceWorkerService(this.props.context.port)}get defaultState(){return{isProcessing:!0,hasAlreadyBeenValidated:!1,enabled:!1,settings:null}}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.save=this.save.bind(this),this.handleToggleEnabled=this.handleToggleEnabled.bind(this),this.handleCopyScimUrl=this.handleCopyScimUrl.bind(this),this.handleCopySecretToken=this.handleCopySecretToken.bind(this),this.handleRegenerateSecretToken=this.handleRegenerateSecretToken.bind(this)}async componentDidMount(){this.props.context.users||await this.props.context.port.request("passbolt.users.update-local-storage"),await this.findScimSettings(),this.setState({isProcessing:!1})}componentWillUnmount(){this.clearContext()}get adminUsers(){const adminRole=this.props.roles.items.filter(r=>r.isAdmin())?.[0]||null,users=this.props.context.users;return null!==users&&adminRole?users.filter(user=>!0===user.active&&user.role_id===adminRole.id):[]}get adminUsersForSelect(){return this.adminUsers&&this.adminUsers.map(user=>({value:user.id,label:(0,userUtils.$2)(user,this.props.t,{withUsername:!0})}))}async findScimSettings(){this.setState({isProcessing:!0});try{const scimSettings=await this.scimSettingsService.findSettings();scimSettings&&(this.originalSettings=new scimSettingsFormEntity(scimSettings,{validate:!1}),this.formSettings=new scimSettingsFormEntity(scimSettings,{validate:!1}),this.setState({settings:this.formSettings.toDto(),enabled:!0}))}catch(error){await this.handleUnexpectedError(error),this.setDefaultSettings()}this.setState({isProcessing:!1})}setDefaultSettings(){this.formSettings=scimSettingsFormEntity.createFromDefault(this.adminUsers[0].id),this.setState({settings:this.formSettings.toDto()})}handleToggleEnabled(){this.state.enabled||(this.formSettings=scimSettingsFormEntity.createFromDefault(this.adminUsers[0].id),this.setState({settings:this.formSettings.toDto()})),this.setState({enabled:!this.state.enabled})}hasSettingsChanges=(0,memoize_one_esm.A)((originalSettings,formSettings,settings)=>originalSettings?.hasDiffProps(formSettings)||!1);handleInputChange(event){if(this.hasAllInputDisabled())return;const{type,checked,name}=event.target,parsedValue="checkbox"===type?checked:event.target.value;this.setFormPropertyValue(name,parsedValue)}setFormPropertyValue(name,parsedValue){this.formSettings.set(name,parsedValue,{validate:!1}),this.setState({settings:this.formSettings.toDto()})}hasAllInputDisabled(){return this.state.isProcessing}async handleCopyScimUrl(){await this.props.clipboardContext.copy(this.scimUrl,this.props.t("The SCIM URL has been copied to the clipboard."))}async handleCopySecretToken(){await this.props.clipboardContext.copy(this.state.settings.secret_token,this.props.t("The SCIM secret token has been copied to the clipboard."))}handleRegenerateSecretToken(){const secretToken=scimSettingsEntity.A.generateScimSecretToken();this.setFormPropertyValue("secret_token",secretToken)}handleFormSubmit(event){event.preventDefault(),this.save()}async save(){if(this.state.isProcessing)return;this.setState({isProcessing:!0});const validationError=this.validateForm();if(validationError?.hasErrors())this.setState({isProcessing:!1,hasAlreadyBeenValidated:!0});else{try{const result=await this.saveScimSettings();this.formSettings=result?new scimSettingsFormEntity(result,{validate:!1}):null,this.originalSettings=result?new scimSettingsFormEntity(this.formSettings.toDto(),{validate:!1}):null,this.setState({settings:result?this.formSettings.toDto():null,enabled:null!==result}),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The SCIM settings were updated."))}catch(error){await this.handleUnexpectedError(error)}this.setState({isProcessing:!1})}}validateForm(){return this.formSettings?this.formSettings.validate():null}async saveScimSettings(){if(this.state.enabled){let scimSettingResult;return scimSettingResult=this.originalSettings?await this.scimSettingsService.updateSettings(this.formSettings,this.originalSettings.id):await this.scimSettingsService.createSettings(this.formSettings),scimSettingResult}return this.originalSettings&&await this.scimSettingsService.disableSettings(this.originalSettings.id),null}handleUnexpectedError(error){if(console.error(error),"UserAbortsOperationError"!==error.name)return this.props.dialogContext.open(NotifyError.A,{error})}clearContext(){this.setState(this.defaultState)}get scimUrl(){return`${this.props.context.userSettings.getTrustedDomain()}/scim/v2/${this.state.settings.setting_id}`}render(){const errors=this.state.hasAlreadyBeenValidated?this.validateForm():null,hasSettingsChanges=this.hasSettingsChanges(this.originalSettings,this.formSettings,this.state.settings);return react.createElement("div",{className:"row"},react.createElement("div",{id:"scim-settings",className:"main-column"},react.createElement("div",{className:"main-content"},react.createElement("form",{onSubmit:this.handleFormSubmit,"data-testid":"submit-form"},react.createElement("h3",{className:"title"},react.createElement("span",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"enabled",onChange:this.handleToggleEnabled,checked:this.state.enabled,disabled:this.hasAllInputDisabled(),id:"scimSettingsToggle"}),react.createElement("label",{htmlFor:"scimSettingsToggle"},react.createElement(es.x6,null,"SCIM")))),react.createElement("p",{className:"description"},react.createElement(es.x6,null,"SCIM is a standard protocol that automates user provisioning and deprovisioning with identity providers.")),this.state.enabled&&this.state.settings&&react.createElement(react.Fragment,null,react.createElement("div",{className:"input text input-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},react.createElement("label",null,react.createElement(es.x6,null,"SCIM URL")),react.createElement("div",{className:"button-inline"},react.createElement("input",{id:"scim-url-input",type:"text",className:"fluid form-element disabled",name:"scim_url",value:this.scimUrl,readOnly:!0,disabled:!0}),react.createElement("button",{type:"button",onClick:this.handleCopyScimUrl,className:"copy-to-clipboard button button-icon"},react.createElement(copy.A,null))),react.createElement("p",null,react.createElement(es.x6,null,"The URL to enter in your provider when configuring user provisioning."))),react.createElement("div",{className:"input text input-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},react.createElement("label",null,react.createElement(es.x6,null,"Secret Token")),react.createElement("div",{className:"button-inline"},react.createElement(Password.A,{id:"scim-secret-token-input",className:"fluid form-element",autoComplete:"off",name:"scim_secret_token",value:this.state.settings.secret_token,preview:!0,disabled:this.state.settings.secret_token===scimSettingsEntity.A.EMPTY_SECRET_VALUE}),react.createElement("button",{type:"button",disabled:this.state.settings.secret_token===scimSettingsEntity.A.EMPTY_SECRET_VALUE,onClick:this.handleCopySecretToken,className:"copy-to-clipboard button button-icon"},react.createElement(copy.A,null)),react.createElement("button",{type:"button",onClick:this.handleRegenerateSecretToken,className:"copy-to-clipboard button button-icon"},react.createElement(refresh.A,null)))),react.createElement("div",{className:"input text input-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},react.createElement("label",null,react.createElement(es.x6,null,"SCIM User")),react.createElement(Select.A,{items:this.adminUsersForSelect,name:"scim_user_id",className:"users",value:this.state.settings.scim_user_id,onChange:this.handleInputChange,disabled:this.state.isProcessing,search:!0,direction:"bottom"}),react.createElement("p",null,react.createElement(es.x6,null,"The SCIM user is the user that will perform the operation in the logs."))),react.createElement("div",{className:"section"},react.createElement("label",null,react.createElement(es.x6,null,"Synchronisation")),react.createElement("span",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordUpdate",disabled:!0,checked:!0,id:"send-password-update-toggle-button"}),react.createElement("label",{className:"text",htmlFor:"send-password-update-toggle-button"},react.createElement(es.x6,null,"Users."))),react.createElement("span",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordUpdate",disabled:!0,checked:!1,id:"send-password-update-toggle-button"}),react.createElement("label",{className:"text",htmlFor:"send-password-update-toggle-button"},react.createElement(es.x6,null,"Groups (Not supported)."))))))),react.createElement("div",{className:"warning message"},!this.formSettings?.id&&this.state.enabled&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Please save the settings to enable the feature."))),this.formSettings?.id&&!this.state.enabled&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Please save the settings to disable the feature."))),hasSettingsChanges&&this.state.enabled&&this.formSettings.id&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Don't forget to save your settings to apply your modification."))),errors?.hasErrors()&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement("b",null,react.createElement(es.x6,null,"Warning:"))," ",react.createElement(es.x6,null,"Please fix the errors in the form before saving."))))),react.createElement("div",{className:"actions-wrapper"},react.createElement("button",{type:"button",className:"button primary",disabled:this.state.isProcessing||errors?.hasErrors(),onClick:this.handleFormSubmit},react.createElement("span",null,react.createElement(es.x6,null,"Save")))),(0,portals.m)(react.createElement(DisplayScimSettingsAdministration_DisplayScimSettingsAdministrationHelp,{shouldDisplayWarning:!hasSettingsChanges&&this.state.enabled&&this.formSettings?.id}),document.getElementById("administration-help-panel")))}}DisplayScimSettingsAdministration.propTypes={context:prop_types_default().object,actionFeedbackContext:prop_types_default().object,dialogContext:prop_types_default().object,roleContext:prop_types_default().object,roles:prop_types_default().instanceOf(rolesCollection.A),clipboardContext:prop_types_default().object,administrationWorkspaceContext:prop_types_default().object,scimSettingsServiceWorkerService:prop_types_default().object,t:prop_types_default().func};const DisplayScimSettingsAdministration_DisplayScimSettingsAdministration=(0,AdministrationWorkspaceContext.Kk)((0,DialogContext.z9)((0,ActionFeedbackContext.ot)((0,ManagedClipboardServiceProvider.nJ)((0,AppContext.L)((0,RoleContext.ou)((0,es.CI)("common")(DisplayScimSettingsAdministration)))))));DisplayScimSettingsAdministration.__docgenInfo={description:"This component allows to display the SCIM settings for the administration",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"adminUsers",docblock:"Get admin users\n@returns {Array} Array of active admin users",modifiers:["get"],params:[],returns:{description:"Array of active admin users",type:{name:"Array"}},description:"Get admin users"},{name:"adminUsersForSelect",docblock:"Get admin users formatted for select input\n@returns {Array<{value: string, label: string}>} Array of admin users formatted for select input",modifiers:["get"],params:[],returns:{description:"Array of admin users formatted for select input",type:{name:"Array",elements:[]}},description:"Get admin users formatted for select input"},{name:"findScimSettings",docblock:"Find the SCIM settings\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find the SCIM settings"},{name:"setDefaultSettings",docblock:"Set SCIM form with default settings.",modifiers:[],params:[],returns:null,description:"Set SCIM form with default settings."},{name:"handleToggleEnabled",docblock:"Enable/Disable the settings",modifiers:[],params:[],returns:null,description:"Enable/Disable the settings"},{name:"handleInputChange",docblock:"Handle form input changes.\n@param {ReactEvent} event The react event\n@returns {void}",modifiers:[],params:[{name:"event",description:"The react event",type:{name:"ReactEvent"},optional:!1}],returns:{type:{name:"void"}},description:"Handle form input changes."},{name:"setFormPropertyValue",docblock:"Set a form property value. Trigger the validation if the form has already been submitted once.\n@param {string} name The property name\n@param {*} parsedValue The parsed value",modifiers:[],params:[{name:"name",description:"The property name",type:{name:"string"},optional:!1},{name:"parsedValue",description:"The parsed value",type:{name:"mixed"},optional:!1}],returns:null,description:"Set a form property value. Trigger the validation if the form has already been submitted once."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is loading or processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is loading or processing"},{name:"handleCopyScimUrl",docblock:"Handle the copy to clipboard button",modifiers:["async"],params:[],returns:null,description:"Handle the copy to clipboard button"},{name:"handleCopySecretToken",docblock:"Handle the copy to clipboard button",modifiers:["async"],params:[],returns:null,description:"Handle the copy to clipboard button"},{name:"handleRegenerateSecretToken",docblock:"Handle the regeneration of the secret token",modifiers:[],params:[],returns:null,description:"Handle the regeneration of the secret token"},{name:"handleFormSubmit",docblock:"Handle form submission that can be triggered when hitting `enter`\n@param {Event} event The html event triggering the form submit.",modifiers:[],params:[{name:"event",description:"The html event triggering the form submit.",type:{name:"Event"},optional:!1}],returns:null,description:"Handle form submission that can be triggered when hitting `enter`"},{name:"save",docblock:"Save the settings.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Save the settings."},{name:"validateForm",docblock:"Validate form.\n@return {EntityValidationError|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"EntityValidationError"}]}},description:"Validate form."},{name:"saveScimSettings",docblock:"Save the SCIM settings.\n@returns {Promise<ScimSettingsEntity|null>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"union",elements:[{name:"ScimSettingsEntity"}]}]}},description:"Save the SCIM settings."},{name:"handleUnexpectedError",docblock:"Handle unexpected error\n@param {Error} error The error\n@returns {Promise<string>} Return the dialog key identifier.",modifiers:[],params:[{name:"error",description:"The error",type:{name:"Error"},optional:!1}],returns:{description:"Return the dialog key identifier.",type:{name:"Promise",elements:[{name:"string"}]}},description:"Handle unexpected error"},{name:"clearContext",docblock:"Puts the state to its default in order to avoid keeping the data users didn't want to save.",modifiers:[],params:[],returns:null,description:"Puts the state to its default in order to avoid keeping the data users didn't want to save."},{name:"scimUrl",docblock:"Return the formatted scim url\n@returns {string} the formated scim url",modifiers:["get"],params:[],returns:{description:"the formated scim url",type:{name:"string"}},description:"Return the formatted scim url"}],displayName:"DisplayScimSettingsAdministration",props:{context:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},roleContext:{description:"",type:{name:"object"},required:!1},roles:{description:"",type:{name:"instanceOf",value:"RolesCollection"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},administrationWorkspaceContext:{description:"",type:{name:"object"},required:!1},scimSettingsServiceWorkerService:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DisplayScimSettingsAdministration/DisplayScimSettingsAdministration.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,ScimSettingsDefined:()=>ScimSettingsDefined,ScimSettingsDisabled:()=>ScimSettingsDisabled,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayScimSettingsAdministration_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),DisplayScimSettingsAdministration=__webpack_require__("./src/react-extension/components/Administration/DisplayScimSettingsAdministration/DisplayScimSettingsAdministration.js"),ExtAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js"),ActionFeedbackContext_test_data=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.test.data.js"),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),AdministrationWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.test.data.js"),DisplayUserDirectoryAdministration_test_data=__webpack_require__("./src/react-extension/components/Administration/DisplayUserDirectoryAdministration/DisplayUserDirectoryAdministration.test.data.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ManagedClipboardServiceProvider_test_data=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js"),scimSettingsEntity=__webpack_require__("./src/shared/models/entity/scimSettings/scimSettingsEntity.js");const defaultScimSettingsDto=(data={})=>({id:(0,v4.A)(),scim_user_id:(0,v4.A)(),setting_id:(0,v4.A)(),secret_token:"pb_ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefg",...data});var RoleContext_test_data=__webpack_require__("./src/react-extension/contexts/RoleContext.test.data.js");function defaultProps(data={}){const roleContext=(0,RoleContext_test_data.Z)(data.roleContext),roles=data.roles||roleContext.getAllRoles();return{context:(0,ExtAppContext_test_data.dO)({users:DisplayUserDirectoryAdministration_test_data.rB}),clipboardContext:(0,ManagedClipboardServiceProvider_test_data.H)(),dialogContext:(0,DialogContext_test_data.L)(),actionFeedbackContext:(0,ActionFeedbackContext_test_data.M)(),administrationWorkspaceContext:(0,AdministrationWorkspaceContext_test_data.M)({selectedAdministration:AdministrationWorkspaceContext.UZ.SCIM}),scimSettingsServiceWorkerService:{findSettings:()=>defaultScimSettingsDto(),createSettings:jest.fn(),updateSettings:jest.fn(),disableSettings:jest.fn()},createPortal:jest.fn,t:text=>text,...data,roleContext,roles}}var react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),TranslationProvider=__webpack_require__("./src/react-extension/components/Common/Internationalisation/TranslationProvider.js"),DisplayAdministrationWorkspaceBreadcrumb=__webpack_require__("./src/react-extension/components/Administration/DisplayAdministrationWorkspaceBreadcrumb/DisplayAdministrationWorkspaceBreadcrumb.js");const DisplayScimSettingsAdministration_test_stories={title:"Components/Administration/DisplayScimSettingsAdministration",component:DisplayScimSettingsAdministration.A,decorators:[(Story,{args})=>react.createElement(react_router.MemoryRouter,{initialEntries:["/app/administration/scim-settings"]},react.createElement(TranslationProvider.A,{loadingPath:"/webAccessibleResources/locales/{{lng}}/{{ns}}.json"},react.createElement("div",{id:"container",className:"page administration"},react.createElement("div",{id:"app",className:"app",style:{margin:"-1rem"}},react.createElement("div",{className:"panel main"},react.createElement("div",{className:"panel left"},react.createElement("div",{className:"sidebar-content"},react.createElement("div",{className:"top-bar-left-navigation"},react.createElement("div",{className:"navigation"})),react.createElement("div",{className:"sidebar-content-left"}))),react.createElement("div",{className:"panel middle"},react.createElement("div",{className:"header"}),react.createElement("div",{className:"middle-right"},react.createElement("div",{className:"breadcrumbs-and-grid"},react.createElement("div",{className:"top-bar"},react.createElement(DisplayAdministrationWorkspaceBreadcrumb.A,{administrationWorkspaceContext:args.administrationWorkspaceContext})),react.createElement("div",{className:"main-page"},react.createElement(Story,args))),react.createElement("div",{className:"help-panel"},react.createElement("div",{className:"sidebar-help"},react.createElement("div",{id:"administration-help-panel"}))))))))))]},Initial={args:defaultProps()},ScimSettingsDefined={args:function defaultScimSettingsConfiguredProps(props={}){return defaultProps({scimSettingsServiceWorkerService:{findSettings:()=>((data={})=>{const scimSettingsDto=defaultScimSettingsDto(data);return scimSettingsDto.secret_token=scimSettingsEntity.A.EMPTY_SECRET_VALUE,scimSettingsDto})({id:(0,v4.A)(),scim_user_id:props.scim_user_id||DisplayUserDirectoryAdministration_test_data.rB.find(user=>"admin@passbolt.com"===user.username).id})},...props})}()},ScimSettingsDisabled={args:function defaultScimSettingsDisabledProps(props={}){return defaultProps({scimSettingsServiceWorkerService:{findSettings:()=>null,createSettings:jest.fn()},...props})}()},__namedExportsOrder=["Initial","ScimSettingsDefined","ScimSettingsDisabled"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"{\n  args: defaultProps()\n}",...Initial.parameters?.docs?.source}}},ScimSettingsDefined.parameters={...ScimSettingsDefined.parameters,docs:{...ScimSettingsDefined.parameters?.docs,source:{originalSource:"{\n  args: defaultScimSettingsConfiguredProps()\n}",...ScimSettingsDefined.parameters?.docs?.source}}},ScimSettingsDisabled.parameters={...ScimSettingsDisabled.parameters,docs:{...ScimSettingsDisabled.parameters?.docs,source:{originalSource:"{\n  args: defaultScimSettingsDisabledProps()\n}",...ScimSettingsDisabled.parameters?.docs?.source}}}},"./src/react-extension/contexts/ActionFeedbackContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>ActionFeedbackContextProvider,b_:()=>ActionFeedbackContext,ot:()=>withActionFeedback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const ActionFeedbackContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({feedbacks:[],displaySuccess:()=>{},displayWarning:()=>{},displayError:()=>{},remove:()=>{}});class ActionFeedbackContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{feedbacks:[],displaySuccess:this.displaySuccess.bind(this),displayWarning:this.displayWarning.bind(this),displayError:this.displayError.bind(this),remove:this.remove.bind(this)}}displaySuccess(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),type:"success",message:feedbackToAdd}]})}displayWarning(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),type:"warning",message:feedbackToAdd}]})}displayError(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),type:"error",message:feedbackToAdd}]})}remove(feedbackToRemove){this.setState({feedbacks:this.state.feedbacks.filter(feedback=>feedbackToRemove.id!==feedback.id)})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Provider,{value:this.state},this.props.children)}}function withActionFeedback(WrappedComponent){return class WithActionFeedback extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Consumer,null,actionFeedbackContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{actionFeedbackContext,...this.props}))}}}ActionFeedbackContextProvider.displayName="ActionFeedbackContextProvider",ActionFeedbackContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any},ActionFeedbackContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"displaySuccess",docblock:"Display the feedback in a success mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a success mode"},{name:"displayWarning",docblock:"Display the feedback in a warning mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a warning mode"},{name:"displayError",docblock:"Display the feedback in a error mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a error mode"},{name:"remove",docblock:"Remove the feedback\n@param feedbackToRemove A feedback",modifiers:[],params:[{name:"feedbackToRemove",description:"A feedback",optional:!1}],returns:null,description:"Remove the feedback"}],displayName:"ActionFeedbackContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/ActionFeedbackContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultActionFeedbackContext(data={}){const defaultContext={displaySuccess:jest.fn(),displayError:jest.fn(),remove:jest.fn()};return Object.assign(defaultContext,data)}__webpack_require__.d(__webpack_exports__,{M:()=>defaultActionFeedbackContext})},"./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{nJ:()=>withClipboard});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js"),_shared_services_serviceWorker_clipboard_clipboardServiceWorkerService__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/services/serviceWorker/clipboard/clipboardServiceWorkerService.js"),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js");const ManagedClipboardServiceContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({copyTemporarily:()=>{},copy:()=>{}});class ManagedClipboardServiceProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.clipboardServiceWorkerService=new _shared_services_serviceWorker_clipboard_clipboardServiceWorkerService__WEBPACK_IMPORTED_MODULE_3__.A(props.context.port)}get defaultState(){return{copyTemporarily:this.copyTemporarily.bind(this),copy:this.copy.bind(this)}}async copyTemporarily(secret,message){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_2__.A)(secret),(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_2__.A)(message),await this.clipboardServiceWorkerService.copyTemporarily(secret),this.props.actionFeedbackContext.displaySuccess(react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,message," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"It will clear in 30 seconds.")))}async copy(secret,message){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_2__.A)(secret),(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_2__.A)(message),await this.clipboardServiceWorkerService.copy(secret),this.props.actionFeedbackContext.displaySuccess(message)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ManagedClipboardServiceContext.Provider,{value:this.state},this.props.children)}}ManagedClipboardServiceProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any.isRequired,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any.isRequired,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_5__.L)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_6__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.CI)("common")(ManagedClipboardServiceProvider)));function withClipboard(WrappedComponent){return class WithClipboard extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ManagedClipboardServiceContext.Consumer,null,clipboard=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{clipboardContext:clipboard,...this.props}))}}}ManagedClipboardServiceProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"copyTemporarily",docblock:"Copies temporarily the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only.\n@param {string} secret\n@param {string} message\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"secret",type:{name:"string"},optional:!1},{name:"message",type:{name:"string"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copies temporarily the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only."},{name:"copy",docblock:"Copies the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only.\n@param {string} secret\n@param {string} message\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"secret",type:{name:"string"},optional:!1},{name:"message",type:{name:"string"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copies the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only."}],displayName:"ManagedClipboardServiceProvider",props:{context:{description:"",type:{name:"any"},required:!0},actionFeedbackContext:{description:"",type:{name:"any"},required:!0},children:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>defaultClipboardContext});__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js");const defaultClipboardContext=data=>({copyTemporarily:jest.fn(),copy:jest.fn(),...data})},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/react-extension/contexts/ExtAppContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dO:()=>defaultAdministratorAppContext,st:()=>defaultAppContext,bC:()=>defaultUserAppContext});var UserSettings=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),Settings_userSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js"),SiteSettings=__webpack_require__("./src/shared/lib/Settings/SiteSettings.js"),Settings_siteSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js"),MockPort=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),MockStorage=__webpack_require__("./src/react-extension/test/mock/MockStorage.js"),userEntity_test_data=__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js"),roleEntity_test_data=__webpack_require__("./src/shared/models/entity/role/roleEntity.test.data.js"),accountEntity_test_data=__webpack_require__("./src/shared/models/entity/account/accountEntity.test.data.js"),accountEntity=__webpack_require__("./src/shared/models/entity/account/accountEntity.js");const defaultCeSiteSettings=siteSettings=>Object.assign({app:{url:"http://127.0.0.1:3001",locale:"en-UK",version:{number:"3.11.0",name:"Regular"},server_timezone:"UTC",session_timeout:24,image_storage:{public_path:"img/public/"}},passbolt:{legal:{privacy_policy:{url:""},terms:{url:"https://www.passbolt.com/terms"}},edition:"ce",plugins:{export:{version:"2.0.0",enabled:!0},import:{version:"2.0.1",enabled:!0,config:{format:["kdbx","csv"]}},previewPassword:{enabled:!0},resourceTypes:{version:"1.0.0",enabled:!0},mobile:{version:"1.0.0",enabled:!0},jwtAuthentication:{version:"3.3.0",enabled:!0},accountRecoveryRequestHelp:{enabled:!0},smtpSettings:{version:"1.0.0",enabled:!0},selfRegistration:{version:"1.0.0",enabled:!0},selenium_api:{version:"2.2.0"},passbolt_test_data:{version:"2.0"},accountSettings:{version:"1.0.0"},inFormIntegration:{version:"1.0.0",enabled:!0},locale:{version:"3.2.0",options:[{locale:"de-DE",label:"Deutsch"},{locale:"en-UK",label:"English"},{locale:"es-ES",label:"Español"},{locale:"fr-FR",label:"Français"},{locale:"it-IT",label:"Italiano (beta)"},{locale:"ja-JP",label:"日本語"},{locale:"ko-KR",label:"한국어 (beta)"},{locale:"lt-LT",label:"Lietuvių"},{locale:"nl-NL",label:"Nederlands"},{locale:"pl-PL",label:"Polski"},{locale:"pt-BR",label:"Português Brasil (beta)"},{locale:"ro-RO",label:"Română (beta)"},{locale:"ru-RU",label:"Pусский (beta)"},{locale:"sl-SI",label:"Slovenščina (beta)"},{locale:"sv-SE",label:"Svenska"},{locale:"uk-UA",label:"Українська (beta)"},{locale:"cs-CZ",label:"Čeština (beta)"}]},rememberMe:{version:"2.0.0",options:{300:"5 minutes",900:"15 minutes",1800:"30 minutes",3600:"1 hour","-1":"until I log out"}},emailNotificationSettings:{version:"1.1.0",enabled:!0},emailDigest:{version:"1.0.0",enabled:!0},reports:{version:"1.0.0",enabled:!0},passwordGenerator:{version:"3.3.0",enabled:!0},multiFactorAuthentication:{version:"1.1.0",enabled:!0},log:{version:"1.0.1",enabled:!0},metadata:{version:"1.0.0",enabled:!0,isInBeta:!0}}}},siteSettings);var rbacsCollection=__webpack_require__("./src/shared/models/entity/rbac/rbacsCollection.js"),rbacsCollection_test_data=__webpack_require__("./src/shared/models/entity/rbac/rbacsCollection.test.data.js");function defaultAppContext(appContext={},isCommunityEdition=!1){const userSettings=new UserSettings.A(Settings_userSettings.A),defaultAppContext1={locale:"en-UK",userSettings,siteSettings:isCommunityEdition?new SiteSettings.A(defaultCeSiteSettings()):new SiteSettings.A(Settings_siteSettings.A),port:new MockPort.A,storage:new MockStorage.A,account:new accountEntity.A((0,accountEntity_test_data.q)()),loggedInUser:{id:userSettings.id,role:{id:roleEntity_test_data.ES,name:"admin"}},users:[],roles:[{id:roleEntity_test_data.ES,name:"admin"},{id:roleEntity_test_data.ol,name:"user"}],rbacs:new rbacsCollection.A([]),setContext:jest.fn(),foldersMapById:[],getHierarchyFolderCache:jest.fn(()=>[])};return Object.assign(defaultAppContext1,appContext)}const defaultUserAppContext=(data={})=>{const siteSettings=new SiteSettings.A(Settings_siteSettings.A);return{locale:"en-UK",userSettings:new UserSettings.A(Settings_userSettings.A),siteSettings,port:new MockPort.A,storage:new MockStorage.A,loggedInUser:(0,userEntity_test_data.cI)({},{withRole:!0}),users:[],roles:[(0,roleEntity_test_data.Dm)(),(0,roleEntity_test_data.bd)()],resources:[],folders:[],setContext:jest.fn(),rbacs:new rbacsCollection.A((0,rbacsCollection_test_data.rB)()),foldersMapById:[],getHierarchyFolderCache:jest.fn(()=>[]),...data}},defaultAdministratorAppContext=(data={})=>defaultUserAppContext({loggedInUser:(0,userEntity_test_data.HI)({},{withRole:!0}),...data})},"./src/react-extension/contexts/RoleContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ou:()=>withRoles});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_shared_models_entity_role_rolesCollection__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/role/rolesCollection.js"),_shared_services_serviceWorker_role_roleServiceWorkerService__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/services/serviceWorker/role/roleServiceWorkerService.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/context/AppContext/AppContext.js");const RoleContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({getRole:()=>{},getAllRoles:()=>{},refreshRoles:()=>{}});class RoleContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState(),this.runningLocalStorageUpdatePromise=null,this.roleServiceWorkerService=new _shared_services_serviceWorker_role_roleServiceWorkerService__WEBPACK_IMPORTED_MODULE_3__.Ay(props.context.port),this.initEventHandlers()}defaultState(){return{rolesCollection:null,getRole:this.getRole.bind(this),getAllRoles:this.getAllRoles.bind(this),refreshRoles:this.refreshRoles.bind(this)}}componentDidMount(){this.props.context.storage.onChanged.addListener(this.handleStorageChange)}componentWillUnmount(){this.props.context.storage.onChanged.removeListener(this.handleStorageChange)}initEventHandlers(){this.handleStorageChange=this.handleStorageChange.bind(this)}handleStorageChange(changes){changes[this.storageKey]&&this.set(changes[this.storageKey].newValue)}set(rolesCollectionDto){const rolesCollection=new _shared_models_entity_role_rolesCollection__WEBPACK_IMPORTED_MODULE_2__.A(rolesCollectionDto);this.setState({rolesCollection})}get storageKey(){return"roles"}getRole(roleId){const role=this.state.rolesCollection?.getById(roleId);return role||(this.refreshRoles(),null)}async loadLocalStorage(){const storageData=await this.props.context.storage.local.get([this.storageKey]);storageData[this.storageKey]?this.set(storageData[this.storageKey]):this.refreshRoles()}getAllRoles(){return this.state.rolesCollection?this.state.rolesCollection:(this.loadLocalStorage(),null)}async refreshRoles(){null===this.runningLocalStorageUpdatePromise?(this.runningLocalStorageUpdatePromise=this.roleServiceWorkerService.updateResourceLocalStorage(),await this.runningLocalStorageUpdatePromise,this.runningLocalStorageUpdatePromise=null):await this.runningLocalStorageUpdatePromise}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(RoleContext.Provider,{value:this.state},this.props.children)}}RoleContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any},RoleContextProvider.displayName="RoleContextProvider";(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__.L)(RoleContextProvider);function withRoles(WrappedComponent){return class withRoles extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(RoleContext.Consumer,null,context=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{roleContext:context,roles:context.getAllRoles(),...this.props}))}}}RoleContextProvider.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:[],params:[],returns:null,description:"Returns the default component state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"handleStorageChange",docblock:"Handles update of the metadata type settings in the local storage.",modifiers:[],params:[{name:"changes",optional:!1}],returns:null,description:"Handles update of the metadata type settings in the local storage."},{name:"set",docblock:"Set roles from dto.\n@param {Array} rolesCollectionDto The roles collection dto to set.\n@private",modifiers:[],params:[{name:"rolesCollectionDto",description:"The roles collection dto to set.",type:{name:"Array"},optional:!1}],returns:null,description:"Set roles from dto."},{name:"storageKey",docblock:"Get the storage key.\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the storage key."},{name:"getRole",docblock:"Get a role given its id.\nIf the role is not find, returns null and triggers a refresh of the local storage\n@param {string} roleId\n@returns {RoleEntity|null}",modifiers:[],params:[{name:"roleId",type:{name:"string"},optional:!1}],returns:{type:{name:"union",elements:[{name:"RoleEntity"}]}},description:"Get a role given its id.\nIf the role is not find, returns null and triggers a refresh of the local storage"},{name:"loadLocalStorage",docblock:"Load the roles from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation.\n@returns {Promise<void>}\n@private",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the roles from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation."},{name:"getAllRoles",docblock:"Returns all known roles.\n@returns {RolesCollection|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"RolesCollection"}]}},description:"Returns all known roles."},{name:"refreshRoles",docblock:"Triggers a role local storage update.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Triggers a role local storage update."}],displayName:"RoleContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/RoleContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>defaultRoleContext});var _shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js"),_shared_models_entity_role_rolesCollection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/role/rolesCollection.js"),_shared_models_entity_role_rolesCollection_test_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/role/rolesCollection.test.data.js");const defaultRoleContext=(data={})=>({refreshRoles:()=>{},getAllRoles:()=>new _shared_models_entity_role_rolesCollection__WEBPACK_IMPORTED_MODULE_1__.A(_shared_models_entity_role_rolesCollection_test_data__WEBPACK_IMPORTED_MODULE_2__.R),getRole:roleId=>_shared_models_entity_role_rolesCollection_test_data__WEBPACK_IMPORTED_MODULE_2__.R.filter(r=>roleId===r.id).map(roleDto=>new _shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_0__.A(roleDto)).at(0)||null,...data})},"./src/react-extension/test/mock/MockStorage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class LocalStorage{constructor(changeCallbacks){this.storage={},this.changeCallbacks=changeCallbacks}get(keys){return keys.reduce((accumulator,key)=>(this.storage[key]&&(accumulator[key]=this.storage[key]),accumulator),{})}set(data){const storageChangeEventValue={};Object.keys(data).forEach(key=>{this.storage[key]=data[key],storageChangeEventValue[key]={},storageChangeEventValue[key].newValue=data[key]}),this.changeCallbacks.forEach(callback=>callback(storageChangeEventValue))}}const __WEBPACK_DEFAULT_EXPORT__=class MockStorage{constructor(){this.changeCallbacks=[],this.local=new LocalStorage(this.changeCallbacks),this.onChanged={addListener:listener=>{this.changeCallbacks.push(listener)},removeListener:listener=>{const listenerIndex=this.changeCallbacks.indexOf(listener);listenerIndex>-1&&this.changeCallbacks.splice(listenerIndex,1)}}}}},"./src/shared/components/Password/Password.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/img/svg/eye_open.svg"),_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/img/svg/eye_close.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class Password extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{viewPassword:!1,hasPassphraseFocus:!1,isPassphraseActive:!1}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordInputFocus=this.handlePasswordInputFocus.bind(this),this.handlePasswordInputBlur=this.handlePasswordInputBlur.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this)}handleInputChange(event){this.props.onChange&&this.props.onChange(event)}handlePasswordInputFocus(){this.setState({hasPassphraseFocus:!0})}handlePasswordInputBlur(){this.setState({hasPassphraseFocus:!1})}handleViewPasswordButtonClick(){this.props.disabled||this.setState({viewPassword:!this.state.viewPassword})}get securityTokenStyle(){const inverseStyle={background:this.props.securityToken.textColor,color:this.props.securityToken.backgroundColor},fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor};return this.state.hasPassphraseFocus?inverseStyle:fullStyle}get passphraseInputStyle(){if(!this.state.hasPassphraseFocus)return;const{backgroundColor}=this.props.securityToken,textColor=this.getContrastTextColor(backgroundColor);return{background:backgroundColor,color:textColor,"--passphrase-placeholder-color":textColor}}get previewStyle(){if(!this.state.hasPassphraseFocus)return;const{backgroundColor}=this.props.securityToken;return{"--icon-color":this.getContrastTextColor(backgroundColor),"--icon-background-color":backgroundColor}}getContrastTextColor(backgroundColor){const hex=backgroundColor.replace("#",""),bigint=parseInt(hex,16);return(.299*(bigint>>16&255)+.587*(bigint>>8&255)+.114*(255&bigint))/255>.5?"var(--Token-Token-text-and-icon)":"var(--Token-Token-text-and-icon-reversed)"}handleMouseDown(){this.setState({isPassphraseActive:!0})}handleMouseUp(){this.setState({isPassphraseActive:!1})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input password ${this.props.disabled?"disabled":""} ${this.state.hasPassphraseFocus?"":"no-focus"} ${this.state.isPassphraseActive?"active":""} ${this.props.securityToken?"security":""}`,style:this.props.securityToken?this.passphraseInputStyle:void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:this.props.id,name:this.props.name,maxLength:"4096",placeholder:this.props.placeholder,type:this.state.viewPassword&&!this.props.disabled?"text":"password",onKeyUp:this.props.onKeyUp,value:this.props.value,onFocus:this.handlePasswordInputFocus,onBlur:this.handlePasswordInputBlur,onChange:this.handleInputChange,disabled:this.props.disabled,readOnly:this.props.readOnly,autoComplete:this.props.autoComplete,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,"aria-required":!0,ref:this.props.inputRef}),this.props.preview&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-view-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleViewPasswordButtonClick,style:this.props.securityToken?this.previewStyle:void 0,className:"password-view infield button-transparent "+(this.props.disabled?"disabled":"")},!this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_2__.A,{className:"svg-icon eye-open"}),this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_3__.A,{className:"svg-icon eye-close"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"View")))),this.props.securityToken&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"security-token-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"security-token",style:this.securityTokenStyle},this.props.securityToken.code)))}}Password.defaultProps={id:"",name:"",autoComplete:"off"},Password.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,id:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,name:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,value:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,autoComplete:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,inputRef:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,disabled:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,preview:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onKeyUp:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,securityToken:prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({code:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,backgroundColor:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,textColor:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string})};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.CI)("common")(Password);Password.__docgenInfo={description:"This component represent a password input field with some additional properties",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handlePasswordInputFocus",docblock:"Whenever the user focus on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user focus on the password input"},{name:"handlePasswordInputBlur",docblock:"Whenever the user blurs on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user blurs on the password input"},{name:"handleViewPasswordButtonClick",docblock:"Handle view password button click.",modifiers:[],params:[],returns:null,description:"Handle view password button click."},{name:"securityTokenStyle",docblock:"Returns the style of the security token (color and text color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of the security token (color and text color)"},{name:"passphraseInputStyle",docblock:"Get the passphrase input style.\n@return {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get the passphrase input style."},{name:"previewStyle",docblock:"Returns the style of preview (icon color and icon background color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of preview (icon color and icon background color)"},{name:"getContrastTextColor",docblock:"Calculate the luminance of a color and return the appropriate text color variable.\n@param {string} backgroundColor - The background color in hex format.\n@returns {string} - The CSS variable for text color.",modifiers:[],params:[{name:"backgroundColor",description:"The background color in hex format.",type:{name:"string"},optional:!1}],returns:{description:"The CSS variable for text color.",type:{name:"string"}},description:"Calculate the luminance of a color and return the appropriate text color variable."},{name:"handleMouseDown",docblock:"Handle the mouse down to set active item",modifiers:[],params:[],returns:null,description:"Handle the mouse down to set active item"},{name:"handleMouseUp",docblock:"Handle the mouse down to set active item to false",modifiers:[],params:[],returns:null,description:"Handle the mouse down to set active item to false"}],displayName:"Password",props:{id:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},name:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},autoComplete:{defaultValue:{value:'"off"',computed:!1},description:"",type:{name:"string"},required:!1},context:{description:"",type:{name:"any"},required:!1},value:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},inputRef:{description:"",type:{name:"object"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},readOnly:{description:"",type:{name:"bool"},required:!1},preview:{description:"",type:{name:"bool"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},onKeyUp:{description:"",type:{name:"func"},required:!1},securityToken:{description:"",type:{name:"shape",value:{code:{name:"string",required:!1},backgroundColor:{name:"string",required:!1},textColor:{name:"string",required:!1}}},required:!1}}}},"./src/shared/models/entity/account/accountEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js"),_abstract_entityV2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js"),uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v5.js");class AccountEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_1__.A{marshall(){Object.assign(this._props,{type:AccountEntity.TYPE_ACCOUNT})}static getSchema(){return{type:"object",required:["type","domain","user_id","username","first_name","last_name","user_public_armored_key","server_public_armored_key"],properties:{type:{type:"string",enum:[AccountEntity.TYPE_ACCOUNT]},domain:{type:"string"},user_id:{type:"string",format:"uuid"},user_key_fingerprint:{type:"string",minLength:40,maxLength:40,pattern:/^[A-F0-9]{40}$/},user_public_armored_key:{type:"string"},server_public_armored_key:{type:"string"},username:{type:"string"},first_name:{type:"string"},last_name:{type:"string"},locale:{type:"string",pattern:/^[a-z]{2}-[A-Z]{2}$/,nullable:!0},role_name:{..._shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_0__.A.getSchema().properties.name,nullable:!0}}}}get id(){return this.domain&&this.userId?(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(`${this.domain}${this.userId}`,"d5447ca1-950f-459d-8b20-86ddfdd0f922"):null}get domain(){return this._props.domain}get userId(){return this._props.user_id}static get ENTITY_NAME(){return"Account"}static get TYPE_ACCOUNT(){return"Account"}}const __WEBPACK_DEFAULT_EXPORT__=AccountEntity},"./src/shared/models/entity/account/accountEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>defaultAccountDto});var _accountEntity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/account/accountEntity.js"),_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./test/fixture/pgpKeys/keys.js");const defaultAccountDto=(data={})=>{data=JSON.parse(JSON.stringify(data));const defaultData={type:_accountEntity__WEBPACK_IMPORTED_MODULE_0__.A.TYPE_ACCOUNT,domain:"https://passbolt.local",user_id:_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__.u.ada.userId,username:"ada@passbolt.com",first_name:"Ada",last_name:"Lovelace",user_key_fingerprint:_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__.u.ada.fingerprint,user_public_armored_key:_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__.u.ada.public,user_private_armored_key:_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__.u.ada.private,server_public_armored_key:_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__.u.server.public,locale:"de-DE"};return Object.assign(defaultData,data)}},"./src/shared/models/entity/role/rolesCollection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _roleEntity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js"),_abstract_entityV2Collection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityV2Collection.js");class RolesCollection extends _abstract_entityV2Collection__WEBPACK_IMPORTED_MODULE_1__.A{get entityClass(){return _roleEntity__WEBPACK_IMPORTED_MODULE_0__.A}constructor(dtos=[],options={}){super(dtos,options)}static getSchema(){return{type:"array",items:_roleEntity__WEBPACK_IMPORTED_MODULE_0__.A.getSchema(),maxItems:5}}validateBuildRules(item,options={}){this.assertNotExist("id",item._props.id,{haystackSet:options?.uniqueIdsSetCache}),this.assertNotExist("name",item._props.name,{haystackSet:options?.uniqueNamesSetCache})}pushMany(data,entityOptions={},options={}){const uniqueIdsSetCache=new Set(this.extract("id")),uniqueNamesSetCache=new Set(this.extract("name"));options={onItemPushed:item=>{uniqueIdsSetCache.add(item._props.id),uniqueNamesSetCache.add(item._props.name)},validateBuildRules:{...options?.validateBuildRules,uniqueIdsSetCache,uniqueNamesSetCache},...options},super.pushMany(data,entityOptions,options)}filterByCustomRole(){this.filterByCallback(role=>!role.isAReservedRole())}filterOutGuestRole(){this.filterByCallback(role=>!role.isGuest())}getById(id){return this._items.find(role=>role.id===id)||null}static get ENTITY_NAME(){return"Roles"}}const __WEBPACK_DEFAULT_EXPORT__=RolesCollection},"./src/shared/models/entity/role/rolesCollection.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>rolesCollectionDto});var _roleEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/role/roleEntity.test.data.js");const rolesCollectionDto=[(0,_roleEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Dm)(),(0,_roleEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.bd)(),(0,_roleEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.j0)(),(0,_roleEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.qm)()]},"./src/shared/models/entity/scimSettings/scimSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),_abstract_entityV2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js"),_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");class ScimSettingsEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_1__.A{static getSchema(){return{type:"object",required:["scim_user_id"],properties:{id:{type:"string",format:"uuid",nullable:!0},scim_user_id:{type:"string",format:"uuid"},setting_id:{type:"string",format:"uuid",nullable:!0},secret_token:{type:"string",length:46,pattern:"^pb_[A-Za-z0-9]{43}$",nullable:!0}}}}toDto(){return Object.assign({},this._props)}get id(){return this._props.id||null}get scimUserId(){return this._props.scim_user_id}get settingId(){return this._props.setting_id}get secretToken(){return this._props.secret_token||null}set secretToken(secretToken){_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validateProp("secret_token",secretToken,this.cachedSchema.properties.secret_token),this._props.secret_token=secretToken}static get SECRET_TOKEN_LENGTH(){return 46}static get EMPTY_SECRET_VALUE(){return"pb_0000000000000000000000000000000000000000000"}static generateScimSecretToken(){const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",secretLength=ScimSettingsEntity.SECRET_TOKEN_LENGTH-3,secret=[],randomValues=new Uint8Array(2*secretLength);for(;secret.length<secretLength;){window.crypto.getRandomValues(randomValues);for(let i=0;i<randomValues.length&&secret.length<secretLength;i++){const v=randomValues[i];v<248&&secret.push(chars[v%62])}}return"pb_"+secret.join("")}static createFromScimSettingsFind(scimSettingsDto){const scimSettingsEntity=new ScimSettingsEntity(scimSettingsDto),entityValidationError=new _abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_2__.A;if(scimSettingsEntity.id||entityValidationError.addError("id","required","SCIM settings id is mandatory"),scimSettingsEntity.secretToken&&entityValidationError.addError("secretToken","empty","SCIM settings should not contain secret_token"),entityValidationError.hasErrors())throw entityValidationError;return scimSettingsEntity.secretToken="pb_0000000000000000000000000000000000000000000",scimSettingsEntity}static createFromScimSettingsCreation(scimSettingsDto){const scimSettingsEntity=new ScimSettingsEntity(scimSettingsDto),entityValidationError=new _abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_2__.A;if(scimSettingsEntity.secretToken||entityValidationError.addError("secretToken","required","SCIM settings secret_token is mandatory."),entityValidationError.hasErrors())throw entityValidationError;return scimSettingsEntity}static createFromScimSettingsUpdate(scimSettingsDto){delete scimSettingsDto.setting_id;return new ScimSettingsEntity(scimSettingsDto)}}const __WEBPACK_DEFAULT_EXPORT__=ScimSettingsEntity},"./src/shared/services/serviceWorker/clipboard/clipboardServiceWorkerService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ClipboardServiceWorkerService});var validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js");class ClipboardServiceWorkerService{constructor(port){this.port=port}async copyTemporarily(clipboardContent){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__.A)(clipboardContent),await this.port.request("passbolt.clipboard.copy-temporarily",clipboardContent)}async copy(clipboardContent){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__.A)(clipboardContent),await this.port.request("passbolt.clipboard.copy",clipboardContent)}async cancelClipboardFlush(){await this.port.request("passbolt.clipboard.cancel-content-flush")}}},"./src/shared/services/serviceWorker/role/roleServiceWorkerService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>RoleServiceWorkerService});var _models_entity_role_rolesCollection__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/role/rolesCollection.js");class RoleServiceWorkerService{constructor(port){this.port=port}async findAll(){const rolesCollection=await this.port.request("passbolt.role.get-all");return new _models_entity_role_rolesCollection__WEBPACK_IMPORTED_MODULE_0__.A(rolesCollection)}async updateResourceLocalStorage(){await this.port.request("passbolt.role.update-local-storage")}}},"./src/shared/utils/portals.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>createSafePortal});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/index.js");function createSafePortal(children,domNode,key){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,domNode&&(0,react_dom__WEBPACK_IMPORTED_MODULE_1__.createPortal)(children,domNode,key))}createSafePortal.__docgenInfo={description:'Create a portal in a "safe" mode.\n"Safe" mode only means that if the given HTML element doesn\'t exist, the method doesn\'t crash.\nIt will simply ignore the rendering if it happens.\n@param {ReactNode} children the elements to render in the portal\n@param {Element | DocumentFragment} domNode the target where to render the children.\n@param {null | string} [key] a React compatible key to be passed to `createPortal` if any\n@returns {JSX}',methods:[],displayName:"createSafePortal"}},"./src/shared/utils/userUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$2:()=>getUserFormattedName,$L:()=>isMissingMetadataKey,B7:()=>isUserSuspended,CD:()=>getUserStatus,bz:()=>isAccountRecoveryRequested});const USER_STATUS_ACTIVE="active",USER_STATUS_SUSPENDED="suspended",USER_STATUS_DELETED="deleted",isUserSuspended=user=>Boolean(user?.disabled&&new Date(user.disabled)<=new Date),isAccountRecoveryRequested=user=>Boolean(user?.pending_account_recovery_request),isMissingMetadataKey=user=>user?.missing_metadata_key_ids?.length>0,getUserStatus=user=>{if(Boolean(user?.deleted))return USER_STATUS_DELETED;return isUserSuspended(user)?USER_STATUS_SUSPENDED:USER_STATUS_ACTIVE},getUserFormattedName=(user,t=null,options={withUsername:!1})=>{const profile=user?.profile;if(!profile)return t("Unknown user");return Boolean(profile.first_name)||Boolean(profile.last_name)?options.withUsername?`${profile.first_name} ${profile.last_name} (${user.username})`:`${profile.first_name} ${profile.last_name}`:t("Unknown user")}}}]);