/*! For license information please see 9136.5e7b5cf6.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[9136],{"./src/shared/components/Password/Password.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class Password extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{viewPassword:!1,hasPassphraseFocus:!1}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordInputFocus=this.handlePasswordInputFocus.bind(this),this.handlePasswordInputBlur=this.handlePasswordInputBlur.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this)}handleInputChange(event){this.props.onChange&&this.props.onChange(event)}handlePasswordInputFocus(){this.setState({hasPassphraseFocus:!0})}handlePasswordInputBlur(){this.setState({hasPassphraseFocus:!1})}handleViewPasswordButtonClick(){this.props.disabled||this.setState({viewPassword:!this.state.viewPassword})}get securityTokenStyle(){const inverseStyle={background:this.props.securityToken.textColor,color:this.props.securityToken.backgroundColor},fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor};return this.state.hasPassphraseFocus?inverseStyle:fullStyle}get passphraseInputStyle(){const fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor,"--passphrase-placeholder-color":this.props.securityToken.textColor};return this.state.hasPassphraseFocus?fullStyle:undefined}get previewStyle(){const fullStyle={"--icon-color":this.props.securityToken.textColor,"--icon-background-color":this.props.securityToken.backgroundColor};return this.state.hasPassphraseFocus?fullStyle:void 0}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input password ${this.props.disabled?"disabled":""} ${this.state.hasPassphraseFocus?"":"no-focus"} ${this.props.securityToken?"security":""}`,style:this.props.securityToken?this.passphraseInputStyle:void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:this.props.id,name:this.props.name,maxLength:"4096",placeholder:this.props.placeholder,type:this.state.viewPassword&&!this.props.disabled?"text":"password",onKeyUp:this.props.onKeyUp,value:this.props.value,onFocus:this.handlePasswordInputFocus,onBlur:this.handlePasswordInputBlur,onChange:this.handleInputChange,disabled:this.props.disabled,readOnly:this.props.readOnly,autoComplete:this.props.autoComplete,"aria-required":!0,ref:this.props.inputRef}),this.props.preview&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-view-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleViewPasswordButtonClick,style:this.props.securityToken?this.previewStyle:void 0,className:"password-view infield button-transparent "+(this.props.disabled?"disabled":"")},!this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"eye-open"}),this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"eye-close"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"View")))),this.props.securityToken&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"security-token-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"security-token",style:this.securityTokenStyle},this.props.securityToken.code)))}}Password.defaultProps={id:"",name:"",autoComplete:"off"},Password.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,id:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,name:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,autoComplete:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,inputRef:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,preview:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,onKeyUp:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,securityToken:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({code:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,backgroundColor:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,textColor:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string})};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(Password);Password.__docgenInfo={description:"This component represent a password input field with some additional properties",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handlePasswordInputFocus",docblock:"Whenever the user focus on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user focus on the password input"},{name:"handlePasswordInputBlur",docblock:"Whenever the user blurs on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user blurs on the password input"},{name:"handleViewPasswordButtonClick",docblock:"Handle view password button click.",modifiers:[],params:[],returns:null,description:"Handle view password button click."},{name:"securityTokenStyle",docblock:"Returns the style of the security token (color and text color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of the security token (color and text color)"},{name:"passphraseInputStyle",docblock:"Get the passphrase input style.\n@return {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get the passphrase input style."},{name:"previewStyle",docblock:"Returns the style of preview (icon color and icon background color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of preview (icon color and icon background color)"}],displayName:"Password",props:{id:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},name:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},autoComplete:{defaultValue:{value:'"off"',computed:!1},description:"",type:{name:"string"},required:!1},context:{description:"",type:{name:"any"},required:!1},value:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},inputRef:{description:"",type:{name:"object"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},readOnly:{description:"",type:{name:"bool"},required:!1},preview:{description:"",type:{name:"bool"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},onKeyUp:{description:"",type:{name:"func"},required:!1},securityToken:{description:"",type:{name:"shape",value:{code:{name:"string",required:!1},backgroundColor:{name:"string",required:!1},textColor:{name:"string",required:!1}}},required:!1}}}},"./src/shared/lib/SecretGenerator/SecretGenerator.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>SecretGenerator});var SecretGeneratorComplexity=__webpack_require__("./src/shared/lib/SecretGenerator/SecretGeneratorComplexity.js");const charactersToExclude=["O","l","|","I","0","1"];function randomNumberRange(min,max){const arr=new Uint32Array(1);window.crypto.getRandomValues(arr);const random=arr[0]/4294967296;return Math.floor(random*(max-min+1))+min}const PasswordGenerator={generate:function generate(configuration){const maskNameList=Object.entries(SecretGeneratorComplexity.MU),availableMasks=[];maskNameList.forEach((([maskName])=>{configuration[maskName]&&availableMasks.push(SecretGeneratorComplexity.MU[maskName])}));const secretLength=configuration.length;if(!(availableMasks.length>0&&secretLength>=configuration.min_length&&secretLength<=configuration.max_length))return"";let mask=[];mask=availableMasks.reduce(((mask,currentMask)=>[...mask,...currentMask.characters]),[]),configuration.exclude_look_alike_chars&&(mask=function excludeLookAlikeCharacters(characterArray){return characterArray?characterArray.reduce(((newCharacterArray,character)=>(charactersToExclude.includes(character)||newCharacterArray.push(character),newCharacterArray)),[]):characterArray}(mask));let secret="",attempt=0,secretEntropy=0;const goalEntropy=Math.floor(SecretGeneratorComplexity.CH.calculEntropy(secretLength,mask.length));do{let newSecret="";for(let i=0;i<secretLength;i++)newSecret+=mask[randomNumberRange(0,mask.length-1)];const newSecretEntropy=SecretGeneratorComplexity.CH.entropyPassword(newSecret);newSecretEntropy>secretEntropy&&(secret=newSecret,secretEntropy=newSecretEntropy)}while(secretEntropy<goalEntropy&&attempt++<10);return secret}};var PassphraseGeneratorWords=__webpack_require__("./src/shared/lib/SecretGenerator/PassphraseGeneratorWords.js");function extractWordWithCase(words,wordCase){const extractWord=()=>words[function PassphraseGenerator_randomNumberRange(min,max){const arr=new Uint32Array(1);window.crypto.getRandomValues(arr);const random=arr[0]/4294967296;return Math.floor(random*(max-min+1))+min}(0,words.length-1)];switch(wordCase){case"lowercase":return extractWord().toLowerCase();case"uppercase":return extractWord().toUpperCase();case"camelcase":return(word=extractWord()).charAt(0).toUpperCase()+word.slice(1);default:return extractWord()}var word}const PassphraseGenerator={generate:configuration=>{const wordCount=configuration.words;if(!(wordCount>=configuration.min_words&&wordCount<=configuration.max_words))return"";const wordCase=configuration.word_case,words=PassphraseGeneratorWords.A["en-UK"];return Array.from({length:wordCount},(()=>extractWordWithCase(words,wordCase))).join(configuration.word_separator)},detectPassphrase:function detectPassphrase(secret){const passwordDetected={isPassphrase:!1};if(!secret)return passwordDetected;const separatorsSecret=PassphraseGeneratorWords.A["en-UK"].reduce(((result,word)=>{const remainingSecret=result.remainingSecret.replace(new RegExp(word,"g"),""),newNumberReplacement=(result.remainingSecret.length-remainingSecret.length)/word.length;return{numberReplacement:result.numberReplacement+newNumberReplacement,remainingSecret}}),{numberReplacement:0,remainingSecret:secret.toLowerCase()}),remainingSecret=separatorsSecret.remainingSecret,numberSeparators=separatorsSecret.numberReplacement-1;if(1===numberSeparators){return-1===secret.indexOf(remainingSecret)||secret.startsWith(remainingSecret)||secret.endsWith(remainingSecret)?passwordDetected:{numberWords:2,separator:remainingSecret,isPassphrase:!0}}if(0==remainingSecret.length)return{numberWords:separatorsSecret.numberReplacement,separator:"",isPassphrase:!0};if(remainingSecret.length%numberSeparators!=0)return passwordDetected;const lengthSeparators=remainingSecret.length/numberSeparators,firstSeparator=remainingSecret.substring(0,lengthSeparators),firstSeparatorRegexEscaped=String(firstSeparator).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1"),isPassphrase=0===remainingSecret.replace(new RegExp(firstSeparatorRegexEscaped,"g"),"").length;return{numberWords:separatorsSecret.numberReplacement,separator:firstSeparator,isPassphrase:isPassphrase&&!secret.startsWith(firstSeparator)&&!secret.endsWith(firstSeparator)}}},SecretGenerator={generate:configuration=>{const type=configuration.default_generator;return"password"===type?PasswordGenerator.generate(configuration.password_generator_settings):"passphrase"===type?PassphraseGenerator.generate(configuration.passphrase_generator_settings):void 0},entropy:secret=>{const{numberWords,separator,isPassphrase}=PassphraseGenerator.detectPassphrase(secret);return isPassphrase?SecretGeneratorComplexity.CH.entropyPassphrase(numberWords,separator):SecretGeneratorComplexity.CH.entropyPassword(secret)}}},"./src/shared/services/api/secrets/pownedService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class PownedService{constructor(port){this.port=port}async evaluateSecret(secret){let inDictionary=!0,isPwnedServiceAvailable=!0;try{inDictionary=await this.checkIfPasswordPowned(secret)}catch(error){inDictionary=!1,isPwnedServiceAvailable=!1}return{inDictionary,isPwnedServiceAvailable}}async checkIfPasswordPowned(password){return await this.port.request("passbolt.secrets.powned-password",password)>0}}}}]);