/*! For license information please see react-extension-components-Administration-DisplayContentTypesEncryptedMetadataAdministration-DisplayContentTypesEncryptedMetadataAdministration-test-stories.59369465.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[9629],{"./src/react-extension/components/Administration/DisplayContentTypesEncryptedMetadataAdministration/DisplayContentTypesEncryptedMetadataAdministration.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,WithValidationError:()=>WithValidationError,WithWarnings:()=>WithWarnings,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayContentTypesEncryptedMetadataAdministration_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),dist=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs"),ActionFeedbackContext_test_data=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.test.data.js"),AdministrationWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.test.data.js"),ExtAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js"),metadataTypesSettingsEntity_test_data=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.test.data.js"),metadataTypesSettingsEntity=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js");function defaultProps(props={}){return{context:(0,ExtAppContext_test_data.dO)(),dialogContext:(0,DialogContext_test_data.L)(),administrationWorkspaceContext:(0,AdministrationWorkspaceContext_test_data.M)(),actionFeedbackContext:(0,ActionFeedbackContext_test_data.M)(),metadataSettingsServiceWorkerService:{getOrFindTypesSettings:()=>new metadataTypesSettingsEntity.Ay((0,metadataTypesSettingsEntity_test_data.uc)()),saveTypesSettings:jest.fn((settings=>new metadataTypesSettingsEntity.Ay(settings.toDto())))},createPortal:jest.fn,resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)()),t:text=>text,...props}}var es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),entityValidationError=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");const formProperties=["default_resource_types","allow_creation_of_v5_resources","allow_creation_of_v4_resources","allow_v4_v5_upgrade","allow_v5_v4_downgrade"];class MetadataTypesSettingsFormEntity extends metadataTypesSettingsEntity.Ay{toFormDto(){return formProperties.reduce(((result,prop)=>(void 0!==this._props[prop]&&(result[prop]=this._props[prop]),result)),{})}verifyHealth(resourceTypes){let result=null;if(void 0===resourceTypes)return result;if(!(resourceTypes instanceof resourceTypesCollection.A))throw new TypeError("The parameter 'resourceTypes' is not a valid 'ResourceTypesCollection' type.");const hasV4ResourceTypes=resourceTypes.hasSomeOfVersion(metadataTypesSettingsEntity.Sr),hasV5ResourceTypes=resourceTypes.hasSomeOfVersion(metadataTypesSettingsEntity.LP);return this.allowCreationOfV4Resources&&!hasV4ResourceTypes&&(result=result||new entityValidationError.A,result.addError("allow_creation_of_v4_resources","resource_types_deleted","Resource types v4 are deleted.")),this.isDefaultResourceTypeV4&&!hasV4ResourceTypes&&(result=result||new entityValidationError.A,result.addError("default_resource_types","resource_types_v4_deleted","Resource types v4 are deleted.")),this.allowCreationOfV5Resources&&!hasV5ResourceTypes&&(result=result||new entityValidationError.A,result.addError("allow_creation_of_v5_resources","resource_types_deleted","Resource types v5 are deleted.")),this.isDefaultResourceTypeV5&&!hasV5ResourceTypes&&(result=result||new entityValidationError.A,result.addError("default_resource_types","resource_types_v5_deleted","Resource types v5 are deleted.")),this.allowV5V4Downgrade&&!hasV4ResourceTypes&&(result=result||new entityValidationError.A,result.addError("allow_v5_v4_downgrade","resource_types_deleted","Resource types v4 are deleted.")),this.allowV5V4Downgrade&&!this.allowCreationOfV4Resources&&(result=result||new entityValidationError.A,result.addError("allow_v5_v4_downgrade","allow_creation","Resource types v4 creation is not allowed.")),this.allowV4V5Upgrade&&!hasV5ResourceTypes&&(result=result||new entityValidationError.A,result.addError("allow_v4_v5_upgrade","resource_types_deleted","Resource types v5 are deleted.")),this.allowV4V5Upgrade&&!this.allowCreationOfV5Resources&&(result=result||new entityValidationError.A,result.addError("allow_v4_v5_upgrade","allow_creation","Resource types v5 creation is not allowed.")),result}}const metadataTypesSettingsFormEntity=MetadataTypesSettingsFormEntity;const metadataSettingsServiceWorkerService=class MetadataSettingsServiceWorkerService{constructor(port){this.port=port}async getOrFindTypesSettings(){const settingsDto=await this.port.request("passbolt.metadata.get-or-find-metadata-types-settings");return new metadataTypesSettingsEntity.Ay(settingsDto)}async saveTypesSettings(formSettings){if(!(formSettings instanceof metadataTypesSettingsEntity.Ay))throw new TypeError("The 'settings' property should be of type 'MetadataTypesSettingsEntity'.");const savedSettingsDto=await this.port.request("passbolt.metadata.save-metadata-types-settings",formSettings.toDto());return new metadataTypesSettingsEntity.Ay(savedSettingsDto)}};var Icon=__webpack_require__("./src/shared/components/Icons/Icon.js");class DisplayContentTypesEncryptedMetadataAdministrationActions extends react.Component{render(){return react.createElement("div",{className:"col2_3 actions-wrapper"},react.createElement("div",{className:"actions"},react.createElement("ul",null,react.createElement("li",null,react.createElement("button",{type:"button",disabled:this.props.isProcessing,onClick:this.props.onSaveRequested},react.createElement(Icon.A,{name:"save"}),react.createElement("span",null,react.createElement(es.x6,null,"Save settings")))))))}}DisplayContentTypesEncryptedMetadataAdministrationActions.propTypes={isProcessing:prop_types_default().bool,onSaveRequested:prop_types_default().func,t:prop_types_default().func};const DisplayContentTypesEncryptedMetadataAdministration_DisplayContentTypesEncryptedMetadataAdministrationActions=(0,es.CI)("common")(DisplayContentTypesEncryptedMetadataAdministrationActions);DisplayContentTypesEncryptedMetadataAdministrationActions.__docgenInfo={description:"",methods:[],displayName:"DisplayContentTypesEncryptedMetadataAdministrationActions",props:{isProcessing:{description:"",type:{name:"bool"},required:!1},onSaveRequested:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),ResourceTypesLocalStorageContext=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js");class DisplayContentTypesEncryptedMetadataAdministration extends react.Component{originalSettings=null;formSettings=null;constructor(props){super(props),this.metadataSettingsServiceWorkerService=props.metadataSettingsServiceWorkerService??new metadataSettingsServiceWorkerService(props.context.port),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{isProcessing:!0,hasAlreadyBeenValidated:!1,settings:{default_resource_types:"v4",allow_creation_of_v5_resources:!1,allow_creation_of_v4_resources:!1,allow_v4_v5_upgrade:!1,allow_v5_v4_downgrade:!1}}}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.save=this.save.bind(this)}async componentDidMount(){this.originalSettings=await this.metadataSettingsServiceWorkerService.getOrFindTypesSettings(),this.formSettings=new metadataTypesSettingsFormEntity(this.originalSettings.toDto(),{validate:!1});this.setState({settings:this.formSettings.toFormDto(),isProcessing:!1})}validateForm=(0,memoize_one_esm.A)((formSettingsDto=>this.formSettings?.validate()));verifyDataHealth=(0,memoize_one_esm.A)(((formSettingsDto,resourceTypes)=>this.formSettings?.verifyHealth(resourceTypes)));hasSettingsChanges=(0,memoize_one_esm.A)(((originalSettings,formSettings,formSettingsDto)=>this.originalSettings?.hasDiffProps(this.formSettings)));handleInputChange(event){if(this.hasAllInputDisabled())return;const{type,checked,value,name}=event.target,parsedValue="checkbox"===type?checked:value;this.setFormPropertyValue(name,parsedValue)}setFormPropertyValue(name,parsedValue){this.formSettings.set(name,parsedValue,{validate:!1}),this.setState({settings:this.formSettings.toFormDto()})}hasAllInputDisabled(){return this.state.isProcessing}handleFormSubmit(event){event.preventDefault(),this.save()}async save(){if(this.state.isProcessing)return;const validationError=this.validateForm(this.state.settings);if(validationError?.hasErrors()){const hasAlreadyBeenValidated=!0;this.setState({hasAlreadyBeenValidated})}else{this.setState({isProcessing:!0});try{this.originalSettings=await this.metadataSettingsServiceWorkerService.saveTypesSettings(this.formSettings),this.formSettings=new metadataTypesSettingsFormEntity(this.originalSettings.toDto()),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The encrypted metadata settings were updated."))}catch(error){this.props.dialogContext.open(NotifyError.A,{error})}this.setState({hasAlreadyBeenValidated:!0,isProcessing:!1,settings:this.formSettings.toDto()})}}render(){const errors=this.state.hasAlreadyBeenValidated?this.validateForm(this.state.settings):null,warnings=this.verifyDataHealth(this.state.settings,this.props.resourceTypes),hasSettingsChanges=this.hasSettingsChanges(this.originalSettings,this.formSettings,this.state.settings);return react.createElement("div",{className:"row"},(this.props.createPortal||react_dom.createPortal)(react.createElement(DisplayContentTypesEncryptedMetadataAdministration_DisplayContentTypesEncryptedMetadataAdministrationActions,{onSaveRequested:this.save,isProcessing:this.state.isProcessing}),document.getElementById("administration-actions-content-action")),react.createElement("div",{id:"content-types-encrypted-metadata-settings",className:"col8 main-column"},react.createElement("form",{onSubmit:this.handleFormSubmit,"data-testid":"submit-form"},react.createElement("h3",null,react.createElement("label",null,react.createElement(es.x6,null,"Encrypted metadata"))),hasSettingsChanges&&react.createElement("div",{className:"warning message form-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Don't forget to save your settings to apply your modification."))),react.createElement("p",{className:"description"},react.createElement(es.x6,null,"Encrypted metadata for resources is available.")," ",react.createElement(es.x6,null,"Define the strategy to manage and migrate the legacy items.")),react.createElement("h4",{className:"no-border"},react.createElement(es.x6,null,"Supported metadata types")),react.createElement("div",{className:"togglelist-alt"},react.createElement("span",{className:`input toggle-switch form-element\n                ${errors?.hasError("allow_creation_of_v5_resources")?"error":""}\n                ${warnings?.hasError("allow_creation_of_v5_resources")?"warning":""}`},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"allow_creation_of_v5_resources",id:"allowCreationOfV5ResourcesInput",onChange:this.handleInputChange,checked:this.state.settings.allow_creation_of_v5_resources,disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"allowCreationOfV5ResourcesInput"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Enable encrypted metadata (recommended)")),react.createElement("span",{className:"info"},react.createElement(es.x6,null,"Enable encrypted metadata for resources."))),errors?.hasError("allow_creation_of_v5_resources","is_default")&&react.createElement("div",{className:"name error-message"},react.createElement(es.x6,null,"Encrypted metadata must be enabled to set it as the default type.")),!errors?.hasError("allow_creation_of_v5_resources")&&warnings?.hasError("allow_creation_of_v5_resources","resource_types_deleted")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"All encrypted metadata resource types were previously disabled. Re-enable them if you want users to create resources of this type.")))),react.createElement("div",{className:"togglelist-alt"},react.createElement("span",{className:`input toggle-switch form-element\n                ${errors?.hasError("allow_creation_of_v4_resources")?"error":""}\n                ${warnings?.hasError("allow_creation_of_v4_resources")?"warning":""}`},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"allow_creation_of_v4_resources",id:"allowCreationOfV4ResourcesInput",onChange:this.handleInputChange,checked:this.state.settings.allow_creation_of_v4_resources,disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"allowCreationOfV4ResourcesInput"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Enable legacy cleartext metadata")),react.createElement("span",{className:"info"},react.createElement(es.x6,null,"Enable legacy cleartext metadata for resources."))),errors?.hasError("allow_creation_of_v4_resources","is_default")&&react.createElement("div",{className:"name error-message"},react.createElement(es.x6,null,"Legacy cleartext metadata must be enabled to set it as the default type.")),!errors?.hasError("allow_creation_of_v4_resources")&&warnings?.hasError("allow_creation_of_v4_resources","resource_types_deleted")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"All legacy cleartext resource types were previously disabled. Re-enable them if you want users to create resources of this type.")))),react.createElement("h4",{className:"no-border"},react.createElement(es.x6,null,"Default metadata type")),react.createElement("div",{className:"radiolist-alt"},react.createElement("div",{className:`input radio\n                ${"v5"===this.state.settings.default_resource_types?"checked":""}\n                ${errors?.hasError("default_resource_types","allow_create_v5")?"error":""}\n                ${!errors?.hasError("default_resource_types","allow_create_v5")&&warnings?.hasError("default_resource_types","resource_types_v5_deleted")?"warning":""}`},react.createElement("input",{type:"radio",value:"v5",onChange:this.handleInputChange,name:"default_resource_types",checked:"v5"===this.state.settings.default_resource_types,id:"defaultResourceTypesV5Input",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"defaultResourceTypesV5Input"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Encrypted metadata (recommended)")),react.createElement("span",{className:"info"},react.createElement(es.x6,null,"Users can create resources with encrypted metadata by default."),react.createElement("br",null))),errors?.hasError("default_resource_types","allow_create_v5")&&react.createElement("div",{className:"name error-message"},react.createElement(es.x6,null,"Encrypted metadata must be enabled to set it as the default type.")),!errors?.hasError("default_resource_types","allow_create_v5")&&warnings?.hasError("default_resource_types","resource_types_v5_deleted")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"All encrypted metadata resource types were previously disabled. Re-enable them if you want users to create resources of this type."))),react.createElement("div",{className:`input radio ${"v4"===this.state.settings.default_resource_types?"checked":""}\n                ${errors?.hasError("default_resource_types","allow_create_v4")?"error":""}\n                ${!errors?.hasError("default_resource_types","allow_create_v4")&&warnings?.hasError("default_resource_types","resource_types_v4_deleted")?"warning":""}`},react.createElement("input",{type:"radio",value:"v4",onChange:this.handleInputChange,name:"default_resource_types",checked:"v4"===this.state.settings.default_resource_types,id:"defaultResourceTypesV4Input",disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"defaultResourceTypesV4Input"},react.createElement("span",{className:"name"},react.createElement(es.x6,null,"Legacy cleartext metadata")),react.createElement("span",{className:"info"},react.createElement(es.x6,null,"Users can create legacy resources with cleartext metadata by default."))),errors?.hasError("default_resource_types","allow_create_v4")&&react.createElement("div",{className:"name error-message"},react.createElement(es.x6,null,"Legacy cleartext metadata must be enabled to set it as the default type.")),!errors?.hasError("default_resource_types","allow_create_v4")&&warnings?.hasError("default_resource_types","resource_types_v4_deleted")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"All legacy cleartext resource types were previously disabled. Re-enable them if you want users to create resources of this type.")))),react.createElement("h4",{className:"no-border"},react.createElement(es.x6,null,"Self served migration")),react.createElement("div",{className:"togglelist-alt"},react.createElement("div",{className:"input toggle-switch form-element\n                "+(warnings?.hasError("allow_v4_v5_upgrade")?"warning":"")},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"allow_v4_v5_upgrade",id:"allowV4V5UpgradeInput",onChange:this.handleInputChange,checked:this.state.settings.allow_v4_v5_upgrade,disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"allowV4V5UpgradeInput"},react.createElement(es.x6,null,"Allow users to upgrade their content from cleartext to encrypted metadata type.")),warnings?.hasError("allow_v4_v5_upgrade","resource_types_deleted")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"All encrypted metadata resource types were previously disabled. Re-enable them if you want users to upgrade their resources.")),warnings?.hasError("allow_v4_v5_upgrade","allow_creation")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"Encrypted metadata should be enabled to allow users to upgrade their resources.")))),react.createElement("div",{className:"togglelist-alt"},react.createElement("div",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"allow_v5_v4_downgrade",id:"allowV5V4DowngradeInput",onChange:this.handleInputChange,checked:this.state.settings.allow_v5_v4_downgrade,disabled:this.hasAllInputDisabled()}),react.createElement("label",{htmlFor:"allowV5V4DowngradeInput"},react.createElement(es.x6,null,"Allow users to downgrade their content from encrypted to cleartext metadata type.")),warnings?.hasError("allow_v5_v4_downgrade","resource_types_deleted")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"All legacy cleartext resource types were previously disabled. Re-enable them if you want users to downgrade their resources.")),warnings?.hasError("allow_v5_v4_downgrade","allow_creation")&&react.createElement("div",{className:"name warning-message"},react.createElement(es.x6,null,"Legacy cleartext metadata should be enabled to allow users to downgrade their resources.")))))))}}DisplayContentTypesEncryptedMetadataAdministration.propTypes={context:prop_types_default().object,actionFeedbackContext:prop_types_default().object,administrationWorkspaceContext:prop_types_default().object,dialogContext:prop_types_default().object,createPortal:prop_types_default().func,metadataSettingsServiceWorkerService:prop_types_default().object,resourceTypes:prop_types_default().instanceOf(resourceTypesCollection.A),t:prop_types_default().func};const DisplayContentTypesEncryptedMetadataAdministration_DisplayContentTypesEncryptedMetadataAdministration=(0,AppContext.L)((0,ActionFeedbackContext.ot)((0,DialogContext.z9)((0,AdministrationWorkspaceContext.Kk)((0,ResourceTypesLocalStorageContext.KH)((0,es.CI)("common")(DisplayContentTypesEncryptedMetadataAdministration))))));DisplayContentTypesEncryptedMetadataAdministration.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleInputChange",docblock:"Handle form input changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"event",optional:!1}],returns:{type:{name:"void"}},description:"Handle form input changes."},{name:"setFormPropertyValue",docblock:"Set a form property value. Trigger the validation if the form has already been submitted once.\n@param name\n@param parsedValue",modifiers:[],params:[{name:"name",optional:!1},{name:"parsedValue",optional:!1}],returns:null,description:"Set a form property value. Trigger the validation if the form has already been submitted once."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is loading or processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is loading or processing"},{name:"handleFormSubmit",docblock:"Handle form submission that can be trigger when hitting `enter`\n@param {Event} event The html event triggering the form submit.",modifiers:[],params:[{name:"event",description:"The html event triggering the form submit.",type:{name:"Event"},optional:!1}],returns:null,description:"Handle form submission that can be trigger when hitting `enter`"},{name:"save",docblock:"Save the settings\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Save the settings"}],displayName:"DisplayContentTypesEncryptedMetadataAdministration",props:{context:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},administrationWorkspaceContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},createPortal:{description:"",type:{name:"func"},required:!1},metadataSettingsServiceWorkerService:{description:"",type:{name:"object"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};const DisplayContentTypesEncryptedMetadataAdministration_test_stories={title:"Components/Administration/DisplayContentTypesEncryptedMetadataAdministration",component:DisplayContentTypesEncryptedMetadataAdministration_DisplayContentTypesEncryptedMetadataAdministration},Template=args=>react.createElement("div",{className:"panel middle"},react.createElement("div",{className:"grid grid-responsive-12"},react.createElement(DisplayContentTypesEncryptedMetadataAdministration_DisplayContentTypesEncryptedMetadataAdministration,args)));Template.propTypes={context:prop_types_default().object};const Initial=Template.bind({});Initial.args=defaultProps();const WithValidationError=Template.bind({});WithValidationError.args=function allowedVersionErrorProps(data={}){const settingsDto=(0,metadataTypesSettingsEntity_test_data.uc)();return settingsDto.allow_creation_of_v4_resources=!1,defaultProps({metadataSettingsServiceWorkerService:{getOrFindTypesSettings:()=>new metadataTypesSettingsEntity.Ay(settingsDto,{validate:!1})},...data})}(),WithValidationError.play=async({canvasElement})=>{(0,dist.ux)(canvasElement).getByTestId("submit-form").requestSubmit()};const WithWarnings=Template.bind({});WithWarnings.args=function resourceTypesDeletedProps(data={}){return defaultProps({resourceTypes:new resourceTypesCollection.A,...data})}();const __namedExportsOrder=["Initial","WithValidationError","WithWarnings"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:'args => <div className="panel middle">\n    <div className="grid grid-responsive-12">\n      <DisplayContentTypesEncryptedEncryptedMetadataAdministration {...args} />\n    </div>\n  </div>',...Initial.parameters?.docs?.source}}},WithValidationError.parameters={...WithValidationError.parameters,docs:{...WithValidationError.parameters?.docs,source:{originalSource:'args => <div className="panel middle">\n    <div className="grid grid-responsive-12">\n      <DisplayContentTypesEncryptedEncryptedMetadataAdministration {...args} />\n    </div>\n  </div>',...WithValidationError.parameters?.docs?.source}}},WithWarnings.parameters={...WithWarnings.parameters,docs:{...WithWarnings.parameters?.docs,source:{originalSource:'args => <div className="panel middle">\n    <div className="grid grid-responsive-12">\n      <DisplayContentTypesEncryptedEncryptedMetadataAdministration {...args} />\n    </div>\n  </div>',...WithWarnings.parameters?.docs?.source}}}},"./node_modules/@storybook/instrumenter/dist sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/instrumenter/dist sync recursive",module.exports=webpackEmptyContext},"./node_modules/@storybook/test/dist sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/test/dist sync recursive",module.exports=webpackEmptyContext},"./src/react-extension/contexts/ActionFeedbackContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function defaultActionFeedbackContext(data={}){const defaultContext={displaySuccess:jest.fn(),displayError:jest.fn(),remove:jest.fn()};return Object.assign(defaultContext,data)}__webpack_require__.d(__webpack_exports__,{M:()=>defaultActionFeedbackContext})},"./src/react-extension/contexts/AdministrationWorkspaceContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function defaultAdministrationWorkspaceContext(context={}){const defaultContext={must:{editSubscriptionKey:!1,refreshSubscriptionKey:!1},onResetActionsSettings:jest.fn(),setDisplayAdministrationWorkspaceAction:jest.fn(),resetDisplayAdministrationWorkspaceAction:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{M:()=>defaultAdministrationWorkspaceContext})},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter((dialog=>dialogKey!==dialog.key))}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,(dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props})))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/shared/models/entity/abstract/entityCollection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _entityCollectionError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityCollectionError.js"),_entityValidationError__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");class EntityCollection{constructor(dtos=[],options={}){const clone=options?.clone??!0;this._items=[],clone&&(dtos=JSON.parse(JSON.stringify(dtos))),this._props=dtos}toDto(){return JSON.parse(JSON.stringify(this._items))}toJSON(){return this.toDto()}get items(){return this._items}get length(){return this._items.length}[Symbol.iterator](){let i=0;return{next:()=>i<this._items.length?{value:this._items[i++],done:!1}:{done:!0}}}getAll(propName,search){if("string"!=typeof propName)throw new TypeError("EntityCollection excludeAll expects propName to be string.");if("string"!=typeof search)throw new TypeError("EntityCollection excludeAll expects search to be string.");return this._items.filter((item=>Object.prototype.hasOwnProperty.call(item._props,propName)&&item._props[propName]===search))}getFirst(propName,search){if("string"!=typeof propName||"string"!=typeof search)throw new TypeError("EntityCollection getFirst by expect propName and search to be strings");const found=this.getAll(propName,search);if(found&&found.length)return found[0]}extract(propName){if("string"!=typeof propName)throw new TypeError("EntityCollection extract expects propName to be a string.");return this._items.reduce(((accumulator,item)=>(void 0!==item._props[propName]&&accumulator.push(item._props[propName]),accumulator)),[])}push(item){return this._items.push(item),this._items.length}unshift(item){return this._items.unshift(item),this._items.length}filterByPropertyValueIn(propName,needles,excludeUndefined=!0){if("string"!=typeof propName)throw new TypeError("EntityCollection filterByPropertyValueIn expects propName to be a string.");if(!Array.isArray(needles))throw new TypeError("EntityCollection filterByPropertyValueIn expects needles to be an array.");this.filterByCallback((item=>{const isPropertyDefined=Object.prototype.hasOwnProperty.call(item._props,propName);return!(excludeUndefined&&!isPropertyDefined||isPropertyDefined&&!needles.includes(item._props[propName]))}))}filterByCallback(callback){if("function"!=typeof callback)throw new TypeError("EntityCollection filterByCallback expects callback to be a function.");for(let currentIndex=this._items.length-1;currentIndex>=0;currentIndex--)callback(this._items[currentIndex])||this._items.splice(currentIndex,1)}assertUniqueByProperty(propName,message){const ruleId=`unique_${propName}`,propValues=this.extract(propName),uniqueElements=new Set;message=message||`The collection should only contain items with unique values for the property: ${propName}.`,propValues.forEach(((propValue,index)=>{if(uniqueElements.add(propValue),index!==uniqueElements.size-1)throw new _entityCollectionError__WEBPACK_IMPORTED_MODULE_0__.A(index,ruleId,message)}))}assertNotExist(propName,propValue,options={}){if(void 0===propValue)return;let haystackSet=options?.haystackSet;if(!haystackSet){const propValues=this.extract(propName);haystackSet=new Set(propValues)}if(haystackSet.has(propValue)){const error=new _entityValidationError__WEBPACK_IMPORTED_MODULE_1__.A,message=options?.message||`The collection already includes an element that has a property (${propName}) with an identical value.`;throw error.addError(propName,"unique",message),error}}}const __WEBPACK_DEFAULT_EXPORT__=EntityCollection},"./src/shared/models/entity/abstract/entityCollectionError.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});class EntityCollectionError extends Error{constructor(position,rule,message){if(super(message=message||"Entity collection error."),"number"!=typeof position)throw new TypeError("EntityCollectionError requires a valid position");if(!rule||"string"!=typeof rule)throw new TypeError("EntityCollectionError requires a valid rule");if(!message||"string"!=typeof message)throw new TypeError("EntityCollectionError requires a valid message");this.position=position,this.rule=rule}}const __WEBPACK_DEFAULT_EXPORT__=EntityCollectionError},"./src/shared/models/entity/metadata/metadataTypesSettingsEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{uc:()=>defaultMetadataTypesSettingsV4Dto});const defaultMetadataTypesSettingsV4Dto=(data={})=>Object.assign({default_resource_types:"v4",default_folder_type:"v4",default_tag_type:"v4",default_comment_type:"v4",allow_creation_of_v5_resources:!1,allow_creation_of_v5_folders:!1,allow_creation_of_v5_tags:!1,allow_creation_of_v5_comments:!1,allow_creation_of_v4_resources:!0,allow_creation_of_v4_folders:!0,allow_creation_of_v4_tags:!0,allow_creation_of_v4_comments:!0,allow_v4_v5_upgrade:!1,allow_v5_v4_downgrade:!1},data)}}]);