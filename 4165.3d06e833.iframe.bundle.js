/*! For license information please see 4165.3d06e833.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[4165],{"./src/img/svg/spinner.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSpinner(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:18,height:18,fill:"none",className:"svg-icon spinner",viewBox:"0 0 18 18"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"background",cx:8,cy:8,r:8,fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(1 1)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"loading",r:8,fill:"none",stroke:"var(--spinner-color)",strokeLinecap:"round",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(9 9)"})))}},"./src/react-extension/components/Administration/ConfirmDeleteSsoSettingsDialog/ConfirmDeleteSsoSettingsDialog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_contexts_AdminSsoContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/AdminSsoContext.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js");class ConfirmDeleteSsoSettingsDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{processing:!1}}bindCallbacks(){this.handleConfirmDelete=this.handleConfirmDelete.bind(this)}async handleConfirmDelete(event){event.preventDefault(),this.setState({processing:!0}),await this.props.adminSsoContext.deleteSettings(),this.setState({processing:!1}),this.props.onClose()}hasAllInputDisabled(){return this.state.processing}render(){const isDisabled=this.hasAllInputDisabled();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{className:"delete-sso-settings-dialog",title:this.props.t("Disable Single Sign-On settings?"),onClose:this.props.onClose,disabled:isDisabled},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleConfirmDelete,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Are you sure you want to disable the current Single Sign-On settings?")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"This action cannot be undone. All the data associated with SSO will be permanently deleted."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__.A,{disabled:isDisabled,onClick:this.props.onClose}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_5__.A,{warning:!0,disabled:isDisabled,processing:this.state.processing,value:this.props.t("Disable")}))))}}ConfirmDeleteSsoSettingsDialog.propTypes={adminSsoContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,onClose:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_AdminSsoContext__WEBPACK_IMPORTED_MODULE_3__.df)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(ConfirmDeleteSsoSettingsDialog));ConfirmDeleteSsoSettingsDialog.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks",modifiers:[],params:[],returns:null,description:"Bind callbacks"},{name:"handleConfirmDelete",docblock:"Handles the form submission\n@param {Event} event\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"event",type:{name:"Event"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handles the form submission"},{name:"hasAllInputDisabled",docblock:"Returns true if the input must be disabled.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the input must be disabled."}],displayName:"ConfirmDeleteSsoSettingsDialog",props:{adminSsoContext:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/ManageSsoSettings/SsoProviders.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=[{id:"azure",name:"Microsoft",icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"65",height:"64",viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M31.3512 3.04762H3.92261V30.4762H31.3512V3.04762Z",fill:"#F25022"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M31.3512 33.5238H3.92261V60.9524H31.3512V33.5238Z",fill:"#00A4EF"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M61.8274 3.04762H34.3988V30.4762H61.8274V3.04762Z",fill:"#7FBA00"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M61.8274 33.5238H34.3988V60.9524H61.8274V33.5238Z",fill:"#FFB900"})),defaultConfig:{url:"https://login.microsoftonline.com",client_id:"",client_secret:"",tenant_id:"",client_secret_expiry:"",prompt:"login",email_claim:"email"}},{id:"google",name:"Google",icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"65",height:"64",viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M63.9451 32.72C63.9451 30.6133 63.7584 28.6133 63.4384 26.6667H33.3051V38.6933H50.5584C49.7851 42.64 47.5184 45.9733 44.1584 48.24V56.24H54.4517C60.4784 50.6667 63.9451 42.4533 63.9451 32.72Z",fill:"#4285F4"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M33.305 64C41.945 64 49.1717 61.12 54.4517 56.24L44.1583 48.24C41.2783 50.16 37.625 51.3333 33.305 51.3333C24.9583 51.3333 17.8917 45.7067 15.3583 38.1067H4.745V46.3467C9.99833 56.8 20.7983 64 33.305 64Z",fill:"#34A853"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M15.3584 38.1067C14.6917 36.1867 14.3451 34.1333 14.3451 32C14.3451 29.8667 14.7184 27.8133 15.3584 25.8933V17.6533H4.74505C2.55838 21.9733 1.30505 26.8267 1.30505 32C1.30505 37.1733 2.55838 42.0267 4.74505 46.3467L15.3584 38.1067Z",fill:"#FBBC05"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M33.305 12.6667C38.025 12.6667 42.2383 14.2933 45.5717 17.4667L54.6917 8.34667C49.1717 3.17334 41.945 0 33.305 0C20.7983 0 9.99833 7.20001 4.745 17.6533L15.3583 25.8933C17.8917 18.2933 24.9583 12.6667 33.305 12.6667Z",fill:"#EA4335"})),defaultConfig:{client_id:"",client_secret:""}},{id:"oauth2",name:"OpenID",hiddenIfDisabled:!0,disabledForRecover:!0,icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"65",height:"60",viewBox:"0 0 65 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M64.2468 34.9929L62.9089 21.0968L57.9256 23.9083C53.2914 21.0968 47.3581 19.1061 40.7332 18.3046V24.4577C44.5336 25.117 47.9462 26.3321 50.7513 27.9544L45.5031 30.9146L64.2533 34.9929H64.2468Z",fill:"#B3B3B3"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M9.94184 38.8774C9.94184 32.0069 17.4264 26.2222 27.632 24.4577V18.2981C12.023 20.1854 0.246826 28.6783 0.246826 38.8774C0.246826 49.0766 12.8891 58.1769 29.3319 59.6312V53.5557C18.2666 52.166 9.94184 46.1228 9.94184 38.8774Z",fill:"#B3B3B3"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M29.332 5.09999V59.6377L39.027 55.0746V0.362366L29.332 5.09999Z",fill:"#F8931E"})),defaultConfig:{url:"",openid_configuration_path:"",scope:"openid email profile",client_id:"",client_secret:""}},{id:"adfs",name:"AD FS",hiddenIfDisabled:!0,disabledForRecover:!0,icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"65",height:"64",viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M64.5443 48.7454V62.166C64.5443 63.7378 64.0607 64.0602 62.5695 63.8184C52.5746 62.3272 42.4587 60.957 32.3831 59.5464C30.5695 59.3046 29.9247 58.6597 29.9247 56.6849C30.0859 49.5514 30.0053 42.3776 29.9247 35.1635C29.9247 33.5917 30.4083 33.1081 31.9801 33.1081C42.2975 33.1887 52.4536 33.1887 62.5695 33.1887C64.2219 33.1887 64.6249 33.8335 64.6249 35.3247C64.4637 39.8386 64.5443 44.2718 64.5443 48.7454Z",fill:"#00AAF2"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M47.416 30.6093C42.3379 30.6093 37.2598 30.5287 32.1817 30.6093C30.6099 30.6093 29.9651 30.2869 29.9651 28.4733C30.0457 21.1786 30.0457 14.0048 29.9651 6.79069C29.9651 5.38011 30.4487 4.89648 31.7787 4.65467C42.1767 3.16349 52.5747 1.7126 62.9726 0.140816C64.7862 -0.100997 64.4638 1.10807 64.4638 2.11563C64.4638 8.56399 64.5444 15.1333 64.4638 21.5816C64.4638 23.9595 64.3832 26.3373 64.4638 28.7151C64.5444 30.2063 63.9802 30.6093 62.5696 30.6093C57.5721 30.5287 52.4941 30.6093 47.416 30.6093Z",fill:"#00AAF2"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M13.8038 33.3096H25.1691C26.3782 33.3096 26.9021 33.7126 26.9021 34.962V57.37C26.9021 58.6597 26.3378 58.7806 25.1691 58.6597C17.6326 57.5312 10.096 56.4431 2.59981 55.3952C1.10863 55.1534 0.625 54.6698 0.625 53.098C0.705605 47.1332 0.705605 41.1685 0.625 35.0829C0.625 33.5917 1.02802 33.1887 2.51921 33.1887C6.34792 33.3096 10.0154 33.3096 13.8038 33.3096Z",fill:"#00AAF2"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M13.8038 30.6093H2.59977C1.18919 30.6093 0.705566 30.1257 0.705566 28.6345C0.786171 22.7504 0.786171 16.8663 0.705566 10.9418C0.705566 9.53126 1.10859 9.04763 2.59977 8.80582C10.1363 7.83856 17.6728 6.7504 25.169 5.54133C26.902 5.29952 27.0633 5.86375 27.0633 7.27433V28.7151C27.0633 30.2869 26.4184 30.5287 25.0078 30.5287C21.2597 30.5287 17.4713 30.6093 13.8038 30.6093Z",fill:"#00AAF2"})),defaultConfig:{url:"",openid_configuration_path:"",scope:"openid email profile",client_id:"",client_secret:""}}]},"./src/react-extension/components/Administration/TestSsoSettingsDialog/TestSsoSettingsDialog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_contexts_AdminSsoContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/AdminSsoContext.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js");const uiStateEnum_FORM="form",uiStateEnum_SUCCESS="success";class TestSsoSettingsDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{uiState:uiStateEnum_FORM,hasSuccessfullySignedInWithSso:!1,processing:!1,ssoToken:null}}bindCallbacks(){this.handleSignInTestClick=this.handleSignInTestClick.bind(this),this.handleActivateSsoSettings=this.handleActivateSsoSettings.bind(this),this.handleCloseDialog=this.handleCloseDialog.bind(this)}async handleSignInTestClick(event){event.preventDefault();try{this.setState({processing:!0});const ssoToken=await this.props.context.port.request("passbolt.sso.dry-run",this.props.configurationId);this.setState({uiState:uiStateEnum_SUCCESS,hasSuccessfullySignedInWithSso:!0,ssoToken})}catch(e){"UserAbortsOperationError"!==e?.name&&this.props.adminSsoContext.handleError(e)}this.setState({processing:!1})}async handleActivateSsoSettings(event){event.preventDefault();try{this.setState({processing:!0}),await this.props.context.port.request("passbolt.sso.activate-settings",this.props.configurationId,this.state.ssoToken),await this.props.context.port.request("passbolt.sso.generate-sso-kit",this.props.provider.id),this.props.onSuccessfulSettingsActivation(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The SSO settings have been saved successfully"))}catch(e){this.props.adminSsoContext.handleError(e)}this.setState({processing:!1}),this.handleCloseDialog()}handleCloseDialog(){this.props.onClose(),this.props.handleClose()}hasAllInputDisabled(){return this.state.processing}canSaveSettings(){return!this.hasAllInputDisabled()&&this.state.hasSuccessfullySignedInWithSso}get title(){return{form:this.translate("Test Single Sign-On configuration"),success:this.translate("Save Single Sign-On configuration")}[this.state.uiState]||""}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_3__.A,{className:"test-sso-settings-dialog sso-login-form",title:this.title,onClose:this.handleCloseDialog,disabled:this.hasAllInputDisabled()},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleActivateSsoSettings},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},this.state.uiState===uiStateEnum_FORM&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Before saving the settings, we need to test if the configuration is working.")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:`sso-login-button ${this.props.provider.id}`,onClick:this.handleSignInTestClick,disabled:this.hasAllInputDisabled()},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"provider-logo"},this.props.provider.icon),this.translate("Sign in with {{providerName}}",{providerName:this.props.provider.name}))),this.state.uiState===uiStateEnum_SUCCESS&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,this.translate("You susccessfully signed in with your {{providerName}} account. You can safely save your configuration.",{providerName:this.props.provider.name}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_5__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseDialog}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__.A,{disabled:!this.canSaveSettings(),processing:this.state.processing,value:this.translate("Save settings")}))))}}TestSsoSettingsDialog.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,adminSsoContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,onClose:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,provider:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,configurationId:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,handleClose:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,onSuccessfulSettingsActivation:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)((0,_contexts_AdminSsoContext__WEBPACK_IMPORTED_MODULE_4__.df)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_7__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(TestSsoSettingsDialog))));TestSsoSettingsDialog.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks",modifiers:[],params:[],returns:null,description:"Bind callbacks"},{name:"handleSignInTestClick",docblock:"Handles the form submission\n@param {Event} event\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"event",type:{name:"Event"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handles the form submission"},{name:"handleActivateSsoSettings",docblock:"Handle the click on the settings activation button\n@param {Event} event\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"event",type:{name:"Event"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle the click on the settings activation button"},{name:"handleCloseDialog",docblock:"Handles the closing of the dialog and the notification of the dialog opener",modifiers:[],params:[],returns:null,description:"Handles the closing of the dialog and the notification of the dialog opener"},{name:"hasAllInputDisabled",docblock:"Returns true if the input must be disabled.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the input must be disabled."},{name:"canSaveSettings",docblock:"Returns true when the AD has successfully tested the current draft SSO settings",modifiers:[],params:[],returns:null,description:"Returns true when the AD has successfully tested the current draft SSO settings"},{name:"title",docblock:"Returns the title string to display on the dialog based on the UI state.\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the title string to display on the dialog based on the UI state."},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"TestSsoSettingsDialog",props:{context:{description:"",type:{name:"object"},required:!1},adminSsoContext:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1},provider:{description:"",type:{name:"object"},required:!1},configurationId:{description:"",type:{name:"string"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},handleClose:{description:"",type:{name:"func"},required:!1},onSuccessfulSettingsActivation:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormCancelButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.disabled||this.props.onClick()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.props.disabled,className:"link cancel",onClick:this.handleClick},this.props.value)}}FormCancelButton.defaultProps={value:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Cancel")},FormCancelButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,value:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_2___default().node),prop_types__WEBPACK_IMPORTED_MODULE_2___default().node,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string])};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(FormCancelButton);FormCancelButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleClick",docblock:"Handle cancel click\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle cancel click"}],displayName:"FormCancelButton",props:{value:{defaultValue:{value:"<Trans>Cancel</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormSubmitButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.getClassName=this.getClassName.bind(this)}getClassName(){let name="button primary";return this.props.warning?name+=" warning":this.props.attention&&(name+=" attention"),this.props.disabled&&(name+=" disabled"),this.props.processing&&(name+=" processing"),this.props.big&&(name+=" big"),this.props.medium&&(name+=" medium"),this.props.fullWidth&&(name+=" full-width"),name}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:this.getClassName(),disabled:this.props.disabled},this.props.value||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Save"),this.props.processing&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__.A,null))}}FormSubmitButton.defaultProps={warning:!1,attention:!1},FormSubmitButton.propTypes={processing:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().node),prop_types__WEBPACK_IMPORTED_MODULE_3___default().node,prop_types__WEBPACK_IMPORTED_MODULE_3___default().string]),warning:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,attention:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,big:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,medium:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,fullWidth:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(FormSubmitButton);FormSubmitButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"getClassName",docblock:"Get the input button classname\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the input button classname"}],displayName:"FormSubmitButton",props:{warning:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},attention:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},processing:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},value:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},big:{description:"",type:{name:"bool"},required:!1},medium:{description:"",type:{name:"bool"},required:!1},fullWidth:{description:"",type:{name:"bool"},required:!1}}}},"./src/react-extension/contexts/AdminSsoContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>contexts_AdminSsoContext,df:()=>withAdminSso});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),SsoProviders_data=__webpack_require__("./src/react-extension/components/Administration/ManageSsoSettings/SsoProviders.data.js"),TestSsoSettingsDialog=__webpack_require__("./src/react-extension/components/Administration/TestSsoSettingsDialog/TestSsoSettingsDialog.js"),ConfirmDeleteSsoSettingsDialog=__webpack_require__("./src/react-extension/components/Administration/ConfirmDeleteSsoSettingsDialog/ConfirmDeleteSsoSettingsDialog.js"),AzureSsoSettingsEntity=__webpack_require__("./src/shared/models/entity/ssoSettings/AzureSsoSettingsEntity.js"),entitySchema=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),entityValidationError=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");class AzureSsoSettingsViewModel{constructor(settings={}){this.url=settings?.url,this.client_id=settings?.client_id,this.tenant_id=settings?.tenant_id,this.client_secret=settings?.client_secret,this.email_claim=settings?.email_claim,this.prompt=settings?.prompt,settings?.client_secret_expiry&&(this.client_secret_expiry=settings.client_secret_expiry.toString().substring(0,10)),settings?.id&&(this.id=settings.id)}get provider(){return AzureSsoSettingsEntity.A.PROVIDER_ID}static getSchema(){const baseEntitySchema=AzureSsoSettingsEntity.A.getSchema();return{type:"object",required:["url","client_id","tenant_id","client_secret","client_secret_expiry","email_claim","prompt"],properties:{id:{type:"string",format:"uuid"},url:baseEntitySchema.properties.url,client_id:baseEntitySchema.properties.client_id,tenant_id:baseEntitySchema.properties.tenant_id,client_secret:baseEntitySchema.properties.client_secret,client_secret_expiry:baseEntitySchema.properties.client_secret_expiry,email_claim:baseEntitySchema.properties.email_claim,prompt:baseEntitySchema.properties.prompt}}}static isDataDifferent(a,b){return["url","client_id","tenant_id","client_secret","client_secret_expiry","email_claim","prompt"].some((key=>a[key]!==b[key]))}isDataDifferent(b){return!(b instanceof AzureSsoSettingsViewModel)||AzureSsoSettingsViewModel.isDataDifferent(this,b)}toDto(){return{id:this.id,provider:this.provider,url:this.url,client_id:this.client_id,tenant_id:this.tenant_id,client_secret:this.client_secret,client_secret_expiry:this.client_secret_expiry,email_claim:this.email_claim,prompt:this.prompt}}cloneWithMutation(field,value){const dto=this.toDto();return dto[field]=value,new AzureSsoSettingsViewModel(dto)}validate(){const schema=AzureSsoSettingsViewModel.getSchema();try{entitySchema.A.validate(this.constructor.name,this,schema)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}static fromEntityDto(settings){const data=settings.data,dto={id:settings?.id,url:data.url,client_id:data.client_id,tenant_id:data.tenant_id,client_secret:data.client_secret,client_secret_expiry:data.client_secret_expiry,email_claim:data.email_claim,prompt:data.prompt};return new AzureSsoSettingsViewModel(dto)}toEntityDto(){let clientSecretExpiry=this.client_secret_expiry;this.client_secret_expiry&&(clientSecretExpiry+=" 00:00:00");return{provider:this.provider,data:{url:this.url,client_id:this.client_id,tenant_id:this.tenant_id,client_secret:this.client_secret,client_secret_expiry:clientSecretExpiry,email_claim:this.email_claim,prompt:this.prompt}}}}const ssoSettings_AzureSsoSettingsViewModel=AzureSsoSettingsViewModel;var OAuth2SsoSettingsEntity=__webpack_require__("./src/shared/models/entity/ssoSettings/OAuth2SsoSettingsEntity.js");class OAuth2SsoSettingsViewModel{constructor(settings={}){this.url=settings?.url,this.openid_configuration_path=settings?.openid_configuration_path,this.scope=settings?.scope,this.client_id=settings?.client_id,this.client_secret=settings?.client_secret,settings?.id&&(this.id=settings.id)}get provider(){return OAuth2SsoSettingsEntity.A.PROVIDER_ID}static getSchema(){const baseEntitySchema=OAuth2SsoSettingsEntity.A.getSchema();return{type:"object",required:["url","openid_configuration_path","scope","client_id","client_secret"],properties:{id:{type:"string",format:"uuid"},url:baseEntitySchema.properties.url,openid_configuration_path:baseEntitySchema.properties.openid_configuration_path,scope:baseEntitySchema.properties.scope,client_id:baseEntitySchema.properties.client_id,client_secret:baseEntitySchema.properties.client_secret}}}static isDataDifferent(a,b){return["url","openid_configuration_path","scope","client_id","client_secret"].some((key=>a[key]!==b[key]))}isDataDifferent(b){return!(b instanceof OAuth2SsoSettingsViewModel)||OAuth2SsoSettingsViewModel.isDataDifferent(this,b)}toDto(){return{id:this.id,provider:this.provider,url:this.url,openid_configuration_path:this.openid_configuration_path,scope:this.scope,client_id:this.client_id,client_secret:this.client_secret}}cloneWithMutation(field,value){const dto=this.toDto();return dto[field]=value,new OAuth2SsoSettingsViewModel(dto)}validate(){const schema=OAuth2SsoSettingsViewModel.getSchema();try{entitySchema.A.validate(this.constructor.name,this,schema)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}static fromEntityDto(settings){const data=settings.data,dto={id:settings?.id,url:data.url,openid_configuration_path:data.openid_configuration_path,scope:data.scope,client_id:data.client_id,client_secret:data.client_secret};return new OAuth2SsoSettingsViewModel(dto)}toEntityDto(){return{provider:this.provider,data:{url:this.url,openid_configuration_path:this.openid_configuration_path,scope:this.scope,client_id:this.client_id,client_secret:this.client_secret}}}}const ssoSettings_OAuth2SsoSettingsViewModel=OAuth2SsoSettingsViewModel;var GoogleSsoSettingsEntity=__webpack_require__("./src/shared/models/entity/ssoSettings/GoogleSsoSettingsEntity.js");class GoogleSsoSettingsViewModel{constructor(settings={}){this.client_id=settings?.client_id,this.client_secret=settings?.client_secret,settings?.id&&(this.id=settings.id)}get provider(){return GoogleSsoSettingsEntity.A.PROVIDER_ID}static getSchema(){const baseEntitySchema=GoogleSsoSettingsEntity.A.getSchema();return{type:"object",required:["client_id","client_secret"],properties:{id:{type:"string",format:"uuid"},client_id:baseEntitySchema.properties.client_id,client_secret:baseEntitySchema.properties.client_secret}}}static isDataDifferent(a,b){return["client_id","client_secret"].some((key=>a[key]!==b[key]))}isDataDifferent(b){return!(b instanceof GoogleSsoSettingsViewModel)||GoogleSsoSettingsViewModel.isDataDifferent(this,b)}toDto(){return{id:this.id,provider:this.provider,client_id:this.client_id,client_secret:this.client_secret}}cloneWithMutation(field,value){const dto=this.toDto();return dto[field]=value,new GoogleSsoSettingsViewModel(dto)}validate(){const schema=GoogleSsoSettingsViewModel.getSchema();try{entitySchema.A.validate(this.constructor.name,this,schema)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}static fromEntityDto(settings){const data=settings.data,dto={id:settings?.id,client_id:data.client_id,client_secret:data.client_secret};return new GoogleSsoSettingsViewModel(dto)}toEntityDto(){return{provider:this.provider,data:{client_id:this.client_id,client_secret:this.client_secret}}}}const ssoSettings_GoogleSsoSettingsViewModel=GoogleSsoSettingsViewModel;var AdfsSsoSettingsEntity=__webpack_require__("./src/shared/models/entity/ssoSettings/AdfsSsoSettingsEntity.js");class AdfsSsoSettingsViewModel{constructor(settings={}){this.url=settings?.url,this.openid_configuration_path=settings?.openid_configuration_path,this.scope=settings?.scope,this.client_id=settings?.client_id,this.client_secret=settings?.client_secret,settings?.id&&(this.id=settings.id)}get provider(){return AdfsSsoSettingsEntity.A.PROVIDER_ID}static getSchema(){const baseEntitySchema=AdfsSsoSettingsEntity.A.getSchema();return{type:"object",required:["url","openid_configuration_path","scope","client_id","client_secret"],properties:{id:{type:"string",format:"uuid"},url:baseEntitySchema.properties.url,openid_configuration_path:baseEntitySchema.properties.openid_configuration_path,scope:baseEntitySchema.properties.scope,client_id:baseEntitySchema.properties.client_id,client_secret:baseEntitySchema.properties.client_secret}}}static isDataDifferent(a,b){return["url","openid_configuration_path","scope","client_id","client_secret"].some((key=>a[key]!==b[key]))}isDataDifferent(b){return!(b instanceof AdfsSsoSettingsViewModel)||AdfsSsoSettingsViewModel.isDataDifferent(this,b)}toDto(){return{id:this.id,provider:this.provider,url:this.url,openid_configuration_path:this.openid_configuration_path,scope:this.scope,client_id:this.client_id,client_secret:this.client_secret}}cloneWithMutation(field,value){const dto=this.toDto();return dto[field]=value,new AdfsSsoSettingsViewModel(dto)}validate(){const schema=AdfsSsoSettingsViewModel.getSchema();try{entitySchema.A.validate(this.constructor.name,this,schema)}catch(e){if(!(e instanceof entityValidationError.A))throw e;return e}return new entityValidationError.A}static fromEntityDto(settings){const data=settings.data,dto={id:settings?.id,url:data.url,openid_configuration_path:data.openid_configuration_path,scope:data.scope,client_id:data.client_id,client_secret:data.client_secret};return new AdfsSsoSettingsViewModel(dto)}toEntityDto(){return{provider:this.provider,data:{url:this.url,openid_configuration_path:this.openid_configuration_path,scope:this.scope,client_id:this.client_id,client_secret:this.client_secret}}}}const ssoSettings_AdfsSsoSettingsViewModel=AdfsSsoSettingsViewModel,AdminSsoContext=react.createContext({ssoConfig:null,canDeleteSettings:()=>{},isProcessing:()=>{},loadSsoConfiguration:()=>{},getSsoConfiguration:()=>{},getProviderList:()=>{},isSsoConfigActivated:()=>{},isDataReady:()=>{},save:()=>{},disableSso:()=>{},hasFormChanged:()=>{},validateData:()=>{},saveAndTestConfiguration:()=>{},openTestDialog:()=>{},handleError:()=>{},getErrors:()=>{},deleteSettings:()=>{},showDeleteConfirmationDialog:()=>{}});class AdminSsoContextProvider extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.isSsoConfigExisting=!1,this.shouldFocusOnError=!1}get defaultState(){return{ssoConfig:null,providers:[],errors:null,originalConfig:null,cachedSsoConfig:{},isLoaded:!1,processing:!1,hasBeenValidated:!1,hasFormChanged:this.hasFormChanged.bind(this),isProcessing:this.isProcessing.bind(this),isDataReady:this.isDataReady.bind(this),loadSsoConfiguration:this.loadSsoConfiguration.bind(this),getSsoConfiguration:this.getSsoConfiguration.bind(this),getProviderList:this.getProviderList.bind(this),isSsoConfigActivated:this.isSsoConfigActivated.bind(this),changeProvider:this.changeProvider.bind(this),disableSso:this.disableSso.bind(this),setValue:this.setValue.bind(this),validateData:this.validateData.bind(this),saveAndTestConfiguration:this.saveAndTestConfiguration.bind(this),handleError:this.handleError.bind(this),getErrors:this.getErrors.bind(this),deleteSettings:this.deleteSettings.bind(this),canDeleteSettings:this.canDeleteSettings.bind(this),showDeleteConfirmationDialog:this.showDeleteConfirmationDialog.bind(this),consumeFocusOnError:this.consumeFocusOnError.bind(this)}}bindCallbacks(){this.handleTestConfigCloseDialog=this.handleTestConfigCloseDialog.bind(this),this.handleSettingsActivation=this.handleSettingsActivation.bind(this)}async loadSsoConfiguration(){let ssoConfig=null;try{ssoConfig=await this.props.context.port.request("passbolt.sso.get-current")}catch(error){return void this.props.dialogContext.open(NotifyError.A,{error})}this.isSsoConfigExisting=Boolean(ssoConfig.provider);const registeredConfig=this.getSsoProviderViewModel(ssoConfig);this.setState({ssoConfig:registeredConfig,originalConfig:registeredConfig,providers:ssoConfig.providers,isLoaded:!0})}getSsoProviderViewModel(settings){if(!settings?.provider)return null;switch(settings.provider){case AzureSsoSettingsEntity.A.PROVIDER_ID:return ssoSettings_AzureSsoSettingsViewModel.fromEntityDto(settings);case GoogleSsoSettingsEntity.A.PROVIDER_ID:return ssoSettings_GoogleSsoSettingsViewModel.fromEntityDto(settings);case OAuth2SsoSettingsEntity.A.PROVIDER_ID:return ssoSettings_OAuth2SsoSettingsViewModel.fromEntityDto(settings);case AdfsSsoSettingsEntity.A.PROVIDER_ID:return ssoSettings_AdfsSsoSettingsViewModel.fromEntityDto(settings)}return null}getSsoConfiguration(){return this.state.ssoConfig}getProviderList(){return this.state.providers}getSsoConfigurationDto(){return this.state.ssoConfig.toEntityDto()}isSsoConfigActivated(){return Boolean(this.state.ssoConfig)}hasFormChanged(){return this.state.isDataModified}setValue(key,value){const newConfig=this.state.ssoConfig.cloneWithMutation(key,value),isDataModified=!!this.state.originalConfig&&this.state.originalConfig.isDataDifferent(newConfig);this.setState({ssoConfig:newConfig,isDataModified},(()=>{this.state.hasBeenValidated&&this.validateData()}))}disableSso(){const cachedSsoConfig=this.state.cachedSsoConfig;cachedSsoConfig[this.state.ssoConfig.provider]=this.state.ssoConfig;this.setState({ssoConfig:null,cachedSsoConfig})}isDataReady(){return this.state.isLoaded}isProcessing(){return this.state.processing}changeProvider(provider){if(provider.disabled)return;const cachedSsoConfig=this.state.cachedSsoConfig,currentProviderConfig=this.state.ssoConfig?.provider;currentProviderConfig&&(cachedSsoConfig[currentProviderConfig]=this.state.ssoConfig),this.setState({ssoConfig:this.getCachedSsoConfigOrDefault(provider.id),cachedSsoConfig},(()=>{this.state.hasBeenValidated&&this.validateData()}))}getCachedSsoConfigOrDefault(providerId){if(this.state.cachedSsoConfig[providerId])return this.state.cachedSsoConfig[providerId];const defaultProviderConfiguration=SsoProviders_data.A.find((provider=>provider.id===providerId)),entityDto={id:this.state.ssoConfig?.id,provider:providerId,data:defaultProviderConfiguration.defaultConfig};return this.getSsoProviderViewModel(entityDto)}validateData(applyFieldFocusOnError=!1){const validattionError=this.state.ssoConfig.validate(),hasErrors=validattionError.hasErrors(),errors=hasErrors?validattionError:null;return this.setState({errors,hasBeenValidated:!0}),this.shouldFocusOnError=applyFieldFocusOnError&&hasErrors,!hasErrors}consumeFocusOnError(){const doFocusOnError=this.shouldFocusOnError;return this.shouldFocusOnError=!1,doFocusOnError}getErrors(){return this.state.errors}async saveAndTestConfiguration(){this.setState({processing:!0});const ssoSettings=this.getSsoConfigurationDto();let draftConfiguration;try{draftConfiguration=await this.props.context.port.request("passbolt.sso.save-draft",ssoSettings)}catch(e){return this.handleError(e),void this.setState({processing:!1})}await this.runTestConfig(draftConfiguration);const ssoConfig=this.getSsoProviderViewModel(draftConfiguration);this.setState({ssoConfig})}canDeleteSettings(){return this.isSsoConfigExisting&&null===this.state.ssoConfig}showDeleteConfirmationDialog(){this.props.dialogContext.open(ConfirmDeleteSsoSettingsDialog.A)}async deleteSettings(){this.setState({processing:!0});try{const ssoSettingsId=this.state.originalConfig.id;await this.props.context.port.request("passbolt.sso.delete-settings",ssoSettingsId),this.props.actionFeedbackContext.displaySuccess(this.props.t("The SSO settings have been deleted successfully")),this.isSsoConfigExisting=!1,this.setState({ssoConfig:null,originalConfig:null,processing:!1})}catch(e){this.handleError(e),this.setState({processing:!1})}}async runTestConfig(draftConfiguration){const selectedProvider=SsoProviders_data.A.find((provider=>provider.id===draftConfiguration.provider));this.props.dialogContext.open(TestSsoSettingsDialog.A,{provider:selectedProvider,configurationId:draftConfiguration.id,handleClose:this.handleTestConfigCloseDialog,onSuccessfulSettingsActivation:this.handleSettingsActivation})}handleTestConfigCloseDialog(){this.setState({processing:!1})}handleSettingsActivation(){this.isSsoConfigExisting=!0,this.setState({originalConfig:this.state.ssoConfig})}handleError(error){console.error(error),this.props.dialogContext.open(NotifyError.A,{error})}render(){return react.createElement(AdminSsoContext.Provider,{value:this.state},this.props.children)}}AdminSsoContextProvider.propTypes={context:prop_types_default().any,children:prop_types_default().any,accountRecoveryContext:prop_types_default().object,dialogContext:prop_types_default().object,actionFeedbackContext:prop_types_default().object,t:prop_types_default().func};const contexts_AdminSsoContext=(0,AppContext.L)((0,ActionFeedbackContext.ot)((0,DialogContext.z9)((0,es.CI)("common")(AdminSsoContextProvider))));function withAdminSso(WrappedComponent){return class WithAdminSso extends react.Component{render(){return react.createElement(AdminSsoContext.Consumer,null,(adminSsoContext=>react.createElement(WrappedComponent,{adminSsoContext,...this.props})))}}}AdminSsoContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"loadSsoConfiguration",docblock:"Find the sso configuration\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find the sso configuration"},{name:"getSsoProviderViewModel",docblock:"Constructor\n@param {SsoSettingsDto} settings\n@returns {SsoSettingsViewModel}",modifiers:[],params:[{name:"settings",type:{name:"SsoSettingsDto"},optional:!1}],returns:{type:{name:"SsoSettingsViewModel"}},description:"Constructor"},{name:"getSsoConfiguration",docblock:"Get the current sso config from the context's state.\n@returns {Object}",modifiers:[],params:[],returns:{type:{name:"Object"}},description:"Get the current sso config from the context's state."},{name:"getProviderList",docblock:"Returns a list of the available providers on the API.\n@returns {Array<string>}",modifiers:[],params:[],returns:{type:{name:"Array",elements:[{name:"string"}]}},description:"Returns a list of the available providers on the API."},{name:"getSsoConfigurationDto",docblock:"Get the current SSO configuration with data ready for the background page.\n@return {Object}\n@private",modifiers:[],params:[],returns:{type:{name:"Object"}},description:"Get the current SSO configuration with data ready for the background page."},{name:"isSsoConfigActivated",docblock:"Returns true if the sso settings are set to active.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the sso settings are set to active."},{name:"hasFormChanged",docblock:"Returns true if the current form changed\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the current form changed"},{name:"setValue",docblock:"Set an SSO settings value to the current config\n@param {string} key\n@param {string} value",modifiers:[],params:[{name:"key",type:{name:"string"},optional:!1},{name:"value",type:{name:"string"},optional:!1}],returns:null,description:"Set an SSO settings value to the current config"},{name:"disableSso",docblock:"Disable the Sso configuration.",modifiers:[],params:[],returns:null,description:"Disable the Sso configuration."},{name:"isDataReady",docblock:"Returns true if the data has finished to be loaded from the server.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the data has finished to be loaded from the server."},{name:"isProcessing",docblock:"Returns true when the data is under processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true when the data is under processing"},{name:"changeProvider",docblock:"Change the currently selected provider.",modifiers:[],params:[{name:"provider",optional:!1}],returns:null,description:"Change the currently selected provider."},{name:"getCachedSsoConfigOrDefault",docblock:"For the given provider returns the SSO config cached or the default configuration if none exists yet.\n@param {string} providerId\n@returns {SsoSettingsViewModel}",modifiers:[],params:[{name:"providerId",type:{name:"string"},optional:!1}],returns:{type:{name:"SsoSettingsViewModel"}},description:"For the given provider returns the SSO config cached or the default configuration if none exists yet."},{name:"validateData",docblock:"Validates the current data in the state\n@param {boolean} applyFieldFocusOnError if true a focus on the first erroneous field will be asked\n@returns {boolean} true if the data is valid, false otherwise",modifiers:[],params:[{name:"applyFieldFocusOnError",description:"if true a focus on the first erroneous field will be asked",type:{name:"boolean"},optional:!0}],returns:{description:"true if the data is valid, false otherwise",type:{name:"boolean"}},description:"Validates the current data in the state"},{name:"consumeFocusOnError",docblock:"Returns true the first time it is asked after a form validation process detected an error\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true the first time it is asked after a form validation process detected an error"},{name:"getErrors",docblock:"Returns the error set during validation.\n@returns {EntityValidationError}",modifiers:[],params:[],returns:{type:{name:"EntityValidationError"}},description:"Returns the error set during validation."},{name:"saveAndTestConfiguration",docblock:"Saves the current settings as a new draft and run the test dialog",modifiers:["async"],params:[],returns:null,description:"Saves the current settings as a new draft and run the test dialog"},{name:"canDeleteSettings",docblock:"Returns true if a SSo configuration exist on the API and the user disabled the settings.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if a SSo configuration exist on the API and the user disabled the settings."},{name:"showDeleteConfirmationDialog",docblock:"Show the delete settings confirmation dialog.",modifiers:[],params:[],returns:null,description:"Show the delete settings confirmation dialog."},{name:"deleteSettings",docblock:"Delete the current SSO settings.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Delete the current SSO settings."},{name:"runTestConfig",docblock:"Opens the test SSO settings dialog\n\n@param {SsoConfigurationDto} draftConfiguration",modifiers:["async"],params:[{name:"draftConfiguration",type:{name:"SsoConfigurationDto"},optional:!1}],returns:null,description:"Opens the test SSO settings dialog"},{name:"handleTestConfigCloseDialog",docblock:"Handles the closing of the SSO test configuration dialog",modifiers:[],params:[],returns:null,description:"Handles the closing of the SSO test configuration dialog"},{name:"handleSettingsActivation",docblock:"Handles the UI processing after a successful settings activation",modifiers:[],params:[],returns:null,description:"Handles the UI processing after a successful settings activation"},{name:"handleError",docblock:"Handle exception by displaying a pop-up containing the details of the error.\n@param {Error} error",modifiers:[],params:[{name:"error",type:{name:"Error"},optional:!1}],returns:null,description:"Handle exception by displaying a pop-up containing the details of the error."}],displayName:"AdminSsoContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1},accountRecoveryContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter((dialog=>dialogKey!==dialog.key))}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,(dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props})))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/models/entity/ssoSettings/AdfsSsoSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entity.js"),_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js");const ADFS_SUPPORTED_URLS=/^https:\/\/.+[^\/]$/;class AdfsSsoSettingsEntity extends _abstract_entity__WEBPACK_IMPORTED_MODULE_1__.A{constructor(adfsSsoSettingsDto,options={}){super(_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validate(AdfsSsoSettingsEntity.ENTITY_NAME,adfsSsoSettingsDto,AdfsSsoSettingsEntity.getSchema()),options)}static getSchema(){return{type:"object",required:["url","openid_configuration_path","scope","client_id","client_secret"],properties:{url:{type:"string",pattern:ADFS_SUPPORTED_URLS},openid_configuration_path:{type:"string",minLength:1},scope:{type:"string",minLength:1},client_id:{type:"string",minLength:1},client_secret:{type:"string",minLength:1}}}}static validateUrl(value){if("string"!=typeof value)throw new TypeError("The url should be a string.");let url;try{url=new URL(value)}catch(error){throw new Error("The url should be a valid url.")}if("https:"!==url.protocol)throw new Error("The url protocol should be HTTPS.")}static get ENTITY_NAME(){return"ADFSSsoSettings"}static get PROVIDER_ID(){return"adfs"}}const __WEBPACK_DEFAULT_EXPORT__=AdfsSsoSettingsEntity},"./src/shared/models/entity/ssoSettings/AzureSsoSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entity.js"),_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js");const SUPPORTED_URLS=["https://login.microsoftonline.com","https://login.microsoftonline.us","https://login.partner.microsoftonline.cn"],AZURE_SUPPORTED_URLS=/^https:\/\/login\.(microsoftonline\.(com|us)|partner\.microsoftonline\.cn)$/;class AzureSsoSettingsEntity extends _abstract_entity__WEBPACK_IMPORTED_MODULE_1__.A{constructor(azureSsoSettingsDto,options={}){const sanitizedAzureSsoSettingsDto=AzureSsoSettingsEntity.sanitizeDto(azureSsoSettingsDto);super(_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validate(AzureSsoSettingsEntity.ENTITY_NAME,sanitizedAzureSsoSettingsDto,AzureSsoSettingsEntity.getSchema()),options)}static getSchema(){return{type:"object",required:["url","client_id","tenant_id","client_secret","client_secret_expiry"],properties:{url:{type:"string",pattern:AZURE_SUPPORTED_URLS},client_id:{type:"string",format:"uuid"},tenant_id:{type:"string",format:"uuid"},client_secret:{type:"string",minLength:1},client_secret_expiry:{type:"string",format:"date-time"},email_claim:{type:"string",enum:["email","preferred_username","upn"]},prompt:{type:"string",enum:["login","none"]}}}}static sanitizeDto(dto){return dto=Object.assign({},dto),dto?.email_claim||(dto.email_claim="email"),dto?.prompt||(dto.prompt="login"),dto}static get ENTITY_NAME(){return"AzureSsoSettings"}static get PROVIDER_ID(){return"azure"}static get SUPPORTED_URLS(){return SUPPORTED_URLS}}const __WEBPACK_DEFAULT_EXPORT__=AzureSsoSettingsEntity},"./src/shared/models/entity/ssoSettings/GoogleSsoSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entity.js"),_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js");const SUPPORTED_URLS=["https://accounts.google.com"];class GoogleSsoSettingsEntity extends _abstract_entity__WEBPACK_IMPORTED_MODULE_1__.A{constructor(googleSsoSettingsDto,options={}){super(_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validate(GoogleSsoSettingsEntity.ENTITY_NAME,googleSsoSettingsDto,GoogleSsoSettingsEntity.getSchema()),options)}static getSchema(){return{type:"object",required:["client_id","client_secret"],properties:{client_id:{type:"string",minLength:1},client_secret:{type:"string",minLength:1}}}}static get ENTITY_NAME(){return"GoogleSsoSettings"}static get PROVIDER_ID(){return"google"}static get SUPPORTED_URLS(){return SUPPORTED_URLS}}const __WEBPACK_DEFAULT_EXPORT__=GoogleSsoSettingsEntity},"./src/shared/models/entity/ssoSettings/OAuth2SsoSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entity.js"),_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js");const OAUTH2_SUPPORTED_URLS=/^https:\/\/.+[^\/]$/;class OAuth2SsoSettingsEntity extends _abstract_entity__WEBPACK_IMPORTED_MODULE_1__.A{constructor(oAuth2SsoSettingsDto,options={}){super(_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validate(OAuth2SsoSettingsEntity.ENTITY_NAME,oAuth2SsoSettingsDto,OAuth2SsoSettingsEntity.getSchema()),options)}static getSchema(){return{type:"object",required:["url","openid_configuration_path","scope","client_id","client_secret"],properties:{url:{type:"string",pattern:OAUTH2_SUPPORTED_URLS},openid_configuration_path:{type:"string",minLength:1},scope:{type:"string",minLength:1},client_id:{type:"string",minLength:1},client_secret:{type:"string",minLength:1}}}}static get ENTITY_NAME(){return"OAuth2SsoSettings"}static get PROVIDER_ID(){return"oauth2"}}const __WEBPACK_DEFAULT_EXPORT__=OAuth2SsoSettingsEntity},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}}}]);