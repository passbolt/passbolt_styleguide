/*! For license information please see 6683.84b238f3.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[6683],{"./src/img/svg/delete.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgDelete(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25 4.5h13.5M14.25 4.5V15c0 .75-.75 1.5-1.5 1.5h-7.5c-.75 0-1.5-.75-1.5-1.5V4.5M6 4.5V3c0-.75.75-1.5 1.5-1.5h3c.75 0 1.5.75 1.5 1.5v1.5M7.5 8.25v4.5M10.5 8.25v4.5"})))}},"./src/img/svg/edit.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEdit(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 2.25H3.75a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V9"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.781 1.969a1.591 1.591 0 0 1 2.25 2.25L9 11.25 6 12l.75-3z"})))}},"./src/img/svg/more_vertical.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgMoreVertical(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 8.666a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333M8 4a.667.667 0 1 0 0-1.333A.667.667 0 0 0 8 4M8 13.333A.667.667 0 1 0 8 12a.667.667 0 0 0 0 1.333"})))}},"./src/img/svg/user_add.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgUserAdd(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15.75v-1.5a3 3 0 0 0-3-3H4.5a3 3 0 0 0-3 3v1.5M6.75 8.25a3 3 0 1 0 0-6 3 3 0 0 0 0 6M14.25 6v4.5M16.5 8.25H12"})))}},"./src/react-extension/components/Administration/CreateRole/CreateRole.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/img/svg/attention.svg"),_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js"),memoize_one__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js");class CreateRole extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.roleEntity=new _shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_7__.A({name:""},{validate:!1}),this.state=this.defaultState,this.createInputRefs(),this.bindEventHandlers()}get defaultState(){return{processing:!1,role:this.roleEntity.toDto(),hasAlreadyBeenValidated:!1}}createInputRefs(){this.nameRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}validateForm=(0,memoize_one__WEBPACK_IMPORTED_MODULE_8__.A)(roleDto=>this.roleEntity.validate(roleDto));verifyDataHealth=(0,memoize_one__WEBPACK_IMPORTED_MODULE_8__.A)(_roleDto=>this.roleEntity.verifyHealth());handleClose(){this.props.onClose()}handleInputChange(event){const target=event.target,value=target.value,name=target.name;this.roleEntity.set(name,value,{validate:!1});const newState={role:this.roleEntity.toDto()};this.setState(newState)}async handleFormSubmit(event){if(event.preventDefault(),this.state.processing)return;this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing();const validationError=this.roleEntity.validate();if(validationError?.hasErrors()||this.roleEntity.isAReservedRole())return this.focusFirstFieldError(),void await this.toggleProcessing();await this.props.onSubmit(this.roleEntity),this.handleClose()}async toggleProcessing(){const prev=this.state.processing;return new Promise(resolve=>{this.setState({processing:!prev},resolve())})}focusFirstFieldError(){this.nameRef.current.focus()}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){const warnings=this.verifyDataHealth(this.state.role),errors=this.state.hasAlreadyBeenValidated?this.validateForm(this.state.role):null,hasNameReservedError=this.state.hasAlreadyBeenValidated&&this.roleEntity.isAReservedRole();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{className:"role-create-dialog",title:this.translate("Create role"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{className:"role-create-form",onSubmit:this.handleFormSubmit,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input text required ${errors?.hasError("name")||hasNameReservedError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"role-name-input"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Role name"),warnings?.hasErrors()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_6__.A,{className:"attention-required"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:"role-name-input",name:"name",ref:this.nameRef,type:"text",value:this.state.role.name,placeholder:this.props.t("New role"),maxLength:_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_7__.A.ROLE_NAME_MAX_LENGTH,disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,autoComplete:"off",autoFocus:!0}),errors?.hasErrors()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"error-message"},errors?.hasError("name","maxLength")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"A name can not be more than 50 char in length."),errors?.hasError("name","minLength")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"A name is required."),errors?.hasError("name","trailing-spaces")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"The name contains forbidden trailing spaces.")),errors?.hasError("name","maxLength")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"A name can not be more than 255 char in length.")),hasNameReservedError&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"This name is reserved by the system.")),warnings?.hasError("name","maxLength")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name warning-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Warning:"))," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"this is the maximum size for this field, make sure your data was not truncated.")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}CreateRole.propTypes={onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(CreateRole);CreateRole.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"createInputRefs",docblock:"Create references\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Create references"},{name:"bindEventHandlers",docblock:"Bind event handlers\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind event handlers"},{name:"handleClose",docblock:"Handle close button click.\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle close button click."},{name:"handleInputChange",docblock:"Handle form input changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"event",optional:!1}],returns:{type:{name:"void"}},description:"Handle form input changes."},{name:"handleFormSubmit",docblock:"Handle form submission that can be trigger when hitting `enter`\n@param {Event} event The html event triggering the form submit.",modifiers:["async"],params:[{name:"event",description:"The html event triggering the form submit.",type:{name:"Event"},optional:!1}],returns:null,description:"Handle form submission that can be trigger when hitting `enter`"},{name:"toggleProcessing",docblock:"Toggle processing state\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle processing state"},{name:"focusFirstFieldError",docblock:"Focus the first field of the form which is in error state.\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Focus the first field of the form which is in error state."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"translate",docblock:"Get translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get translate function"}],displayName:"CreateRole",props:{onClose:{description:"",type:{name:"func"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!0},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DeleteRole/DeleteRole.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js");class DeleteRole extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.initEventHandlers()}get defaultState(){return{processing:!1}}initEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}async handleFormSubmit(event){event.preventDefault(),this.state.processing||(this.delete(),this.handleClose())}handleClose(){this.props.onClose()}delete(){this.setState({processing:!0}),this.props.onSubmit(this.props.role)}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{title:this.translate("Delete role?"),onClose:this.handleClose,disabled:this.state.processing,className:"delete-role-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Are you sure you want to delete the role"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",{className:"dialog-variable"},{roleName:this.props.role.name}),"?")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Once the role is deleted, it will be removed permanently and will not be recoverable."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}DeleteRole.propTypes={onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,role:prop_types__WEBPACK_IMPORTED_MODULE_1___default().instanceOf(_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_6__.A).isRequired,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(DeleteRole);DeleteRole.__docgenInfo={description:"This component allows user to delete a role",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"initEventHandlers",docblock:null,modifiers:[],params:[],returns:null},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"handleClose",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"delete",docblock:"Save the changes.",modifiers:[],params:[],returns:null,description:"Save the changes."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DeleteRole",props:{onClose:{description:"",type:{name:"func"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},role:{description:"",type:{name:"instanceOf",value:"RoleEntity"},required:!0},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DeleteRole/DeleteRoleNotAllowed.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js");class DeleteRoleNotAllowed extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.initEventHandlers()}get defaultState(){return{processing:!1}}initEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}async handleFormSubmit(event){event.preventDefault(),this.state.processing||(this.setState({processing:!0}),this.handleClose())}handleClose(){this.props.onClose()}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{title:this.translate("Delete role"),onClose:this.handleClose,disabled:this.state.processing,className:"delete-role-not-allowed-dialog"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"The role ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",{className:"dialog-variable"},{roleName:this.props.role.name})," can’t be deleted yet.")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,{count:this.props.usersCount},{count:this.props.usersCount}," user is still assigned to this role.")," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,{count:this.props.usersCount},"Assign him a different role, then try deleting"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",{className:"dialog-variable"},{roleName:this.props.role.name})," again."))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Ok")}))))}}DeleteRoleNotAllowed.propTypes={onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,role:prop_types__WEBPACK_IMPORTED_MODULE_1___default().instanceOf(_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_6__.A).isRequired,usersCount:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(DeleteRoleNotAllowed);DeleteRoleNotAllowed.__docgenInfo={description:"This component allows user to delete a role",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"initEventHandlers",docblock:null,modifiers:[],params:[],returns:null},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"handleClose",docblock:"Handle close button click.",modifiers:[],params:[],returns:null,description:"Handle close button click."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DeleteRoleNotAllowed",props:{onClose:{description:"",type:{name:"func"},required:!1},role:{description:"",type:{name:"instanceOf",value:"RoleEntity"},required:!0},usersCount:{description:"",type:{name:"number"},required:!0},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/DisplayRbacAdministration/DisplayRbacAdministration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DisplayRbacAdministration_DisplayRbacAdministration});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),AdministrationRbacContext=__webpack_require__("./src/react-extension/contexts/Administration/AdministrationRbacContext/AdministrationRbacContext.js");class DisplayAdministrationRbacActions extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this)}async handleSaveClick(){try{await this.props.adminRbacContext.save(),this.handleSaveSuccess()}catch(error){this.handleSaveError(error)}}isSaveEnabled(){return!this.props.adminRbacContext.isProcessing()}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("The role-based access control settings were updated."))}async handleSaveError(error){console.error(error),await this.props.actionFeedbackContext.displayError(error.message)}render(){return react.createElement("div",{className:"actions-wrapper"},react.createElement("button",{className:"button primary form",type:"button",disabled:!this.isSaveEnabled(),onClick:this.handleSaveClick},react.createElement("span",null,react.createElement(es.x6,null,"Save"))))}}DisplayAdministrationRbacActions.propTypes={context:prop_types_default().object,adminRbacContext:prop_types_default().object,actionFeedbackContext:prop_types_default().object,t:prop_types_default().func};const DisplayAdministrationRbacsActions_DisplayAdministrationRbacActions=(0,AdministrationRbacContext.gP)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(DisplayAdministrationRbacActions)));DisplayAdministrationRbacActions.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleSaveClick",docblock:"Handle save settings",modifiers:["async"],params:[],returns:null,description:"Handle save settings"},{name:"isSaveEnabled",docblock:"Is save button enable\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is save button enable"},{name:"handleSaveSuccess",docblock:"Handle save operation success.",modifiers:["async"],params:[],returns:null,description:"Handle save operation success."},{name:"handleSaveError",docblock:"Handle save operation error.\n@param {object} error The returned error",modifiers:["async"],params:[{name:"error",description:"The returned error",type:{name:"object"},optional:!1}],returns:null,description:"Handle save operation error."}],displayName:"DisplayAdministrationRbacActions",props:{context:{description:"",type:{name:"object"},required:!1},adminRbacContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var caret_down=__webpack_require__("./src/img/svg/caret_down.svg");class DisplayRbacSection extends react.Component{blankColumnSectionForRoles(){const rows=[];for(let i=0;i<this.props.rolesCount;i++)rows.push(react.createElement("div",{className:"flex-item",key:i}," "));return react.createElement(react.Fragment,null,rows)}render(){return react.createElement(react.Fragment,null,react.createElement("div",{className:`flex-container inner level-${this.props.level}`},react.createElement("div",{className:"flex-item first"},react.createElement("span",null,react.createElement(caret_down.A,{className:"caret-down"}),"  ",this.props.label)),this.blankColumnSectionForRoles()),this.props.children)}}DisplayRbacSection.defaultProps={rolesCount:0},DisplayRbacSection.propTypes={label:prop_types_default().string,level:prop_types_default().number,rolesCount:prop_types_default().number,t:prop_types_default().func,children:prop_types_default().any};const DisplayRbacAdministration_DisplayRbacSection=(0,es.CI)("common")(DisplayRbacSection);DisplayRbacSection.__docgenInfo={description:"",methods:[{name:"blankColumnSectionForRoles",docblock:"Return a blank section\n@return {React.JSX.Element}",modifiers:[],params:[],returns:{type:{name:"React.JSX.Element"}},description:"Return a blank section"}],displayName:"DisplayRbacSection",props:{rolesCount:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},label:{description:"",type:{name:"string"},required:!1},level:{description:"",type:{name:"number"},required:!1},t:{description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"any"},required:!1}}};var Select=__webpack_require__("./src/react-extension/components/Common/Select/Select.js"),controlFunctionEnumeration=__webpack_require__("./src/shared/services/rbacs/controlFunctionEnumeration.js"),uiActionEnumeration=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),rolesCollection=__webpack_require__("./src/shared/models/entity/role/rolesCollection.js");class DisplayRbacItem extends react.Component{constructor(props){super(props),this.handleInputChange=this.handleInputChange.bind(this)}handleInputChange(event,role){this.props.onChange(role,this.props.actionName,event.target.value)}get allowedCtlFunctions(){const controls=[{value:controlFunctionEnumeration.HK.ALLOW,label:this.props.t("Allow")},{value:controlFunctionEnumeration.HK.DENY,label:this.props.t("Deny")}];return this.props.actionName===uiActionEnumeration.e.USERS_VIEW_WORKSPACE&&controls.push({value:controlFunctionEnumeration.HK.ALLOW_IF_GROUP_MANAGER_IN_ONE_GROUP,label:this.props.t("Allow group manager"),title:this.props.t("Allow group manager")}),controls}get rowClassName(){return this.props.actionName.toLowerCase().replaceAll(/[^\w]/gi,"-")}getCtlFunctionForRole(role){const rbac=this.props.rbacsUpdated?.findRbacByRoleAndActionName(role,this.props.actionName)||this.props.rbacs?.findRbacByRoleAndActionName(role,this.props.actionName);return rbac?.controlFunction||null}hasChanged(){return!!this.props.rbacsUpdated.findRbacByUiActionName(this.props.actionName)}render(){let customizableRoles=[];return this.props.roles&&(customizableRoles=this.props.roles),react.createElement(react.Fragment,null,react.createElement("div",{className:`rbac-row ${this.rowClassName} flex-container inner level-${this.props.level} ${this.hasChanged()?"highlighted":""}`},react.createElement("div",{className:"flex-item first"},react.createElement("span",null,this.props.label)),react.createElement("div",{className:"flex-item"},react.createElement(Select.A,{className:"admin inline",items:this.allowedCtlFunctions,value:controlFunctionEnumeration.HK.ALLOW,disabled:!0})),customizableRoles.items.map(role=>react.createElement("div",{key:`${this.props.actionName}-${role.id}`,className:"flex-item input"},react.createElement(Select.A,{className:"inline",items:this.allowedCtlFunctions,value:this.getCtlFunctionForRole(role),disabled:!(this.props.rbacs?.length>0&&this.getCtlFunctionForRole(role)),onChange:event=>this.handleInputChange(event,role)}),!this.getCtlFunctionForRole(role)&&react.createElement("div",{className:"warning-message"},"There is no valid setting found for this action.")))))}}DisplayRbacItem.propTypes={label:prop_types_default().string.isRequired,level:prop_types_default().number.isRequired,actionName:prop_types_default().string.isRequired,rbacs:prop_types_default().object,rbacsUpdated:prop_types_default().object,roles:prop_types_default().instanceOf(rolesCollection.A).isRequired,onChange:prop_types_default().func.isRequired,t:prop_types_default().func};const DisplayRbacAdministration_DisplayRbacItem=(0,es.CI)("common")(DisplayRbacItem);DisplayRbacItem.__docgenInfo={description:"",methods:[{name:"handleInputChange",docblock:"Handle select change.\n@param {Event} event The html event occurring on the select component\n@param {RoleEntity} role The role the select change for",modifiers:[],params:[{name:"event",description:"The html event occurring on the select component",type:{name:"Event"},optional:!1},{name:"role",description:"The role the select change for",type:{name:"RoleEntity"},optional:!1}],returns:null,description:"Handle select change."},{name:"allowedCtlFunctions",docblock:"Return the list of allowed control functions.\n@returns {[{label: string, value: string},{label: string, value: string}]}",modifiers:["get"],params:[],returns:{type:{name:"tuple",elements:[]}},description:"Return the list of allowed control functions."},{name:"rowClassName",docblock:"Get the row component class name.\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the row component class name."},{name:"getCtlFunctionForRole",docblock:"Get the defined control function for the given role\n@param {RoleEntity} role The role to get the control function for\n@return {string|null}",modifiers:[],params:[{name:"role",description:"The role to get the control function for",type:{name:"RoleEntity"},optional:!1}],returns:{type:{name:"union",elements:[{name:"string"}]}},description:"Get the defined control function for the given role"},{name:"hasChanged",docblock:"Check if the control has changed\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the control has changed"}],displayName:"DisplayRbacItem",props:{label:{description:"",type:{name:"string"},required:!0},level:{description:"",type:{name:"number"},required:!0},actionName:{description:"",type:{name:"string"},required:!0},rbacs:{description:"",type:{name:"object"},required:!1},rbacsUpdated:{description:"",type:{name:"object"},required:!1},roles:{description:"",type:{name:"instanceOf",value:"RolesCollection"},required:!0},onChange:{description:"",type:{name:"func"},required:!0},t:{description:"",type:{name:"func"},required:!1}}};var PassboltResponseEntity=__webpack_require__("./src/shared/models/entity/apiService/PassboltResponseEntity.js"),abstractService=__webpack_require__("./src/shared/services/api/abstract/abstractService.js"),assertions=__webpack_require__("./src/shared/utils/assertions.js"),assertString=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js");class RoleApiService extends abstractService.A{constructor(apiClientOptions){super(apiClientOptions,RoleApiService.RESOURCE_NAME)}static get RESOURCE_NAME(){return"roles"}async findAll(){const response=await this.apiClient.findAll(),body=response.body&&response.body.length?response.body:[];return new PassboltResponseEntity.A({header:response.header,body})}async create(roleDto){if(!roleDto||!roleDto.name)throw new TypeError("Role creation failed, invalid role data.");(0,assertString.A)(roleDto.name);const response=await this.apiClient.create(roleDto);return new PassboltResponseEntity.A(response)}async update(id,roleDto){if(!id)throw new TypeError("Role update failed, role id is required.");if(!roleDto||!roleDto.name)throw new TypeError("Role update failed, invalid role data.");(0,assertions.Ew)(id),(0,assertString.A)(roleDto.name);const response=await this.apiClient.update(id,roleDto);return new PassboltResponseEntity.A(response)}async delete(roleId){(0,assertions.Ew)(roleId);const response=await this.apiClient.delete(roleId);return new PassboltResponseEntity.A(response)}}var rbacApiService=__webpack_require__("./src/shared/services/api/rbac/rbacApiService.js"),rbacsCollection=__webpack_require__("./src/shared/models/entity/rbac/rbacsCollection.js"),rbacEntity=__webpack_require__("./src/shared/models/entity/rbac/rbacEntity.js"),file_text=__webpack_require__("./src/img/svg/file_text.svg"),portals=__webpack_require__("./src/shared/utils/portals.js"),user_add=__webpack_require__("./src/img/svg/user_add.svg"),more_vertical=__webpack_require__("./src/img/svg/more_vertical.svg"),svg_delete=__webpack_require__("./src/img/svg/delete.svg"),edit=__webpack_require__("./src/img/svg/edit.svg"),CreateRole=__webpack_require__("./src/react-extension/components/Administration/CreateRole/CreateRole.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),stringUtils=__webpack_require__("./src/shared/utils/stringUtils.js"),Dropdown=__webpack_require__("./src/react-extension/components/Common/Dropdown/Dropdown.js"),DropdownButton=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownButton.js"),DropdownMenu=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenu.js"),DropdownMenuItem=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenuItem.js"),DeleteRole=__webpack_require__("./src/react-extension/components/Administration/DeleteRole/DeleteRole.js"),EditRole=__webpack_require__("./src/react-extension/components/Administration/EditRole/EditRole.js"),actionEnumeration=__webpack_require__("./src/shared/services/rbacs/actionEnumeration.js"),userService=__webpack_require__("./src/shared/services/api/user/userService.js"),DeleteRoleNotAllowed=__webpack_require__("./src/react-extension/components/Administration/DeleteRole/DeleteRoleNotAllowed.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js");class DisplayRbacAdministration extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks();const apiClientOptions=this.props.context.getApiClientOptions();this.roleApiService=new this.props.RoleApiService(apiClientOptions),this.rbacApiService=new this.props.RbacApiService(apiClientOptions),this.userApiService=new this.props.UserApiService(apiClientOptions)}get defaultState(){return{roles:null}}bindCallbacks(){this.updateRbacControlFunction=this.updateRbacControlFunction.bind(this),this.handleAddRoleClick=this.handleAddRoleClick.bind(this),this.createNewRole=this.createNewRole.bind(this),this.handleDeleteRoleClick=this.handleDeleteRoleClick.bind(this),this.deleteRole=this.deleteRole.bind(this),this.handleRenameRoleClick=this.handleRenameRoleClick.bind(this),this.renameRole=this.renameRole.bind(this)}async componentDidMount(){this.findAndLoadData()}componentWillUnmount(){this.props.adminRbacContext.clearContext()}findAndLoadData(){this.findAndLoadRoles(),this.findAndLoadRbacSettings()}async findAndLoadRoles(){const rolesDto=(await this.roleApiService.findAll()).body,roles=new rolesCollection.A(rolesDto);roles.filterOutGuestRole(),this.setState({roles})}async findAndLoadRbacSettings(){const rbacsDto=(await this.rbacApiService.findAll({ui_action:!0,action:!0})).body,rbacs=new rbacsCollection.A(rbacsDto,!0);this.props.adminRbacContext.setRbacs(rbacs)}updateRbacControlFunction(role,actionName,controlFunction){const rbacsUpdated=this.props.adminRbacContext.rbacsUpdated,rbac=this.props.adminRbacContext.rbacs.findRbacByRoleAndActionName(role,actionName);if(rbac.controlFunction===controlFunction)rbacsUpdated.remove(rbac);else{const clonedRbac=new rbacEntity.A(rbac.toDto({ui_action:!0,action:!0}));clonedRbac.controlFunction=controlFunction,rbacsUpdated.pushOrReplace(clonedRbac)}this.props.adminRbacContext.setRbacsUpdated(rbacsUpdated)}handleAddRoleClick(event){event.preventDefault(),this.props.dialogContext.open(CreateRole.A,{onSubmit:this.createNewRole})}async createNewRole(roleEntity){try{await this.roleApiService.create(roleEntity.toDto()),this.findAndLoadData(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The role has been created successfully."))}catch(error){this.props.dialogContext.open(NotifyError.A,{error})}}async handleDeleteRoleClick(event,role){event.preventDefault();const usersDto=(await this.userApiService.findAll()).body.filter(user=>user.role_id===role.id);usersDto.length>0?this.props.dialogContext.open(DeleteRoleNotAllowed.A,{role,usersCount:usersDto.length}):this.props.dialogContext.open(DeleteRole.A,{role,onSubmit:this.deleteRole})}async deleteRole(roleEntity){try{await this.roleApiService.delete(roleEntity.id),this.findAndLoadData(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The role has been deleted successfully."))}catch(error){this.props.dialogContext.open(NotifyError.A,{error})}}async handleRenameRoleClick(event,role){event.preventDefault(),this.props.dialogContext.open(EditRole.A,{role,onSubmit:this.renameRole})}async renameRole(roleEntity){try{await this.roleApiService.update(roleEntity.id,roleEntity.toUpdateDto()),this.findAndLoadData(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The role has been updated successfully."))}catch(error){this.props.dialogContext.open(NotifyError.A,{error})}}get canIUseTags(){return this.props.context.siteSettings.canIUse("tags")}get canIUseDesktop(){return this.props.context.siteSettings.canIUse("desktop")}get canIUseMobile(){return this.props.context.siteSettings.canIUse("mobile")}get canIUseFolders(){return this.props.context.siteSettings.canIUse("folders")}get canIUsePreviewPassword(){return this.props.context.siteSettings.canIUse("previewPassword")}get canIUseExport(){return this.props.context.siteSettings.canIUse("export")}get canIUseImport(){return this.props.context.siteSettings.canIUse("import")}get canIUseAccountRecovery(){return this.props.context.siteSettings.canIUse("accountRecovery")}get isReady(){return null!==this.state.roles}get canAddNewRole(){const maxRoleCount=rolesCollection.A.getSchema().maxItems-1;return null!==this.state.roles&&this.state.roles.length<maxRoleCount}getTranslatedRoleName(roleEntity){return roleEntity.isAReservedRole()?this.props.t(roleEntity.name):roleEntity.name}get customizableRoles(){const roles=[];if(null!==this.state.roles){const userRoles=this.state.roles.items.find(role=>role.isUser()),customRoles=this.state.roles.items.filter(role=>!role.isAdmin()&&!role.isUser());roles.push(userRoles,...customRoles)}return new rolesCollection.A(roles,{validate:!1})}blankColumnSectionForRoles(){const rows=[];return this.state.roles?.items.forEach((item,index)=>{rows.push(react.createElement("div",{className:"flex-item",key:index}," "))}),react.createElement(react.Fragment,null,rows)}render(){const hasSaveWarning=this.props.adminRbacContext.hasSettingsChanges(),customizableRoles=this.customizableRoles,rolesCount=this.state.roles?.length;return react.createElement("div",{className:"row"},react.createElement("div",{className:"rbac-settings main-column"},react.createElement("div",{className:"main-content"},react.createElement("h3",{className:"title"},react.createElement(es.x6,null,"Role-Based Access Control")),react.createElement("div",{className:"section-header"},react.createElement("p",null,react.createElement(es.x6,null,"In this section you can define access controls for each user role.")),react.createElement("button",{type:"button",className:"button",onClick:this.handleAddRoleClick,disabled:!this.canAddNewRole,title:this.canAddNewRole?"":this.props.t("Maximum number of roles reached")},react.createElement(user_add.A,null)," ",react.createElement(es.x6,null,"Add role"))),react.createElement("form",{className:"form"},react.createElement("div",{className:"flex-container outer"},react.createElement("div",{className:"flex-container inner header-flex"},react.createElement("div",{className:"flex-item first"}," "),react.createElement("div",{className:"flex-item centered"},react.createElement("span",{className:"ellipsis",title:this.props.t("Admin")},react.createElement(es.x6,null,"Admin"))),customizableRoles.items.map(role=>react.createElement("div",{className:"flex-item centered",key:role.id},react.createElement("span",{className:"ellipsis",title:(0,stringUtils.Z)(this.getTranslatedRoleName(role))},(0,stringUtils.Z)(this.getTranslatedRoleName(role))),!role.isAReservedRole()&&react.createElement(Dropdown.A,null,react.createElement(DropdownButton.A,{className:"more button-action-icon link no-border"},react.createElement(more_vertical.A,null)),react.createElement(DropdownMenu.A,{className:"menu-action-contextual",direction:"left"},react.createElement(DropdownMenuItem.A,null,react.createElement("button",{id:"rename_role_action",type:"button",className:"no-border",onClick:event=>this.handleRenameRoleClick(event,role)},react.createElement(edit.A,null),react.createElement("span",null,react.createElement(es.x6,null,"Rename")))),react.createElement(DropdownMenuItem.A,null,react.createElement("button",{id:"delete_role_action",type:"button",className:"no-border",onClick:event=>this.handleDeleteRoleClick(event,role)},react.createElement(svg_delete.A,null),react.createElement("span",null,react.createElement(es.x6,null,"Delete"))))))))),this.isReady&&react.createElement(react.Fragment,null,react.createElement("div",{className:"flex-container inner header-flex"},react.createElement("div",{className:"flex-item first"},react.createElement("label",null,react.createElement(es.x6,null,"API Permissions"))),this.blankColumnSectionForRoles()),react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Group management"),level:1,rolesCount},react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Create a group"),actionName:actionEnumeration.o.GROUPS_ADD,level:2,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction})),this.canIUseAccountRecovery&&react.createElement(react.Fragment,null,react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Account recovery request"),level:1,rolesCount},react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Account recovery request view"),actionName:actionEnumeration.o.ACCOUNT_RECOVERY_REQUEST_VIEW,level:2,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Account recovery request index"),actionName:actionEnumeration.o.ACCOUNT_RECOVERY_REQUEST_INDEX,level:2,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Account recovery request review"),actionName:actionEnumeration.o.ACCOUNT_RECOVERY_RESPONSE_CREATE,level:2,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}))),react.createElement("div",{className:"flex-container inner header-flex"},react.createElement("div",{className:"flex-item first"},react.createElement("label",null,react.createElement(es.x6,null,"UI Permissions"))),this.blankColumnSectionForRoles()),react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Resources"),level:1,rolesCount},(this.canIUseImport||this.canIUseExport)&&react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Import/Export"),level:2,rolesCount},this.canIUseImport&&react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can import"),actionName:uiActionEnumeration.e.RESOURCES_IMPORT,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),this.canIUseExport&&react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can export"),actionName:uiActionEnumeration.e.RESOURCES_EXPORT,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction})),react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Password"),level:2,rolesCount},this.canIUsePreviewPassword&&react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can preview"),actionName:uiActionEnumeration.e.SECRETS_PREVIEW,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can copy"),actionName:uiActionEnumeration.e.SECRETS_COPY,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction})),react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Metadata"),level:2,rolesCount},react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can see password activities"),actionName:uiActionEnumeration.e.RESOURCES_SEE_ACTIVITIES,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can see password comments"),actionName:uiActionEnumeration.e.RESOURCES_SEE_COMMENTS,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction})),(this.canIUseFolders||this.canIUseTags)&&react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Organization"),level:2,rolesCount},this.canIUseFolders&&react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can use folders"),actionName:uiActionEnumeration.e.FOLDERS_USE,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),this.canIUseTags&&react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can use tags"),actionName:uiActionEnumeration.e.TAGS_USE,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction})),react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Sharing"),level:2,rolesCount},react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can see with whom passwords are shared with"),actionName:uiActionEnumeration.e.SHARE_VIEW_LIST,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can share folders"),actionName:uiActionEnumeration.e.SHARE_FOLDER,level:3,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}))),react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("Users"),level:1,rolesCount},react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can see users workspace"),actionName:uiActionEnumeration.e.USERS_VIEW_WORKSPACE,level:2,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction})),(this.canIUseMobile||this.canIUseDesktop)&&react.createElement(DisplayRbacAdministration_DisplayRbacSection,{label:this.props.t("User settings"),level:1,rolesCount},this.canIUseMobile&&react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can see mobile setup"),actionName:uiActionEnumeration.e.MOBILE_TRANSFER,level:2,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction}),this.canIUseDesktop&&react.createElement(DisplayRbacAdministration_DisplayRbacItem,{label:this.props.t("Can see desktop application setup"),actionName:uiActionEnumeration.e.DESKTOP_TRANSFER,level:2,rbacs:this.props.adminRbacContext.rbacs,rbacsUpdated:this.props.adminRbacContext.rbacsUpdated,roles:customizableRoles,onChange:this.updateRbacControlFunction})))))),hasSaveWarning&&react.createElement("div",{className:"warning message"},react.createElement("div",null,react.createElement("p",null,react.createElement(es.x6,null,"Don't forget to save your settings to apply your modification."))))),react.createElement(DisplayAdministrationRbacsActions_DisplayAdministrationRbacActions,null),(0,portals.m)(react.createElement("div",{className:"sidebar-help-section"},react.createElement("h3",null,react.createElement(es.x6,null,"Need help?")),react.createElement("p",null,react.createElement(es.x6,null,"Check out the Role Based Access Control documentation.")),react.createElement("a",{className:"button",href:"https://passbolt.com/docs/admin/role-based-access-control/",target:"_blank",rel:"noopener noreferrer"},react.createElement(file_text.A,null),react.createElement("span",null,react.createElement(es.x6,null,"Read RBAC doc")))),document.getElementById("administration-help-panel")))}}DisplayRbacAdministration.defaultProps={RoleApiService,RbacApiService:rbacApiService.A,UserApiService:userService.A},DisplayRbacAdministration.propTypes={context:prop_types_default().object,administrationWorkspaceContext:prop_types_default().object,adminRbacContext:prop_types_default().object,dialogContext:prop_types_default().object,RoleApiService:prop_types_default().func,RbacApiService:prop_types_default().func,UserApiService:prop_types_default().func,t:prop_types_default().func};const DisplayRbacAdministration_DisplayRbacAdministration=(0,AppContext.L)((0,AdministrationRbacContext.gP)((0,AdministrationWorkspaceContext.Kk)((0,DialogContext.z9)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(DisplayRbacAdministration))))));DisplayRbacAdministration.__docgenInfo={description:"This component allows to display the internationalisation for the administration",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"bindCallbacks",docblock:"Bind callbacks",modifiers:[],params:[],returns:null,description:"Bind callbacks"},{name:"findAndLoadData",docblock:"Loads all the necessary roles and all Rbac information.",modifiers:[],params:[],returns:null,description:"Loads all the necessary roles and all Rbac information."},{name:"findAndLoadRoles",docblock:"Find and load the roles\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find and load the roles"},{name:"findAndLoadRbacSettings",docblock:"Find and load the rbac settings\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find and load the rbac settings"},{name:"updateRbacControlFunction",docblock:"Update a rbac setting.\n@param {RoleEntity} role The role to update the rbac for.\n@param {string} actionName The action to update the rbac for.\n@param {string} controlFunction The new control function for the rbac.",modifiers:[],params:[{name:"role",description:"The role to update the rbac for.",type:{name:"RoleEntity"},optional:!1},{name:"actionName",description:"The action to update the rbac for.",type:{name:"string"},optional:!1},{name:"controlFunction",description:"The new control function for the rbac.",type:{name:"string"},optional:!1}],returns:null,description:"Update a rbac setting."},{name:"handleAddRoleClick",docblock:'Handles the click on the "Add role" button\n@param {React.Event} event',modifiers:[],params:[{name:"event",type:{name:"React.Event"},optional:!1}],returns:null,description:'Handles the click on the "Add role" button'},{name:"createNewRole",docblock:"Creates a new role on the API.\n@param {RoleEntity} roleEntity",modifiers:["async"],params:[{name:"roleEntity",type:{name:"RoleEntity"},optional:!1}],returns:null,description:"Creates a new role on the API."},{name:"handleDeleteRoleClick",docblock:"Handle role delete click event\n@param {React.Event} event\n@param {RoleEntity} role",modifiers:["async"],params:[{name:"event",type:{name:"React.Event"},optional:!1},{name:"role",type:{name:"RoleEntity"},optional:!1}],returns:null,description:"Handle role delete click event"},{name:"deleteRole",docblock:"Deletes the given role from the API\n@param {RoleEntity} roleEntity",modifiers:["async"],params:[{name:"roleEntity",type:{name:"RoleEntity"},optional:!1}],returns:null,description:"Deletes the given role from the API"},{name:"handleRenameRoleClick",docblock:"Handle role rename click event\n@param {React.Event} event\n@param {RoleEntity} role",modifiers:["async"],params:[{name:"event",type:{name:"React.Event"},optional:!1},{name:"role",type:{name:"RoleEntity"},optional:!1}],returns:null,description:"Handle role rename click event"},{name:"renameRole",docblock:"Rename the given role on the API\n@param {RoleEntity} roleEntity",modifiers:["async"],params:[{name:"roleEntity",type:{name:"RoleEntity"},optional:!1}],returns:null,description:"Rename the given role on the API"},{name:"canIUseTags",docblock:"Is the user allowed to use the tags capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the tags capability"},{name:"canIUseDesktop",docblock:"Is the user allowed to use the desktop export capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the desktop export capability"},{name:"canIUseMobile",docblock:"Is the user allowed to use the mobile export capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the mobile export capability"},{name:"canIUseFolders",docblock:"Is the user allowed to use the folders capability\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use the folders capability"},{name:"canIUsePreviewPassword",docblock:"Is the user allowed to use preview password capability.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use preview password capability."},{name:"canIUseExport",docblock:"Is the user allowed to use export capability.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use export capability."},{name:"canIUseImport",docblock:"Is the user allowed to use import capability.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use import capability."},{name:"canIUseAccountRecovery",docblock:"Is the user allowed to use account recovery capability.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is the user allowed to use account recovery capability."},{name:"isReady",docblock:"Check if the component is ready to display its rows.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Check if the component is ready to display its rows."},{name:"canAddNewRole",docblock:"Returns true if a new role can be added.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if a new role can be added."},{name:"getTranslatedRoleName",docblock:"Returns the role name translated if it is a reserved role name.\n@param {RoleEntity} roleEntity\n@returns {string}",modifiers:[],params:[{name:"roleEntity",type:{name:"RoleEntity"},optional:!1}],returns:{type:{name:"string"}},description:"Returns the role name translated if it is a reserved role name."},{name:"customizableRoles",docblock:"Get the custom roles with user as first position\n@return {RolesCollection}",modifiers:["get"],params:[],returns:{type:{name:"RolesCollection"}},description:"Get the custom roles with user as first position"},{name:"blankColumnSectionForRoles",docblock:"Return a blank section\n@return {React.JSX.Element}",modifiers:[],params:[],returns:{type:{name:"React.JSX.Element"}},description:"Return a blank section"}],displayName:"DisplayRbacAdministration",props:{RoleApiService:{defaultValue:{value:'class RoleApiService extends AbstractService {\n  /**\n   * Constructor\n   *\n   * @param {ApiClientOptions} apiClientOptions\n   * @public\n   */\n  constructor(apiClientOptions) {\n    super(apiClientOptions, RoleApiService.RESOURCE_NAME);\n  }\n\n  /**\n   * API Resource Name\n   *\n   * @returns {string}\n   * @public\n   */\n  static get RESOURCE_NAME() {\n    return ROLES_API_SERVICE_RESOURCE_NAME;\n  }\n\n  /**\n   * Find all roles\n   *\n   * @returns {Promise<PassboltResponseEntity>} response body\n   * @throws {Error} if options are invalid or API error\n   * @public\n   */\n  async findAll() {\n    const response = await this.apiClient.findAll();\n    const body = response.body && response.body.length ? response.body : [];\n\n    return new PassboltResponseEntity({ header: response.header, body: body });\n  }\n\n  /**\n   * Create a role using Passbolt API\n   *\n   * @param {Object} roleDto\n   * @returns {Promise<PassboltResponseEntity>}\n   * @throw {TypeError} if comment dto is invalid or incomplete\n   */\n  async create(roleDto) {\n    if (!roleDto || !roleDto.name) {\n      throw new TypeError("Role creation failed, invalid role data.");\n    }\n\n    assertString(roleDto.name);\n    const response = await this.apiClient.create(roleDto);\n\n    return new PassboltResponseEntity(response);\n  }\n\n  /**\n   * Update a role using Passbolt API\n   *\n   * @param {string} id The role id\n   * @param {Object} roleDto The role data containing only the name\n   * @returns {Promise<PassboltResponseEntity>}\n   * @throw {TypeError} if role id or dto is invalid or incomplete\n   */\n  async update(id, roleDto) {\n    if (!id) {\n      throw new TypeError("Role update failed, role id is required.");\n    }\n    if (!roleDto || !roleDto.name) {\n      throw new TypeError("Role update failed, invalid role data.");\n    }\n\n    isValidUuid(id);\n    assertString(roleDto.name);\n    const response = await this.apiClient.update(id, roleDto);\n\n    return new PassboltResponseEntity(response);\n  }\n\n  /**\n   * Delete a role using Passbolt API\n   *\n   * @param {string} roleId uuid\n   * @returns {Promise<PassboltResponseEntity>} Response body\n   * @throws {TypeError} if roleId is not a valid uuid\n   */\n  async delete(roleId) {\n    isValidUuid(roleId);\n\n    const response = await this.apiClient.delete(roleId);\n    return new PassboltResponseEntity(response);\n  }\n}',computed:!1},description:"",type:{name:"func"},required:!1},RbacApiService:{defaultValue:{value:'class RbacApiService extends AbstractService {\n  /**\n   * Constructor\n   *\n   * @param {ApiClientOptions} apiClientOptions\n   * @public\n   */\n  constructor(apiClientOptions) {\n    super(apiClientOptions, RbacApiService.RESOURCE_NAME);\n  }\n\n  /**\n   * API Resource Name\n   *\n   * @returns {string}\n   * @public\n   */\n  static get RESOURCE_NAME() {\n    return RBAC_SERVICE_RESOURCE_NAME;\n  }\n\n  /**\n   * Return the list of supported options for the contain option in API find operations\n   *\n   * @returns {Array<string>} list of supported option\n   */\n  static getSupportedContainOptions() {\n    return ["action", "ui_action"];\n  }\n\n  /**\n   * Find all\n   * @param {object} contains\n   * @returns {Promise<PassboltResponseEntity>}\n   */\n  async findAll(contains) {\n    const options = contains ? this.formatContainOptions(contains, RbacApiService.getSupportedContainOptions()) : null;\n    const response = await this.apiClient.findAll(options);\n    return new PassboltResponseEntity(response);\n  }\n\n  /**\n   * Find all Rbacs for the current logged in user.\n   * @param {object} contains\n   * @returns {Promise<PassboltResponseEntity>}\n   */\n  async findMe(contains) {\n    const options = contains ? this.formatContainOptions(contains, RbacApiService.getSupportedContainOptions()) : null;\n    const response = await this.apiClient.get("me", options);\n    return new PassboltResponseEntity(response);\n  }\n\n  /**\n   * Update all the given rbacs.\n   * @param {array} rbacsUpdatedDto A list of update rbacs dto.\n   * @param {object} contains\n   * @returns {Promise<PassboltResponseEntity>}\n   */\n  async updateAll(rbacsUpdatedDto, contains = {}) {\n    const options = contains ? this.formatContainOptions(contains, RbacApiService.getSupportedContainOptions()) : null;\n    const response = await this.apiClient.updateAll(rbacsUpdatedDto, options);\n    return new PassboltResponseEntity(response);\n  }\n}',computed:!1},description:"",type:{name:"func"},required:!1},UserApiService:{defaultValue:{value:'class UserService extends AbstractService {\n  /**\n   * Constructor\n   *\n   * @param {ApiClientOptions} apiClientOptions\n   * @public\n   */\n  constructor(apiClientOptions) {\n    super(apiClientOptions, UserService.RESOURCE_NAME);\n  }\n\n  /**\n   * Return the list of supported options for the contains option in API find operations\n   *\n   * @returns {Array<string>} list of supported option\n   */\n  static getSupportedContainOptions() {\n    return [\n      "is_mfa_enabled",\n      "last_logged_in",\n      "gpgkey",\n      "groups_users",\n      "profile",\n      "role",\n      "account_recovery_user_setting",\n      "pending_account_recovery_request",\n      "missing_metadata_key_ids",\n    ];\n  }\n\n  /**\n   * Return the list of supported filters for in API find operations\n   *\n   * @returns {Array<string>} list of supported option\n   */\n  static getSupportedFiltersOptions() {\n    return ["search", "has-groups", "has-access", "is-admin", "is-active", "has-role-id"];\n  }\n\n  /**\n   * Whenever the users is requested.\n   * @param {Object} [contains] Return entities associated models, example: {role: true}.\n   * @param {Object} [filters] Return entities applied filters, example: {has-role-id: uuid}.\n   * @return {Promise<PassboltResponseEntity>}\n   */\n  async findAll(contains = {}, filters = {}) {\n    contains = contains ? this.formatContainOptions(contains, UserService.getSupportedContainOptions()) : null;\n    filters = filters ? this.formatFilterOptions(filters, UserService.getSupportedFiltersOptions()) : null;\n    const options = { ...contains, ...filters };\n    const response = await this.apiClient.findAll(options);\n    return new PassboltResponseEntity(response);\n  }\n\n  /**\n   * NOT READY YET TO BE USED LATER\n   * Find users by role id\n   * @param {string} roleId The role id\n   * @return {Promise<PassboltResponseEntity>}\n   */\n  async findByRoleId(roleId) {\n    isValidUuid(roleId);\n    return this.findAll({}, { "has-role-id": roleId });\n  }\n\n  /**\n   * API User Name\n   *\n   * @returns {string}\n   * @public\n   */\n  static get RESOURCE_NAME() {\n    return USER_DIRECTORY_RESOURCE_NAME;\n  }\n}',computed:!1},description:"",type:{name:"func"},required:!1},context:{description:"",type:{name:"object"},required:!1},administrationWorkspaceContext:{description:"",type:{name:"object"},required:!1},adminRbacContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Administration/EditRole/EditRole.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/img/svg/attention.svg"),_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/models/entity/role/roleEntity.js"),memoize_one__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js");class EditRole extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.roleEntity=new _shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_7__.A(props.role),this.state=this.defaultState,this.createInputRefs(),this.bindEventHandlers()}get defaultState(){return{processing:!1,role:this.roleEntity.toDto(),hasAlreadyBeenValidated:!1}}createInputRefs(){this.nameRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}validateForm=(0,memoize_one__WEBPACK_IMPORTED_MODULE_8__.A)(roleDto=>this.roleEntity.validate(roleDto));verifyDataHealth=(0,memoize_one__WEBPACK_IMPORTED_MODULE_8__.A)(_roleDto=>this.roleEntity.verifyHealth());handleClose(){this.props.onClose()}handleInputChange(event){const target=event.target,value=target.value,name=target.name;this.roleEntity.set(name,value,{validate:!1});const newState={role:this.roleEntity.toDto()};this.setState(newState)}async handleFormSubmit(event){if(event.preventDefault(),this.state.processing)return;this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing();const validationError=this.roleEntity.validate();if(validationError?.hasErrors()||this.roleEntity.isAReservedRole())return this.focusFirstFieldError(),void await this.toggleProcessing();await this.props.onSubmit(this.roleEntity),this.handleClose()}async toggleProcessing(){const prev=this.state.processing;return new Promise(resolve=>{this.setState({processing:!prev},resolve())})}focusFirstFieldError(){this.nameRef.current.focus()}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){const warnings=this.verifyDataHealth(this.state.role),errors=this.state.hasAlreadyBeenValidated?this.validateForm(this.state.role):null,hasNameReservedError=this.state.hasAlreadyBeenValidated&&this.roleEntity.isAReservedRole();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{className:"role-edit-dialog",title:this.translate("Rename role"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{className:"role-edit-form",onSubmit:this.handleFormSubmit,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input text required ${errors?.hasError("name")||hasNameReservedError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"role-name-input"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Role name"),warnings?.hasErrors()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_attention_svg__WEBPACK_IMPORTED_MODULE_6__.A,{className:"attention-required"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:"role-name-input",name:"name",ref:this.nameRef,type:"text",value:this.state.role.name,maxLength:_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_7__.A.ROLE_NAME_MAX_LENGTH,disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,autoComplete:"off",autoFocus:!0}),errors?.hasErrors()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"error-message"},errors?.hasError("name","maxLength")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"A name can not be more than 50 char in length."),errors?.hasError("name","minLength")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"A name is required."),errors?.hasError("name","trailing-spaces")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"The name contains forbidden trailing spaces.")),hasNameReservedError&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"error-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"This name is reserved by the system.")),warnings?.hasError("name","maxLength")&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name warning-message"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"Warning:"))," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_5__.x6,null,"this is the maximum size for this field, make sure your data was not truncated.")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_4__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_3__.A,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}EditRole.propTypes={onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func.isRequired,role:prop_types__WEBPACK_IMPORTED_MODULE_1___default().instanceOf(_shared_models_entity_role_roleEntity__WEBPACK_IMPORTED_MODULE_7__.A).isRequired,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.CI)("common")(EditRole);EditRole.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"createInputRefs",docblock:"Create references\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Create references"},{name:"bindEventHandlers",docblock:"Bind event handlers\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind event handlers"},{name:"handleClose",docblock:"Handle close button click.\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle close button click."},{name:"handleInputChange",docblock:"Handle form input changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"event",optional:!1}],returns:{type:{name:"void"}},description:"Handle form input changes."},{name:"handleFormSubmit",docblock:"Handle form submission that can be trigger when hitting `enter`\n@param {Event} event The html event triggering the form submit.",modifiers:["async"],params:[{name:"event",description:"The html event triggering the form submit.",type:{name:"Event"},optional:!1}],returns:null,description:"Handle form submission that can be trigger when hitting `enter`"},{name:"toggleProcessing",docblock:"Toggle processing state\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle processing state"},{name:"focusFirstFieldError",docblock:"Focus the first field of the form which is in error state.\n@returns {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Focus the first field of the form which is in error state."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"translate",docblock:"Get translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get translate function"}],displayName:"EditRole",props:{onClose:{description:"",type:{name:"func"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!0},role:{description:"",type:{name:"instanceOf",value:"RoleEntity"},required:!0},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/Administration/AdministrationRbacContext/AdministrationRbacContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gP:()=>withAdminRbac,ji:()=>AdminRbacContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_shared_models_entity_rbac_rbacsCollection__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/models/entity/rbac/rbacsCollection.js"),_shared_services_api_rbac_rbacApiService__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/services/api/rbac/rbacApiService.js"),_shared_models_entity_rbac_rbacEntity__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/models/entity/rbac/rbacEntity.js");const AdminRbacContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({processing:!1,rbacs:null,rbacsUpdated:{},setRbacs:()=>{},setRbacsUpdated:()=>{},save:()=>{},isProcessing:()=>{},hasSettingsChanges:()=>{},clearContext:()=>{}});class AdminRbacContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState;const apiClientOptions=props.context.getApiClientOptions();this.rbacApiService=new _shared_services_api_rbac_rbacApiService__WEBPACK_IMPORTED_MODULE_4__.A(apiClientOptions)}get defaultState(){return{processing:!1,rbacs:null,rbacsUpdated:new _shared_models_entity_rbac_rbacsCollection__WEBPACK_IMPORTED_MODULE_3__.A([]),setRbacs:this.setRbacs.bind(this),setRbacsUpdated:this.setRbacsUpdated.bind(this),isProcessing:this.isProcessing.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),save:this.save.bind(this),clearContext:this.clearContext.bind(this)}}async setRbacs(rbacs){this.setState({rbacs})}async setRbacsUpdated(rbacsUpdated){this.setState({rbacsUpdated})}isProcessing(){return this.state.processing}setProcessing(processing){this.setState({processing})}hasSettingsChanges(){return this.state.rbacsUpdated.items.length>0}clearContext(){const{rbacs,rbacsUpdated,processing}=this.defaultState;this.setState({rbacs,rbacsUpdated,processing})}async save(){this.setProcessing(!0);try{const rbacsUpdatedDto=this.state.rbacsUpdated.toBulkUpdateDto();if(0===this.state.rbacsUpdated.length)return;const rbacsUpdatedResultDto=(await this.rbacApiService.updateAll(rbacsUpdatedDto,{ui_action:!0,action:!0})).body,rbacs=this.state.rbacs;rbacsUpdatedResultDto.forEach(rbacUpdatedResultDto=>rbacs.pushOrReplace(new _shared_models_entity_rbac_rbacEntity__WEBPACK_IMPORTED_MODULE_5__.A(rbacUpdatedResultDto)));const rbacsUpdated=new _shared_models_entity_rbac_rbacsCollection__WEBPACK_IMPORTED_MODULE_3__.A([]);this.setState({rbacs,rbacsUpdated})}finally{this.setProcessing(!1)}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(AdminRbacContext.Provider,{value:this.state},this.props.children)}}AdminRbacContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any};(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)(AdminRbacContextProvider);function withAdminRbac(WrappedComponent){return class WithAdminRbac extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(AdminRbacContext.Consumer,null,adminRbacContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{adminRbacContext,...this.props}))}}}AdminRbacContextProvider.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"setRbacs",docblock:"Set the rbacs\n@param {RbacsCollection} rbacs The rbacs collection to set.\n@return {void}",modifiers:["async"],params:[{name:"rbacs",description:"The rbacs collection to set.",type:{name:"RbacsCollection"},optional:!1}],returns:{type:{name:"void"}},description:"Set the rbacs"},{name:"setRbacsUpdated",docblock:"Set the updated rbacs\n@param {RbacsCollection} rbacsUpdated The updated rbacs collection to set.\n@return {void}",modifiers:["async"],params:[{name:"rbacsUpdated",description:"The updated rbacs collection to set.",type:{name:"RbacsCollection"},optional:!1}],returns:{type:{name:"void"}},description:"Set the updated rbacs"},{name:"isProcessing",docblock:"Returns true when the data is under processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true when the data is under processing"},{name:"setProcessing",docblock:"Handle processing change.\n@params {Boolean} processing value\n@returns {void}",modifiers:[],params:[{name:"processing",optional:!1}],returns:{type:{name:"void"}},description:"Handle processing change."},{name:"hasSettingsChanges",docblock:"Check if there are changes to apply\n@returns {Boolean}",modifiers:[],params:[],returns:{type:{name:"Boolean"}},description:"Check if there are changes to apply"},{name:"clearContext",docblock:"Puts the state to its default in order to avoid keeping the data users didn't want to save.",modifiers:[],params:[],returns:null,description:"Puts the state to its default in order to avoid keeping the data users didn't want to save."},{name:"save",docblock:"Whenever the save has been requested",modifiers:["async"],params:[],returns:null,description:"Whenever the save has been requested"}],displayName:"AdminRbacContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/services/api/rbac/rbacApiService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>RbacApiService});var _models_entity_apiService_PassboltResponseEntity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/apiService/PassboltResponseEntity.js"),_abstract_abstractService__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/services/api/abstract/abstractService.js");class RbacApiService extends _abstract_abstractService__WEBPACK_IMPORTED_MODULE_1__.A{constructor(apiClientOptions){super(apiClientOptions,RbacApiService.RESOURCE_NAME)}static get RESOURCE_NAME(){return"/rbacs"}static getSupportedContainOptions(){return["action","ui_action"]}async findAll(contains){const options=contains?this.formatContainOptions(contains,RbacApiService.getSupportedContainOptions()):null,response=await this.apiClient.findAll(options);return new _models_entity_apiService_PassboltResponseEntity__WEBPACK_IMPORTED_MODULE_0__.A(response)}async findMe(contains){const options=contains?this.formatContainOptions(contains,RbacApiService.getSupportedContainOptions()):null,response=await this.apiClient.get("me",options);return new _models_entity_apiService_PassboltResponseEntity__WEBPACK_IMPORTED_MODULE_0__.A(response)}async updateAll(rbacsUpdatedDto,contains={}){const options=contains?this.formatContainOptions(contains,RbacApiService.getSupportedContainOptions()):null,response=await this.apiClient.updateAll(rbacsUpdatedDto,options);return new _models_entity_apiService_PassboltResponseEntity__WEBPACK_IMPORTED_MODULE_0__.A(response)}}}}]);