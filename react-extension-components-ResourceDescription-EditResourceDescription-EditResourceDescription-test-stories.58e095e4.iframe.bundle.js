/*! For license information please see react-extension-components-ResourceDescription-EditResourceDescription-EditResourceDescription-test-stories.58e095e4.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[7661],{"./src/react-extension/components/ResourceDescription/EditResourceDescription/EditResourceDescription.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EditResourceDescription_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),LoadingContext=__webpack_require__("./src/react-extension/contexts/LoadingContext.js"),Tooltip=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js"),ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),ResourcePasswordStringViewModel=__webpack_require__("./src/shared/models/resource/ResourcePasswordStringViewModel.js"),ResourcePasswordDescriptionViewModel=__webpack_require__("./src/shared/models/resource/ResourcePasswordDescriptionViewModel.js"),ResourcePasswordDescriptionTotpViewModel=__webpack_require__("./src/shared/models/resource/ResourcePasswordDescriptionTotpViewModel.js"),ResourceTypesLocalStorageContext=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");class EditResourceDescription extends react.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.createInputRef()}get defaultState(){return{processing:!1,unexpectedError:null,resourceViewModel:null,originalResourceTypeSlug:null,hasAlreadyBeenValidated:!1}}bindCallbacks(){this.handleEditorClickEvent=this.handleEditorClickEvent.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleDescriptionToggle=this.handleDescriptionToggle.bind(this)}createInputRef(){this.elementRef=react.createRef(),this.textareaRef=react.createRef()}componentDidMount(){this.handleOutsideEditorClickEvent(),this.initializeResourceViewModel(),this.setFocusOnDescriptionEditor()}componentWillUnmount(){this.removeOutsideEditorClickEvent()}initializeResourceViewModel(){const originalResourceType=this.props.resourceTypes?.getFirstById(this.props.resource.resource_type_id);let resourceViewModel=this.getViewModelTypeBySlug(originalResourceType?.slug).createFromEntity(this.props.resource);this.props.plaintextSecretDto&&(resourceViewModel=resourceViewModel.updateSecret(this.props.plaintextSecretDto)),this.setState({resourceViewModel,originalResourceTypeSlug:originalResourceType?.slug})}getViewModelTypeBySlug(slug){switch(slug){case ResourcePasswordStringViewModel.A.resourceTypeSlug:return ResourcePasswordStringViewModel.A;case ResourcePasswordDescriptionViewModel.A.resourceTypeSlug:return ResourcePasswordDescriptionViewModel.A;case ResourcePasswordDescriptionTotpViewModel.A.resourceTypeSlug:return ResourcePasswordDescriptionTotpViewModel.A;default:throw new Error("There is no ResourceViewModel mathching the given slug")}}async save(){this.setState({processing:!0});try{const updateDescriptionResult=await this.updateResource();await this.props.actionFeedbackContext.displaySuccess(this.translate("The description has been updated successfully")),await this.props.resourceWorkspaceContext.onResourceDescriptionEdited(),this.props.onUpdate(updateDescriptionResult.description,updateDescriptionResult.plaintextSecretDto),this.close()}catch(error){if("UserAbortsOperationError"===error.name)return void this.setState({processing:!1});console.error(error),this.setState({unexpectedError:error.message,processing:!1})}}async updateResource(){let resourceViewModel=this.state.resourceViewModel;const resourceDto=resourceViewModel.toResourceDto(),hasResourceTypeChange=this.state.originalResourceTypeSlug!==resourceViewModel.constructor.resourceTypeSlug,hasSecretChanged=this.props.plaintextSecretDto&&resourceViewModel.areSecretsDifferent(this.props.plaintextSecretDto),shouldUpdateSecret=hasResourceTypeChange||hasSecretChanged;if(hasResourceTypeChange){const description=resourceViewModel.description,plaintextSecretDto=await this.props.context.port.request("passbolt.secret.find-by-resource-id",resourceViewModel.id);resourceViewModel=resourceViewModel.updateSecret(plaintextSecretDto).cloneWithMutation("description",description)}const secretDto=shouldUpdateSecret?resourceViewModel.toSecretDto():null;return await this.props.context.port.request("passbolt.resources.update",resourceDto,secretDto),{description:this.state.resourceViewModel.description,plaintextSecretDto:this.state.resourceViewModel.toSecretDto()}}close(){return this.props.onClose()}removeOutsideEditorClickEvent(){document.removeEventListener("click",this.handleEditorClickEvent,{capture:!0})}handleOutsideEditorClickEvent(){document.addEventListener("click",this.handleEditorClickEvent,{capture:!0})}setFocusOnDescriptionEditor(){const descriptionLength=this.state.resourceViewModel?.description?.length||0;this.textareaRef.current.selectionStart=descriptionLength,this.textareaRef.current.selectionEnd=descriptionLength,this.textareaRef.current.focus()}handleEditorClickEvent(event){this.elementRef.current.contains(event.target)||this.state.processing||this.close()}hasAllInputDisabled(){return this.state.processing||this.state.loading}handleKeyDown(event){27===event.keyCode&&(event.stopPropagation(),this.close())}handleCancel(){this.close()}handleInputChange(event){const target=event.target,name=target.name,value=target.value||null;this.setState({resourceViewModel:this.state.resourceViewModel.cloneWithMutation(name,value)})}async handleFormSubmit(event){event.preventDefault(),this.state.processing||(this.props.loadingContext.add(),await this.save(),this.props.loadingContext.remove())}async handleDescriptionToggle(){if(!(this.state.originalResourceTypeSlug===ResourcePasswordStringViewModel.A.resourceTypeSlug))return;if(!this.state.resourceViewModel.canToggleDescription())return;const newResourceViewModelType=this.state.resourceViewModel.isDescriptionUnencrypted()?ResourcePasswordDescriptionViewModel.A:ResourcePasswordStringViewModel.A,resourceType=this.props.resourceTypes.getFirstBySlug(newResourceViewModelType.resourceTypeSlug),newResourceViewModel=new newResourceViewModelType({...this.state.resourceViewModel,resource_type_id:resourceType.id});this.setState({resourceViewModel:newResourceViewModel})}get translate(){return this.props.t}render(){const isReady=Boolean(this.state.resourceViewModel);return react.createElement("form",{onKeyDown:this.handleKeyDown,noValidate:!0,className:"description-editor"},react.createElement("div",{className:"form-content",ref:this.elementRef},react.createElement("div",{className:"input textarea required"},react.createElement("textarea",{name:"description",className:"fluid","aria-required":!0,ref:this.textareaRef,maxLength:"10000",placeholder:this.translate("Enter a description"),value:isReady?this.state.resourceViewModel.description:"",onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),autoComplete:"off"})),this.state.unexpectedError&&react.createElement("div",{className:"feedbacks error-message"},this.state.unexpectedError),react.createElement("div",{className:"actions"},react.createElement("div",{className:"description-lock"},react.createElement("button",{type:"button",onClick:this.handleDescriptionToggle,className:"link no-border lock-toggle"},isReady&&react.createElement(react.Fragment,null,this.state.resourceViewModel.isDescriptionUnencrypted()?react.createElement(Tooltip.A,{message:this.translate("Do not store sensitive data or click here to enable encryption for the description field.")},react.createElement(Icon.A,{name:"lock-open"})):react.createElement(Tooltip.A,{message:this.translate("The description content will be encrypted."),icon:""},react.createElement(Icon.A,{name:"lock"}))))),react.createElement("button",{type:"button",disabled:this.hasAllInputDisabled(),className:"cancel",onClick:this.handleCancel},react.createElement(es.x6,null,"Cancel")),react.createElement("button",{type:"button",disabled:this.hasAllInputDisabled(),className:"primary description-editor-submit "+(this.hasAllInputDisabled()?"processing":""),onClick:this.handleFormSubmit},react.createElement("span",null,react.createElement(es.x6,null,"Save"))))))}}EditResourceDescription.propTypes={context:prop_types_default().any,plaintextSecretDto:prop_types_default().object,resource:prop_types_default().any,onClose:prop_types_default().func,onUpdate:prop_types_default().func,resourceWorkspaceContext:prop_types_default().any,resourceTypes:prop_types_default().instanceOf(resourceTypesCollection.A),actionFeedbackContext:prop_types_default().any,loadingContext:prop_types_default().any,t:prop_types_default().func};const EditResourceDescription_EditResourceDescription=(0,AppContext.L)((0,ResourceWorkspaceContext.Qw)((0,ResourceTypesLocalStorageContext.KH)((0,LoadingContext.$A)((0,ActionFeedbackContext.ot)((0,es.CI)("common")(EditResourceDescription))))));EditResourceDescription.__docgenInfo={description:"This component allows the current user to edit the description of a resource",methods:[{name:"defaultState",docblock:"Get default state\n@returns {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"createInputRef",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"initializeResourceViewModel",docblock:"initialize the resource view model",modifiers:[],params:[],returns:null,description:"initialize the resource view model"},{name:"getViewModelTypeBySlug",docblock:"Returns the corresponding ResourceViewModel type based on the given slug.\n@param {string} slug\n@returns {typeof ResourceViewModel}\n@throws {Error} if the slug is unknown",modifiers:[],params:[{name:"slug",type:{name:"string"},optional:!1}],returns:null,description:"Returns the corresponding ResourceViewModel type based on the given slug."},{name:"save",docblock:"Save the changes.",modifiers:["async"],params:[],returns:null,description:"Save the changes."},{name:"updateResource",docblock:"Update the resource\n@returns {Promise<Object>} updated resource",modifiers:["async"],params:[],returns:{description:"updated resource",type:{name:"Promise",elements:[{name:"Object"}]}},description:"Update the resource"},{name:"close",docblock:"Toggle the editor back to display mode",modifiers:[],params:[],returns:null,description:"Toggle the editor back to display mode"},{name:"removeOutsideEditorClickEvent",docblock:"Remove listener for outside description editor clicks that aims to closes the editor",modifiers:[],params:[],returns:null,description:"Remove listener for outside description editor clicks that aims to closes the editor"},{name:"handleOutsideEditorClickEvent",docblock:"handle a click outside of the editor",modifiers:[],params:[],returns:null,description:"handle a click outside of the editor"},{name:"setFocusOnDescriptionEditor",docblock:"set the focus at the end of the description editor",modifiers:[],params:[],returns:null,description:"set the focus at the end of the description editor"},{name:"handleEditorClickEvent",docblock:"Handle click events on editor. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle click events on editor. Hide the component if the click occurred outside of the component."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is loading or processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is loading or processing"},{name:"handleKeyDown",docblock:"Handle key down on the component.\n@params {ReactEvent} The react event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle key down on the component."},{name:"handleCancel",docblock:"On cancel button click",modifiers:[],params:[],returns:null,description:"On cancel button click"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handleFormSubmit",docblock:"Handle form submit event.\n@params {ReactEvent} The react event\n@return {Promise}",modifiers:["async"],params:[{name:"event",optional:!1}],returns:{type:{name:"Promise"}},description:"Handle form submit event."},{name:"handleDescriptionToggle",docblock:"Switch to toggle description field encryption",modifiers:["async"],params:[],returns:null,description:"Switch to toggle description field encryption"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"EditResourceDescription",props:{context:{description:"",type:{name:"any"},required:!1},plaintextSecretDto:{description:"",type:{name:"object"},required:!1},resource:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},onUpdate:{description:"",type:{name:"func"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},loadingContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var MockPort=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js"),resourceTypeEntity_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.test.data.js");const EditResourceDescription_test_stories={title:"Components/ResourceDescription/EditResourceDescription",component:EditResourceDescription_EditResourceDescription},context={siteSettings:{canIUse:()=>!0,settings:{app:{url:new URL(window.location.href).origin}}},port:new MockPort.A},Initial=(args=>react.createElement(AppContext.A.Provider,{value:context},react.createElement(react_router.MemoryRouter,{initialEntries:["/"]},react.createElement("div",{className:"panel aside"},react.createElement("div",{className:"accordion sidebar-section"},react.createElement("div",{className:"accordion-content"},react.createElement(react_router.Route,{component:routerProps=>react.createElement(EditResourceDescription_EditResourceDescription,{...args,...routerProps})}))))))).bind({});Initial.args={resource:{resource_type_id:resourceTypeEntity_test_data.Bt,metadata:{description:"This is an amazing resource!",resource_type_id:resourceTypeEntity_test_data.Bt,uris:["https://passbolt.com"]}},resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)()),onClose:()=>{}};const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:'args => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={[\'/\']}>\n      <div className="panel aside">\n        <div className="accordion sidebar-section">\n          <div className="accordion-content">\n            <Route component={routerProps => <EditResourceDescription {...args} {...routerProps} />}></Route>\n          </div>\n        </div>\n      </div>\n    </MemoryRouter>\n  </AppContext.Provider>',...Initial.parameters?.docs?.source}}}},"./src/react-extension/components/Common/Tooltip/Tooltip.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);class Tooltip extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tooltip",tabIndex:"0"},this.props.children,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:`tooltip-text ${this.props.direction}`},this.props.message))}}Tooltip.defaultProps={direction:"right"},Tooltip.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,message:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any.isRequired,direction:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=Tooltip;Tooltip.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{direction:{defaultValue:{value:"'right'",computed:!1},description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"any"},required:!1},message:{description:"",type:{name:"any"},required:!0}}}},"./src/react-extension/lib/Object/getPropValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(obj,path)=>path.split(".").reduce(((accumulator,key)=>accumulator?.[key]),obj)},"./src/react-extension/lib/Sanitize/sanitizeUrl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,P:()=>urlProtocols});const __WEBPACK_DEFAULT_EXPORT__=(uri,options)=>{if(void 0===uri||"string"!=typeof uri||!uri.length)return!1;if((options=options||{}).whitelistedProtocols&&!Array.isArray(options.whitelistedProtocols))throw new TypeError("The whitelistedProtocols should be an array of string.");if(options.defaultProtocol&&"string"!=typeof options.defaultProtocol)throw new TypeError("The defaultProtocol should be a string.");const whitelistedProtocols=options.whitelistedProtocols||[urlProtocols.HTTP,urlProtocols.HTTPS],blacklistedProtocols=[urlProtocols.JAVASCRIPT],defaultProtocol=options.defaultProtocol||"";!/^((?!:\/\/).)*:\/\//.test(uri)&&defaultProtocol&&(uri=`${defaultProtocol}//${uri}`);try{const url=new URL(uri);return!blacklistedProtocols.includes(url.protocol)&&(!!whitelistedProtocols.includes(url.protocol)&&url.href)}catch(error){return!1}},urlProtocols={FTP:"http:",FTPS:"https:",HTTP:"http:",HTTPS:"https:",JAVASCRIPT:"javascript:",SSH:"ssh:"}},"./src/react-extension/test/mock/MockPort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function delay(t,v){return new Promise((resolve=>{setTimeout((()=>resolve(v)),t)}))}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=class MockPort{constructor(storage){this.storage=storage,this.onListeners={},this.requestListeners={},this.emitListener={},this.onConnectErrorHandler={}}async emit(name,eventObject){let result;return console.debug(`PORT EMIT: ${name}`),console.debug("Arguments",eventObject),this.emitListener[name]?(result=await this.emitListener[name](eventObject),console.debug("response: ",result)):console.debug(`The emit ${name} has not been mocked`),delay(0,result)}on(name,callback){console.debug(`PORT ON: ${name}`),console.debug("PORT ON PARAMETERS:",callback),this.addOnListener(name,callback)}async request(name){let result;if(console.debug(`PORT REQUEST: ${name}`),console.debug("PORT REQUEST PARAMETERS:",Array.prototype.slice.call(arguments)),this.requestListeners[name]){const listenerArguments=Array.prototype.slice.call(arguments,1,arguments.length);console.debug("listenerArguments",listenerArguments),listenerArguments.push(this.storage),console.debug("listenerArguments",listenerArguments),result=await this.requestListeners[name](...listenerArguments),console.debug("response: ",result)}else console.debug(`The request ${name} has not been mocked`);return delay(0,result)}addEmitListener(name){console.debug(`PORT EMIT: ${name}`),console.debug("PORT EMIT PARAMETERS:",Array.prototype.slice.call(arguments))}addOnListener(name,callback){this.emitListener[name]=callback}addRequestListener(name,callback){this.requestListeners[name]=callback}onConnectError(callback){this.onConnectErrorHandler.callback=callback}}},"./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,KH:()=>withResourceTypesLocalStorage,dA:()=>ResourceTypesLocalStorageContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");const ResourceTypesLocalStorageContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({get:()=>{},resourceTypes:null,updateLocalStorage:()=>{}});class ResourceTypesLocalStorageContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.runningLocalStorageUpdatePromise=null,this.initEventHandlers()}get defaultState(){return{get:this.get.bind(this),resourceTypes:null,updateLocalStorage:this.updateLocalStorage.bind(this)}}initEventHandlers(){this.handleStorageChange=this.handleStorageChange.bind(this)}componentDidMount(){this.props.context.storage.onChanged.addListener(this.handleStorageChange)}componentWillUnmount(){this.props.context.storage.onChanged.removeListener(this.handleStorageChange)}handleStorageChange(changes){changes.resourceTypes&&this.set(changes.resourceTypes.newValue)}set(resourceTypes){const resourceTypesCollection=new _models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__.A(resourceTypes);this.setState({resourceTypes:resourceTypesCollection})}get(){return null===this.state.resourceTypes?(this.loadLocalStorage(),null):this.state.resourceTypes}async loadLocalStorage(){const storageData=await this.props.context.storage.local.get(["resourceTypes"]);storageData.resourceTypes?this.set(storageData.resourceTypes):this.updateLocalStorage()}async updateLocalStorage(){null===this.runningLocalStorageUpdatePromise?(this.runningLocalStorageUpdatePromise=this.props.context.port.request("passbolt.resource-type.get-or-find-all"),await this.runningLocalStorageUpdatePromise,this.runningLocalStorageUpdatePromise=null):await this.runningLocalStorageUpdatePromise}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Provider,{value:this.state},this.props.children)}}ResourceTypesLocalStorageContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(ResourceTypesLocalStorageContextProvider);function withResourceTypesLocalStorage(WrappedComponent){return class withResourceTypesLocalStorage extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Consumer,null,(resourceTypesLocalStorageContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{resourceTypesLocalStorageContext,resourceTypes:resourceTypesLocalStorageContext.get(),...this.props})))}}}ResourceTypesLocalStorageContextProvider.__docgenInfo={description:"The resource types local storage context provider",methods:[{name:"defaultState",docblock:"Returns the default component state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Returns the default component state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"handleStorageChange",docblock:"Handles update of the resource types in the local storage.",modifiers:[],params:[{name:"changes",optional:!1}],returns:null,description:"Handles update of the resource types in the local storage."},{name:"set",docblock:"Set resourceTypes.\n@param {Array<Object>} resourceTypes The resource types to set.\n@private",modifiers:[],params:[{name:"resourceTypes",description:"The resource types to set.",type:{name:"Array",elements:[{name:"Object"}]},optional:!1}],returns:null,description:"Set resourceTypes."},{name:"get",docblock:"Get the resource types from the local storage and/or init them if not the case already.\n@returns {ResourceTypesCollection|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"ResourceTypesCollection"}]}},description:"Get the resource types from the local storage and/or init them if not the case already."},{name:"loadLocalStorage",docblock:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation.\n@returns {Promise<void>}\n@private",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation."},{name:"updateLocalStorage",docblock:"Forces the update of the resource types in the local storage.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Forces the update of the resource types in the local storage."}],displayName:"ResourceTypesLocalStorageContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/models/entity/role/roleEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js");class RoleEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",enum:[RoleEntity.ROLE_ADMIN,RoleEntity.ROLE_USER,RoleEntity.ROLE_GUEST,RoleEntity.ROLE_ROOT]},description:{type:"string",maxLength:255},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"}}}}get id(){return this._props.id}get name(){return this._props.name}get description(){return this._props.description||null}get created(){return this._props.created||null}get modified(){return this._props.modified||null}isAdmin(){return this.name===RoleEntity.ROLE_ADMIN}static get ENTITY_NAME(){return"Role"}static get ROLE_ADMIN(){return"admin"}static get ROLE_USER(){return"user"}static get ROLE_GUEST(){return"guest"}static get ROLE_ROOT(){return"root"}}const __WEBPACK_DEFAULT_EXPORT__=RoleEntity},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}},"./node_modules/validator/es/lib/util/assertString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function assertString(input){if(!("string"==typeof input||input instanceof String)){var invalidType=_typeof(input);throw null===input?invalidType="null":"object"===invalidType&&(invalidType=input.constructor.name),new TypeError("Expected a string but received a ".concat(invalidType))}}__webpack_require__.d(__webpack_exports__,{A:()=>assertString})}}]);