/*! For license information please see react-extension-components-Administration-DisplayScimSettingsAdministration-DisplayScimSettingsAdministration-test-stories.89619cea.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[2269],{"./src/react-extension/components/Administration/DisplayScimSettingsAdministration/DisplayScimSettingsAdministration.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,ScimSettingsDefined:()=>ScimSettingsDefined,ScimSettingsDisabled:()=>ScimSettingsDisabled,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayScimSettingsAdministration_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),DisplayScimSettingsAdministration=__webpack_require__("./src/react-extension/components/Administration/DisplayScimSettingsAdministration/DisplayScimSettingsAdministration.js"),ExtAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js"),ActionFeedbackContext_test_data=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.test.data.js"),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),AdministrationWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.test.data.js"),DisplayUserDirectoryAdministration_test_data=__webpack_require__("./src/react-extension/components/Administration/DisplayUserDirectoryAdministration/DisplayUserDirectoryAdministration.test.data.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ManagedClipboardServiceProvider_test_data=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js"),scimSettingsEntity=__webpack_require__("./src/shared/models/entity/scimSettings/scimSettingsEntity.js");const defaultScimSettingsDto=(data={})=>({id:(0,v4.A)(),scim_user_id:(0,v4.A)(),setting_id:(0,v4.A)(),secret_token:"pb_ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefg",...data});function defaultProps(props={}){return{context:(0,ExtAppContext_test_data.dO)({users:DisplayUserDirectoryAdministration_test_data.rB}),clipboardContext:(0,ManagedClipboardServiceProvider_test_data.H)(),dialogContext:(0,DialogContext_test_data.L)(),actionFeedbackContext:(0,ActionFeedbackContext_test_data.M)(),administrationWorkspaceContext:(0,AdministrationWorkspaceContext_test_data.M)({selectedAdministration:AdministrationWorkspaceContext.UZ.SCIM}),scimSettingsServiceWorkerService:{findSettings:()=>defaultScimSettingsDto(),createSettings:jest.fn(),updateSettings:jest.fn(),disableSettings:jest.fn()},createPortal:jest.fn,t:text=>text,...props}}var react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),TranslationProvider=__webpack_require__("./src/react-extension/components/Common/Internationalisation/TranslationProvider.js"),DisplayAdministrationWorkspaceBreadcrumb=__webpack_require__("./src/react-extension/components/Administration/DisplayAdministrationWorkspaceBreadcrumb/DisplayAdministrationWorkspaceBreadcrumb.js");const DisplayScimSettingsAdministration_test_stories={title:"Components/Administration/DisplayScimSettingsAdministration",component:DisplayScimSettingsAdministration.A,decorators:[(Story,{args})=>react.createElement(react_router.MemoryRouter,{initialEntries:["/app/administration/scim-settings"]},react.createElement(TranslationProvider.A,{loadingPath:"/webAccessibleResources/locales/{{lng}}/{{ns}}.json"},react.createElement("div",{id:"container",className:"page administration"},react.createElement("div",{id:"app",className:"app",style:{margin:"-1rem"}},react.createElement("div",{className:"panel main"},react.createElement("div",{className:"panel left"},react.createElement("div",{className:"sidebar-content"},react.createElement("div",{className:"top-bar-left-navigation"},react.createElement("div",{className:"navigation"})),react.createElement("div",{className:"sidebar-content-left"}))),react.createElement("div",{className:"panel middle"},react.createElement("div",{className:"header"}),react.createElement("div",{className:"middle-right"},react.createElement("div",{className:"breadcrumbs-and-grid"},react.createElement("div",{className:"top-bar"},react.createElement(DisplayAdministrationWorkspaceBreadcrumb.A,{administrationWorkspaceContext:args.administrationWorkspaceContext})),react.createElement("div",{className:"main-page"},react.createElement(Story,args))),react.createElement("div",{className:"help-panel"},react.createElement("div",{className:"sidebar-help"},react.createElement("div",{id:"administration-help-panel"}))))))))))]},Initial={args:defaultProps()},ScimSettingsDefined={args:function defaultScimSettingsConfiguredProps(props={}){return defaultProps({scimSettingsServiceWorkerService:{findSettings:()=>((data={})=>{const scimSettingsDto=defaultScimSettingsDto(data);return scimSettingsDto.secret_token=scimSettingsEntity.A.EMPTY_SECRET_VALUE,scimSettingsDto})({id:(0,v4.A)(),scim_user_id:props.scim_user_id||DisplayUserDirectoryAdministration_test_data.rB.find((user=>"admin@passbolt.com"===user.username)).id})},...props})}()},ScimSettingsDisabled={args:function defaultScimSettingsDisabledProps(props={}){return defaultProps({scimSettingsServiceWorkerService:{findSettings:()=>null,createSettings:jest.fn()},...props})}()},__namedExportsOrder=["Initial","ScimSettingsDefined","ScimSettingsDisabled"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"{\n  args: defaultProps()\n}",...Initial.parameters?.docs?.source}}},ScimSettingsDefined.parameters={...ScimSettingsDefined.parameters,docs:{...ScimSettingsDefined.parameters?.docs,source:{originalSource:"{\n  args: defaultScimSettingsConfiguredProps()\n}",...ScimSettingsDefined.parameters?.docs?.source}}},ScimSettingsDisabled.parameters={...ScimSettingsDisabled.parameters,docs:{...ScimSettingsDisabled.parameters?.docs,source:{originalSource:"{\n  args: defaultScimSettingsDisabledProps()\n}",...ScimSettingsDisabled.parameters?.docs?.source}}}},"./src/img/svg/copy.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCopy(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#copy_svg__clip0_57_467942)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M15 6H7.5A1.5 1.5 0 0 0 6 7.5V15a1.5 1.5 0 0 0 1.5 1.5H15a1.5 1.5 0 0 0 1.5-1.5V7.5A1.5 1.5 0 0 0 15 6"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M3 12c-.825 0-1.5-.675-1.5-1.5V3c0-.825.675-1.5 1.5-1.5h7.5c.825 0 1.5.675 1.5 1.5"}))))}},"./src/img/svg/eye_close.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEyeClose(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#eye_close_svg__clip0_27_140048)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M6.587 6.587a2 2 0 1 0 2.826 2.827M7.153 3.386q.422-.052.847-.053C12.667 3.333 14.667 8 14.667 8a8.8 8.8 0 0 1-1.114 1.786"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M4.407 4.406A9 9 0 0 0 1.333 8s2 4.666 6.667 4.666a6.5 6.5 0 0 0 3.593-1.073M1.333 1.333l13.334 13.333"}))))}},"./src/img/svg/eye_open.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEyeOpen(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.333 8s2-4.667 6.667-4.667S14.667 8 14.667 8s-2 4.666-6.667 4.666S1.333 8 1.333 8"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"})))}},"./src/img/svg/refresh.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,_path3,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgRefresh(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25 9A6.75 6.75 0 0 1 9 2.25a7.31 7.31 0 0 1 5.055 2.055L15.75 6"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.75 2.25V6H12M15.75 9A6.75 6.75 0 0 1 9 15.75a7.3 7.3 0 0 1-5.055-2.055L2.25 12"})),_path3||(_path3=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 12H2.25v3.75"})))}},"./node_modules/memoize-one/dist/memoize-one.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>memoizeOne});var safeIsNaN=Number.isNaN||function ponyfill(value){return"number"==typeof value&&value!=value};function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(first=newInputs[i],second=lastInputs[i],!(first===second||safeIsNaN(first)&&safeIsNaN(second)))return!1;var first,second;return!0}function memoizeOne(resultFn,isEqual){void 0===isEqual&&(isEqual=areInputsEqual);var cache=null;function memoized(){for(var newArgs=[],_i=0;_i<arguments.length;_i++)newArgs[_i]=arguments[_i];if(cache&&cache.lastThis===this&&isEqual(newArgs,cache.lastArgs))return cache.lastResult;var lastResult=resultFn.apply(this,newArgs);return cache={lastResult,lastArgs:newArgs,lastThis:this},lastResult}return memoized.clear=function clear(){cache=null},memoized}},"./src/react-extension/components/Administration/DisplayScimSettingsAdministration/DisplayScimSettingsAdministration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DisplayScimSettingsAdministration_DisplayScimSettingsAdministration});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),scimSettingsEntity=__webpack_require__("./src/shared/models/entity/scimSettings/scimSettingsEntity.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");class ScimSettingsFormEntity extends scimSettingsEntity.A{static getSchema(){return{type:"object",required:["scim_user_id","setting_id"],properties:{...scimSettingsEntity.A.getSchema().properties}}}static createFromDefault(userId){return new ScimSettingsFormEntity({scim_user_id:userId,setting_id:(0,v4.A)(),secret_token:this.generateScimSecretToken()})}}const scimSettingsFormEntity=ScimSettingsFormEntity;var ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js");const scimSettingsServiceWorkerService=class ScimSettingsServiceWorkerService{constructor(port){this.port=port}async findSettings(){const settingsDto=await this.port.request("passbolt.scim.find-settings");return settingsDto?new scimSettingsEntity.A(settingsDto):null}async createSettings(formSettings){if(!(formSettings instanceof scimSettingsEntity.A))throw new TypeError("The 'settings' property should be of type 'ScimSettingsEntity'.");const savedSettingsDto=await this.port.request("passbolt.scim.create-settings",formSettings.toDto());return new scimSettingsEntity.A(savedSettingsDto)}async updateSettings(formSettings,id){if(!(formSettings instanceof scimSettingsEntity.A))throw new TypeError("The 'settings' property should be of type 'ScimSettingsEntity'.");const updated=formSettings.toDto(),savedSettingsDto=await this.port.request("passbolt.scim.update-settings",id,updated);return new scimSettingsEntity.A(savedSettingsDto)}async disableSettings(id){await this.port.request("passbolt.scim.disable-settings",id)}};var copy=__webpack_require__("./src/img/svg/copy.svg"),refresh=__webpack_require__("./src/img/svg/refresh.svg"),ManagedClipboardServiceProvider=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js"),Password=__webpack_require__("./src/shared/components/Password/Password.js"),Select=__webpack_require__("./src/react-extension/components/Common/Select/Select.js"),userUtils=__webpack_require__("./src/shared/utils/userUtils.js");class DisplayScimSettingsAdministration extends react.Component{originalSettings=null;formSettings=null;scimSettingsService=null;constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.scimSettingsService=props.scimSettingsServiceWorkerService??new scimSettingsServiceWorkerService(this.props.context.port),this.handleToggleEnabled=this.handleToggleEnabled.bind(this)}get defaultState(){return{isProcessing:!0,hasAlreadyBeenValidated:!1,enabled:!1,settings:null}}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.save=this.save.bind(this),this.handleToggleEnabled=this.handleToggleEnabled.bind(this),this.handleCopyScimUrl=this.handleCopyScimUrl.bind(this),this.handleCopySecretToken=this.handleCopySecretToken.bind(this),this.handleRegenerateSecretToken=this.handleRegenerateSecretToken.bind(this)}async componentDidMount(){this.props.context.users||await this.props.context.port.request("passbolt.users.update-local-storage"),await this.findScimSettings(),this.setState({isProcessing:!1})}componentWillUnmount(){this.clearContext()}get adminUsers(){const adminRole=this.props.context.roles.find((role=>"admin"===role.name)),users=this.props.context.users;return null!==users&&adminRole?users.filter((user=>!0===user.active&&user.role_id===adminRole.id)):[]}get adminUsersForSelect(){return this.adminUsers&&this.adminUsers.map((user=>({value:user.id,label:(0,userUtils.$2)(user,this.props.t,{withUsername:!0})})))}async findScimSettings(){this.setState({isProcessing:!0});try{const scimSettings=await this.scimSettingsService.findSettings();scimSettings&&(this.originalSettings=new scimSettingsFormEntity(scimSettings,{validate:!1}),this.formSettings=new scimSettingsFormEntity(scimSettings,{validate:!1}),this.setState({settings:this.formSettings.toDto(),enabled:!0}))}catch(error){await this.handleUnexpectedError(error),this.setDefaultSettings()}this.setState({isProcessing:!1})}handleToggleEnabled(){this.state.enabled||(this.formSettings=scimSettingsFormEntity.createFromDefault(this.adminUsers[0].id),this.setState({settings:this.formSettings.toDto()})),this.setState({enabled:!this.state.enabled})}hasSettingsChanges=(0,memoize_one_esm.A)(((originalSettings,formSettings,settings)=>originalSettings?.hasDiffProps(formSettings)||!1));handleInputChange(event){if(this.hasAllInputDisabled())return;const{type,checked,name}=event.target,parsedValue="checkbox"===type?checked:event.target.value;this.setFormPropertyValue(name,parsedValue)}setFormPropertyValue(name,parsedValue){this.formSettings.set(name,parsedValue,{validate:!1}),this.setState({settings:this.formSettings.toDto()})}hasAllInputDisabled(){return this.state.isProcessing}async handleCopyScimUrl(){await this.props.clipboardContext.copy(this.scimUrl,this.props.t("The SCIM URL has been copied to the clipboard."))}async handleCopySecretToken(){await this.props.clipboardContext.copy(this.state.settings.secret_token,this.props.t("The SCIM secret token has been copied to the clipboard."))}handleRegenerateSecretToken(){const secretToken=scimSettingsEntity.A.generateScimSecretToken();this.setFormPropertyValue("secret_token",secretToken)}handleFormSubmit(event){event.preventDefault(),this.save()}async save(){if(this.state.isProcessing)return;this.setState({isProcessing:!0});const validationError=this.validateForm();if(validationError?.hasErrors())this.setState({isProcessing:!1,hasAlreadyBeenValidated:!0});else{try{const result=await this.saveScimSettings();this.formSettings=result?new scimSettingsFormEntity(result,{validate:!1}):null,this.originalSettings=result?new scimSettingsFormEntity(this.formSettings.toDto(),{validate:!1}):null,this.setState({settings:result?this.formSettings.toDto():null,enabled:null!==result}),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The SCIM settings were updated."))}catch(error){await this.handleUnexpectedError(error)}this.setState({isProcessing:!1})}}validateForm(){return this.formSettings?this.formSettings.validate():null}async saveScimSettings(){if(this.state.enabled){let scimSettingResult;return scimSettingResult=this.originalSettings?await this.scimSettingsService.updateSettings(this.formSettings,this.originalSettings.id):await this.scimSettingsService.createSettings(this.formSettings),scimSettingResult}return this.originalSettings&&await this.scimSettingsService.disableSettings(this.originalSettings.id),null}handleUnexpectedError(error){if(console.error(error),"UserAbortsOperationError"!==error.name)return this.props.dialogContext.open(NotifyError.A,{error})}clearContext(){this.setState(this.defaultState)}get scimUrl(){return`${this.props.context.userSettings.getTrustedDomain()}/scim/v2/${this.state.settings.setting_id}`}render(){const errors=this.state.hasAlreadyBeenValidated?this.validateForm():null,hasSettingsChanges=this.hasSettingsChanges(this.originalSettings,this.formSettings,this.state.settings);return react.createElement("div",{className:"row"},react.createElement("div",{id:"scim-settings",className:"main-column"},react.createElement("div",{className:"main-content"},react.createElement("form",{onSubmit:this.handleFormSubmit,"data-testid":"submit-form"},react.createElement("h3",{className:"title"},react.createElement("span",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"enabled",onChange:this.handleToggleEnabled,checked:this.state.enabled,disabled:this.hasAllInputDisabled(),id:"scimSettingsToggle"}),react.createElement("label",{htmlFor:"scimSettingsToggle"},react.createElement(es.x6,null,"SCIM")))),react.createElement("p",{className:"description"},react.createElement(es.x6,null,"SCIM is a standard protocol that automates user provisioning and deprovisioning with identity providers.")),this.state.enabled&&react.createElement(react.Fragment,null,react.createElement("div",{className:"input text input-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},react.createElement("label",null,react.createElement(es.x6,null,"SCIM URL")),react.createElement("div",{className:"button-inline"},react.createElement("input",{id:"scim-url-input",type:"text",className:"fluid form-element disabled",name:"scim_url",value:this.scimUrl,readOnly:!0,disabled:!0}),react.createElement("button",{type:"button",onClick:this.handleCopyScimUrl,className:"copy-to-clipboard button button-icon"},react.createElement(copy.A,null))),react.createElement("p",null,react.createElement(es.x6,null,"The URL to enter in your provider when configuring user provisioning."))),react.createElement("div",{className:"input text input-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},react.createElement("label",null,react.createElement(es.x6,null,"Secret Token")),react.createElement("div",{className:"button-inline"},react.createElement(Password.A,{id:"scim-secret-token-input",className:"fluid form-element",autoComplete:"off",name:"scim_secret_token",value:this.state.settings.secret_token,preview:!0,disabled:this.state.settings.secret_token===scimSettingsEntity.A.EMPTY_SECRET_VALUE}),react.createElement("button",{type:"button",disabled:this.state.settings.secret_token===scimSettingsEntity.A.EMPTY_SECRET_VALUE,onClick:this.handleCopySecretToken,className:"copy-to-clipboard button button-icon"},react.createElement(copy.A,null)),react.createElement("button",{type:"button",onClick:this.handleRegenerateSecretToken,className:"copy-to-clipboard button button-icon"},react.createElement(refresh.A,null)))),react.createElement("div",{className:"input text input-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},react.createElement("label",null,react.createElement(es.x6,null,"SCIM User")),react.createElement(Select.A,{items:this.adminUsersForSelect,name:"scim_user_id",className:"users",value:this.state.settings.scim_user_id,onChange:this.handleInputChange,disabled:this.state.isProcessing,search:!0,direction:"bottom"}),react.createElement("p",null,react.createElement(es.x6,null,"The SCIM user is the user that will perform the operation in the logs."))),react.createElement("div",{className:"section"},react.createElement("label",null,react.createElement(es.x6,null,"Synchronisation")),react.createElement("span",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordUpdate",disabled:!0,checked:!0,id:"send-password-update-toggle-button"}),react.createElement("label",{className:"text",htmlFor:"send-password-update-toggle-button"},react.createElement(es.x6,null,"Users."))),react.createElement("span",{className:"input toggle-switch form-element"},react.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordUpdate",disabled:!0,checked:!1,id:"send-password-update-toggle-button"}),react.createElement("label",{className:"text",htmlFor:"send-password-update-toggle-button"},react.createElement(es.x6,null,"Groups (Not supported)."))))))),react.createElement("div",{className:"warning message"},!this.formSettings?.id&&this.state.enabled&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Please save the settings to enable the feature."))),this.formSettings?.id&&!this.state.enabled&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Please save the settings to disable the feature."))),!hasSettingsChanges&&this.state.enabled&&this.formSettings?.id&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement("b",null,react.createElement(es.x6,null,"Warning:"))," ",react.createElement(es.x6,null,"if you think the secret has been compromised please regenerate and update it in your provider settings."))),hasSettingsChanges&&this.state.enabled&&this.formSettings.id&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement(es.x6,null,"Don't forget to save your settings to apply your modification."))),errors?.hasErrors()&&react.createElement("div",{className:"form-banner"},react.createElement("p",null,react.createElement("b",null,react.createElement(es.x6,null,"Warning:"))," ",react.createElement(es.x6,null,"Please fix the errors in the form before saving."))))),react.createElement("div",{className:"actions-wrapper"},react.createElement("button",{type:"button",className:"button primary",disabled:this.state.isProcessing||errors?.hasErrors(),onClick:this.handleFormSubmit},react.createElement("span",null,react.createElement(es.x6,null,"Save")))))}}DisplayScimSettingsAdministration.propTypes={context:prop_types_default().object,actionFeedbackContext:prop_types_default().object,dialogContext:prop_types_default().object,clipboardContext:prop_types_default().object,administrationWorkspaceContext:prop_types_default().object,scimSettingsServiceWorkerService:prop_types_default().object,t:prop_types_default().func};const DisplayScimSettingsAdministration_DisplayScimSettingsAdministration=(0,AdministrationWorkspaceContext.Kk)((0,DialogContext.z9)((0,ActionFeedbackContext.ot)((0,ManagedClipboardServiceProvider.nJ)((0,AppContext.L)((0,es.CI)("common")(DisplayScimSettingsAdministration))))));DisplayScimSettingsAdministration.__docgenInfo={description:"This component allows to display the SCIM settings for the administration",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"adminUsers",docblock:"Get admin users\n@returns {Array} Array of active admin users",modifiers:["get"],params:[],returns:{description:"Array of active admin users",type:{name:"Array"}},description:"Get admin users"},{name:"adminUsersForSelect",docblock:"Get admin users formatted for select input\n@returns {Array<{value: string, label: string}>} Array of admin users formatted for select input",modifiers:["get"],params:[],returns:{description:"Array of admin users formatted for select input",type:{name:"Array",elements:[]}},description:"Get admin users formatted for select input"},{name:"findScimSettings",docblock:"Find the SCIM settings\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Find the SCIM settings"},{name:"handleToggleEnabled",docblock:"Enable/Disable the settings",modifiers:[],params:[],returns:null,description:"Enable/Disable the settings"},{name:"handleInputChange",docblock:"Handle form input changes.\n@param {ReactEvent} event The react event\n@returns {void}",modifiers:[],params:[{name:"event",description:"The react event",type:{name:"ReactEvent"},optional:!1}],returns:{type:{name:"void"}},description:"Handle form input changes."},{name:"setFormPropertyValue",docblock:"Set a form property value. Trigger the validation if the form has already been submitted once.\n@param {string} name The property name\n@param {*} parsedValue The parsed value",modifiers:[],params:[{name:"name",description:"The property name",type:{name:"string"},optional:!1},{name:"parsedValue",description:"The parsed value",type:{name:"mixed"},optional:!1}],returns:null,description:"Set a form property value. Trigger the validation if the form has already been submitted once."},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is loading or processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is loading or processing"},{name:"handleCopyScimUrl",docblock:"Handle the copy to clipboard button",modifiers:["async"],params:[],returns:null,description:"Handle the copy to clipboard button"},{name:"handleCopySecretToken",docblock:"Handle the copy to clipboard button",modifiers:["async"],params:[],returns:null,description:"Handle the copy to clipboard button"},{name:"handleRegenerateSecretToken",docblock:"Handle the regeneration of the secret token",modifiers:[],params:[],returns:null,description:"Handle the regeneration of the secret token"},{name:"handleFormSubmit",docblock:"Handle form submission that can be triggered when hitting `enter`\n@param {Event} event The html event triggering the form submit.",modifiers:[],params:[{name:"event",description:"The html event triggering the form submit.",type:{name:"Event"},optional:!1}],returns:null,description:"Handle form submission that can be triggered when hitting `enter`"},{name:"save",docblock:"Save the settings.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Save the settings."},{name:"validateForm",docblock:"Validate form.\n@return {EntityValidationError|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"EntityValidationError"}]}},description:"Validate form."},{name:"saveScimSettings",docblock:"Save the SCIM settings.\n@returns {Promise<ScimSettingsEntity|null>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"union",elements:[{name:"ScimSettingsEntity"}]}]}},description:"Save the SCIM settings."},{name:"handleUnexpectedError",docblock:"Handle unexpected error\n@param {Error} error The error\n@returns {Promise<string>} Return the dialog key identifier.",modifiers:[],params:[{name:"error",description:"The error",type:{name:"Error"},optional:!1}],returns:{description:"Return the dialog key identifier.",type:{name:"Promise",elements:[{name:"string"}]}},description:"Handle unexpected error"},{name:"clearContext",docblock:"Puts the state to its default in order to avoid keeping the data users didn't want to save.",modifiers:[],params:[],returns:null,description:"Puts the state to its default in order to avoid keeping the data users didn't want to save."},{name:"scimUrl",docblock:"Return the formatted scim url\n@returns {string} the formated scim url",modifiers:["get"],params:[],returns:{description:"the formated scim url",type:{name:"string"}},description:"Return the formatted scim url"}],displayName:"DisplayScimSettingsAdministration",props:{context:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},administrationWorkspaceContext:{description:"",type:{name:"object"},required:!1},scimSettingsServiceWorkerService:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/ActionFeedbackContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>ActionFeedbackContextProvider,b_:()=>ActionFeedbackContext,ot:()=>withActionFeedback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const ActionFeedbackContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({feedbacks:[],displaySuccess:()=>{},displayWarning:()=>{},displayError:()=>{},remove:()=>{}});class ActionFeedbackContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{feedbacks:[],displaySuccess:this.displaySuccess.bind(this),displayWarning:this.displayWarning.bind(this),displayError:this.displayError.bind(this),remove:this.remove.bind(this)}}displaySuccess(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"success",message:feedbackToAdd}]})}displayWarning(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"warning",message:feedbackToAdd}]})}displayError(feedbackToAdd){this.setState({feedbacks:[...this.state.feedbacks,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),type:"error",message:feedbackToAdd}]})}remove(feedbackToRemove){this.setState({feedbacks:this.state.feedbacks.filter((feedback=>feedbackToRemove.id!==feedback.id))})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Provider,{value:this.state},this.props.children)}}function withActionFeedback(WrappedComponent){return class WithActionFeedback extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionFeedbackContext.Consumer,null,(actionFeedbackContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{actionFeedbackContext,...this.props})))}}}ActionFeedbackContextProvider.displayName="ActionFeedbackContextProvider",ActionFeedbackContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},ActionFeedbackContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"displaySuccess",docblock:"Display the feedback in a success mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a success mode"},{name:"displayWarning",docblock:"Display the feedback in a warning mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a warning mode"},{name:"displayError",docblock:"Display the feedback in a error mode\n@param feedbackToAdd A feedback",modifiers:[],params:[{name:"feedbackToAdd",description:"A feedback",optional:!1}],returns:null,description:"Display the feedback in a error mode"},{name:"remove",docblock:"Remove the feedback\n@param feedbackToRemove A feedback",modifiers:[],params:[{name:"feedbackToRemove",description:"A feedback",optional:!1}],returns:null,description:"Remove the feedback"}],displayName:"ActionFeedbackContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/ActionFeedbackContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultActionFeedbackContext(data={}){const defaultContext={displaySuccess:jest.fn(),displayError:jest.fn(),remove:jest.fn()};return Object.assign(defaultContext,data)}__webpack_require__.d(__webpack_exports__,{M:()=>defaultActionFeedbackContext})},"./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{nJ:()=>withClipboard});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js"),_shared_services_serviceWorker_clipboard_clipboardServiceWorkerService__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/services/serviceWorker/clipboard/clipboardServiceWorkerService.js"),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js");const ManagedClipboardServiceContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({copyTemporarily:()=>{},copy:()=>{}});class ManagedClipboardServiceProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.clipboardServiceWorkerService=new _shared_services_serviceWorker_clipboard_clipboardServiceWorkerService__WEBPACK_IMPORTED_MODULE_4__.A(props.context.port)}get defaultState(){return{copyTemporarily:this.copyTemporarily.bind(this),copy:this.copy.bind(this)}}async copyTemporarily(secret,message){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_5__.A)(secret),(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_5__.A)(message),await this.clipboardServiceWorkerService.copyTemporarily(secret),this.props.actionFeedbackContext.displaySuccess(react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,message," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"It will clear in 30 seconds.")))}async copy(secret,message){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_5__.A)(secret),(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_5__.A)(message),await this.clipboardServiceWorkerService.copy(secret),this.props.actionFeedbackContext.displaySuccess(message)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ManagedClipboardServiceContext.Provider,{value:this.state},this.props.children)}}ManagedClipboardServiceProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any.isRequired,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any.isRequired,children:prop_types__WEBPACK_IMPORTED_MODULE_6___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_6___default().func};(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(ManagedClipboardServiceProvider)));function withClipboard(WrappedComponent){return class WithClipboard extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ManagedClipboardServiceContext.Consumer,null,(clipboard=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{clipboardContext:clipboard,...this.props})))}}}ManagedClipboardServiceProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"copyTemporarily",docblock:"Copies temporarily the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only.\n@param {string} secret\n@param {string} message\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"secret",type:{name:"string"},optional:!1},{name:"message",type:{name:"string"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copies temporarily the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only."},{name:"copy",docblock:"Copies the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only.\n@param {string} secret\n@param {string} message\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"secret",type:{name:"string"},optional:!1},{name:"message",type:{name:"string"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copies the given secret to the clipboard.\nThis requires a service worker to work properly.\nIn other words, this service is not (yet) tailored to work on\npages served by the API only."}],displayName:"ManagedClipboardServiceProvider",props:{context:{description:"",type:{name:"any"},required:!0},actionFeedbackContext:{description:"",type:{name:"any"},required:!0},children:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>defaultClipboardContext});__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js");const defaultClipboardContext=data=>({copyTemporarily:jest.fn(),copy:jest.fn(),...data})},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/shared/components/Password/Password.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/eye_open.svg"),_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/img/svg/eye_close.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class Password extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{viewPassword:!1,hasPassphraseFocus:!1,isPassphraseActive:!1}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordInputFocus=this.handlePasswordInputFocus.bind(this),this.handlePasswordInputBlur=this.handlePasswordInputBlur.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this)}handleInputChange(event){this.props.onChange&&this.props.onChange(event)}handlePasswordInputFocus(){this.setState({hasPassphraseFocus:!0})}handlePasswordInputBlur(){this.setState({hasPassphraseFocus:!1})}handleViewPasswordButtonClick(){this.props.disabled||this.setState({viewPassword:!this.state.viewPassword})}get securityTokenStyle(){const inverseStyle={background:this.props.securityToken.textColor,color:this.props.securityToken.backgroundColor},fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor};return this.state.hasPassphraseFocus?inverseStyle:fullStyle}get passphraseInputStyle(){if(!this.state.hasPassphraseFocus)return;const{backgroundColor}=this.props.securityToken,textColor=this.getContrastTextColor(backgroundColor);return{background:backgroundColor,color:textColor,"--passphrase-placeholder-color":textColor}}get previewStyle(){if(!this.state.hasPassphraseFocus)return;const{backgroundColor}=this.props.securityToken;return{"--icon-color":this.getContrastTextColor(backgroundColor),"--icon-background-color":backgroundColor}}getContrastTextColor(backgroundColor){const hex=backgroundColor.replace("#",""),bigint=parseInt(hex,16);return(.299*(bigint>>16&255)+.587*(bigint>>8&255)+.114*(255&bigint))/255>.5?"var(--Token-Token-text-and-icon)":"var(--Token-Token-text-and-icon-reversed)"}handleMouseDown(){this.setState({isPassphraseActive:!0})}handleMouseUp(){this.setState({isPassphraseActive:!1})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input password ${this.props.disabled?"disabled":""} ${this.state.hasPassphraseFocus?"":"no-focus"} ${this.state.isPassphraseActive?"active":""} ${this.props.securityToken?"security":""}`,style:this.props.securityToken?this.passphraseInputStyle:void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:this.props.id,name:this.props.name,maxLength:"4096",placeholder:this.props.placeholder,type:this.state.viewPassword&&!this.props.disabled?"text":"password",onKeyUp:this.props.onKeyUp,value:this.props.value,onFocus:this.handlePasswordInputFocus,onBlur:this.handlePasswordInputBlur,onChange:this.handleInputChange,disabled:this.props.disabled,readOnly:this.props.readOnly,autoComplete:this.props.autoComplete,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,"aria-required":!0,ref:this.props.inputRef}),this.props.preview&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-view-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleViewPasswordButtonClick,style:this.props.securityToken?this.previewStyle:void 0,className:"password-view infield button-transparent "+(this.props.disabled?"disabled":"")},!this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_open_svg__WEBPACK_IMPORTED_MODULE_1__.A,{className:"svg-icon eye-open"}),this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_eye_close_svg__WEBPACK_IMPORTED_MODULE_2__.A,{className:"svg-icon eye-close"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_3__.x6,null,"View")))),this.props.securityToken&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"security-token-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"security-token",style:this.securityTokenStyle},this.props.securityToken.code)))}}Password.defaultProps={id:"",name:"",autoComplete:"off"},Password.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_4___default().any,id:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,name:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,value:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,autoComplete:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,inputRef:prop_types__WEBPACK_IMPORTED_MODULE_4___default().object,disabled:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,preview:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func,onKeyUp:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func,securityToken:prop_types__WEBPACK_IMPORTED_MODULE_4___default().shape({code:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,backgroundColor:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,textColor:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string})};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_3__.CI)("common")(Password);Password.__docgenInfo={description:"This component represent a password input field with some additional properties",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handlePasswordInputFocus",docblock:"Whenever the user focus on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user focus on the password input"},{name:"handlePasswordInputBlur",docblock:"Whenever the user blurs on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user blurs on the password input"},{name:"handleViewPasswordButtonClick",docblock:"Handle view password button click.",modifiers:[],params:[],returns:null,description:"Handle view password button click."},{name:"securityTokenStyle",docblock:"Returns the style of the security token (color and text color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of the security token (color and text color)"},{name:"passphraseInputStyle",docblock:"Get the passphrase input style.\n@return {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get the passphrase input style."},{name:"previewStyle",docblock:"Returns the style of preview (icon color and icon background color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of preview (icon color and icon background color)"},{name:"getContrastTextColor",docblock:"Calculate the luminance of a color and return the appropriate text color variable.\n@param {string} backgroundColor - The background color in hex format.\n@returns {string} - The CSS variable for text color.",modifiers:[],params:[{name:"backgroundColor",description:"The background color in hex format.",type:{name:"string"},optional:!1}],returns:{description:"The CSS variable for text color.",type:{name:"string"}},description:"Calculate the luminance of a color and return the appropriate text color variable."},{name:"handleMouseDown",docblock:"Handle the mouse down to set active item",modifiers:[],params:[],returns:null,description:"Handle the mouse down to set active item"},{name:"handleMouseUp",docblock:"Handle the mouse down to set active item to false",modifiers:[],params:[],returns:null,description:"Handle the mouse down to set active item to false"}],displayName:"Password",props:{id:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},name:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},autoComplete:{defaultValue:{value:'"off"',computed:!1},description:"",type:{name:"string"},required:!1},context:{description:"",type:{name:"any"},required:!1},value:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},inputRef:{description:"",type:{name:"object"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},readOnly:{description:"",type:{name:"bool"},required:!1},preview:{description:"",type:{name:"bool"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},onKeyUp:{description:"",type:{name:"func"},required:!1},securityToken:{description:"",type:{name:"shape",value:{code:{name:"string",required:!1},backgroundColor:{name:"string",required:!1},textColor:{name:"string",required:!1}}},required:!1}}}},"./src/shared/models/entity/scimSettings/scimSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),_abstract_entityV2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js"),_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js");class ScimSettingsEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_1__.A{static getSchema(){return{type:"object",required:["scim_user_id"],properties:{id:{type:"string",format:"uuid",nullable:!0},scim_user_id:{type:"string",format:"uuid"},setting_id:{type:"string",format:"uuid",nullable:!0},secret_token:{type:"string",length:46,pattern:"^pb_[A-Za-z0-9]{43}$",nullable:!0}}}}toDto(){return Object.assign({},this._props)}get id(){return this._props.id||null}get scimUserId(){return this._props.scim_user_id}get settingId(){return this._props.setting_id}get secretToken(){return this._props.secret_token||null}set secretToken(secretToken){_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_0__.A.validateProp("secret_token",secretToken,this.cachedSchema.properties.secret_token),this._props.secret_token=secretToken}static get SECRET_TOKEN_LENGTH(){return 46}static get EMPTY_SECRET_VALUE(){return"pb_0000000000000000000000000000000000000000000"}static generateScimSecretToken(){const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",secretLength=ScimSettingsEntity.SECRET_TOKEN_LENGTH-3,secret=[],randomValues=new Uint8Array(2*secretLength);for(;secret.length<secretLength;){window.crypto.getRandomValues(randomValues);for(let i=0;i<randomValues.length&&secret.length<secretLength;i++){const v=randomValues[i];v<248&&secret.push(chars[v%62])}}return"pb_"+secret.join("")}static createFromScimSettingsFind(scimSettingsDto){const scimSettingsEntity=new ScimSettingsEntity(scimSettingsDto),entityValidationError=new _abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_2__.A;if(scimSettingsEntity.id||entityValidationError.addError("id","required","SCIM settings id is mandatory"),scimSettingsEntity.secretToken&&entityValidationError.addError("secretToken","empty","SCIM settings should not contain secret_token"),entityValidationError.hasErrors())throw entityValidationError;return scimSettingsEntity.secretToken="pb_0000000000000000000000000000000000000000000",scimSettingsEntity}static createFromScimSettingsCreation(scimSettingsDto){const scimSettingsEntity=new ScimSettingsEntity(scimSettingsDto),entityValidationError=new _abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_2__.A;if(scimSettingsEntity.secretToken||entityValidationError.addError("secretToken","required","SCIM settings secret_token is mandatory."),entityValidationError.hasErrors())throw entityValidationError;return scimSettingsEntity}static createFromScimSettingsUpdate(scimSettingsDto){delete scimSettingsDto.setting_id;return new ScimSettingsEntity(scimSettingsDto)}}const __WEBPACK_DEFAULT_EXPORT__=ScimSettingsEntity},"./src/shared/services/serviceWorker/clipboard/clipboardServiceWorkerService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ClipboardServiceWorkerService});var validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/validator/es/lib/util/assertString.js");class ClipboardServiceWorkerService{constructor(port){this.port=port}async copyTemporarily(clipboardContent){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__.A)(clipboardContent),await this.port.request("passbolt.clipboard.copy-temporarily",clipboardContent)}async copy(clipboardContent){(0,validator_es_lib_util_assertString__WEBPACK_IMPORTED_MODULE_0__.A)(clipboardContent),await this.port.request("passbolt.clipboard.copy",clipboardContent)}async cancelClipboardFlush(){await this.port.request("passbolt.clipboard.cancel-content-flush")}}},"./src/shared/utils/userUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$2:()=>getUserFormattedName,B7:()=>isUserSuspended,CD:()=>getUserStatus});const USER_STATUS_ACTIVE="active",USER_STATUS_SUSPENDED="suspended",USER_STATUS_DELETED="deleted",isUserSuspended=user=>Boolean(user?.disabled&&new Date(user.disabled)<=new Date),getUserStatus=user=>{if(Boolean(user?.deleted))return USER_STATUS_DELETED;return isUserSuspended(user)?USER_STATUS_SUSPENDED:USER_STATUS_ACTIVE},getUserFormattedName=(user,t=null,options={withUsername:!1})=>{const profile=user?.profile;if(!profile)return t("Unknown user");return Boolean(profile.first_name)||Boolean(profile.last_name)?options.withUsername?`${profile.first_name} ${profile.last_name} (${user.username})`:`${profile.first_name} ${profile.last_name}`:t("Unknown user")}},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/v5.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v5});var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js"),validate=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js");const esm_browser_parse=function parse(uuid){if(!(0,validate.A)(uuid))throw TypeError("Invalid UUID");var v,arr=new Uint8Array(16);return arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24,arr[1]=v>>>16&255,arr[2]=v>>>8&255,arr[3]=255&v,arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8,arr[5]=255&v,arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8,arr[7]=255&v,arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8,arr[9]=255&v,arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255,arr[11]=v/4294967296&255,arr[12]=v>>>24&255,arr[13]=v>>>16&255,arr[14]=v>>>8&255,arr[15]=255&v,arr};function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:case 3:return x^y^z;case 2:return x&y^x&z^y&z}}function ROTL(x,n){return x<<n|x>>>32-n}const esm_browser_v5=function v35(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){if("string"==typeof value&&(value=function stringToBytes(str){str=unescape(encodeURIComponent(str));for(var bytes=[],i=0;i<str.length;++i)bytes.push(str.charCodeAt(i));return bytes}(value)),"string"==typeof namespace&&(namespace=esm_browser_parse(namespace)),16!==namespace.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var bytes=new Uint8Array(16+value.length);if(bytes.set(namespace),bytes.set(value,namespace.length),(bytes=hashfunc(bytes))[6]=15&bytes[6]|version,bytes[8]=63&bytes[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=bytes[i];return buf}return(0,stringify.A)(bytes)}try{generateUUID.name=name}catch(err){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID}("v5",80,(function sha1(bytes){var K=[1518500249,1859775393,2400959708,3395469782],H=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof bytes){var msg=unescape(encodeURIComponent(bytes));bytes=[];for(var i=0;i<msg.length;++i)bytes.push(msg.charCodeAt(i))}else Array.isArray(bytes)||(bytes=Array.prototype.slice.call(bytes));bytes.push(128);for(var l=bytes.length/4+2,N=Math.ceil(l/16),M=new Array(N),_i=0;_i<N;++_i){for(var arr=new Uint32Array(16),j=0;j<16;++j)arr[j]=bytes[64*_i+4*j]<<24|bytes[64*_i+4*j+1]<<16|bytes[64*_i+4*j+2]<<8|bytes[64*_i+4*j+3];M[_i]=arr}M[N-1][14]=8*(bytes.length-1)/Math.pow(2,32),M[N-1][14]=Math.floor(M[N-1][14]),M[N-1][15]=8*(bytes.length-1)&4294967295;for(var _i2=0;_i2<N;++_i2){for(var W=new Uint32Array(80),t=0;t<16;++t)W[t]=M[_i2][t];for(var _t=16;_t<80;++_t)W[_t]=ROTL(W[_t-3]^W[_t-8]^W[_t-14]^W[_t-16],1);for(var a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],_t2=0;_t2<80;++_t2){var s=Math.floor(_t2/20),T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[_t2]>>>0;e=d,d=c,c=ROTL(b,30)>>>0,b=a,a=T}H[0]=H[0]+a>>>0,H[1]=H[1]+b>>>0,H[2]=H[2]+c>>>0,H[3]=H[3]+d>>>0,H[4]=H[4]+e>>>0}return[H[0]>>24&255,H[0]>>16&255,H[0]>>8&255,255&H[0],H[1]>>24&255,H[1]>>16&255,H[1]>>8&255,255&H[1],H[2]>>24&255,H[2]>>16&255,H[2]>>8&255,255&H[2],H[3]>>24&255,H[3]>>16&255,H[3]>>8&255,255&H[3],H[4]>>24&255,H[4]>>16&255,H[4]>>8&255,255&H[4]]}))},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}},"./node_modules/validator/es/lib/util/assertString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function assertString(input){if(!("string"==typeof input||input instanceof String)){var invalidType=_typeof(input);throw null===input?invalidType="null":"object"===invalidType&&(invalidType=input.constructor.name),new TypeError("Expected a string but received a ".concat(invalidType))}}__webpack_require__.d(__webpack_exports__,{A:()=>assertString})}}]);