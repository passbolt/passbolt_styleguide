/*! For license information please see react-quickaccess-components-HomePage-HomePage-test-stories.ab206fe3.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[9256],{"./src/react-quickaccess/components/HomePage/HomePage.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,NoFoundResource:()=>NoFoundResource,NoResource:()=>NoResource,SearchResources:()=>SearchResources,SuggestedResources:()=>SuggestedResources,__namedExportsOrder:()=>__namedExportsOrder,default:()=>HomePage_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react_router_dom=__webpack_require__("./node_modules/react-router-dom/esm/react-router-dom.js"),lib=__webpack_require__("./node_modules/xregexp/lib/index.js"),lib_default=__webpack_require__.n(lib),ip_regex=__webpack_require__("./node_modules/ip-regex/index.js");function canSuggestUrl(url,suggestedUrl){let urlObject;try{urlObject=new URL(url)}catch(error){return!1}const suggestedUrlObject=parseSuggestedUrl(suggestedUrl);if(!urlObject||!urlObject.hostname)return!1;if(!suggestedUrlObject||!suggestedUrlObject.hostname)return!1;if(suggestedUrlObject.protocol&&urlObject.protocol!==suggestedUrlObject.protocol)return!1;if(suggestedUrlObject.port&&urlObject.port!==suggestedUrlObject.port)return!1;if(urlObject.hostname===suggestedUrlObject.hostname)return!0;const urlIsIpAddress=(0,ip_regex.A)({exact:!0}).test(urlObject.hostname),suggestUrlIsIpAddress=(0,ip_regex.A)({exact:!0}).test(suggestedUrlObject.hostname);return urlIsIpAddress||suggestUrlIsIpAddress?urlObject.hostname===suggestedUrlObject.hostname:-1!==suggestedUrlObject.hostname.indexOf(".")&&isParentHostname(suggestedUrlObject.hostname,urlObject.hostname)}const parseSuggestedUrl=function(suggestedUrl){let suggestedUrlObject,protocol="",hostname="",port="",enforceProtocol=!1;/^[a-zA-Z\-]*:\/\//.test(suggestedUrl)||(enforceProtocol=!0,suggestedUrl=`fake://${suggestedUrl}`);try{suggestedUrlObject=new URL(suggestedUrl)}catch(error){return!1}return port=suggestedUrlObject.port,enforceProtocol?(suggestedUrlObject.protocol="https:",hostname=suggestedUrlObject.hostname):(protocol=suggestedUrlObject.protocol,hostname=suggestedUrlObject.hostname),{protocol,hostname,port}},regexHostnameAllowedChars=lib_default()("^[\\p{L}\\p{N}.-]*$"),isParentHostname=function(parent,child){if(!(child&&parent&&regexHostnameAllowedChars.test(child)&&regexHostnameAllowedChars.test(parent)))return!1;const lastIndexOf=child.lastIndexOf(parent);return-1!==lastIndexOf&&lastIndexOf+parent.length===child.length&&(void 0===child[lastIndexOf-1]||"."===child[lastIndexOf-1])};var es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),spinner=__webpack_require__("./src/img/svg/spinner.svg"),RbacContext=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),uiActionEnumeration=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),filterUtils=__webpack_require__("./src/shared/utils/filterUtils.js"),ResourceLocalStorageContext=__webpack_require__("./src/react-quickaccess/contexts/ResourceLocalStorageContext.js"),memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js"),ResourceTypesLocalStorageContext=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),MetadataTypesSettingsLocalStorageContext=__webpack_require__("./src/shared/context/MetadataTypesSettingsLocalStorageContext/MetadataTypesSettingsLocalStorageContext.js"),metadataTypesSettingsEntity=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js"),resourceTypeSchemasDefinition=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js");class HomePage extends react.Component{static isInitialised=!1;constructor(props){super(props),this.state=this.defaultState,this.initEventHandlers()}get defaultState(){return{activeTabUrl:null,usingOnThisTab:!1}}componentDidMount(){HomePage.isInitialised||(this.props.resourcesLocalStorageContext.updateLocalStorage(),HomePage.isInitialised=!0),this.props.context.searchHistory=[],this.props.context.updateSearch(""),this.props.context.focusSearch(),this.loadActiveTabUrl()}initEventHandlers(){this.handleUseOnThisTabClick=this.handleUseOnThisTabClick.bind(this)}async loadActiveTabUrl(){try{const activeTabUrl=await this.props.context.port.request("passbolt.active-tab.get-url",this.props.context.getOpenerTabId());this.setState({activeTabUrl})}catch(error){console.error(error)}}filterSuggestedResources=(0,memoize_one_esm.A)(((resources,activeTabUrl)=>{if(!activeTabUrl)return[];const suggestedResources=[];for(const i in resources){const resource=resources[i];if(resource.metadata?.uris?.[0]&&this.isPasswordResource(resource.resource_type_id)&&canSuggestUrl(activeTabUrl,resource.metadata.uris[0])&&(suggestedResources.push(resource),20===suggestedResources.length))break}return suggestedResources.sort(((a,b)=>{const aUrisLength=a.metadata.uris[0].length||0;return(b.metadata.uris[0].length||0)-aUrisLength}))}));filterSearchedResources=(0,memoize_one_esm.A)(((resources,search)=>search&&resources?(0,filterUtils.$)(resources,search,100):[]));async handleUseOnThisTabClick(resource){this.setState({usingOnThisTab:!0});try{await this.props.context.port.request("passbolt.quickaccess.use-resource-on-current-tab",resource.id,this.props.context.getOpenerTabId()),window.close()}catch(error){error&&"UserAbortsOperationError"===error.name?this.setState({usingOnThisTab:!1}):(console.error("An error occured",error),this.setState({usingOnThisTab:!1,useOnThisTabError:this.props.t("Unable to use the password on this page. Copy and paste the information instead.")}))}}isPasswordResource(resourceId){return this.props.resourceTypes?.getFirstById(resourceId)?.hasPassword()}hasMetadataTypesSettings(){return Boolean(this.props.metadataTypeSettings)}canCreatePassword(){return this.props.metadataTypeSettings.isDefaultResourceTypeV5?this.props.resourceTypes?.hasOneWithSlug(resourceTypeSchemasDefinition.gG):!!this.props.metadataTypeSettings.isDefaultResourceTypeV4&&this.props.resourceTypes?.hasOneWithSlug(resourceTypeSchemasDefinition.Bo)}render(){const isReady=null!==this.props.resources&&null!=this.props.resourceTypes,hasSearch=this.props.context.search?.length>0,showSuggestedSection=!hasSearch,showBrowsedResourcesSection=hasSearch,showFiltersSection=!hasSearch,canUseTag=this.props.context.siteSettings.canIUse("tags")&&this.props.rbacContext.canIUseUiAction(uiActionEnumeration.e.TAGS_USE);let browsedResources,suggestedResources;return isReady&&(browsedResources=this.filterSearchedResources(this.props.resources,this.props.context.search),suggestedResources=this.filterSuggestedResources(this.props.resources,this.state.activeTabUrl)),react.createElement("div",{className:"index-list"},react.createElement("div",{className:"list-container"},showSuggestedSection&&react.createElement("div",{className:"list-section"},react.createElement("div",{className:"list-title"},react.createElement("h2",null,react.createElement(es.x6,null,"Suggested"))),react.createElement("ul",{className:"list-items"},!isReady&&react.createElement("li",{className:"empty-entry"},react.createElement(spinner.A,null),react.createElement("p",{className:"processing-text"},react.createElement(es.x6,null,"Retrieving your passwords"))),isReady&&0===suggestedResources.length&&react.createElement("li",{className:"empty-entry"},react.createElement("p",null,react.createElement(es.x6,null,"No passwords found for the current page. You can use the search."))),isReady&&suggestedResources.length>0&&suggestedResources.map((resource=>react.createElement("li",{className:"suggested-resource-entry",key:resource.id},react.createElement("button",{type:"button",className:"resource-details link",onClick:()=>this.handleUseOnThisTabClick(resource)},react.createElement("div",{className:"inline-resource-name"},react.createElement("span",{className:"title"},resource.metadata.name),react.createElement("span",{className:"username"}," ",resource.metadata.username?`(${resource.metadata.username})`:"")),react.createElement("span",{className:"url"},resource.metadata.uris?.[0])),react.createElement(react_router_dom.N_,{className:"chevron-right-wrapper",to:`/webAccessibleResources/quickaccess/resources/view/${resource.id}`},react.createElement(Icon.A,{name:"chevron-right"}))))))),showBrowsedResourcesSection&&react.createElement("div",{className:"list-section"},react.createElement("div",{className:"list-title"},react.createElement("h2",null,react.createElement(es.x6,null,"Browse"))),react.createElement("ul",{className:"list-items"},react.createElement(react.Fragment,null,!isReady&&react.createElement("li",{className:"empty-entry"},react.createElement(spinner.A,null),react.createElement("p",{className:"processing-text"},react.createElement(es.x6,null,"Retrieving your passwords"))),isReady&&0===browsedResources.length&&react.createElement("li",{className:"empty-entry"},react.createElement("p",null,react.createElement(es.x6,null,"No result match your search. Try with another search term."))),isReady&&browsedResources.length>0&&browsedResources.map((resource=>react.createElement("li",{className:"browse-resource-entry",key:resource.id},react.createElement(react_router_dom.N_,{to:`/webAccessibleResources/quickaccess/resources/view/${resource.id}`},react.createElement("div",{className:"inline-resource-entry"},react.createElement("div",{className:"inline-resource-name"},react.createElement("span",{className:"title"},resource.metadata.name),react.createElement("span",{className:"username"}," ",resource.metadata.username?`(${resource.metadata.username})`:"")),react.createElement("span",{className:"url"},resource.metadata.uris?.[0])),react.createElement(Icon.A,{name:"chevron-right"})))))))),showFiltersSection&&react.createElement("div",{className:"list-section"},react.createElement("div",{className:"list-title"},react.createElement("h2",null,react.createElement(es.x6,null,"Browse"))),react.createElement("ul",{className:"list-items"},react.createElement("li",{className:"filter-entry"},react.createElement(react_router_dom.N_,{to:"/webAccessibleResources/quickaccess/more-filters"},react.createElement(Icon.A,{name:"filter"}),react.createElement("span",{className:"filter-title"},react.createElement(es.x6,null,"Filters")),react.createElement(Icon.A,{name:"chevron-right"}))),react.createElement("li",{className:"filter-entry"},react.createElement(react_router_dom.N_,{to:"/webAccessibleResources/quickaccess/resources/group"},react.createElement(Icon.A,{name:"users"}),react.createElement("span",{className:"filter-title"},react.createElement(es.x6,null,"Groups")),react.createElement(Icon.A,{name:"chevron-right"}))),canUseTag&&react.createElement("li",{className:"filter-entry"},react.createElement(react_router_dom.N_,{to:"/webAccessibleResources/quickaccess/resources/tag"},react.createElement(Icon.A,{name:"tag"}),react.createElement("span",{className:"filter-title"},react.createElement(es.x6,null,"Tags")),react.createElement(Icon.A,{name:"chevron-right"})))))),this.hasMetadataTypesSettings()&&this.canCreatePassword()&&react.createElement("div",{className:"submit-wrapper button-after-list input"},react.createElement(react_router_dom.N_,{to:"/webAccessibleResources/quickaccess/resources/create",id:"popupAction",className:"button primary big full-width",role:"button"},react.createElement(es.x6,null,"Create new")),this.state.useOnThisTabError&&react.createElement("div",{className:"error-message"},this.state.useOnThisTabError)))}}HomePage.propTypes={context:prop_types_default().any,rbacContext:prop_types_default().any,resources:prop_types_default().array,resourceTypes:prop_types_default().instanceOf(resourceTypesCollection.A),resourcesLocalStorageContext:prop_types_default().object,metadataTypeSettings:prop_types_default().instanceOf(metadataTypesSettingsEntity.Ay),t:prop_types_default().func};const HomePage_HomePage=(0,AppContext.L)((0,RbacContext.x6)((0,react_router.withRouter)((0,ResourceTypesLocalStorageContext.KH)((0,ResourceLocalStorageContext.GZ)((0,MetadataTypesSettingsLocalStorageContext.mw)((0,es.CI)("common")(HomePage)))))));HomePage.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Returns the component default state\n@return {object}",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Returns the component default state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"loadActiveTabUrl",docblock:"Loads the currently active tab URL, if any, into the state.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Loads the currently active tab URL, if any, into the state."},{name:"handleUseOnThisTabClick",docblock:'Handles the click event of the button "Use on this tab".\n@returns {Promise<void>}',modifiers:["async"],params:[{name:"resource",optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:'Handles the click event of the button "Use on this tab".'},{name:"isPasswordResource",docblock:"Is password resource\n@returns {boolean}",modifiers:[],params:[{name:"resourceId",optional:!1}],returns:{type:{name:"boolean"}},description:"Is password resource"},{name:"hasMetadataTypesSettings",docblock:"Has metadata types settings\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has metadata types settings"},{name:"canCreatePassword",docblock:"Can create password\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can create password"}],displayName:"HomePage",props:{context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},resources:{description:"",type:{name:"array"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},resourcesLocalStorageContext:{description:"",type:{name:"object"},required:!1},metadataTypeSettings:{description:"",type:{name:"instanceOf",value:"MetadataTypesSettingsEntity"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var AppContext_test_data=__webpack_require__("./src/react-quickaccess/contexts/AppContext.test.data.js"),MockPort=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),RbacContext_test_data=__webpack_require__("./src/shared/context/Rbac/RbacContext.test.data.js"),resourceEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/resourceEntity.test.data.js");const defaultResourceLocalStorageContext=(data={})=>({get:jest.fn(),resources:null,updateLocalStorage:jest.fn(),hasBeenInitialised:jest.fn((()=>!0)),...data});var resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js"),metadataTypesSettingsEntity_test_data=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.test.data.js"),resourceMetadataEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/metadata/resourceMetadataEntity.test.data.js");function HomePage_test_data_defaultProps(data={}){return{context:(0,AppContext_test_data.s)(),rbacContext:(0,RbacContext_test_data.E2)(),resourcesLocalStorageContext:defaultResourceLocalStorageContext(),resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)()),metadataTypeSettings:new metadataTypesSettingsEntity.Ay((0,metadataTypesSettingsEntity_test_data.uc)()),resources:null,getOpenerTabId:()=>1,...data}}const HomePage_test_stories={title:"Components/QuickAccess/Home",component:HomePage_HomePage},Template=({context,...args})=>react.createElement(AppContext.A.Provider,{value:context},react.createElement(react_router.MemoryRouter,{initialEntries:["/"]},react.createElement(react_router.Route,{component:routerProps=>react.createElement("div",{className:"container quickaccess"},react.createElement(HomePage_HomePage,{...args,...routerProps}))})));Template.propTypes={context:prop_types_default().object};const parameters={css:"ext_quickaccess"},Initial=Template.bind({});Initial.args=function loadingProps(){return HomePage_test_data_defaultProps({context:(0,AppContext_test_data.s)()})}(),Initial.parameters=parameters;const NoResource=Template.bind({});NoResource.args=function noResourcesProps(){return HomePage_test_data_defaultProps({context:(0,AppContext_test_data.s)(),resources:[]})}(),NoResource.parameters=parameters;const NoFoundResource=Template.bind({});NoFoundResource.args=function searchNoResultProps(){return HomePage_test_data_defaultProps({context:(0,AppContext_test_data.s)({search:"apache"}),resources:[]})}(),NoFoundResource.parameters=parameters;const SearchResources=Template.bind({});SearchResources.args=function searchWithResultProps(){return HomePage_test_data_defaultProps({context:(0,AppContext_test_data.s)({search:"apache"}),resources:[(0,resourceEntity_test_data.j8)({metadata:(0,resourceMetadataEntity_test_data.m)({name:"apache",uris:["http://www.apache.org"]})}),(0,resourceEntity_test_data.j8)()]})}(),SearchResources.parameters=parameters;const SuggestedResources=Template.bind({});SuggestedResources.args=function suggestedResourcesProps(){const port=new MockPort.A;return port.addRequestListener("passbolt.active-tab.get-url",(()=>"http://www.apache.org/")),HomePage_test_data_defaultProps({context:(0,AppContext_test_data.s)({port}),resources:[(0,resourceEntity_test_data.j8)({metadata:(0,resourceMetadataEntity_test_data.m)({name:"apache",uris:["http://www.apache.org"]})}),(0,resourceEntity_test_data.j8)()]})}(),SuggestedResources.parameters=parameters;const __namedExportsOrder=["Initial","NoResource","NoFoundResource","SearchResources","SuggestedResources"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"({\n  context,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={['/']}>\n      <Route component={routerProps => <div className=\"container quickaccess\"><HomePage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>",...Initial.parameters?.docs?.source}}},NoResource.parameters={...NoResource.parameters,docs:{...NoResource.parameters?.docs,source:{originalSource:"({\n  context,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={['/']}>\n      <Route component={routerProps => <div className=\"container quickaccess\"><HomePage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>",...NoResource.parameters?.docs?.source}}},NoFoundResource.parameters={...NoFoundResource.parameters,docs:{...NoFoundResource.parameters?.docs,source:{originalSource:"({\n  context,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={['/']}>\n      <Route component={routerProps => <div className=\"container quickaccess\"><HomePage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>",...NoFoundResource.parameters?.docs?.source}}},SearchResources.parameters={...SearchResources.parameters,docs:{...SearchResources.parameters?.docs,source:{originalSource:"({\n  context,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={['/']}>\n      <Route component={routerProps => <div className=\"container quickaccess\"><HomePage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>",...SearchResources.parameters?.docs?.source}}},SuggestedResources.parameters={...SuggestedResources.parameters,docs:{...SuggestedResources.parameters?.docs,source:{originalSource:"({\n  context,\n  ...args\n}) => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={['/']}>\n      <Route component={routerProps => <div className=\"container quickaccess\"><HomePage {...args} {...routerProps} /></div>} />\n    </MemoryRouter>\n  </AppContext.Provider>",...SuggestedResources.parameters?.docs?.source}}}},"./node_modules/ip-regex/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const boundry=options=>options&&options.includeBoundaries?"(?:(?<=\\s|^)(?=[a-fA-F\\d:])|(?<=[a-fA-F\\d:])(?=\\s|$))":"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`\n(?:\n(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=options=>options&&options.exact?v46Exact:new RegExp(`(?:${boundry(options)}${v4}${boundry(options)})|(?:${boundry(options)}${v6}${boundry(options)})`,"g");ipRegex.v4=options=>options&&options.exact?v4exact:new RegExp(`${boundry(options)}${v4}${boundry(options)}`,"g"),ipRegex.v6=options=>options&&options.exact?v6exact:new RegExp(`${boundry(options)}${v6}${boundry(options)}`,"g");const __WEBPACK_DEFAULT_EXPORT__=ipRegex},"./node_modules/memoize-one/dist/memoize-one.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>memoizeOne});var safeIsNaN=Number.isNaN||function ponyfill(value){return"number"==typeof value&&value!=value};function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(first=newInputs[i],second=lastInputs[i],!(first===second||safeIsNaN(first)&&safeIsNaN(second)))return!1;var first,second;return!0}function memoizeOne(resultFn,isEqual){void 0===isEqual&&(isEqual=areInputsEqual);var cache=null;function memoized(){for(var newArgs=[],_i=0;_i<arguments.length;_i++)newArgs[_i]=arguments[_i];if(cache&&cache.lastThis===this&&isEqual(newArgs,cache.lastArgs))return cache.lastResult;var lastResult=resultFn.apply(this,newArgs);return cache={lastResult,lastArgs:newArgs,lastThis:this},lastResult}return memoized.clear=function clear(){cache=null},memoized}},"./src/shared/context/Rbac/RbacContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{eu:()=>RbacContext,Ay:()=>Rbac_RbacContext,x6:()=>withRbac});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),controlFunctionEnumeration=__webpack_require__("./src/shared/services/rbacs/controlFunctionEnumeration.js"),denyControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/denyControlFunction.js"),allowControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/allowControlFunction.js");class GetControlFunctionService{static getByRbac(rbac){const controlFunction=controlFunctionEnumeration.HJ[rbac.controlFunction];return controlFunction||(console.warn(`Could not find control function for the given rbac entity (${rbac.id})`),denyControlFunction.A)}static getDefaultForAdminAndUiAction(uiActionName){return controlFunctionEnumeration.Y9[uiActionName]||allowControlFunction.A}static getDefaultForUserAndUiAction(uiActionName){return controlFunctionEnumeration.uy[uiActionName]||allowControlFunction.A}}var roleEntity=__webpack_require__("./src/shared/models/entity/role/roleEntity.js");class CanUse{static canRoleUseUiAction(user,rbacs,actionName){if(window.chrome?.webview){const rbac=rbacs.findRbacByActionName(actionName);return this.getByRbacOrDefault(rbac,actionName,user)}const role=new roleEntity.A(user.role);if(role.isAdmin()){return GetControlFunctionService.getDefaultForAdminAndUiAction(actionName).execute()}const rbac=rbacs.findRbacByRoleAndUiActionName(role,actionName);return this.getByRbacOrDefault(rbac,actionName,user)}static getByRbacOrDefault(rbac,actionName,user){if(rbac){return GetControlFunctionService.getByRbac(rbac).execute(user)}return GetControlFunctionService.getDefaultForUserAndUiAction(actionName).execute()}}const RbacContext=react.createContext({canIUseUiAction:()=>{}});class RbacContextProvider extends react.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{canIUseUiAction:this.canIUseUiAction.bind(this)}}canIUseUiAction(actionName){return CanUse.canRoleUseUiAction(this.props.context.loggedInUser,this.props.context.rbacs,actionName)}render(){return react.createElement(RbacContext.Provider,{value:this.state},this.props.children)}}RbacContextProvider.propTypes={context:prop_types_default().any,children:prop_types_default().any};const Rbac_RbacContext=(0,AppContext.L)(RbacContextProvider);function withRbac(WrappedComponent){return class WithRbac extends react.Component{render(){return react.createElement(RbacContext.Consumer,null,(rbacContext=>react.createElement(WrappedComponent,{rbacContext,...this.props})))}}}RbacContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"canIUseUiAction",docblock:"Check if the user can use the given ui action.\n@param {string} actionName The name of the UI action to check for.\n@return {boolean}",modifiers:[],params:[{name:"actionName",description:"The name of the UI action to check for.",type:{name:"string"},optional:!1}],returns:{type:{name:"boolean"}},description:"Check if the user can use the given ui action."}],displayName:"RbacContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/context/Rbac/RbacContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E2:()=>defaultAdministratorRbacContext,UO:()=>denyRbacContext,mM:()=>defaultUserRbacContext});__webpack_require__("./src/shared/models/entity/groupUser/groupUserEntity.test.data.js"),__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");function defaultAdministratorRbacContext(data={}){return{canIUseUiAction:()=>!0,...data}}function defaultUserRbacContext(data={}){return{canIUseUiAction:()=>!0,...data}}function denyRbacContext(data={}){return{canIUseUiAction:()=>!1,...data}}},"./src/shared/models/entity/role/roleEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js");class RoleEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",enum:[RoleEntity.ROLE_ADMIN,RoleEntity.ROLE_USER,RoleEntity.ROLE_GUEST,RoleEntity.ROLE_ROOT]},description:{type:"string",maxLength:255},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"}}}}get id(){return this._props.id}get name(){return this._props.name}get description(){return this._props.description||null}get created(){return this._props.created||null}get modified(){return this._props.modified||null}isAdmin(){return this.name===RoleEntity.ROLE_ADMIN}static get ENTITY_NAME(){return"Role"}static get ROLE_ADMIN(){return"admin"}static get ROLE_USER(){return"user"}static get ROLE_GUEST(){return"guest"}static get ROLE_ROOT(){return"root"}}const __WEBPACK_DEFAULT_EXPORT__=RoleEntity},"./src/shared/services/rbacs/controlFunctionEnumeration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HJ:()=>controlFunctionResolutions,HK:()=>controlFunctions,Y9:()=>defaultAdminUiActionControlResolution,uy:()=>defaultUserUiActionControlResolution});var allowControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/allowControlFunction.js"),ControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/ControlFunction.js");class AllowIfGroupManagerInOneGroupFunction extends ControlFunction.A{static execute(user){return user.groups_users.some((group=>group.is_admin))}}var denyControlFunction=__webpack_require__("./src/shared/services/rbacs/controlFunctions/denyControlFunction.js"),uiActionEnumeration=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js");const controlFunctions={ALLOW:"Allow",DENY:"Deny",ALLOW_IF_GROUP_MANAGER_IN_ONE_GROUP:"AllowIfGroupManagerInOneGroup"},controlFunctionResolutions={[controlFunctions.ALLOW]:allowControlFunction.A,[controlFunctions.DENY]:denyControlFunction.A,[controlFunctions.ALLOW_IF_GROUP_MANAGER_IN_ONE_GROUP]:AllowIfGroupManagerInOneGroupFunction},defaultAdminUiActionControlResolution={[uiActionEnumeration.e.FOLDERS_USE]:controlFunctionResolutions[controlFunctions.ALLOW]},defaultUserUiActionControlResolution={[uiActionEnumeration.e.ADMINSTRATION_VIEW_WORKSPACE]:controlFunctionResolutions[controlFunctions.DENY]}},"./src/shared/services/rbacs/controlFunctions/ControlFunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ControlFunction});class ControlFunction{}},"./src/shared/services/rbacs/controlFunctions/allowControlFunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AllowControlFunction});var _ControlFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/services/rbacs/controlFunctions/ControlFunction.js");class AllowControlFunction extends _ControlFunction__WEBPACK_IMPORTED_MODULE_0__.A{static execute(){return!0}}},"./src/shared/services/rbacs/controlFunctions/denyControlFunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DenyControlFunction});var _ControlFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/services/rbacs/controlFunctions/ControlFunction.js");class DenyControlFunction extends _ControlFunction__WEBPACK_IMPORTED_MODULE_0__.A{static execute(){return!1}}},"./src/shared/services/rbacs/uiActionEnumeration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>uiActions});const uiActions={FOLDERS_USE:"Folders.use",RESOURCES_IMPORT:"Resources.import",RESOURCES_EXPORT:"Resources.export",RESOURCES_SEE_ACTIVITIES:"Resources.seeActivities",RESOURCES_SEE_COMMENTS:"Resources.seeComments",SECRETS_PREVIEW:"Secrets.preview",SECRETS_COPY:"Secrets.copy",SHARE_VIEW_LIST:"Share.viewList",TAGS_USE:"Tags.use",USERS_VIEW_WORKSPACE:"Users.viewWorkspace",MOBILE_TRANSFER:"Mobile.transfer",DESKTOP_TRANSFER:"Desktop.transfer",PROFIL_ACCOUNT_RECOVERY:"Profil.accountRecovery",ADMINSTRATION_VIEW_WORKSPACE:"Administration.viewWorkspace",DUO_CONFIGURATION:"Duo.configuration",AVATAR_UPLOAD:"Avatar.upload",SHARE_FOLDER:"Folders.share"}}}]);