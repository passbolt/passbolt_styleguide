/*! For license information please see react-extension-components-Resource-DisplayResourcesList-DisplayResourcesListContextualMenu-test-stories.38e14def.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[1375],{"./src/react-extension/components/Resource/DisplayResourcesList/DisplayResourcesListContextualMenu.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,DenyUiActions:()=>DenyUiActions,ReadOnlyPermission:()=>ReadOnlyPermission,StandaloneTotp:()=>StandaloneTotp,UpdatePermission:()=>UpdatePermission,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayResourcesListContextualMenu_test_stories});var DisplayResourcesListContextualMenu=__webpack_require__("./src/react-extension/components/Resource/DisplayResourcesList/DisplayResourcesListContextualMenu.js"),RbacContext_test_data=__webpack_require__("./src/shared/context/Rbac/RbacContext.test.data.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js"),ResourceWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.test.data.js"),ExtAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js"),resourceEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/resourceEntity.test.data.js"),PasswordExpirySettingsContext_test_data=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.test.data.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js"),ManagedClipboardServiceProvider_test_data=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js"),metadataKeysSettingsEntity=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js"),metadataKeysSettingsEntity_test_data=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.test.data.js");function defaultProps(data={}){return{context:(0,ExtAppContext_test_data.bC)(),rbacContext:(0,RbacContext_test_data.mM)(),resource:(0,resourceEntity_test_data.j8)(),hide:jest.fn(),left:10,top:10,dialogContext:(0,DialogContext_test_data.L)(),resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)(),resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)()),passwordExpiryContext:(0,PasswordExpirySettingsContext_test_data.i)({policy_override:!0}),clipboardContext:(0,ManagedClipboardServiceProvider_test_data.H)(),metadataKeysSettings:new metadataKeysSettingsEntity.A((0,metadataKeysSettingsEntity_test_data.L)()),...data}}const DisplayResourcesListContextualMenu_test_stories={title:"Components/Resource/DisplayResourcesListContextualMenu",component:DisplayResourcesListContextualMenu.A,parameters:{docs:{description:{component:"DisplayResourcesListContextualMenu stories"}}}},Default={args:defaultProps()},StandaloneTotp={args:function propsResourceStandaloneTotp(){return{...defaultProps(),resource:(0,resourceEntity_test_data.Ge)()}}()},ReadOnlyPermission={args:function propsResourceWithReadOnlyPermission(){return{...defaultProps(),resource:(0,resourceEntity_test_data.Jn)()}}()},UpdatePermission={args:function propsResourceWithUpdatePermission(){return{...defaultProps(),resource:(0,resourceEntity_test_data._Y)()}}()},DenyUiActions={args:function propsDenyUIActions(){return{...defaultProps(),rbacContext:(0,RbacContext_test_data.UO)()}}()},__namedExportsOrder=["Default","StandaloneTotp","ReadOnlyPermission","UpdatePermission","DenyUiActions"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: defaultProps()\n}",...Default.parameters?.docs?.source}}},StandaloneTotp.parameters={...StandaloneTotp.parameters,docs:{...StandaloneTotp.parameters?.docs,source:{originalSource:"{\n  args: propsResourceStandaloneTotp()\n}",...StandaloneTotp.parameters?.docs?.source}}},ReadOnlyPermission.parameters={...ReadOnlyPermission.parameters,docs:{...ReadOnlyPermission.parameters?.docs,source:{originalSource:"{\n  args: propsResourceWithReadOnlyPermission()\n}",...ReadOnlyPermission.parameters?.docs?.source}}},UpdatePermission.parameters={...UpdatePermission.parameters,docs:{...UpdatePermission.parameters?.docs,source:{originalSource:"{\n  args: propsResourceWithUpdatePermission()\n}",...UpdatePermission.parameters?.docs?.source}}},DenyUiActions.parameters={...DenyUiActions.parameters,docs:{...DenyUiActions.parameters?.docs,source:{originalSource:"{\n  args: propsDenyUIActions()\n}",...DenyUiActions.parameters?.docs?.source}}}},"./src/img/svg/edit.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgEdit(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 2.25H3.75a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V9"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.781 1.969a1.591 1.591 0 0 1 2.25 2.25L9 11.25 6 12l.75-3z"})))}},"./src/react-extension/components/Common/ContextualMenu/ContextualMenuWrapper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);class ContextualMenuWrapper extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.createRefs(),this.bindCallbacks()}get defaultState(){return{positionY:this.props.top}}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleDocumentScrollEvent=this.handleDocumentScrollEvent.bind(this),this.isWindowExceeded=this.isWindowExceeded.bind(this)}createRefs(){this.elementRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}componentDidMount(){this.adjustPositionY(),document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.addEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.removeEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}handleDocumentScrollEvent(){this.props.hide()}handleDocumentClickEvent(event){this.elementRef.current.contains(event.target)||(event.stopPropagation(),this.props.hide())}handleDocumentContextualMenuEvent(event){this.elementRef.current.contains(event.target)||this.props.hide()}handleDocumentDragStartEvent(){this.props.hide()}isWindowExceeded(){const contextMenuHeight=this.elementRef.current?.offsetHeight;return this.props.top+contextMenuHeight>window.innerHeight}adjustPositionY(){this.isWindowExceeded()&&(this.setState({positionY:window.innerHeight-this.elementRef.current.offsetHeight}),this.elementRef.current.style.zIndex=1e3)}getStyle(){return{position:"absolute",display:"block",left:this.props.left,top:this.state.positionY}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{ref:this.elementRef,className:`contextual-menu ${this.props.className} ${this.isWindowExceeded()?"floating":""}`,style:this.getStyle()},this.props.children)}}ContextualMenuWrapper.defaultProps={className:""},ContextualMenuWrapper.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,left:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,hide:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,top:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=ContextualMenuWrapper;ContextualMenuWrapper.__docgenInfo={description:"The ContextualMenuWrapper has for aim to handle common contextual menus common behavior.\nYou can use it in your component as following\n\n<ContextualMenuWrapper\n  hide={callback_func} // Function to call when the contextual menu request to close itself\n  left={100} // Left position in absolute to display the contextual menu\n  top={100}> // Top position in absolute to display the contextual menu\n  <div>\n    Your contextual menu content\n  </div>\n</ContextualMenuWrapper>",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"bindCallbacks",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"createRefs",docblock:"Create DOM nodes or React elements references in order to be able to access them programmatically.",modifiers:[],params:[],returns:null,description:"Create DOM nodes or React elements references in order to be able to access them programmatically."},{name:"handleDocumentScrollEvent",docblock:"Handle scroll event on document. Hide the component if any.",modifiers:[],params:[],returns:null,description:"Handle scroll event on document. Hide the component if any."},{name:"handleDocumentClickEvent",docblock:"Handle click events on document. Hide the component if the click occurred outside of the component.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle click events on document. Hide the component if the click occurred outside of the component."},{name:"handleDocumentContextualMenuEvent",docblock:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component.\nDon't hide it if a contextual menu event occurred on the FoldersList component, this component props will be\nupdated with new datA.\n@param {ReactEvent} event The event",modifiers:[],params:[{name:"event",description:"The event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle contextual menu events on document. Hide the component if the click occurred outside of the component.\nDon't hide it if a contextual menu event occurred on the FoldersList component, this component props will be\nupdated with new datA."},{name:"handleDocumentDragStartEvent",docblock:"Handle drag start event on document. Hide the component if any.",modifiers:[],params:[],returns:null,description:"Handle drag start event on document. Hide the component if any."},{name:"isWindowExceeded",docblock:"Returns true if the height of the contextual menu given its position exceeds the window.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the height of the contextual menu given its position exceeds the window."},{name:"adjustPositionY",docblock:"Adjust the vertical position of the contextual menuu if its height at its position execeeds the window.",modifiers:[],params:[],returns:null,description:"Adjust the vertical position of the contextual menuu if its height at its position execeeds the window."},{name:"getStyle",docblock:"Get the contextual menu style.",modifiers:[],params:[],returns:null,description:"Get the contextual menu style."}],displayName:"ContextualMenuWrapper",props:{className:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"any"},required:!1},left:{description:"",type:{name:"number"},required:!1},hide:{description:"",type:{name:"func"},required:!1},top:{description:"",type:{name:"number"},required:!1}}}},"./src/react-extension/components/Share/SharePermissionItemSkeleton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");class SharePermissionItemSkeleton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"row skeleton"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"avatar"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"aro"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"aro-name"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"aro-details"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"select rights"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"shimmer"}))}}SharePermissionItemSkeleton.propTypes={};const __WEBPACK_DEFAULT_EXPORT__=SharePermissionItemSkeleton;SharePermissionItemSkeleton.__docgenInfo={description:"",methods:[],displayName:"SharePermissionItemSkeleton"}},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>metadataKeysSettingsEntity});var entityV2=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js"),entityValidationError=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js"),entityV2Collection=__webpack_require__("./src/shared/models/entity/abstract/entityV2Collection.js"),metadataPrivateKeyEntity=__webpack_require__("./src/shared/models/entity/metadata/metadataPrivateKeyEntity.js");class ShareMetadataPrivateKeysCollection extends entityV2Collection.A{get entityClass(){return metadataPrivateKeyEntity.A}constructor(dtos=[],options={}){super(dtos,options)}static getSchema(){return{type:"array",items:metadataPrivateKeyEntity.A.getSchema()}}validateBuildRules(item,options){this.assertUniqueMetadataKeyIdUserId(item,{haystackSet:options?.uniqueMetadataKeyIdUserIdSetCache})}assertUniqueMetadataKeyIdUserId(item,options){if(!item.userId||!item.metadataKeyId)return;let haystackSet=options?.haystackSet;haystackSet||(haystackSet=new Set(this.items.map((item=>`${item.metadataKeyId}:${item.userId}`))));const metadataKeyIdUserIdKey=`${item.metadataKeyId}:${item.userId}`;if(haystackSet.has(metadataKeyIdUserIdKey)){const error=new entityValidationError.A,message=`The collection already includes an element that has a couple metadata_key_id:user_id (${metadataKeyIdUserIdKey}) with an identical value.`;throw error.addError("metadata_key_id:user_id","unique",message),error}}pushMany(data,entityOptions={},options={}){const uniqueMetadataKeyIdUserIdSetCache=new Set(this.items.map((item=>`${item.metadataKeyId}:${item.userId}`)));options={onItemPushed:item=>{uniqueMetadataKeyIdUserIdSetCache.add(`${item.metadataKeyId}:${item.userId}`)},validateBuildRules:{...options?.validateBuildRules,uniqueMetadataKeyIdUserIdSetCache},...options},super.pushMany(data,entityOptions,options)}hasDecryptedPrivateKeys(){return this._items.some((item=>item.isDecrypted))}hasEncryptedPrivateKeys(){return this._items.some((item=>!item.isDecrypted))}}const shareMetadataPrivateKeysCollection=ShareMetadataPrivateKeysCollection;class MetadataKeysSettingsEntity extends entityV2.A{static getSchema(){return{type:"object",required:["allow_usage_of_personal_keys","zero_knowledge_key_share"],properties:{allow_usage_of_personal_keys:{type:"boolean"},zero_knowledge_key_share:{type:"boolean"},metadata_private_keys:shareMetadataPrivateKeysCollection.getSchema()}}}static get associations(){return{metadata_private_keys:shareMetadataPrivateKeysCollection}}validateBuildRules(){if(this._props.zero_knowledge_key_share&&this.metadataPrivateKeys?.length>0){const error=new entityValidationError.A,message="If the property zero_knowledge_key_share is true, metadata_private_keys cannot be set";throw error.addError("metadata_private_keys","not_defined_for_zero_knowledge",message),error}}static createFromDefault(data={}){return new MetadataKeysSettingsEntity({allow_usage_of_personal_keys:!0,zero_knowledge_key_share:!1,...data})}toDto(contain){const result=Object.assign({},this._props);return contain?(this._metadataPrivateKeys&&contain.metadata_private_keys&&(result.metadata_private_keys=this._metadataPrivateKeys.toDto()),result):result}get allowUsageOfPersonalKeys(){return this._props.allow_usage_of_personal_keys}get zeroKnowledgeKeyShare(){return this._props.zero_knowledge_key_share}get metadataPrivateKeys(){return this._metadataPrivateKeys||null}set metadataPrivateKeys(metadataPrivateKeysCollection){if(!(metadataPrivateKeysCollection instanceof shareMetadataPrivateKeysCollection))throw new TypeError("The metadataPrivateKeysCollection is not of MetadataPrivateKeysCollection type");this._metadataPrivateKeys=metadataPrivateKeysCollection}static get ALL_CONTAIN_OPTIONS(){return{metadata_private_keys:!0}}}const metadataKeysSettingsEntity=MetadataKeysSettingsEntity},"./src/shared/models/entity/metadata/metadataKeysSettingsEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>defaultMetadataKeysSettingsDto});var _metadataPrivateKeyEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/metadata/metadataPrivateKeyEntity.test.data.js"),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const defaultMetadataKeysSettingsDto=(data={},options={})=>{const defaultData={allow_usage_of_personal_keys:!0,zero_knowledge_key_share:!1};return!defaultData.metadata_private_keys&&options?.withMetadataPrivateKeys&&(defaultData.metadata_private_keys=[(0,_metadataPrivateKeyEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.mr)({metadata_key_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)()},options?.withMetadataPrivateKeys)]),Object.assign(defaultData,data)}},"./src/shared/models/entity/metadata/metadataPrivateKeyEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{mr:()=>defaultMetadataPrivateKeyDto});var uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./test/fixture/pgpKeys/keys.js");const defaultMetadataPrivateKeyDto=(data={})=>((data={})=>({user_id:null,data:_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_0__.u.metadataKey.encryptedMetadataPrivateKeyDataMessage,...data}))({id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),metadata_key_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),data_signed_by_current_user:null,modified:"2022-10-11T08:09:00+00:00",created_by:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),created:"2022-10-11T08:09:00+00:00",modified_by:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),...data})}}]);