/*! For license information please see react-extension-components-ResourceFolderDetails-DisplayResourceFolderDetails-DisplayResourceFolderDetailsActivity-test-stories.c159eba8.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[8590],{"./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js"),_DisplayResourceFolderDetailsActivity__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.js"),_shared_models_entity_folder_folderEntity_test_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/models/entity/folder/folderEntity.test.data.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/ResourceFolderDetails/DisplayResourceFolderDetailsActivity",component:_DisplayResourceFolderDetailsActivity__WEBPACK_IMPORTED_MODULE_3__.A},context={siteSettings:{getServerTimezone:()=>(new Date).toDateString()},userSettings:new _shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_5__.A(_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__.A),port:{request:()=>[{action_log_id:"6aada140-fe8b-5e69-a90f-ae0cec6d3dcf",type:"Folders.created",creator:{profile:{first_name:"Ada",last_name:"Lovelace"}}}]}},Initial=(args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.A.Provider,{value:context},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__.MemoryRouter,{initialEntries:["/"]},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"panel aside"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__.Route,{component:routerProps=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceFolderDetailsActivity__WEBPACK_IMPORTED_MODULE_3__.A,{...args,...routerProps})}))))).bind({});Initial.args={resourceWorkspaceContext:{details:{folder:(0,_shared_models_entity_folder_folderEntity_test_data__WEBPACK_IMPORTED_MODULE_4__.nk)()}}};const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"args => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={['/']}>\n      <div className=\"panel aside\">\n        <Route component={routerProps => <DisplayResourceFolderDetailsActivity {...args} {...routerProps} />}></Route>\n      </div>\n    </MemoryRouter>\n  </AppContext.Provider>",...Initial.parameters?.docs?.source}}}},"./src/img/svg/attention.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgAttention(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#attention_svg__clip0_2062_453107)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"var(--icon-exclamation-background-color)",stroke:"var(--icon-exclamation-border-color)",d:"M9 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-exclamation-color)",d:"M9 6v3M9 12h.008"}))))}},"./src/img/svg/spinner.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSpinner(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:18,height:18,fill:"none",className:"svg-icon spinner",viewBox:"0 0 18 18"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"background",cx:8,cy:8,r:8,fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(1 1)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"loading",r:8,fill:"none",stroke:"var(--spinner-color)",strokeLinecap:"round",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(9 9)"})))}},"./src/react-extension/components/Common/Avatar/GroupAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class GroupAvatar extends react__WEBPACK_IMPORTED_MODULE_0__.Component{getAltText(){return this.props.t("Avatar of the {{group_name}} group.",{group_name:this.props.group?.name})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"avatar user-avatar"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 42","aria-labelledby":"svg-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:"svg-title"},this.getAltText()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{fill:"var(--Avatar-Avatar-background)",cx:"21",cy:"21",r:"21"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"var(--Avatar-Avatar)",d:"m36.59,24.69h-9.55c-.94,0-1.84.23-2.66.64h2.68c2.32,0,4.49.9,6.13,2.54,1.54,1.54,2.42,3.56,2.52,5.72,1.94-2.26,3.35-4.97,4.09-7.94-.94-.63-2.05-.96-3.21-.96Zm-9.65,1.84h-12.33c-2.01,0-3.89.78-5.31,2.2-1.42,1.42-2.2,3.3-2.2,5.31v.44c3.53,3.64,8.45,5.91,13.9,5.91s9.96-2.08,13.45-5.45v-.89c0-2.01-.78-3.89-2.2-5.31-1.42-1.42-3.3-2.2-5.31-2.2Zm1.02-6.02c1.03.91,2.38,1.48,3.86,1.48,3.21,0,5.81-2.61,5.81-5.81s-2.61-5.81-5.81-5.81c-1.24,0-2.39.39-3.33,1.06.66,1.23,1.04,2.63,1.04,4.12,0,1.85-.58,3.56-1.56,4.97Zm-7.19,2.53c4.14,0,7.51-3.37,7.51-7.51s-3.37-7.51-7.51-7.51-7.51,3.37-7.51,7.51,3.37,7.51,7.51,7.51Z"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"var(--Avatar-Avatar)",d:"m32.25,28.73c-1.42-1.42-3.3-2.2-5.31-2.2h-12.33c-2.01,0-3.89.78-5.31,2.2-1.42,1.42-2.2,3.3-2.2,5.31v.44c3.53,3.64,8.45,5.91,13.9,5.91s9.96-2.08,13.45-5.45v-.89c0-2.01-.78-3.89-2.2-5.31Zm-11.48-5.69c4.14,0,7.51-3.37,7.51-7.51s-3.37-7.51-7.51-7.51-7.51,3.37-7.51,7.51,3.37,7.51,7.51,7.51Zm-6.28,2.29h2.14c-.13-.19-.28-.37-.44-.54-.79-.79-1.85-1.23-2.97-1.23h-6.9c-1.12,0-2.18.44-2.97,1.23-.44.44-.76.97-.97,1.54.71,2.49,1.91,4.78,3.49,6.75.21-1.97,1.07-3.8,2.49-5.21,1.63-1.64,3.81-2.54,6.13-2.54Zm-4.72-3.72c1.4,0,2.64-.7,3.41-1.76-.73-1.27-1.15-2.74-1.15-4.31,0-.53.06-1.05.15-1.56-.68-.48-1.51-.77-2.41-.77-2.32,0-4.2,1.88-4.2,4.2s1.88,4.2,4.2,4.2Z"})))}}GroupAvatar.propTypes={group:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(GroupAvatar);GroupAvatar.__docgenInfo={description:"",methods:[{name:"getAltText",docblock:"Get image alternative text\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get image alternative text"}],displayName:"GroupAvatar",props:{group:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Avatar/UserAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Avatar_UserAvatar});var _circle,_path,_circle2,react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const user_default=function SvgUserDefault(props){return react.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:42,height:42,fill:"none",viewBox:"0 0 42 42"},props),_circle||(_circle=react.createElement("circle",{id:"background",cx:21,cy:21,r:21,fill:"var(--Avatar-Avatar-background)"})),_path||(_path=react.createElement("path",{fill:"var(--Avatar-Avatar)",d:"M27.184 26.54H14.852a7.36 7.36 0 0 0-5.362 2.2 7.4 7.4 0 0 0-2.216 5.36v1.145a19.66 19.66 0 0 0 13.672 5.522 19.66 19.66 0 0 0 13.673-5.522V34.1a7.38 7.38 0 0 0-2.199-5.362 7.38 7.38 0 0 0-5.236-2.198"})),_circle2||(_circle2=react.createElement("circle",{cx:21,cy:15.5,r:7.5,fill:"var(--Avatar-Avatar)"})))};var attention=__webpack_require__("./src/img/svg/attention.svg");const DEFAULT_AVATAR_URL_REGEXP=/img\/avatar\/user(_medium)?\.png$/;class UserAvatar extends react.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{error:!1,isLoading:!0}}bindCallbacks(){this.handleError=this.handleError.bind(this),this.handleLoaded=this.handleLoaded.bind(this)}get avatarUrl(){return this.props?.user?.profile?.avatar?.url?.medium}propsHasUrl(){return Boolean(this.avatarUrl)}propsUrlHasProtocol(){return this.avatarUrl.startsWith("https://")||this.avatarUrl.startsWith("http://")}formatUrl(url){return`${this.props.baseUrl}/${url}`}isDefaultAvatarUrlFromApi(){return DEFAULT_AVATAR_URL_REGEXP.test(this.avatarUrl)}getAvatarSrc(){return this.propsHasUrl()?this.propsUrlHasProtocol()?this.avatarUrl:this.formatUrl(this.avatarUrl):null}handleError(){console.error(`Could not load avatar image url: ${this.getAvatarSrc()}`),this.setState({error:!0})}handleLoaded(){this.setState({isLoading:!1})}getAltText(){const user=this.props?.user;return user?.first_name&&user?.last_name?this.props.t("Avatar of user {{first_name}} {{last_name}}.",{firstname:user.first_name,lastname:user.last_name}):"..."}render(){const srcAvatar=this.getAvatarSrc(),shouldDisplayDefaultAvatar=this.state.error||this.isDefaultAvatarUrlFromApi()||!srcAvatar;return react.createElement("div",{className:`${this.props.className}`},react.createElement("div",{className:"default-avatar"},(shouldDisplayDefaultAvatar||this.state.isLoading)&&react.createElement(user_default,null),!shouldDisplayDefaultAvatar&&react.createElement("img",{src:srcAvatar,className:this.state.isLoading?"is-loading":"",onError:this.handleError,onLoad:this.handleLoaded,alt:this.getAltText()})),this.props.attentionRequired&&react.createElement(attention.A,{className:"attention-required"}))}}UserAvatar.defaultProps={className:"avatar user-avatar"},UserAvatar.propTypes={baseUrl:prop_types_default().string,user:prop_types_default().object,attentionRequired:prop_types_default().bool,className:prop_types_default().string,t:prop_types_default().func};const Avatar_UserAvatar=(0,es.CI)("common")(UserAvatar);UserAvatar.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"avatarUrl",docblock:"Returns the current avatar URL from the props\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the current avatar URL from the props"},{name:"propsHasUrl",docblock:"Return true if the user from props contains a valid profile with avatar url properties\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the user from props contains a valid profile with avatar url properties"},{name:"propsUrlHasProtocol",docblock:"Check if the url has a protocol like http or https?\n@todo only check https for now\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the url has a protocol like http or https?"},{name:"formatUrl",docblock:"Format the avatar url to point on the site url.\n@param {string} url The relative url\n@returns {string}",modifiers:[],params:[{name:"url",description:"The relative url",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Format the avatar url to point on the site url."},{name:"isDefaultAvatarUrlFromApi",docblock:"Returns true if the given URL matches a default avatar from the API\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given URL matches a default avatar from the API"},{name:"getAvatarSrc",docblock:"Get the user avatar url. If the user has no avatar defined, return the default one.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar url. If the user has no avatar defined, return the default one."},{name:"handleError",docblock:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server."},{name:"handleLoaded",docblock:"Handle loaded image event.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle loaded image event."},{name:"getAltText",docblock:"Get the user avatar image alternative text.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar image alternative text."}],displayName:"UserAvatar",props:{className:{defaultValue:{value:'"avatar user-avatar"',computed:!1},description:"",type:{name:"string"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},attentionRequired:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/utils/dateUtils.js");class DisplayResourceFolderDetailsActivity extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{activities:[],activitiesPage:1,loadingMore:!1,loading:!0}}async componentDidMount(){await this.fetch(),this.setState({loading:!1})}async componentDidUpdate(prevProps){await this.handleResourceChange(prevProps.resourceWorkspaceContext.details.folder)}bindCallbacks(){this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this)}async handleResourceChange(previousFolder){this.folder.id!==previousFolder.id&&(this.setState(this.defaultState),await this.fetch(),this.setState({loading:!1}))}async handleMoreClickEvent(){const activitiesPage=this.state.activitiesPage+1;this.setState({activitiesPage,loadingMore:!0}),await this.fetch(),this.setState({loadingMore:!1})}async fetch(){const options={limit:5,page:this.state.activitiesPage},newActivities=await this.props.context.port.request("passbolt.actionlogs.find-all-for","Folder",this.folder.id,options)||[],activities=[...this.state.activities,...newActivities];this.setState({activities})}getActivityCreatorFullName(user){return`${user.profile.first_name} ${user.profile.last_name}`}getPermissionAroName(permission){if(permission.user){const profile=permission.user.profile;return`${profile.first_name} ${profile.last_name}`}return permission.group.name}getPermissionLabel(permission){switch(permission.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}getPermissionChangeTypeLabel(type){switch(type){case"created":return this.translate("new");case"updated":return this.translate("updated");case"removed":return this.translate("deleted")}}renderFolderCreatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," created folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderFolderUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," updated folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderSharedActivityPermissionChangeItem(permission,changeType){const permissionLabel=this.getPermissionLabel(permission),permissionAroName=this.getPermissionAroName(permission),changeTypeLabel=this.getPermissionChangeTypeLabel(changeType);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:permission.id},permission.user&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:permission.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),permission.group&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__.A,{group:permission.group}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},permissionAroName),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"permission-type"}," ",permissionLabel)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"type"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:changeType},changeTypeLabel)))}renderPermissionsUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," changed permissions of folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName})," with")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"permissions-list"},activity.data.permissions.added.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"created"))),activity.data.permissions.updated.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"updated"))),activity.data.permissions.removed.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"removed")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo third-level light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderUnknownActivity(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Unknown activity, please contact your administrator."))))}renderActivity(activity){let render;switch(activity.type){case"Folders.created":render=this.renderFolderCreatedActivity(activity);break;case"Folders.updated":render=this.renderFolderUpdatedActivity(activity);break;case"Permissions.updated":render=this.renderPermissionsUpdatedActivity(activity);break;default:render=this.renderUnknownActivity(activity)}return render}isMoreButtonVisible(){return null!==this.state.activities&&!this.state.activities.some((activity=>"Folders.created"===activity.type))}get folder(){return this.props.resourceWorkspaceContext.details.folder}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"activity accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},this.state.loading&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"processing-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_5__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Retrieving activities"))),!this.state.loading&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"ready"},this.state.activities.map((activity=>this.renderActivity(activity)))),this.isMoreButtonVisible()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleMoreClickEvent,disabled:this.state.loadingMore,className:"link no-border action-logs-load-more "+(this.state.loadingMore?"processing":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"More")))))))}}DisplayResourceFolderDetailsActivity.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.CI)("common")(DisplayResourceFolderDetailsActivity)));DisplayResourceFolderDetailsActivity.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleResourceChange",docblock:"Check if the folder has changed and fetch\n@param previousFolder",modifiers:["async"],params:[{name:"previousFolder",optional:!1}],returns:null,description:"Check if the folder has changed and fetch"},{name:"handleMoreClickEvent",docblock:"handle when the users click on the more button.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the more button."},{name:"fetch",docblock:"Fetch the folder activities\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Fetch the folder activities"},{name:"getActivityCreatorFullName",docblock:"Get an activity creator full name\n@param {object} user The creator\n@return string",modifiers:[],params:[{name:"user",description:"The creator",type:{name:"object"},optional:!1}],returns:{description:"string"},description:"Get an activity creator full name"},{name:"getPermissionAroName",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionLabel",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionChangeTypeLabel",docblock:"Get permission change type label\n@param {string} type The target change type",modifiers:[],params:[{name:"type",description:"The target change type",type:{name:"string"},optional:!1}],returns:null,description:"Get permission change type label"},{name:"renderFolderCreatedActivity",docblock:"Render a created activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a created activity."},{name:"renderFolderUpdatedActivity",docblock:"Render an updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render an updated activity."},{name:"renderSharedActivityPermissionChangeItem",docblock:"Render a shared activity permission change item.\n@param {object} permission The target permission\n@param {string} changeType The change type\n@returns {JSX}",modifiers:[],params:[{name:"permission",description:"The target permission",type:{name:"object"},optional:!1},{name:"changeType",description:"The change type",type:{name:"string"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a shared activity permission change item."},{name:"renderPermissionsUpdatedActivity",docblock:"Render a permissions updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a permissions updated activity."},{name:"renderUnknownActivity",docblock:"Render an unknown activity.\n@returns {JSX}",modifiers:[],params:[],returns:{type:{name:"JSX"}},description:"Render an unknown activity."},{name:"renderActivity",docblock:"Render an activity\n@param {object} activity The activity to render",modifiers:[],params:[{name:"activity",description:"The activity to render",type:{name:"object"},optional:!1}],returns:null,description:"Render an activity"},{name:"isMoreButtonVisible",docblock:"Is the more button visible\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is the more button visible"},{name:"folder",docblock:"Returns the current detailed folder",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed folder"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceFolderDetailsActivity",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/lib/Object/getPropValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(obj,path)=>path.split(".").reduce(((accumulator,key)=>accumulator?.[key]),obj)},"./src/react-extension/lib/Sanitize/sanitizeUrl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,P:()=>urlProtocols});const __WEBPACK_DEFAULT_EXPORT__=(uri,options)=>{if(void 0===uri||"string"!=typeof uri||!uri.length)return!1;if((options=options||{}).whitelistedProtocols&&!Array.isArray(options.whitelistedProtocols))throw new TypeError("The whitelistedProtocols should be an array of string.");if(options.defaultProtocol&&"string"!=typeof options.defaultProtocol)throw new TypeError("The defaultProtocol should be a string.");const whitelistedProtocols=options.whitelistedProtocols||[urlProtocols.HTTP,urlProtocols.HTTPS],blacklistedProtocols=[urlProtocols.JAVASCRIPT],defaultProtocol=options.defaultProtocol||"";!/^((?!:\/\/).)*:\/\//.test(uri)&&defaultProtocol&&(uri=`${defaultProtocol}//${uri}`);try{const url=new URL(uri);return!blacklistedProtocols.includes(url.protocol)&&(!!whitelistedProtocols.includes(url.protocol)&&url.href)}catch(error){return!1}},urlProtocols={FTP:"http:",FTPS:"https:",HTTP:"http:",HTTPS:"https:",JAVASCRIPT:"javascript:",SSH:"ssh:"}},"./src/react-extension/test/fixture/Settings/userSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={"user.settings.trustedDomain":new URL(window.location.href).origin,"user.firstname":"Ada","user.id":"f848277c-5398-58f8-a82a-72397af2d450","user.lastname":"Lovelace","user.settings.securityToken.code":"TST","user.settings.securityToken.color":"#000000","user.settings.securityToken.textColor":"#FFFFFF","user.username":"ada@passbolt.com","user.settings.locale":"en-UK","user.settings.theme":"default"}},"./src/shared/lib/Settings/UserSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>UserSettings});class UserSettings{constructor(settings){this.settings=settings}get id(){return this.settings["user.id"]}get fullName(){return`${this.settings["user.firstname"]} ${this.settings["user.lastname"]}`}get username(){return this.settings["user.username"]}getTheme(){return this.settings["user.settings.theme"]}getTrustedDomain(){return this.settings["user.settings.trustedDomain"]}getSecurityToken(){return{code:this.settings["user.settings.securityToken.code"],backgroundColor:this.settings["user.settings.securityToken.color"],textColor:this.settings["user.settings.securityToken.textColor"]}}get locale(){return this.settings["user.settings.locale"]}}},"./src/shared/models/entity/avatar/avatarEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fp:()=>defaultFullAvatarDto,KA:()=>defaultAvatarDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const defaultAvatarDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),url:{medium:"/avatars/view/e6927385-195c-4c7f-a107-a202ea86de40/medium.jpg",small:"/avatars/view/e6927385-195c-4c7f-a107-a202ea86de40/small.jpg"},created:"2023-06-03T12:03:46+00:00",modified:"2023-06-03T12:03:46+00:00",...data}),defaultFullAvatarDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),created:"2023-06-03T12:03:46+00:00",modified:"2023-06-03T12:03:46+00:00",user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),foreign_key:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),model:"Avatar",filename:"carol.png",filesize:733439,mime_type:"image/png",extension:"png",hash:"7445a736df60a1ac1bfdab8fc5b842a95c495aec",path:"Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.png",adapter:"Local",url:{medium:"img/public/Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.a99472d5.png",small:"img/public/Avatar/60/6d/93/0519d40b29b94c79a68c8f933896c80d/0519d40b29b94c79a68c8f933896c80d.65a0ba70.png"},...data})},"./src/shared/models/entity/folder/folderEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ht:()=>folderWithReadPermissionDto,nk:()=>defaultFolderDto});var uuid__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_permission_permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/permission/permissionEntity.test.data.js"),_permission_permissionCollection_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/permission/permissionCollection.test.data.js"),_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");const defaultFolderDto=(data={},options={})=>{const id=data?.id||(0,uuid__WEBPACK_IMPORTED_MODULE_3__.A)(),defaultData={id,name:"Accounting",created:"2020-02-01T00:00:00+00:00",modified:"2020-02-01T00:00:00+00:00",created_by:"d57c10f5-639d-5160-9c81-8a0c6c4ec856",modified_by:"d57c10f5-639d-5160-9c81-8a0c6c4ec856",permission:(0,_permission_permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.uq)({aco:"Folder",aco_foreign_key:id}),folder_parent_id:null,personal:!1,...data};return!data.permissions&&options.withPermissions&&(defaultData.permissions=(0,_permission_permissionCollection_test_data__WEBPACK_IMPORTED_MODULE_1__.w)({aco:"Folder",aco_foreign_key:id},options.withPermissions)),!data.creator&&options?.withCreator&&(defaultData.creator=(0,_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_2__.cI)()),!data.modifier&&options?.withModifier&&(defaultData.modifier=(0,_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_2__.cI)()),defaultData},folderWithReadPermissionDto=(data={})=>{const id=data?.id||(0,uuid__WEBPACK_IMPORTED_MODULE_3__.A)();return defaultFolderDto({id,permission:(0,_permission_permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.js)({aco_foreign_key:id,aco:"Folder"}),...data})}},"./src/shared/models/entity/group/groupEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>defaultGroupDto});var uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_groupUser_groupUserEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/groupUser/groupUserEntity.test.data.js"),_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");const defaultGroupDto=(data={},options={})=>{const groupId=data.id||(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),defaultData={id:groupId,name:"Current group",created:"2022-01-13T13:19:04.661Z",modified:"2022-01-13T13:19:04.661Z",created_by:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),modified_by:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),...data};if(!data.my_group_user&&options?.withMyGroupUser&&(defaultData.my_group_user=(0,_groupUser_groupUserEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.M2)({group_id:groupId,is_admin:!0})),!data.creator&&options?.withCreator&&(defaultData.creator=(0,_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.cI)()),!data.modifier&&options?.withModifier&&(defaultData.modifier=(0,_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.cI)()),!data.groups_users&&options?.withGroupsUsers){const groupsUsersCount="number"==typeof options?.withGroupsUsers?options?.withGroupsUsers:1;defaultData.groups_users=[];for(let i=0;i<groupsUsersCount;i++){const groupUserDto=(0,_groupUser_groupUserEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.M2)({user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),group_id:groupId,is_admin:!0});defaultData.groups_users.push(groupUserDto)}}return defaultData}},"./src/shared/models/entity/groupUser/groupUserEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M2:()=>defaultGroupUser});var uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");const defaultGroupUser=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),group_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)(),is_admin:!1,created:"2022-01-13T13:19:04.661Z",...data})},"./src/shared/models/entity/permission/permissionCollection.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>defaultPermissionsDtos});var _permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/permission/permissionEntity.test.data.js");const defaultPermissionsDtos=(data={},options={})=>{const dtos=[],count=options.count||10,acoForeignKey=crypto.randomUUID();for(let i=0;i<count;i++){const dto=(0,_permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.SJ)({aco_foreign_key:acoForeignKey,...data},options);dtos.push(dto)}return dtos}},"./src/shared/models/entity/permission/permissionEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$t:()=>ownerGroupPermissionDto,SJ:()=>defaultPermissionDto,i:()=>ownerFolderPermissionDto,jM:()=>readFolderPermissionDto,js:()=>readPermissionDto,kZ:()=>readGroupPermissionDto,nF:()=>updateGroupPermissionDto,uq:()=>ownerPermissionDto,yA:()=>updatePermissionDto});var uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js"),_group_groupEntity_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/group/groupEntity.test.data.js");const defaultPermissionDto=(data={},options={})=>{const defaultData={id:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),aco:"Resource",aco_foreign_key:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),aro:"User",aro_foreign_key:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),created:"2022-03-04T13:59:11+00:00",modified:"2022-03-04T13:59:11+00:00",type:15,...data};return!data.user&&options?.withUser&&(defaultData.user=(0,_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.cI)({id:defaultData.aro_foreign_key},options.withUser)),!data.group&&options?.withGroup&&(defaultData.group=(0,_group_groupEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.K)({id:defaultData.aro_foreign_key},options.withGroup)),defaultData},ownerPermissionDto=(data={})=>defaultPermissionDto({type:15,...data}),updatePermissionDto=(data={})=>defaultPermissionDto({type:7,...data}),readPermissionDto=(data={})=>defaultPermissionDto({type:1,...data}),ownerFolderPermissionDto=(data={})=>ownerPermissionDto({aco:"Folder",...data}),readFolderPermissionDto=(data={})=>readPermissionDto({aco:"Folder",...data}),ownerGroupPermissionDto=(data={})=>defaultPermissionDto({type:15,aro:"Group",user:null,...data},{withGroup:!0}),updateGroupPermissionDto=(data={})=>defaultPermissionDto({type:7,aro:"Group",user:null,...data},{withGroup:!0}),readGroupPermissionDto=(data={})=>defaultPermissionDto({type:1,aro:"Group",user:null,...data},{withGroup:!0})},"./src/shared/models/entity/profile/ProfileEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>defaultProfileDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_avatar_avatarEntity_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/avatar/avatarEntity.test.data.js");const defaultProfileDto=(data={})=>({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),first_name:"Ada",last_name:"Lovelace",created:"2020-04-20T11:32:17+00:00",modified:"2020-04-20T11:32:17+00:00",avatar:(0,_avatar_avatarEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.KA)(),...data})},"./src/shared/models/entity/role/roleEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js");class RoleEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["id","name"],properties:{id:{type:"string",format:"uuid"},name:{type:"string",enum:[RoleEntity.ROLE_ADMIN,RoleEntity.ROLE_USER,RoleEntity.ROLE_GUEST,RoleEntity.ROLE_ROOT]},description:{type:"string",maxLength:255},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"}}}}get id(){return this._props.id}get name(){return this._props.name}get description(){return this._props.description||null}get created(){return this._props.created||null}get modified(){return this._props.modified||null}isAdmin(){return this.name===RoleEntity.ROLE_ADMIN}static get ENTITY_NAME(){return"Role"}static get ROLE_ADMIN(){return"admin"}static get ROLE_USER(){return"user"}static get ROLE_GUEST(){return"guest"}static get ROLE_ROOT(){return"root"}}const __WEBPACK_DEFAULT_EXPORT__=RoleEntity},"./src/shared/models/entity/user/userEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HI:()=>defaultAdminUserDto,cI:()=>defaultUserDto,VV:()=>users});var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ProfileEntity_test_data=__webpack_require__("./src/shared/models/entity/profile/ProfileEntity.test.data.js"),role_test_data=__webpack_require__("./src/shared/models/entity/role/role.test.data.js"),groupUserEntity_test_data=__webpack_require__("./src/shared/models/entity/groupUser/groupUserEntity.test.data.js"),keys=__webpack_require__("./test/fixture/pgpKeys/keys.js");const defaultUserDto=(data={},options={})=>{const defaultData={id:(0,v4.A)(),role_id:role_test_data.ol,username:"ada@passbolt.com",active:!0,deleted:!1,created:"2020-04-20T11:32:16+00:00",modified:"2020-04-20T11:32:16+00:00",last_logged_in:"2022-07-04T13:39:25+00:00",is_mfa_enabled:!1,...data};!data.role&&options?.withRole&&(defaultData.role=(0,role_test_data.Dm)({id:defaultData.role_id}));const profile=data?.profile||(0,ProfileEntity_test_data.S)({user_id:defaultData.id,...data?.profile});if(defaultData.profile=profile,!data.groups_users&&options?.withGroupsUsers){const groupsUsersCount="number"==typeof options?.withGroupsUsers?options?.withGroupsUsers:1;defaultData.groups_users=[];for(let i=0;i<groupsUsersCount;i++){const groupUserDto=(0,groupUserEntity_test_data.M2)({user_id:defaultData.id});defaultData.groups_users.push(groupUserDto)}}return!data.gpgkey&&options?.withGpgkey&&(defaultData.gpgkey=((data={})=>({id:"91d8a7fd-3ab3-5e98-a4a5-0d8694ff23b9",user_id:"d57c10f5-639d-5160-9c81-8a0c6c4ec856",armored_key:keys.u.ada.public,bits:4096,uid:"Passbolt Default Admin <admin@passbolt.com>",key_id:"D06426D3",fingerprint:"0C1D1761110D1E33C9006D1A5B1B332ED06426D3",type:"RSA",expires:null,key_created:"2015-10-31T16:21:43+00:00",deleted:!1,created:"2020-04-20T11:32:18+00:00",modified:"2020-04-20T11:32:18+00:00",...data}))()),!data.account_recovery_user_setting&&options?.withAccountRecoveryUserSetting&&(defaultData.account_recovery_user_setting=(data=>{const defaultData={user_id:(0,v4.A)(),status:"approved"};return Object.assign(defaultData,data||{})})()),!data.pending_account_recovery_request&&options?.withPendingAccountRecoveryUserRequest&&(defaultData.pending_account_recovery_request=((data={})=>({id:(0,v4.A)(),status:"pending",created:"2020-05-04T20:31:45+00:00",modified:"2020-05-04T20:31:45+00:00",created_by:(0,v4.A)(),modified_by:(0,v4.A)(),...data}))()),defaultData},defaultAdminUserDto=(data={})=>{const role=(0,role_test_data.bd)();return defaultUserDto({role,...data})},users={ada:defaultUserDto({id:"f848277c-5398-58f8-a82a-72397af2d450",username:"ada@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Ada",last_name:"Lovelace"})}),admin:defaultAdminUserDto({id:"f642271d-bbb1-401e-bbd1-7ec370f8e19b",username:"admin@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Admin",last_name:"User"})}),betty:defaultUserDto({id:"e97b14ba-8957-57c9-a357-f78a6e1e1a46",username:"betty@passbolt.com",profile:(0,ProfileEntity_test_data.S)({first_name:"Betty",last_name:"Holberton"})})}},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}},"./node_modules/validator/es/lib/util/assertString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function assertString(input){if(!("string"==typeof input||input instanceof String)){var invalidType=_typeof(input);throw null===input?invalidType="null":"object"===invalidType&&(invalidType=input.constructor.name),new TypeError("Expected a string but received a ".concat(invalidType))}}__webpack_require__.d(__webpack_exports__,{A:()=>assertString})}}]);