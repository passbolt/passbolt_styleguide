/*! For license information please see 7334.9b7f9ed2.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[7334],{"./src/shared/context/MetadataTypesSettingsLocalStorageContext/MetadataTypesSettingsLocalStorageContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,mw:()=>withMetadataTypesSettingsLocalStorage});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_models_entity_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/metadata/metadataTypesSettingsEntity.js");const MetadataTypesSettingsLocalStorageContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({get:()=>{},metadataTypeSettings:null,updateLocalStorage:()=>{}});class MetadataTypesSettingsLocalStorageContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.runningLocalStorageUpdatePromise=null,this.initEventHandlers()}get defaultState(){return{get:this.get.bind(this),metadataTypeSettings:null,updateLocalStorage:this.updateLocalStorage.bind(this)}}initEventHandlers(){this.handleStorageChange=this.handleStorageChange.bind(this)}componentDidMount(){this.props.context.storage.onChanged.addListener(this.handleStorageChange)}componentWillUnmount(){this.props.context.storage.onChanged.removeListener(this.handleStorageChange)}handleStorageChange(changes){changes[this.storageKey]&&this.set(changes[this.storageKey].newValue)}set(metadataTypeSettings){const metadataTypeSettingsCollection=new _models_entity_metadata_metadataTypesSettingsEntity__WEBPACK_IMPORTED_MODULE_2__.Ay(metadataTypeSettings);this.setState({metadataTypeSettings:metadataTypeSettingsCollection})}get(){return null===this.state.metadataTypeSettings?(this.loadLocalStorage(),null):this.state.metadataTypeSettings}get storageKey(){return`metadata_types_settings-${this.props.context.account?.id}`}async loadLocalStorage(){const storageData=await this.props.context.storage.local.get([this.storageKey]);storageData[this.storageKey]?this.set(storageData[this.storageKey]):this.updateLocalStorage()}async updateLocalStorage(){null===this.runningLocalStorageUpdatePromise?(this.runningLocalStorageUpdatePromise=this.props.context.port.request("passbolt.metadata.get-or-find-metadata-types-settings"),await this.runningLocalStorageUpdatePromise,this.runningLocalStorageUpdatePromise=null):await this.runningLocalStorageUpdatePromise}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MetadataTypesSettingsLocalStorageContext.Provider,{value:this.state},this.props.children)}}MetadataTypesSettingsLocalStorageContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(MetadataTypesSettingsLocalStorageContextProvider);function withMetadataTypesSettingsLocalStorage(WrappedComponent){return class withMetadataTypesSettingsTypesLocalStorage extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MetadataTypesSettingsLocalStorageContext.Consumer,null,(metadataTypeSettingsLocalStorageContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{metadataTypeSettingsLocalStorageContext,metadataTypeSettings:metadataTypeSettingsLocalStorageContext.get(),...this.props})))}}}MetadataTypesSettingsLocalStorageContextProvider.__docgenInfo={description:"The metadata type settings local storage context provider",methods:[{name:"defaultState",docblock:"Returns the default component state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Returns the default component state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"handleStorageChange",docblock:"Handles update of the metadata type settings in the local storage.",modifiers:[],params:[{name:"changes",optional:!1}],returns:null,description:"Handles update of the metadata type settings in the local storage."},{name:"set",docblock:"Set metadataTypeSettings.\n@param {Object} metadataTypeSettings The metadata type settings to set.\n@private",modifiers:[],params:[{name:"metadataTypeSettings",description:"The metadata type settings to set.",type:{name:"Object"},optional:!1}],returns:null,description:"Set metadataTypeSettings."},{name:"get",docblock:"Get the metadata type settings from the local storage and/or init them if not the case already.\n@returns {MetadataTypesSettingsEntity|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"MetadataTypesSettingsEntity"}]}},description:"Get the metadata type settings from the local storage and/or init them if not the case already."},{name:"storageKey",docblock:"Get the storage key.\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Get the storage key."},{name:"loadLocalStorage",docblock:"Load the metadata type settings from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation.\n@returns {Promise<void>}\n@private",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the metadata type settings from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation."},{name:"updateLocalStorage",docblock:"Forces the update of the metadata type settings in the local storage.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Forces the update of the metadata type settings in the local storage."}],displayName:"MetadataTypesSettingsLocalStorageContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/models/resource/ResourceViewModelFactory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>resource_ResourceViewModelFactory});var ResourcePasswordDescriptionTotpViewModel=__webpack_require__("./src/shared/models/resource/ResourcePasswordDescriptionTotpViewModel.js"),inputs_const=__webpack_require__("./src/shared/constants/inputs.const.js"),ResourceViewModel=__webpack_require__("./src/shared/models/resource/ResourceViewModel.js"),resourceTypeSchemasDefinition=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeSchemasDefinition.js");class ResourceV5DefaultTotpViewModel extends ResourceViewModel.A{constructor(resourceViewModel={}){super(resourceViewModel),this.username=resourceViewModel.username||"",this.uri=resourceViewModel.uri||"",this.description=resourceViewModel.description||"",this.totp=resourceViewModel.totp||null,this.folder_parent_id=resourceViewModel.folder_parent_id||null,this.resource_type_id=resourceViewModel.resource_type_id,void 0!==resourceViewModel.id&&(this.id=resourceViewModel.id),resourceViewModel.name&&(this.name=resourceViewModel.name),resourceViewModel.password&&(this.password=resourceViewModel.password),void 0!==resourceViewModel.expired&&(this.expired=resourceViewModel.expired)}static createFromEntity(resourceDto){const resourceViewModelDto={id:resourceDto.id,name:resourceDto.metadata.name,uri:resourceDto.metadata.uris[0],username:resourceDto.metadata.username,description:resourceDto.metadata.description,folder_parent_id:resourceDto.folder_parent_id,resource_type_id:resourceDto.resource_type_id,expired:resourceDto.expired};return new ResourceV5DefaultTotpViewModel(resourceViewModelDto)}static getSchema(mode){const required=["name","password","resource_type_id"];return mode===ResourceViewModel.A.EDIT_MODE&&required.push("id"),{type:"object",required,properties:{id:{type:"string",format:"uuid"},name:{type:"string",maxLength:inputs_const.Dt},uri:{type:"string",maxLength:inputs_const.kW,nullable:!0},username:{type:"string",maxLength:inputs_const.E1,nullable:!0},password:{type:"string",maxLength:inputs_const.Bh},description:{type:"string",maxLength:inputs_const.G3,nullable:!0},expired:{type:"string",format:"date-time",nullable:!0},folder_parent_id:{type:"string",format:"uuid",nullable:!0},totp:{type:"object"},resource_type_id:{type:"string",format:"uuid"}}}}static get resourceTypeSlug(){return resourceTypeSchemasDefinition.a5}updateSecret(secretDto){const resourceViewModel=this.cloneWithMutation("password",secretDto.password);return resourceViewModel.description=secretDto.description,resourceViewModel.totp=secretDto.totp,resourceViewModel}canToggleDescription(){return!1}isDescriptionUnencrypted(){return!1}toResourceDto(){const dto={resource_type_id:this.resource_type_id,folder_parent_id:this.folder_parent_id,metadata:{resource_type_id:this.resource_type_id,name:this.name,uris:this.uri?[this.uri]:[],username:this.username}};return void 0!==this.expired&&(dto.expired=this.expired),void 0!==this.id&&(dto.id=this.id),dto}toSecretDto(){return{password:this.password,description:this.description,totp:this.totp,resource_type_id:this.resource_type_id}}areSecretsDifferent(originalSecretDto){const hasSameSecretStructure=3===Object.keys(originalSecretDto).length&&Object.hasOwn(originalSecretDto,"password")&&Object.hasOwn(originalSecretDto,"description")&&Object.hasOwn(originalSecretDto,"totp"),isTotpDifferent=Object.keys(this.totp).some((key=>this.totp[key]!==originalSecretDto.totp?.[key]));return!hasSameSecretStructure||this.password!==originalSecretDto.password||this.description!==originalSecretDto.description||isTotpDifferent}}const resource_ResourceV5DefaultTotpViewModel=ResourceV5DefaultTotpViewModel;var ResourcePasswordDescriptionViewModel=__webpack_require__("./src/shared/models/resource/ResourcePasswordDescriptionViewModel.js");class ResourceV5DefaultViewModel extends ResourceViewModel.A{constructor(resourceViewModel={}){super(resourceViewModel),this.username=resourceViewModel.username||"",this.uri=resourceViewModel.uri||"",this.description=resourceViewModel.description||"",this.folder_parent_id=resourceViewModel.folder_parent_id||null,this.resource_type_id=resourceViewModel.resource_type_id,void 0!==resourceViewModel.id&&(this.id=resourceViewModel.id),resourceViewModel.name&&(this.name=resourceViewModel.name),resourceViewModel.password&&(this.password=resourceViewModel.password),void 0!==resourceViewModel.expired&&(this.expired=resourceViewModel.expired)}static createFromEntity(resourceDto){const resourceViewModelDto={id:resourceDto.id,name:resourceDto.metadata.name,uri:resourceDto.metadata.uris[0],username:resourceDto.metadata.username,description:resourceDto.metadata.description,folder_parent_id:resourceDto.folder_parent_id,resource_type_id:resourceDto.resource_type_id,expired:resourceDto.expired};return new ResourceV5DefaultViewModel(resourceViewModelDto)}static getSchema(mode){const required=["name","password","resource_type_id"];return mode===ResourceViewModel.A.EDIT_MODE&&required.push("id"),{type:"object",required,properties:{id:{type:"string",format:"uuid"},name:{type:"string",maxLength:inputs_const.Dt},uri:{type:"string",maxLength:inputs_const.kW,nullable:!0},username:{type:"string",maxLength:inputs_const.E1,nullable:!0},password:{type:"string",maxLength:inputs_const.Bh},description:{type:"string",maxLength:inputs_const.G3,nullable:!0},expired:{type:"string",format:"date-time",nullable:!0},folder_parent_id:{type:"string",format:"uuid",nullable:!0},resource_type_id:{type:"string",format:"uuid"}}}}static get resourceTypeSlug(){return resourceTypeSchemasDefinition.gG}updateSecret(secretDto){const resourceViewModel=this.cloneWithMutation("password",secretDto.password);return resourceViewModel.description=secretDto.description,resourceViewModel}canToggleDescription(){return!1}isDescriptionUnencrypted(){return!1}toResourceDto(){const dto={resource_type_id:this.resource_type_id,folder_parent_id:this.folder_parent_id,metadata:{resource_type_id:this.resource_type_id,name:this.name,uris:this.uri?[this.uri]:[],username:this.username}};return void 0!==this.expired&&(dto.expired=this.expired),void 0!==this.id&&(dto.id=this.id),dto}toSecretDto(){return{password:this.password,description:this.description,resource_type_id:this.resource_type_id}}areSecretsDifferent(originalSecretDto){return!(2===Object.keys(originalSecretDto).length&&Object.hasOwn(originalSecretDto,"password")&&Object.hasOwn(originalSecretDto,"description"))||this.password!==originalSecretDto.password||this.description!==originalSecretDto.description}}const resource_ResourceV5DefaultViewModel=ResourceV5DefaultViewModel;var ResourcePasswordStringViewModel=__webpack_require__("./src/shared/models/resource/ResourcePasswordStringViewModel.js");class ResourceV5PasswordStringViewModel extends ResourceViewModel.A{constructor(resourceViewModel={}){super({}),this.username=resourceViewModel.username||"",this.uri=resourceViewModel.uri||"",this.description=resourceViewModel.description||"",this.folder_parent_id=resourceViewModel.folder_parent_id||null,this.resource_type_id=resourceViewModel.resource_type_id,void 0!==resourceViewModel.id&&(this.id=resourceViewModel.id),resourceViewModel.name&&(this.name=resourceViewModel.name),resourceViewModel.password&&(this.password=resourceViewModel.password),void 0!==resourceViewModel.expired&&(this.expired=resourceViewModel.expired)}static createFromEntity(resourceDto){const resourceViewModelDto={id:resourceDto.id,name:resourceDto.metadata.name,uri:resourceDto.metadata.uris[0],username:resourceDto.metadata.username,description:resourceDto.metadata.description,folder_parent_id:resourceDto.folder_parent_id,resource_type_id:resourceDto.resource_type_id,expired:resourceDto.expired};return new ResourceV5PasswordStringViewModel(resourceViewModelDto)}static getSchema(mode){const required=["name","password","resource_type_id"];return mode===ResourceViewModel.A.EDIT_MODE&&required.push("id"),{type:"object",required,properties:{id:{type:"string",format:"uuid"},name:{type:"string",maxLength:inputs_const.Dt},uri:{type:"string",maxLength:inputs_const.kW,nullable:!0},username:{type:"string",maxLength:inputs_const.E1,nullable:!0},password:{type:"string",maxLength:inputs_const.Bh},description:{type:"string",maxLength:inputs_const.G3,nullable:!0},expired:{type:"string",format:"date-time",nullable:!0},folder_parent_id:{type:"string",format:"uuid",nullable:!0},resource_type_id:{type:"string",format:"uuid"}}}}static get resourceTypeSlug(){return resourceTypeSchemasDefinition.Eh}updateSecret(secretDto){return this.cloneWithMutation("password",secretDto.password)}canToggleDescription(){return!0}isDescriptionUnencrypted(){return!0}toResourceDto(){const dto={resource_type_id:this.resource_type_id,folder_parent_id:this.folder_parent_id,metadata:{resource_type_id:this.resource_type_id,name:this.name,uris:this.uri?[this.uri]:[],username:this.username,description:this.description}};return void 0!==this.expired&&(dto.expired=this.expired),void 0!==this.id&&(dto.id=this.id),dto}toSecretDto(){return this.password}areSecretsDifferent(originalSecretDto){return!(1===Object.keys(originalSecretDto).length&&Object.hasOwn(originalSecretDto,"password"))||this.password!==originalSecretDto.password}}const resource_ResourceV5PasswordStringViewModel=ResourceV5PasswordStringViewModel;const resource_ResourceViewModelFactory=class ResourceViewModelFactory{static createFromResourceTypeAndResourceViewModelDto(resourceType,dto){switch(resourceType?.slug){case ResourcePasswordDescriptionViewModel.A.resourceTypeSlug:return new ResourcePasswordDescriptionViewModel.A(dto);case ResourcePasswordDescriptionTotpViewModel.A.resourceTypeSlug:return new ResourcePasswordDescriptionTotpViewModel.A(dto);case resource_ResourceV5DefaultViewModel.resourceTypeSlug:return new resource_ResourceV5DefaultViewModel(dto);case resource_ResourceV5DefaultTotpViewModel.resourceTypeSlug:return new resource_ResourceV5DefaultTotpViewModel(dto);case ResourcePasswordStringViewModel.A.resourceTypeSlug:return new ResourcePasswordStringViewModel.A(dto);case resource_ResourceV5PasswordStringViewModel.resourceTypeSlug:return new resource_ResourceV5PasswordStringViewModel(dto);default:throw new Error("No ViewModel has been found for the resource type.")}}static createFromResourceTypeAndEntityDto(resourceType,resourceDto){switch(resourceType?.slug){case ResourcePasswordDescriptionViewModel.A.resourceTypeSlug:return ResourcePasswordDescriptionViewModel.A.createFromEntity(resourceDto);case ResourcePasswordDescriptionTotpViewModel.A.resourceTypeSlug:return ResourcePasswordDescriptionTotpViewModel.A.createFromEntity(resourceDto);case resource_ResourceV5DefaultViewModel.resourceTypeSlug:return resource_ResourceV5DefaultViewModel.createFromEntity(resourceDto);case resource_ResourceV5DefaultTotpViewModel.resourceTypeSlug:return resource_ResourceV5DefaultTotpViewModel.createFromEntity(resourceDto);case ResourcePasswordStringViewModel.A.resourceTypeSlug:return ResourcePasswordStringViewModel.A.createFromEntity(resourceDto);case resource_ResourceV5PasswordStringViewModel.resourceTypeSlug:return resource_ResourceV5PasswordStringViewModel.createFromEntity(resourceDto);default:throw new Error("No ViewModel has been found for the resource type.")}}}},"./node_modules/uuid/dist/esm-browser/v5.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v5});var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js"),validate=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js");const esm_browser_parse=function parse(uuid){if(!(0,validate.A)(uuid))throw TypeError("Invalid UUID");var v,arr=new Uint8Array(16);return arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24,arr[1]=v>>>16&255,arr[2]=v>>>8&255,arr[3]=255&v,arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8,arr[5]=255&v,arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8,arr[7]=255&v,arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8,arr[9]=255&v,arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255,arr[11]=v/4294967296&255,arr[12]=v>>>24&255,arr[13]=v>>>16&255,arr[14]=v>>>8&255,arr[15]=255&v,arr};function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:case 3:return x^y^z;case 2:return x&y^x&z^y&z}}function ROTL(x,n){return x<<n|x>>>32-n}const esm_browser_v5=function v35(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){if("string"==typeof value&&(value=function stringToBytes(str){str=unescape(encodeURIComponent(str));for(var bytes=[],i=0;i<str.length;++i)bytes.push(str.charCodeAt(i));return bytes}(value)),"string"==typeof namespace&&(namespace=esm_browser_parse(namespace)),16!==namespace.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var bytes=new Uint8Array(16+value.length);if(bytes.set(namespace),bytes.set(value,namespace.length),(bytes=hashfunc(bytes))[6]=15&bytes[6]|version,bytes[8]=63&bytes[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=bytes[i];return buf}return(0,stringify.A)(bytes)}try{generateUUID.name=name}catch(err){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID}("v5",80,(function sha1(bytes){var K=[1518500249,1859775393,2400959708,3395469782],H=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof bytes){var msg=unescape(encodeURIComponent(bytes));bytes=[];for(var i=0;i<msg.length;++i)bytes.push(msg.charCodeAt(i))}else Array.isArray(bytes)||(bytes=Array.prototype.slice.call(bytes));bytes.push(128);for(var l=bytes.length/4+2,N=Math.ceil(l/16),M=new Array(N),_i=0;_i<N;++_i){for(var arr=new Uint32Array(16),j=0;j<16;++j)arr[j]=bytes[64*_i+4*j]<<24|bytes[64*_i+4*j+1]<<16|bytes[64*_i+4*j+2]<<8|bytes[64*_i+4*j+3];M[_i]=arr}M[N-1][14]=8*(bytes.length-1)/Math.pow(2,32),M[N-1][14]=Math.floor(M[N-1][14]),M[N-1][15]=8*(bytes.length-1)&4294967295;for(var _i2=0;_i2<N;++_i2){for(var W=new Uint32Array(80),t=0;t<16;++t)W[t]=M[_i2][t];for(var _t=16;_t<80;++_t)W[_t]=ROTL(W[_t-3]^W[_t-8]^W[_t-14]^W[_t-16],1);for(var a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],_t2=0;_t2<80;++_t2){var s=Math.floor(_t2/20),T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[_t2]>>>0;e=d,d=c,c=ROTL(b,30)>>>0,b=a,a=T}H[0]=H[0]+a>>>0,H[1]=H[1]+b>>>0,H[2]=H[2]+c>>>0,H[3]=H[3]+d>>>0,H[4]=H[4]+e>>>0}return[H[0]>>24&255,H[0]>>16&255,H[0]>>8&255,255&H[0],H[1]>>24&255,H[1]>>16&255,H[1]>>8&255,255&H[1],H[2]>>24&255,H[2]>>16&255,H[2]>>8&255,255&H[2],H[3]>>24&255,H[3]>>16&255,H[3]>>8&255,255&H[3],H[4]>>24&255,H[4]>>16&255,H[4]>>8&255,255&H[4]]}))}}]);