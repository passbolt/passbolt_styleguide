/*! For license information please see react-extension-components-Resource-DisplayResourcesWorkspace-DisplayResourcesWorkspaceMenu-test-stories.9fffbd3e.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[2700],{"./src/img/svg/alarm_clock.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgAlarmClock(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 15.75a6 6 0 1 0 0-12 6 6 0 0 0 0 12"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 6.75v3l1.5 1.5M3.75 2.25 1.5 4.5M16.5 4.5l-2.25-2.25M4.785 14.025 3 15.75M13.23 14.003 15 15.75"})))}},"./src/img/svg/calendar_cog.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgCalendarCog(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:19,height:18,fill:"none",viewBox:"0 0 19 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m12.23 12.675-.675-.3M12.23 14.325l-.675.3M12.83 1.5v3M13.505 11.4l-.3-.675M13.505 15.6l-.3.675M15.455 10.725l-.3.675M15.455 16.275l-.3-.675M16.58 7.875V4.5a1.5 1.5 0 0 0-1.5-1.5H4.58a1.5 1.5 0 0 0-1.5 1.5V15a1.5 1.5 0 0 0 1.5 1.5h4.5M17.105 12.375l-.675.3M17.105 14.625l-.675-.3M3.08 7.5h13.5M6.83 1.5v3"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.33 15.75a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5"})))}},"./src/img/svg/download_file.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgDownloadFile(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.25 1.5H4.5A1.5 1.5 0 0 0 3 3v12a1.5 1.5 0 0 0 1.5 1.5h9A1.5 1.5 0 0 0 15 15V5.25z"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.5 1.5v3A1.5 1.5 0 0 0 12 6h3M9 13.5V9M6.75 11.25 9 13.5l2.25-2.25"})))}},"./src/img/svg/more_horizontal.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgMoreHorizontal(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 8.666a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333M12.667 8.666a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333M3.333 8.666a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333"})))}},"./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspaceMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_DeleteResource_DeleteResource__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Resource/DeleteResource/DeleteResource.js"),_EditResource_EditResource__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Resource/EditResource/EditResource.js"),_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/components/Share/ShareDialog.js"),_ExportResources_ExportResources__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/components/Resource/ExportResources/ExportResources.js"),react_i18next__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/shared/context/Rbac/RbacContext.js"),_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/shared/services/rbacs/uiActionEnumeration.js"),_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/react-extension/contexts/ProgressContext.js"),_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/shared/services/otp/TotpCodeGeneratorService.js"),_PasswordExpiryDialog_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/react-extension/components/Resource/PasswordExpiryDialog/PasswordExpiryDialog.js"),_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/shared/utils/dateUtils.js"),luxon__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/luxon/build/es6/luxon.mjs"),_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownButton.js"),_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/img/svg/caret_down.svg"),_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/react-extension/components/Common/Dropdown/Dropdown.js"),_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenu.js"),_img_svg_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/img/svg/more_horizontal.svg"),_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/react-extension/components/Common/Dropdown/DropdownMenuItem.js"),_img_svg_download_file_svg__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./src/img/svg/download_file.svg"),_img_svg_calendar_cog_svg__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./src/img/svg/calendar_cog.svg"),_img_svg_alarm_clock_svg__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./src/img/svg/alarm_clock.svg"),_img_svg_copy_svg__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./src/img/svg/copy.svg"),_img_svg_owned_by_me_svg__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./src/img/svg/owned_by_me.svg"),_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./src/img/svg/key.svg"),_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./src/img/svg/totp.svg"),_img_svg_globe_svg__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./src/img/svg/globe.svg"),_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("./src/img/svg/link.svg"),_img_svg_delete_svg__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("./src/img/svg/delete.svg"),_img_svg_edit_svg__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("./src/img/svg/edit.svg"),_img_svg_share_svg__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("./src/img/svg/share.svg"),_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("./src/img/svg/close.svg"),_img_svg_history_svg__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("./src/img/svg/history.svg"),_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.js"),_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("./src/shared/context/MetadataKeysSettingsLocalStorageContext/MetadataKeysSettingsLocalStorageContext.js"),_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js"),_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("./src/react-extension/components/Metadata/ActionAbortedMissingMetadataKeys/ActionAbortedMissingMetadataKeys.js"),_shared_utils_logger__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("./src/shared/utils/logger.js"),_shared_context_SecretRevisionSettingsContext_SecretRevisionsSettingsContext__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("./src/shared/context/SecretRevisionSettingsContext/SecretRevisionsSettingsContext.js"),_shared_models_entity_secretRevision_secretRevisionsSettingsEntity__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("./src/shared/models/entity/secretRevision/secretRevisionsSettingsEntity.js"),_SecretHistory_DisplayResourceSecretHistory__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("./src/react-extension/components/SecretHistory/DisplayResourceSecretHistory.js");class DisplayResourcesWorkspaceMenu extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleCopyPermalinkClickEvent=this.handleCopyPermalinkClickEvent.bind(this),this.handleCopyUsernameClickEvent=this.handleCopyUsernameClickEvent.bind(this),this.handleCopyUriClickEvent=this.handleCopyUriClickEvent.bind(this),this.handleShareClickEvent=this.handleShareClickEvent.bind(this),this.handleCopySecretClickEvent=this.handleCopySecretClickEvent.bind(this),this.handleCopyTotpClickEvent=this.handleCopyTotpClickEvent.bind(this),this.handleExportClickEvent=this.handleExportClickEvent.bind(this),this.handleMarkAsExpiredClick=this.handleMarkAsExpiredClick.bind(this),this.handleSetExpiryDateClickEvent=this.handleSetExpiryDateClickEvent.bind(this),this.handleClearSelectionClick=this.handleClearSelectionClick.bind(this),this.handleSecretHistoryClick=this.handleSecretHistoryClick.bind(this)}handleDeleteClickEvent(){this.props.dialogContext.open(_DeleteResource_DeleteResource__WEBPACK_IMPORTED_MODULE_6__.A,{resources:this.selectedResources})}async handleMarkAsExpiredClick(){const resourcesExpiryDateToUpdate=this.selectedResources.map(resource=>({id:resource.id,expired:(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_17__.B7)(luxon__WEBPACK_IMPORTED_MODULE_18__.c9.utc())}));try{await this.props.context.port.request("passbolt.resources.set-expiration-date",resourcesExpiryDateToUpdate),await this.props.actionFeedbackContext.displaySuccess(this.translate("The resource has been marked as expired.",{count:resourcesExpiryDateToUpdate.length}))}catch(error){_shared_utils_logger__WEBPACK_IMPORTED_MODULE_45__.A.error(error),await this.props.actionFeedbackContext.displayError(this.translate("Unable to mark the resource as expired.",{count:resourcesExpiryDateToUpdate.length}))}}handleSecretHistoryClick(){this.props.dialogContext.open(_SecretHistory_DisplayResourceSecretHistory__WEBPACK_IMPORTED_MODULE_48__.A,{resource:this.selectedResources[0]})}handleEditClickEvent(){this.canEditResource()?this.props.dialogContext.open(_EditResource_EditResource__WEBPACK_IMPORTED_MODULE_7__.A,{resource:this.selectedResources[0]}):this.displayActionAborted()}canEditResource(){if(this.props.resourceTypes.getFirstById(this.selectedResources[0].resource_type_id).isV5()){const isMetadataSharedKeyEnforced=!this.props.metadataKeysSettings?.allowUsageOfPersonalKeys,isPersonalResource=this.selectedResources[0].personal,userHasMissingKeys=this.props.context.loggedInUser.missing_metadata_key_ids?.length>0;if(isPersonalResource&&isMetadataSharedKeyEnforced&&userHasMissingKeys)return!1;if(!isPersonalResource&&userHasMissingKeys)return!1}return!0}async handleShareClickEvent(){if(this.canShareResource()){const resourcesIds=this.selectedResources.map(resource=>resource.id);await this.props.context.setContext({shareDialogProps:{resourcesIds}}),this.props.dialogContext.open(_Share_ShareDialog__WEBPACK_IMPORTED_MODULE_8__.A)}else this.displayActionAborted()}canShareResource(){if(this.props.resourceTypes.getFirstById(this.selectedResources[0].resource_type_id).isV5()){return!(this.props.context.loggedInUser.missing_metadata_key_ids?.length>0)}return!0}async handleCopyPermalinkClickEvent(){const permalink=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.selectedResources[0].id}`;await this.props.clipboardContext.copy(permalink,this.translate("The permalink has been copied to clipboard."))}async handleCopyUsernameClickEvent(){await this.props.clipboardContext.copy(this.selectedResources[0].metadata.username,this.translate("The username has been copied to clipboard."))}async handleCopyUriClickEvent(){await this.props.clipboardContext.copy(this.selectedResources[0].metadata.uris[0],this.translate("The uri has been copied to clipboard."))}async handleClearSelectionClick(){await this.props.resourceWorkspaceContext.onResourceSelected.none()}decryptResourceSecret(){return this.props.context.port.request("passbolt.secret.find-by-resource-id",this.selectedResources[0].id)}async copyPasswordToClipboard(plaintextSecretDto){const password=plaintextSecretDto.password;if(!password)throw new TypeError(this.translate("The password is empty."));await this.props.clipboardContext.copyTemporarily(password,this.translate("The secret has been copied to clipboard."))}async handleCopySecretClickEvent(){let plaintextSecretDto;this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret()}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}this.props.progressContext.close(),plaintextSecretDto?.password?.length?(await this.copyPasswordToClipboard(plaintextSecretDto),this.props.resourceWorkspaceContext.onResourceCopied()):await this.props.actionFeedbackContext.displayWarning(this.translate("The password is empty and cannot be copied to clipboard."))}async handleCopyTotpClickEvent(){let plaintextSecretDto,code;this.props.progressContext.open(this.props.t("Decrypting secret"));try{plaintextSecretDto=await this.decryptResourceSecret()}catch(error){"UserAbortsOperationError"!==error.name&&this.props.actionFeedbackContext.displayError(error.message)}if(this.props.progressContext.close(),plaintextSecretDto)if(plaintextSecretDto.totp){try{code=_shared_services_otp_TotpCodeGeneratorService__WEBPACK_IMPORTED_MODULE_14__.l.generate(plaintextSecretDto.totp)}catch(error){return _shared_utils_logger__WEBPACK_IMPORTED_MODULE_45__.A.error(error),void await this.props.actionFeedbackContext.displayError(this.translate("Unable to copy the TOTP"))}await this.props.clipboardContext.copyTemporarily(code,this.translate("The TOTP has been copied to clipboard.")),await this.props.resourceWorkspaceContext.onResourceCopied()}else await this.props.actionFeedbackContext.displayError(this.translate("The TOTP is empty and cannot be copied to clipboard."))}handleSetExpiryDateClickEvent(){this.props.dialogContext.open(_PasswordExpiryDialog_PasswordExpiryDialog__WEBPACK_IMPORTED_MODULE_15__.A,{resources:this.selectedResources})}handleExportClickEvent(){this.export()}displayActionAborted(){this.props.dialogContext.open(_Metadata_ActionAbortedMissingMetadataKeys_ActionAbortedMissingMetadataKeys__WEBPACK_IMPORTED_MODULE_44__.A)}get selectedResources(){return this.props.resourceWorkspaceContext.selectedResources}hasOneResourceSelected(){return 1===this.selectedResources.length}canUpdate(){return this.selectedResources.every(resource=>resource.permission.type>=7)}canShare(){return this.selectedResources.every(resource=>15===resource.permission.type)}canExport(){return this.props.context.siteSettings.canIUse("export")&&this.props.rbacContext.canIUseAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__.e.RESOURCES_EXPORT)}canCopyUsername(){return this.selectedResources[0].metadata?.username}canCopyUri(){return Boolean(this.selectedResources[0].metadata?.uris?.[0])}canCopyPassword(){return this.isPasswordResources}get canDisplaySecretHistory(){return this.props.context.siteSettings.canIUse("secretRevisions")&&this.props.secretRevisionsSettings?.isFeatureEnabled}get isPasswordResources(){return this.props.resourceTypes?.getFirstById(this.selectedResources[0].resource_type_id)?.hasPassword()}canCopyTotp(){return this.props.resourceTypes?.getFirstById(this.selectedResources[0].resource_type_id)?.hasTotp()}get isStandaloneTotpResource(){return this.props.resourceTypes?.getFirstById(this.selectedResources[0].resource_type_id).isStandaloneTotp()}get hasResourceUsername(){return!this.isStandaloneTotpResource}hasMoreActionAllowed(){return this.canExport()||this.canOverridePasswordExpiry&&this.canUpdate()}async export(){const resourcesIds=this.selectedResources.map(resource=>resource.id);await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds}),await this.props.dialogContext.open(_ExportResources_ExportResources__WEBPACK_IMPORTED_MODULE_9__.A)}get canUseTotp(){return this.props.context.siteSettings.canIUse("totpResourceTypes")}get canOverridePasswordExpiry(){const passwordExpirySettings=this.props.passwordExpiryContext.getSettings();return this.props.passwordExpiryContext.isFeatureEnabled()&&passwordExpirySettings?.policy_override}get translate(){return this.props.t}render(){const hasOneResourceSelected=this.hasOneResourceSelected(),canShare=this.canShare(),canUpdate=this.canUpdate(),canCopySecret=this.props.rbacContext.canIUseAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__.e.SECRETS_COPY),canViewShare=this.props.rbacContext.canIUseAction(_shared_services_rbacs_uiActionEnumeration__WEBPACK_IMPORTED_MODULE_12__.e.SHARE_VIEW_LIST)&&canShare,canViewCopy=hasOneResourceSelected,canViewEdit=hasOneResourceSelected&&canUpdate,canViewDelete=canUpdate,canViewSecretHistory=hasOneResourceSelected&&this.canDisplaySecretHistory,count=this.props.resourceWorkspaceContext.selectedResources?.length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions",ref:this.props.actionsButtonRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",null,canViewShare&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"share_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-action-contextual",onClick:this.handleShareClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_share_svg__WEBPACK_IMPORTED_MODULE_38__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Share")))),canViewCopy&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"copy_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_23__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_21__.A,{className:"button-action-contextual"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_copy_svg__WEBPACK_IMPORTED_MODULE_30__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_caret_down_svg__WEBPACK_IMPORTED_MODULE_22__.A,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_24__.A,{className:"menu-action-contextual"},this.hasResourceUsername&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"username_action",type:"button",className:"no-border",disabled:!this.canCopyUsername(),onClick:this.handleCopyUsernameClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_owned_by_me_svg__WEBPACK_IMPORTED_MODULE_31__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy username")))),canCopySecret&&this.canCopyPassword()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"secret_action",type:"button",className:"no-border",onClick:this.handleCopySecretClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_key_svg__WEBPACK_IMPORTED_MODULE_32__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy password")))),this.canUseTotp&&this.canCopyTotp()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"totp_action",type:"button",className:"no-border",onClick:this.handleCopyTotpClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_totp_svg__WEBPACK_IMPORTED_MODULE_33__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy TOTP")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"uri_action",type:"button",className:"no-border",disabled:!this.canCopyUri(),onClick:this.handleCopyUriClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_globe_svg__WEBPACK_IMPORTED_MODULE_34__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy URI")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"permalink_action",type:"button",className:"no-border",onClick:this.handleCopyPermalinkClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_link_svg__WEBPACK_IMPORTED_MODULE_35__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Copy permalink"))))))),canViewEdit&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"edit_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-action-contextual",onClick:this.handleEditClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_edit_svg__WEBPACK_IMPORTED_MODULE_37__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Edit")))),canViewDelete&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{id:"delete_action"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-action-contextual",onClick:this.handleDeleteClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_delete_svg__WEBPACK_IMPORTED_MODULE_36__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Delete")))),this.hasMoreActionAllowed()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_Dropdown__WEBPACK_IMPORTED_MODULE_23__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownButton__WEBPACK_IMPORTED_MODULE_21__.A,{className:"more button-action-contextual button-action-icon"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_25__.A,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenu__WEBPACK_IMPORTED_MODULE_24__.A,{className:"menu-action-contextual"},this.canExport()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,{separator:!(this.canOverridePasswordExpiry&&canUpdate)&&canViewSecretHistory},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"export_action",type:"button",className:"no-border",onClick:this.handleExportClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_download_file_svg__WEBPACK_IMPORTED_MODULE_27__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Export")))),this.canOverridePasswordExpiry&&canUpdate&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"set_expiry_date_action",type:"button",className:"no-border",onClick:this.handleSetExpiryDateClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_calendar_cog_svg__WEBPACK_IMPORTED_MODULE_28__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Set expiry date")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,{separator:canViewSecretHistory},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"mark_as_expired_action",type:"button",className:"no-border",onClick:this.handleMarkAsExpiredClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_alarm_clock_svg__WEBPACK_IMPORTED_MODULE_29__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Mark as expired"))))),canViewSecretHistory&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dropdown_DropdownMenuItem__WEBPACK_IMPORTED_MODULE_26__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{id:"secret_history_action",type:"button",className:"no-border",onClick:this.handleSecretHistoryClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_history_svg__WEBPACK_IMPORTED_MODULE_40__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Secret history")))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"counter"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,{count},{count}," selected")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button-transparent inline",onClick:this.handleClearSelectionClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_close_svg__WEBPACK_IMPORTED_MODULE_39__.A,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visuallyhidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Clear selection")))))}}DisplayResourcesWorkspaceMenu.propTypes={actionsButtonRef:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,context:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,rbacContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,resourceTypes:prop_types__WEBPACK_IMPORTED_MODULE_2___default().instanceOf(_shared_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_20__.A),passwordExpiryContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,progressContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,clipboardContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,metadataKeysSettings:prop_types__WEBPACK_IMPORTED_MODULE_2___default().instanceOf(_shared_models_entity_metadata_metadataKeysSettingsEntity__WEBPACK_IMPORTED_MODULE_43__.A),secretRevisionsSettings:prop_types__WEBPACK_IMPORTED_MODULE_2___default().instanceOf(_shared_models_entity_secretRevision_secretRevisionsSettingsEntity__WEBPACK_IMPORTED_MODULE_47__.A),t:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_shared_context_MetadataKeysSettingsLocalStorageContext_MetadataKeysSettingsLocalStorageContext__WEBPACK_IMPORTED_MODULE_42__.XF)((0,_contexts_Clipboard_ManagedClipboardServiceProvider__WEBPACK_IMPORTED_MODULE_41__.nJ)((0,_shared_context_Rbac_RbacContext__WEBPACK_IMPORTED_MODULE_11__.x6)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_5__.z9)((0,_contexts_ProgressContext__WEBPACK_IMPORTED_MODULE_13__.E0)((0,_contexts_PasswordExpirySettingsContext__WEBPACK_IMPORTED_MODULE_16__.f4)((0,_shared_context_SecretRevisionSettingsContext_SecretRevisionsSettingsContext__WEBPACK_IMPORTED_MODULE_46__.ac)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__.Qw)((0,_shared_context_ResourceTypesLocalStorageContext_ResourceTypesLocalStorageContext__WEBPACK_IMPORTED_MODULE_19__.KH)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_1__.ot)((0,react_i18next__WEBPACK_IMPORTED_MODULE_10__.CI)("common")(DisplayResourcesWorkspaceMenu))))))))))));DisplayResourcesWorkspaceMenu.__docgenInfo={description:"This component allows the current user to add a new comment on a resource",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleDeleteClickEvent",docblock:"handle delete one or more resources",modifiers:[],params:[],returns:null,description:"handle delete one or more resources"},{name:"handleMarkAsExpiredClick",docblock:"Handle mark as expired\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle mark as expired"},{name:"handleSecretHistoryClick",docblock:"Handle secret history click",modifiers:[],params:[],returns:null,description:"Handle secret history click"},{name:"handleEditClickEvent",docblock:"handle edit one resource",modifiers:[],params:[],returns:null,description:"handle edit one resource"},{name:"canEditResource",docblock:"Can edit the resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can edit the resource"},{name:"handleShareClickEvent",docblock:"handle share resources",modifiers:["async"],params:[],returns:null,description:"handle share resources"},{name:"canShareResource",docblock:"Can share the resource\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can share the resource"},{name:"handleCopyPermalinkClickEvent",docblock:"handle copy permalink of one resource",modifiers:["async"],params:[],returns:null,description:"handle copy permalink of one resource"},{name:"handleCopyUsernameClickEvent",docblock:"handle copy username of one resource",modifiers:["async"],params:[],returns:null,description:"handle copy username of one resource"},{name:"handleCopyUriClickEvent",docblock:"handle copy uri of one resource",modifiers:["async"],params:[],returns:null,description:"handle copy uri of one resource"},{name:"handleClearSelectionClick",docblock:"Handle the event on the 'close' icon to clear the current selection.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle the event on the 'close' icon to clear the current selection."},{name:"decryptResourceSecret",docblock:"Decrypt the resource secret\n@returns {Promise<object>} The secret in plaintext format\n@throw UserAbortsOperationError If the user cancel the operation",modifiers:[],params:[],returns:{description:"The secret in plaintext format",type:{name:"Promise",elements:[{name:"object"}]}},description:"Decrypt the resource secret"},{name:"copyPasswordToClipboard",docblock:"Copy password from dto to clipboard\nSupport original password (a simple string) and composed objects)\n\n@param {object} plaintextSecretDto The plaintext secret DTO.\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"plaintextSecretDto",description:"The plaintext secret DTO.",type:{name:"object"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Copy password from dto to clipboard\nSupport original password (a simple string) and composed objects)"},{name:"handleCopySecretClickEvent",docblock:"handle copy to clipboard the secret of the selected resource",modifiers:["async"],params:[],returns:null,description:"handle copy to clipboard the secret of the selected resource"},{name:"handleCopyTotpClickEvent",docblock:"handle copy to clipboard the totp of the selected resource",modifiers:["async"],params:[],returns:null,description:"handle copy to clipboard the totp of the selected resource"},{name:"handleSetExpiryDateClickEvent",docblock:"Whenever the user intends to set the expiration date on the selected resources",modifiers:[],params:[],returns:null,description:"Whenever the user intends to set the expiration date on the selected resources"},{name:"handleExportClickEvent",docblock:"Whenever the user intends to export the selected resources",modifiers:[],params:[],returns:null,description:"Whenever the user intends to export the selected resources"},{name:"displayActionAborted",docblock:"Display action aborted",modifiers:[],params:[],returns:null,description:"Display action aborted"},{name:"selectedResources",docblock:"selected resources\n@returns {[]|null}",modifiers:["get"],params:[],returns:{type:{name:"union",elements:[{name:"tuple",elements:[]}]}},description:"selected resources"},{name:"hasOneResourceSelected",docblock:"has at least one resource selected\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"has at least one resource selected"},{name:"canUpdate",docblock:"Can update the selected resources\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can update the selected resources"},{name:"canShare",docblock:"Can share the selected resources\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can share the selected resources"},{name:"canExport",docblock:"Check if the user can export.\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the user can export."},{name:"canCopyUsername",docblock:"Can copy username\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy username"},{name:"canCopyUri",docblock:"Can copy uri\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy uri"},{name:"canCopyPassword",docblock:"Can copy password\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy password"},{name:"canDisplaySecretHistory",docblock:"Can display secret history\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Can display secret history"},{name:"isPasswordResources",docblock:"Is password resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is password resource"},{name:"canCopyTotp",docblock:"Can copy totp\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Can copy totp"},{name:"isStandaloneTotpResource",docblock:"Is TOTP resource\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Is TOTP resource"},{name:"hasResourceUsername",docblock:"Returns true if the resource type has a username associated.\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the resource type has a username associated."},{name:"hasMoreActionAllowed",docblock:"Has at least one action of the more menu allowed.\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Has at least one action of the more menu allowed."},{name:"export",docblock:"Exports the selected resources",modifiers:["async"],params:[],returns:null,description:"Exports the selected resources"},{name:"canUseTotp",docblock:"Can use Totp\n@return {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Can use Totp"},{name:"canOverridePasswordExpiry",docblock:"Can use password expiry\n@return {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Can use password expiry"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourcesWorkspaceMenu",props:{actionsButtonRef:{description:"",type:{name:"object"},required:!1},context:{description:"",type:{name:"any"},required:!1},rbacContext:{description:"",type:{name:"any"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},progressContext:{description:"",type:{name:"any"},required:!1},clipboardContext:{description:"",type:{name:"object"},required:!1},metadataKeysSettings:{description:"",type:{name:"instanceOf",value:"MetadataKeysSettingsEntity"},required:!1},secretRevisionsSettings:{description:"",type:{name:"instanceOf",value:"SecretRevisionsSettingsEntity"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspaceMenu.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MultipleResource:()=>MultipleResource,MultipleResourceNotOwned:()=>MultipleResourceNotOwned,MultipleResourcesNotOwnedWithAllDenyOnRBAC:()=>MultipleResourcesNotOwnedWithAllDenyOnRBAC,OneResourceOwned:()=>OneResourceOwned,ResourceNotOwned:()=>ResourceNotOwned,ResourceStandaloneTotpOwned:()=>ResourceStandaloneTotpOwned,ResourceWithTotpOwned:()=>ResourceWithTotpOwned,WithAllFeatureDisplayed:()=>WithAllFeatureDisplayed,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DisplayResourcesWorkspaceMenu_test_stories});var RbacContext_test_data=__webpack_require__("./src/shared/context/Rbac/RbacContext.test.data.js"),PasswordExpirySettingsDto_test_data=__webpack_require__("./src/shared/models/passwordExpirySettings/PasswordExpirySettingsDto.test.data.js"),PasswordExpirySettingsContext_test_data=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.test.data.js"),DisplayResourcesWorkspaceMenu=__webpack_require__("./src/react-extension/components/Resource/DisplayResourcesWorkspace/DisplayResourcesWorkspaceMenu.js"),MockPort=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),UserSettings=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),userSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js"),ResourceWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.test.data.js"),SiteSettings=__webpack_require__("./src/shared/lib/Settings/SiteSettings.js"),Settings_siteSettings=__webpack_require__("./src/react-extension/test/fixture/Settings/siteSettings.js"),resourceEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/resourceEntity.test.data.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js"),ManagedClipboardServiceProvider_test_data=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js"),metadataKeysSettingsEntity=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.js"),metadataKeysSettingsEntity_test_data=__webpack_require__("./src/shared/models/entity/metadata/metadataKeysSettingsEntity.test.data.js"),secretRevisionsSettingsEntity=(__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.test.data.js"),__webpack_require__("./src/shared/models/entity/secretRevision/secretRevisionsSettingsEntity.js")),secretRevisionsSettingsEntity_test_data=__webpack_require__("./src/shared/models/entity/secretRevision/secretRevisionsSettingsEntity.test.data.js");const defaultAppContext=(appContext={})=>{const siteSettings=new SiteSettings.A(Settings_siteSettings.A),defaultAppContext={port:new MockPort.A,userSettings:new UserSettings.A(userSettings.A),siteSettings,setContext:()=>jest.fn()};return Object.assign(defaultAppContext,appContext)},defaultProps=(data={})=>({context:defaultAppContext(),rbacContext:(0,RbacContext_test_data.E2)(),resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)()),dialogContext:(0,DialogContext_test_data.L)(),clipboardContext:(0,ManagedClipboardServiceProvider_test_data.H)(),metadataKeysSettings:new metadataKeysSettingsEntity.A((0,metadataKeysSettingsEntity_test_data.L)()),secretRevisionsSettings:new secretRevisionsSettingsEntity.A((0,secretRevisionsSettingsEntity_test_data.C)()),...data}),defaultPropsOneTotpResourceOwned=(data={})=>defaultProps({resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)({selectedResources:[resourcesMock[3]],lockDisplayDetail:!0}),...data}),defaultPropsMultipleResource=(data={})=>defaultProps({resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)({selectedResources:resourcesMock,lockDisplayDetail:!0}),...data}),resourcesMock=[(0,resourceEntity_test_data.oS)({name:"apache"}),(0,resourceEntity_test_data.j8)({name:"bower"}),(0,resourceEntity_test_data.Jn)({name:"test"}),(0,resourceEntity_test_data.f1)({name:"totp"}),(0,resourceEntity_test_data.Ge)({name:"standalone totp"})];var react=__webpack_require__("./node_modules/react/index.js");const DisplayResourcesWorkspaceMenu_test_stories={title:"Components/Resource/DisplayResourcesWorkspaceMenu",decorators:[Story=>react.createElement("div",{className:"top-bar"},react.createElement("div",{className:"action-bar"},react.createElement("div",{className:"actions-wrapper"},react.createElement(Story,null))))],component:DisplayResourcesWorkspaceMenu.A,parameters:{docs:{description:{component:"DisplayResourcesWorkspaceMenu stories"}}}},OneResourceOwned={args:((data={})=>defaultProps({resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)({selectedResources:[resourcesMock[0]],lockDisplayDetail:!0}),...data}))()},ResourceWithTotpOwned={args:defaultPropsOneTotpResourceOwned()},ResourceStandaloneTotpOwned={args:((data={})=>defaultProps({resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)({selectedResources:[resourcesMock[4]],lockDisplayDetail:!0}),...data}))()},ResourceNotOwned={args:((data={})=>defaultProps({resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)({selectedResources:[resourcesMock[2]],lockDisplayDetail:!1}),...data}))()},MultipleResourcesNotOwnedWithAllDenyOnRBAC={args:defaultPropsMultipleResource({rbacContext:(0,RbacContext_test_data.UO)()})},MultipleResource={args:((data={})=>{const selectedResources=[resourcesMock[0],resourcesMock[1]];return defaultProps({resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)({selectedResources,lockDisplayDetail:!0}),passwordExpiryContext:(0,PasswordExpirySettingsContext_test_data.i)({policy_override:!0}),...data})})()},MultipleResourceNotOwned={args:defaultPropsMultipleResource()},WithAllFeatureDisplayed={args:defaultPropsOneTotpResourceOwned({passwordExpiryContext:(0,PasswordExpirySettingsContext_test_data.i)({getSettings:PasswordExpirySettingsDto_test_data.om})})},__namedExportsOrder=["OneResourceOwned","ResourceWithTotpOwned","ResourceStandaloneTotpOwned","ResourceNotOwned","MultipleResourcesNotOwnedWithAllDenyOnRBAC","MultipleResource","MultipleResourceNotOwned","WithAllFeatureDisplayed"];OneResourceOwned.parameters={...OneResourceOwned.parameters,docs:{...OneResourceOwned.parameters?.docs,source:{originalSource:"{\n  args: defaultPropsOneResourceOwned()\n}",...OneResourceOwned.parameters?.docs?.source}}},ResourceWithTotpOwned.parameters={...ResourceWithTotpOwned.parameters,docs:{...ResourceWithTotpOwned.parameters?.docs,source:{originalSource:"{\n  args: defaultPropsOneTotpResourceOwned()\n}",...ResourceWithTotpOwned.parameters?.docs?.source}}},ResourceStandaloneTotpOwned.parameters={...ResourceStandaloneTotpOwned.parameters,docs:{...ResourceStandaloneTotpOwned.parameters?.docs,source:{originalSource:"{\n  args: defaultPropsOneStandaloneTotpResourceOwned()\n}",...ResourceStandaloneTotpOwned.parameters?.docs?.source}}},ResourceNotOwned.parameters={...ResourceNotOwned.parameters,docs:{...ResourceNotOwned.parameters?.docs,source:{originalSource:"{\n  args: defaultPropsOneResourceNotOwned()\n}",...ResourceNotOwned.parameters?.docs?.source}}},MultipleResourcesNotOwnedWithAllDenyOnRBAC.parameters={...MultipleResourcesNotOwnedWithAllDenyOnRBAC.parameters,docs:{...MultipleResourcesNotOwnedWithAllDenyOnRBAC.parameters?.docs,source:{originalSource:"{\n  args: defaultPropsMultipleResource({\n    rbacContext: denyRbacContext()\n  })\n}",...MultipleResourcesNotOwnedWithAllDenyOnRBAC.parameters?.docs?.source}}},MultipleResource.parameters={...MultipleResource.parameters,docs:{...MultipleResource.parameters?.docs,source:{originalSource:"{\n  args: defaultPropsMultipleResourceUpdateRights()\n}",...MultipleResource.parameters?.docs?.source}}},MultipleResourceNotOwned.parameters={...MultipleResourceNotOwned.parameters,docs:{...MultipleResourceNotOwned.parameters?.docs,source:{originalSource:"{\n  args: defaultPropsMultipleResource()\n}",...MultipleResourceNotOwned.parameters?.docs?.source}}},WithAllFeatureDisplayed.parameters={...WithAllFeatureDisplayed.parameters,docs:{...WithAllFeatureDisplayed.parameters?.docs,source:{originalSource:"{\n  args: propsResourcesWithAllFeatures\n}",...WithAllFeatureDisplayed.parameters?.docs?.source}}}},"./src/react-extension/components/Resource/ExportResources/ExportResources.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_ExportResourcesCredentials__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/react-extension/components/Resource/ExportResources/ExportResourcesCredentials.js"),react_i18next__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Select_Select__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/react-extension/components/Common/Select/Select.js");class ExportResources extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{selectedExportFormat:this.exportFormats[0].value,actions:{processing:!1}}}bindHandlers(){this.handleExport=this.handleExport.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleClose=this.handleClose.bind(this),this.handleExportFormatSelected=this.handleExportFormatSelected.bind(this)}componentDidMount(){this.findContentToExport()}findContentToExport(){const foldersIds=this.findFoldersIdsToExport(),resourcesIds=this.findResourcesIdsToExport(foldersIds);this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds,foldersIds})}get isProcessing(){return this.state.actions.processing}get areActionsAllowed(){return!this.isProcessing}get hasFoldersToExport(){const foldersIds=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds;return foldersIds&&foldersIds.length>0}get hasResourcesToExport(){const resourcesIds=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds;return resourcesIds&&resourcesIds.length>0}findFoldersIdsToExport(){if(!this.hasFoldersToExport)return[];const foldersIds=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,childrenFoldersIds=foldersIds.map(folderId=>this.getChildrenFoldersIds(folderId)).flat();return[...foldersIds,...childrenFoldersIds]}getChildrenFoldersIds(folderId){const childrenFoldersIds=this.props.context.folders.filter(folder=>folder.folder_parent_id===folderId).map(folder=>folder.id);if(0!==childrenFoldersIds.length){const grandChildrenFolders=childrenFoldersIds.map(childFolderId=>this.getChildrenFoldersIds(childFolderId));return[...childrenFoldersIds,...grandChildrenFolders.flat()]}return[]}findResourcesIdsToExport(foldersIds){const resourcesIdsOfFoldersIds=this.getResourcesIdsOfFoldersToExport(foldersIds),resourcesIdsToExport=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds||[];return Array.from(new Set([...resourcesIdsToExport,...resourcesIdsOfFoldersIds]))}getResourcesIdsOfFoldersToExport(foldersIds){return this.props.context.resources.filter(resource=>foldersIds.some(folderId=>folderId===resource.folder_parent_id)).map(resource=>resource.id)}get exportFormats(){return[{label:"kdbx (keepass)",value:"kdbx"},{label:"kdbx (keepassXC & others)",value:"kdbx-others"},{label:"csv (keepass)",value:"csv-kdbx"},{label:"csv (lastpass)",value:"csv-lastpass"},{label:"csv (1password)",value:"csv-1password"},{label:"csv (chromium based browsers)",value:"csv-chromium"},{label:"csv (bitwarden)",value:"csv-bitwarden"},{label:"csv (mozilla)",value:"csv-mozilla"},{label:"csv (safari)",value:"csv-safari"},{label:"csv (dashlane)",value:"csv-dashlane"},{label:"csv (nordpass)",value:"csv-nordpass"},{label:"csv (logmeonce)",value:"csv-logmeonce"}]}handleExportFormatSelected(event){this.selectFormat(event.target.value)}async handleExport(event){event.preventDefault();this.state.selectedExportFormat.startsWith("csv")?(await this.setState({actions:{processing:!0}}),this.export().then(this.onExportSuccess.bind(this)).catch(this.onExportFailure.bind(this))):(await this.props.dialogContext.open(_ExportResourcesCredentials__WEBPACK_IMPORTED_MODULE_10__.A,{format:this.state.selectedExportFormat}),this.close())}async handleCancel(){await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),this.close()}async handleClose(){await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),this.close()}selectFormat(selectedExportFormat){this.setState({selectedExportFormat})}async export(){const foldersIds=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,resourcesIds=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds,exportDto={format:this.state.selectedExportFormat,folders_ids:foldersIds,resources_ids:resourcesIds};await this.props.context.port.request("passbolt.export-resources.export-to-file",exportDto)}async onExportSuccess(){await this.setState({actions:{processing:!1}}),await this.props.actionFeedbackContext.displaySuccess(this.translate("The passwords have been exported successfully")),await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),this.close()}onExportFailure(error){if("UserAbortsOperationError"===error.name)return void this.setState({actions:{processing:!1}});const errorDialogProps={error};this.setState({actions:{processing:!1}}),this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_8__.A,errorDialogProps)}close(){this.props.onClose()}get translate(){return this.props.t}render(){const foldersIdsToExport=this.hasFoldersToExport&&this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,resourcesIdsToExport=this.hasResourcesToExport&&this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_5__.A,{title:this.translate("Export passwords"),onClose:this.handleClose,disabled:!this.areActionsAllowed},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleExport,noValidate:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"select-wrapper input required "+(this.areActionsAllowed?"":"disabled")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"export-format"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_11__.x6,null,"Choose the export format (csv and kdbx are supported)")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Select_Select__WEBPACK_IMPORTED_MODULE_12__.A,{id:"export-format",value:this.state.selectedExportFormat,items:this.exportFormats,onChange:this.handleExportFormatSelected,disabled:!this.areActionsAllowed})),this.hasFoldersToExport&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("em",null,this.translate("{{count}} folder is going to be exported.",{count:foldersIdsToExport.length}))),this.hasResourcesToExport&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("em",null,this.translate("{{count}} password is going to be exported.",{count:resourcesIdsToExport.length})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__.A,{disabled:!this.areActionsAllowed,processing:this.isProcessing,onClick:this.handleCancel}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__.A,{disabled:!this.areActionsAllowed,processing:this.isProcessing,value:this.translate("Export")}))))}}ExportResources.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_4__.L)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_9__.ot)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_3__.z9)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_2__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_11__.CI)("common")(ExportResources)))));ExportResources.__docgenInfo={description:"This component allows to export resources to a specified format",methods:[{name:"defaultState",docblock:"Returns the component default state",modifiers:["get"],params:[],returns:null,description:"Returns the component default state"},{name:"bindHandlers",docblock:"Bind the component handlers",modifiers:[],params:[],returns:null,description:"Bind the component handlers"},{name:"findContentToExport",docblock:"Find the content to export and update the context.",modifiers:[],params:[],returns:null,description:"Find the content to export and update the context."},{name:"isProcessing",docblock:"Return trus if the export is processing",modifiers:["get"],params:[],returns:null,description:"Return trus if the export is processing"},{name:"areActionsAllowed",docblock:"Returns true if actions can be performed",modifiers:["get"],params:[],returns:null,description:"Returns true if actions can be performed"},{name:"hasFoldersToExport",docblock:"Returns true if some folders must be exported",modifiers:["get"],params:[],returns:null,description:"Returns true if some folders must be exported"},{name:"hasResourcesToExport",docblock:"Returns true if some resources must be exported",modifiers:["get"],params:[],returns:null,description:"Returns true if some resources must be exported"},{name:"findFoldersIdsToExport",docblock:"Returns the folders identifiers to export",modifiers:[],params:[],returns:null,description:"Returns the folders identifiers to export"},{name:"getChildrenFoldersIds",docblock:"Returns the children folders ids of the given folder\n@param folderId A folder identifier",modifiers:[],params:[{name:"folderId",description:"A folder identifier",optional:!1}],returns:null,description:"Returns the children folders ids of the given folder"},{name:"findResourcesIdsToExport",docblock:"Returns the resources identifiers to export\n@param {array} foldersIds The list of folders to crawl for resources",modifiers:[],params:[{name:"foldersIds",description:"The list of folders to crawl for resources",type:{name:"array"},optional:!1}],returns:null,description:"Returns the resources identifiers to export"},{name:"getResourcesIdsOfFoldersToExport",docblock:"Returns the resources ids of the folders to export\n@param foldersIds The folders to look into",modifiers:[],params:[{name:"foldersIds",description:"The folders to look into",optional:!1}],returns:null,description:"Returns the resources ids of the folders to export"},{name:"exportFormats",docblock:"Returns the list of available export formats",modifiers:["get"],params:[],returns:null,description:"Returns the list of available export formats"},{name:"handleExportFormatSelected",docblock:"Whenever the user selects an export format\n@param event Select DOM event",modifiers:[],params:[{name:"event",description:"Select DOM event",optional:!1}],returns:null,description:"Whenever the user selects an export format"},{name:"handleExport",docblock:"Whenever the export is submitted\n@param event A dom event",modifiers:["async"],params:[{name:"event",description:"A dom event",optional:!1}],returns:null,description:"Whenever the export is submitted"},{name:"handleCancel",docblock:"Whenever the export is cancelled",modifiers:["async"],params:[],returns:null,description:"Whenever the export is cancelled"},{name:"handleClose",docblock:"Whenever the dialog is closed",modifiers:["async"],params:[],returns:null,description:"Whenever the dialog is closed"},{name:"selectFormat",docblock:"Select the export format\n@param selectedExportFormat The selected export format",modifiers:[],params:[{name:"selectedExportFormat",description:"The selected export format",optional:!1}],returns:null,description:"Select the export format"},{name:"export",docblock:"Export the selected resources or folders",modifiers:["async"],params:[],returns:null,description:"Export the selected resources or folders"},{name:"onExportSuccess",docblock:"Whenever the export has been performed successfully",modifiers:["async"],params:[],returns:null,description:"Whenever the export has been performed successfully"},{name:"onExportFailure",docblock:"Whenever the export has been performed with failure",modifiers:[],params:[{name:"error",optional:!1}],returns:null,description:"Whenever the export has been performed with failure"},{name:"close",docblock:"Close the dialog",modifiers:[],params:[],returns:null,description:"Close the dialog"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ExportResources",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Resource/ExportResources/ExportResourcesCredentials.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),react_i18next__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/shared/components/Password/Password.js");class ExportResourcesCredentials extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}get defaultState(){return{password:"",keyFile:null,actions:{processing:!1}}}bindHandlers(){this.handleInputChange=this.handleInputChange.bind(this),this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFileSelected=this.handleFileSelected.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}createReferences(){this.fileUploaderRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),this.passwordInputRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}get selectedFilename(){return this.state.keyFile?this.state.keyFile.name:""}get isProcessing(){return this.state.actions.processing}get areActionsAllowed(){return!this.isProcessing}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFileSelected(event){const[keyFile]=event.target.files;await this.setState({keyFile})}handleInputChange(event){const target=event.target,value=target.value,name=target.name;this.setState({[name]:value})}handleCancel(){this.close()}async handleSubmit(event){event.preventDefault(),await this.setState({actions:{processing:!0}}),await this.export().then(this.onExportSuccess.bind(this)).catch(this.onExportFailure.bind(this))}async export(){const options={credentials:{password:this.state.password,keyfile:await this.readFile()}},foldersIds=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,resourcesIds=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds,exportDto={format:this.props.format,folders_ids:foldersIds,resources_ids:resourcesIds,options};await this.props.context.port.request("passbolt.export-resources.export-to-file",exportDto)}readFile(){if(!this.state.keyFile)return;const reader=new FileReader;return new Promise((resolve,reject)=>{reader.onloadend=event=>{try{const fileBase64=event.target.result.split(",")[1];resolve(fileBase64)}catch(e){reject(e)}},reader.readAsDataURL(this.state.keyFile)})}async onExportSuccess(){await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),await this.props.actionFeedbackContext.displaySuccess(this.translate("The passwords have been exported successfully")),this.close()}onExportFailure(error){if("UserAbortsOperationError"===error.name)return void this.setState({actions:{processing:!1}});const errorDialogProps={error};this.setState({actions:{processing:!1}}),this.props.dialogContext.open(_Common_Error_NotifyError_NotifyError__WEBPACK_IMPORTED_MODULE_9__.A,errorDialogProps)}close(){this.props.onClose()}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_5__.A,{title:this.translate("Enter the password and/or key file"),className:"export-password-dialog",onClose:this.handleCancel,disabled:!this.areActionsAllowed},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input-password-wrapper input "+(this.areActionsAllowed?"":"disabled")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"password"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Keepass password")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Password_Password__WEBPACK_IMPORTED_MODULE_11__.A,{id:"password",name:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:this.translate("Passphrase"),autoComplete:"off",inputRef:this.passwordInputRef,preview:!0,disabled:!this.areActionsAllowed})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input file "+(this.areActionsAllowed?"":"disabled")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"file",ref:this.fileUploaderRef,id:"dialog-exports-passwords",onChange:this.handleFileSelected}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"dialog-exports-passwords"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Keepass key file (optional)")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input-file-inline"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"text",placeholder:this.translate("No key file selected"),disabled:!0,value:this.selectedFilename}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"button primary",disabled:!this.areActionsAllowed,onClick:this.handleSelectFile},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_10__.x6,null,"Choose a file")))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_7__.A,{disabled:!this.areActionsAllowed,onClick:this.handleCancel}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_6__.A,{disabled:!this.areActionsAllowed,processing:this.isProcessing,value:this.translate("Export")}))))}}ExportResourcesCredentials.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,onClose:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,actionFeedbackContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,format:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,t:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_2__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_8__.Qw)((0,_contexts_ActionFeedbackContext__WEBPACK_IMPORTED_MODULE_3__.ot)((0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_4__.z9)((0,react_i18next__WEBPACK_IMPORTED_MODULE_10__.CI)("common")(ExportResourcesCredentials)))));ExportResourcesCredentials.__docgenInfo={description:"This component is the second step of the export dialog when the file to import is KDB(X) file",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"},{name:"bindHandlers",docblock:"Bind component handlers",modifiers:[],params:[],returns:null,description:"Bind component handlers"},{name:"createReferences",docblock:"Create elements references",modifiers:[],params:[],returns:null,description:"Create elements references"},{name:"selectedFilename",docblock:"Returns the selected file's name",modifiers:["get"],params:[],returns:null,description:"Returns the selected file's name"},{name:"isProcessing",docblock:"Return trus if the export is processing",modifiers:["get"],params:[],returns:null,description:"Return trus if the export is processing"},{name:"areActionsAllowed",docblock:"Returns true if actions can be performed",modifiers:["get"],params:[],returns:null,description:"Returns true if actions can be performed"},{name:"handleSelectFile",docblock:"Handle the selection of a file by file explorer",modifiers:[],params:[],returns:null,description:"Handle the selection of a file by file explorer"},{name:"handleFileSelected",docblock:"Handle the event that a file has been selected\n@param event A dom event",modifiers:["async"],params:[{name:"event",description:"A dom event",optional:!1}],returns:null,description:"Handle the event that a file has been selected"},{name:"handleInputChange",docblock:"Handle input change\n@param event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle input change"},{name:"handleCancel",docblock:"Handle the cancellation of the import",modifiers:[],params:[],returns:null,description:"Handle the cancellation of the import"},{name:"handleSubmit",docblock:"Handle the export submit event\n@param event A dom event",modifiers:["async"],params:[{name:"event",description:"A dom event",optional:!1}],returns:null,description:"Handle the export submit event"},{name:"export",docblock:"Export the resource file",modifiers:["async"],params:[],returns:null,description:"Export the resource file"},{name:"readFile",docblock:"Read the selected file and returns its content in a base 64\n@return {Promise<string>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"string"}]}},description:"Read the selected file and returns its content in a base 64"},{name:"onExportSuccess",docblock:"Whenever the export has been performed succesfully",modifiers:["async"],params:[],returns:null,description:"Whenever the export has been performed succesfully"},{name:"onExportFailure",docblock:"Whenever the export has been performed with failure",modifiers:[],params:[{name:"error",optional:!1}],returns:null,description:"Whenever the export has been performed with failure"},{name:"close",docblock:"Close the dialog",modifiers:[],params:[],returns:null,description:"Close the dialog"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ExportResourcesCredentials",props:{context:{description:"",type:{name:"any"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},format:{description:"",type:{name:"string"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Share/SharePermissionItemSkeleton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");class SharePermissionItemSkeleton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"row skeleton"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"avatar"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"aro"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"aro-name"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"aro-details"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"select rights"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"shimmer"}))}}SharePermissionItemSkeleton.propTypes={};const __WEBPACK_DEFAULT_EXPORT__=SharePermissionItemSkeleton;SharePermissionItemSkeleton.__docgenInfo={description:"",methods:[],displayName:"SharePermissionItemSkeleton"}},"./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>defaultClipboardContext});__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js");const defaultClipboardContext=data=>({copyTemporarily:jest.fn(),copy:jest.fn(),...data})},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/react-extension/contexts/PasswordExpirySettingsContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>defaultPasswordExpirySettingsContext});var luxon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/luxon/build/es6/luxon.mjs"),_shared_models_passwordExpirySettings_PasswordExpirySettingsDto_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/passwordExpirySettings/PasswordExpirySettingsDto.test.data.js");__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js");const defaultPasswordExpirySettingsContext=(data={})=>{const settings=data?.getSettings?data.getSettings():(0,_shared_models_passwordExpirySettings_PasswordExpirySettingsDto_test_data__WEBPACK_IMPORTED_MODULE_1__.Xc)(data),isFeatureEnabled=Boolean(settings?.automatic_update)||Boolean(settings?.automatic_expiry)||Boolean(settings?.policy_override),defaultExpiryDate=luxon__WEBPACK_IMPORTED_MODULE_0__.c9.utc().plus({days:settings?.default_expiry_period}).toISO(),defaultData={findSettings:()=>{},getSettings:()=>settings,isFeatureEnabled:()=>isFeatureEnabled,getDefaultExpirationDate:()=>defaultExpiryDate};return Object.assign(defaultData,data)}},"./src/react-extension/contexts/ResourceWorkspaceContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{AW:()=>defaultResourceWorkspaceContext,Rv:()=>resourceWorkspaceContextWithSelectedFolderICanRead,tw:()=>resourceWorkspaceContextWithSelectedFolderIOwn,H9:()=>resourceWorkspaceContextWithSelectedResourceIOwn,gJ:()=>resourceWorkspaceContextWithSelectedResourcesAndVariousPermission});var ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),folderEntity_test_data=__webpack_require__("./src/shared/models/entity/folder/folderEntity.test.data.js"),resourceEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/resourceEntity.test.data.js"),columnsResourceSettingCollection=__webpack_require__("./src/shared/models/entity/resource/columnsResourceSettingCollection.js"),permissionEntity_test_data=(__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js"),__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.test.data.js"),__webpack_require__("./src/shared/context/Rbac/RbacContext.test.data.js"),__webpack_require__("./src/shared/models/entity/permission/permissionEntity.test.data.js")),secretEntity_test_data=(__webpack_require__("./src/shared/models/entity/resource/metadata/resourceMetadataEntity.test.data.js"),__webpack_require__("./src/shared/models/entity/secret/secretEntity.test.data.js")),resourceTypeEntity_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.test.data.js");__webpack_require__("./test/fixture/encryptedMetadata/metadata.js");const resourceAllTypesDtosCollectionAndVariousPermission=()=>{const resource1=(0,resourceEntity_test_data.j8)({name:"Resource password string",resource_type_id:resourceTypeEntity_test_data.Bt});resource1.secrets=[(0,secretEntity_test_data.n)({resource_id:resource1.id})],resource1.permission=(0,permissionEntity_test_data.uq)({aco_foreign_key:resource1.id}),resource1.permissions=[resource1.permission];const resource2=(0,resourceEntity_test_data.j8)({name:"Resource password with encrypted description",resource_type_id:resourceTypeEntity_test_data.s_});resource2.secrets=[(0,secretEntity_test_data.n)({resource_id:resource2.id})],resource2.permission=(0,permissionEntity_test_data.yA)({aco_foreign_key:resource2.id}),resource2.permissions=[resource2.permission];const resource3=(0,resourceEntity_test_data.j8)({name:"Resource password with encrypted description and totp",resource_type_id:resourceTypeEntity_test_data.Av});return resource3.secrets=[(0,secretEntity_test_data.n)({resource_id:resource3.id})],resource3.permission=(0,permissionEntity_test_data.js)({aco_foreign_key:resource3.id}),resource3.permissions=[resource3.permission],[resource1,resource2,resource3]};var ManagedClipboardServiceProvider_test_data=__webpack_require__("./src/react-extension/contexts/Clipboard/ManagedClipboardServiceProvider.test.data.js");function defaultResourceWorkspaceContext(data={}){return{details:{folder:null,resource:null},filteredResources:[],selectedResources:[],columnsResourceSetting:new columnsResourceSettingCollection.A([{id:"favorite",label:"Favorite",position:1,show:!0},{id:"attentionRequired",label:"Attention",position:2,show:!0},{id:"icon",label:"Icon",position:3,show:!0},{id:"name",label:"Name",position:4,show:!0},{id:"expired",label:"Expiry",position:5,show:!0},{id:"username",label:"Username",position:6,show:!0},{id:"password",label:"Password",position:7,show:!0},{id:"totp",label:"TOTP",position:8,show:!0},{id:"uri",label:"URI",position:9,show:!0},{id:"modified",label:"Modified",position:10,show:!0},{id:"location",label:"Location",position:11,show:!0}]),filter:{type:ResourceWorkspaceContext.FM.ALL},scrollTo:{},sorter:{propertyName:"modified"},onGoToResourceUriRequested:jest.fn(),onResourceCopied:jest.fn(),onResourcePreviewed:jest.fn(),onResourceSelected:{all:jest.fn(),none:jest.fn(),multiple:jest.fn(),range:jest.fn(),single:jest.fn()},onResourceScrolled:jest.fn(),onFolderScrolled:jest.fn(),onResourceEdited:jest.fn(),onSorterChanged:jest.fn(),onResourcesToExport:jest.fn(),onResourceFileImportResult:jest.fn(),onResourceFileToImport:jest.fn(),onLockDetail:jest.fn(),onChangeColumnView:jest.fn(),onChangeColumnsSettings:jest.fn(),resetGridColumnsSettings:jest.fn(),onResourceDescriptionDecrypted:jest.fn(),onChangeRowSettingsHeight:jest.fn(),clipboardContext:(0,ManagedClipboardServiceProvider_test_data.H)(),...data}}function resourceWorkspaceContextWithSelectedFolderIOwn(data={}){return defaultResourceWorkspaceContext({filter:{type:ResourceWorkspaceContext.FM.FOLDER,payload:{folder:(0,folderEntity_test_data.nk)()}},...data})}function resourceWorkspaceContextWithSelectedFolderICanRead(data={}){return defaultResourceWorkspaceContext({filter:{type:ResourceWorkspaceContext.FM.FOLDER,payload:{folder:(0,folderEntity_test_data.ht)()}},...data})}function resourceWorkspaceContextWithSelectedResourceIOwn(data={}){return defaultResourceWorkspaceContext({details:{resource:(0,resourceEntity_test_data.j8)()},...data})}function resourceWorkspaceContextWithSelectedResourcesAndVariousPermission(data={}){return defaultResourceWorkspaceContext({selectedResources:resourceAllTypesDtosCollectionAndVariousPermission(),...data})}},"./src/shared/models/entity/folder/folderEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ht:()=>folderWithReadPermissionDto,nk:()=>defaultFolderDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_permission_permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/permission/permissionEntity.test.data.js"),_permission_permissionCollection_test_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/permission/permissionCollection.test.data.js"),_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/models/entity/user/userEntity.test.data.js");const defaultFolderDto=(data={},options={})=>{const id=data?.id||(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),defaultData={id,name:"Accounting",created:"2020-02-01T00:00:00+00:00",modified:"2020-02-01T00:00:00+00:00",created_by:"d57c10f5-639d-5160-9c81-8a0c6c4ec856",modified_by:"d57c10f5-639d-5160-9c81-8a0c6c4ec856",permission:(0,_permission_permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.uq)({aco:"Folder",aco_foreign_key:id}),folder_parent_id:null,personal:!1,...data};return!data.permissions&&options.withPermissions&&(defaultData.permissions=(0,_permission_permissionCollection_test_data__WEBPACK_IMPORTED_MODULE_2__.w)({aco:"Folder",aco_foreign_key:id},options.withPermissions)),!data.creator&&options?.withCreator&&(defaultData.creator=(0,_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_3__.cI)()),!data.modifier&&options?.withModifier&&(defaultData.modifier=(0,_user_userEntity_test_data__WEBPACK_IMPORTED_MODULE_3__.cI)()),defaultData},folderWithReadPermissionDto=(data={})=>{const id=data?.id||(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)();return defaultFolderDto({id,permission:(0,_permission_permissionEntity_test_data__WEBPACK_IMPORTED_MODULE_1__.js)({aco_foreign_key:id,aco:"Folder"}),...data})}},"./src/shared/models/entity/metadata/metadataKeysSettingsEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>defaultMetadataKeysSettingsDto});var _metadataPrivateKeyEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/metadata/metadataPrivateKeyEntity.test.data.js"),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const defaultMetadataKeysSettingsDto=(data={},options={})=>{const defaultData={allow_usage_of_personal_keys:!0,zero_knowledge_key_share:!1};return!defaultData.metadata_private_keys&&options?.withMetadataPrivateKeys&&(defaultData.metadata_private_keys=[(0,_metadataPrivateKeyEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.mr)({metadata_key_id:(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)()},options?.withMetadataPrivateKeys)]),Object.assign(defaultData,data)}},"./src/shared/models/entity/metadata/metadataPrivateKeyEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{mr:()=>defaultMetadataPrivateKeyDto});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./test/fixture/pgpKeys/keys.js");const defaultMetadataPrivateKeyDto=(data={})=>((data={})=>({user_id:null,data:_test_fixture_pgpKeys_keys__WEBPACK_IMPORTED_MODULE_1__.u.metadataKey.encryptedMetadataPrivateKeyDataMessage,...data}))({id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),user_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),metadata_key_id:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),data_signed_by_current_user:null,modified:"2022-10-11T08:09:00+00:00",created_by:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),created:"2022-10-11T08:09:00+00:00",modified_by:(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),...data})},"./src/shared/models/entity/secretRevision/secretRevisionsSettingsEntity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityV2.js");class SecretRevisionsSettingsEntity extends _abstract_entityV2__WEBPACK_IMPORTED_MODULE_0__.A{static getSchema(){return{type:"object",required:["max_revisions","allow_sharing_revisions"],properties:{id:{type:"string",format:"uuid"},max_revisions:{type:"integer",minimum:1},allow_sharing_revisions:{type:"boolean"}}}}static createFromDefault(data={}){return new SecretRevisionsSettingsEntity({max_revisions:1,allow_sharing_revisions:!1,...data})}get id(){return this._props.id}get maxRevisions(){return this._props.max_revisions}get allowSharingRevisions(){return this._props.allow_sharing_revisions}get isFeatureEnabled(){return this.maxRevisions>1}}const __WEBPACK_DEFAULT_EXPORT__=SecretRevisionsSettingsEntity},"./src/shared/models/entity/secretRevision/secretRevisionsSettingsEntity.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>defaultSecretRevisionsSettingsDto});const defaultSecretRevisionsSettingsDto=(data={})=>Object.assign({max_revisions:3,allow_sharing_revisions:!1},data)},"./src/shared/models/passwordExpirySettings/PasswordExpirySettingsDto.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Xc:()=>defaultPasswordExpirySettingsEntityDto,om:()=>overridenPasswordExpirySettingsEntityDto});const defaultPasswordExpirySettingsEntityDto=(data={})=>Object.assign({automatic_update:!0,automatic_expiry:!0,policy_override:!1,default_expiry_period:null},data),overridenPasswordExpirySettingsEntityDto=(data={})=>Object.assign({automatic_update:!0,automatic_expiry:!0,policy_override:!0,default_expiry_period:30},data)},"./test/fixture/encryptedMetadata/metadata.js":(__unused_webpack_module,exports)=>{}}]);