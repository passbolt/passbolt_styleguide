/*! For license information please see react-extension-components-Resource-EditResource-EditResource-test-stories.37188785.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[1101],{"./src/react-extension/components/Resource/EditResource/EditResource.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,DefaultLegacy:()=>DefaultLegacy,DefaultTotp:()=>DefaultTotp,DefaultTotpLegacy:()=>DefaultTotpLegacy,Loading:()=>Loading,String:()=>EditResource_test_stories_String,StringLegacy:()=>StringLegacy,Totp:()=>Totp,TotpLegacy:()=>TotpLegacy,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EditResource_test_stories});var react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),react=__webpack_require__("./node_modules/react/index.js"),MockPort=__webpack_require__("./src/react-extension/test/mock/MockPort.js"),ResourcePasswordGeneratorContext_test_data=__webpack_require__("./src/react-extension/contexts/ResourcePasswordGeneratorContext.test.data.js"),resourceTypesCollection_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js"),resourceTypeEntity_test_data=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.test.data.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),ResourceWorkspaceContext_test_data=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.test.data.js"),ExtAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ExtAppContext.test.data.js"),ActionFeedbackContext_test_data=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.test.data.js"),PasswordExpirySettingsContext_test_data=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.test.data.js"),DialogContext_test_data=__webpack_require__("./src/react-extension/contexts/DialogContext.test.data.js"),PasswordPoliciesContext_test_data=__webpack_require__("./src/shared/context/PasswordPoliciesContext/PasswordPoliciesContext.test.data.js"),PasswordPoliciesDto_test_data=__webpack_require__("./src/shared/models/passwordPolicies/PasswordPoliciesDto.test.data.js"),resourceEntity_test_data=__webpack_require__("./src/shared/models/entity/resource/resourceEntity.test.data.js");function defaultProps(data={}){const defaultData={context:(0,ExtAppContext_test_data.st)(),resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.Vv}),actionFeedbackContext:(0,ActionFeedbackContext_test_data.M)(),resourcePasswordGeneratorContext:(0,ResourcePasswordGeneratorContext_test_data.N)(),resourceWorkspaceContext:(0,ResourceWorkspaceContext_test_data.AW)({getHierarchyFolderCache:()=>[{name:"Folder",id:"1"},{name:"subfolder",id:"2"}]}),passwordExpiryContext:(0,PasswordExpirySettingsContext_test_data.i)(),resourceTypes:new resourceTypesCollection.A((0,resourceTypesCollection_test_data.V1)()),passwordPoliciesContext:(0,PasswordPoliciesContext_test_data.M)({policies:(0,PasswordPoliciesDto_test_data.m)({external_dictionary_check:!1})}),onClose:jest.fn(),dialogContext:(0,DialogContext_test_data.L)()};return Object.assign(defaultData,data)}function defaultTotpProps(data={}){const defaultData=defaultProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.Xq})});return Object.assign(defaultData,data)}var AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),ResourceTypesLocalStorageContext=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),ResourcePasswordGeneratorContext=__webpack_require__("./src/react-extension/contexts/ResourcePasswordGeneratorContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),ManageDialogs=__webpack_require__("./src/react-extension/components/Common/Dialog/ManageDialogs/ManageDialogs.js"),EditResource=__webpack_require__("./src/react-extension/components/Resource/EditResource/EditResource.js"),totpDto_test_data=__webpack_require__("./src/shared/models/entity/totp/totpDto.test.data.js");const EditResource_test_stories={title:"Components/Resource/EditResource",component:EditResource.A,decorators:[(Story,{args})=>react.createElement(react_router.MemoryRouter,{initialEntries:["/app/passwords"]},react.createElement("div",{style:{margin:"-1rem"}},react.createElement(AppContext.A.Provider,{value:args.context},react.createElement(DialogContext.Ay,null,react.createElement(ActionFeedbackContext.b_.Provider,{value:args.actionFeedbackContext},react.createElement(ResourceTypesLocalStorageContext.dA.Provider,{value:{get:()=>args.resourceTypes,resourceTypes:args.resourceTypes}},react.createElement(ResourceWorkspaceContext.XZ.Provider,{value:args.resourceWorkspaceContext},react.createElement(ResourcePasswordGeneratorContext.EH.Provider,{value:args.resourcePasswordGeneratorContext},react.createElement(ManageDialogs.A,null),react.createElement(Story,args)))))))))]},mockedDefaultPort=new MockPort.A;mockedDefaultPort.addRequestListener("passbolt.secret.find-by-resource-id",(()=>({password:"secret-decrypted",description:"description"})));const mockedPortPasswordDescriptionTotp=new MockPort.A;mockedPortPasswordDescriptionTotp.addRequestListener("passbolt.secret.find-by-resource-id",(()=>({password:"secret-decrypted",description:"description",totp:(0,totpDto_test_data.gV)()})));const mockedPortTotp=new MockPort.A;mockedPortTotp.addRequestListener("passbolt.secret.find-by-resource-id",(()=>({totp:(0,totpDto_test_data.gV)()})));const mockedPasswordStringPort=new MockPort.A;mockedPasswordStringPort.addRequestListener("passbolt.secret.find-by-resource-id",(()=>({password:"secret-decrypted"})));const defaultV5Props=defaultProps();defaultV5Props.context.port=mockedDefaultPort;const Default={args:defaultV5Props},defaultV5DefaultTotpProps=defaultProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.J6})});defaultV5DefaultTotpProps.context.port=mockedPortPasswordDescriptionTotp;const DefaultTotp={args:defaultV5DefaultTotpProps},defaultV5TotpProps=defaultTotpProps();defaultV5TotpProps.context.port=mockedPortTotp;const Totp={args:defaultV5TotpProps};defaultProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.$z})}).context.port=mockedPasswordStringPort;const EditResource_test_stories_String={args:defaultProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.$z})})},defaultLegacyProps=defaultProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.s_})});defaultLegacyProps.context.port=mockedDefaultPort;const DefaultLegacy={args:defaultLegacyProps},defaultV4DefaultTotpProps=defaultProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.Av})});defaultV4DefaultTotpProps.context.port=mockedPortPasswordDescriptionTotp;const DefaultTotpLegacy={args:defaultV4DefaultTotpProps},legacyTotpProps=defaultTotpProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.vD})});legacyTotpProps.context.port=mockedPortTotp;const TotpLegacy={args:legacyTotpProps},legacyStringProps=defaultProps({resource:(0,resourceEntity_test_data.j8)({resource_type_id:resourceTypeEntity_test_data.Bt})});legacyStringProps.context.port=mockedPasswordStringPort;const StringLegacy={args:legacyStringProps},mockedLoadingPort=new MockPort.A;mockedLoadingPort.addRequestListener("passbolt.secret.find-by-resource-id",(()=>new Promise((resolve=>resolve))));const loadingProps=defaultProps();loadingProps.context.port=mockedLoadingPort;const Loading={args:loadingProps},__namedExportsOrder=["Default","DefaultTotp","Totp","String","DefaultLegacy","DefaultTotpLegacy","TotpLegacy","StringLegacy","Loading"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: defaultV5Props\n}",...Default.parameters?.docs?.source}}},DefaultTotp.parameters={...DefaultTotp.parameters,docs:{...DefaultTotp.parameters?.docs,source:{originalSource:"{\n  args: defaultV5DefaultTotpProps\n}",...DefaultTotp.parameters?.docs?.source}}},Totp.parameters={...Totp.parameters,docs:{...Totp.parameters?.docs,source:{originalSource:"{\n  args: defaultV5TotpProps\n}",...Totp.parameters?.docs?.source}}},EditResource_test_stories_String.parameters={...EditResource_test_stories_String.parameters,docs:{...EditResource_test_stories_String.parameters?.docs,source:{originalSource:"{\n  args: defaultProps({\n    resource: defaultResourceDto({\n      resource_type_id: TEST_RESOURCE_TYPE_V5_PASSWORD_STRING\n    })\n  })\n}",...EditResource_test_stories_String.parameters?.docs?.source}}},DefaultLegacy.parameters={...DefaultLegacy.parameters,docs:{...DefaultLegacy.parameters?.docs,source:{originalSource:"{\n  args: defaultLegacyProps\n}",...DefaultLegacy.parameters?.docs?.source}}},DefaultTotpLegacy.parameters={...DefaultTotpLegacy.parameters,docs:{...DefaultTotpLegacy.parameters?.docs,source:{originalSource:"{\n  args: defaultV4DefaultTotpProps\n}",...DefaultTotpLegacy.parameters?.docs?.source}}},TotpLegacy.parameters={...TotpLegacy.parameters,docs:{...TotpLegacy.parameters?.docs,source:{originalSource:"{\n  args: legacyTotpProps\n}",...TotpLegacy.parameters?.docs?.source}}},StringLegacy.parameters={...StringLegacy.parameters,docs:{...StringLegacy.parameters?.docs,source:{originalSource:"{\n  args: legacyStringProps\n}",...StringLegacy.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  args: loadingProps\n}",...Loading.parameters?.docs?.source}}}},"./src/img/svg/attention.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _g,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgAttention(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},props),_g||(_g=react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#attention_svg__clip0_2062_453107)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"var(--icon-exclamation-background-color)",stroke:"var(--icon-exclamation-border-color)",d:"M9 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-exclamation-color)",d:"M9 6v3M9 12h.008"}))))}},"./src/img/svg/spinner.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSpinner(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:18,height:18,fill:"none",className:"svg-icon spinner",viewBox:"0 0 18 18"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"background",cx:8,cy:8,r:8,fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(1 1)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"loading",r:8,fill:"none",stroke:"var(--spinner-color)",strokeLinecap:"round",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(9 9)"})))}},"./src/react-extension/components/Common/Dialog/ManageDialogs/ManageDialogs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);class ManageDialogs extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallback()}bindCallback(){this.close=this.close.bind(this)}async close(index){const dialog=this.props.dialogContext.dialogs.find((({key})=>key===index));dialog?.DialogProps?.onClose&&dialog.DialogProps.onClose(),this.props.dialogContext.close(index)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.props.dialogContext.dialogs.map((({key,Dialog,DialogProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Dialog,{key,...DialogProps,onClose:()=>this.close(key)}))),this.props.children)}}ManageDialogs.propTypes={dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_1__.z9)(ManageDialogs);ManageDialogs.__docgenInfo={description:"This component acts as an anchor for the different project dialogs.",methods:[{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"close",docblock:"Removes the index-th dialog",modifiers:["async"],params:[{name:"index",optional:!1}],returns:null,description:"Removes the index-th dialog"}],displayName:"ManageDialogs",props:{dialogContext:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormCancelButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.disabled||this.props.onClick()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.props.disabled,className:"link cancel",onClick:this.handleClick},this.props.value)}}FormCancelButton.defaultProps={value:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Cancel")},FormCancelButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,value:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_2___default().node),prop_types__WEBPACK_IMPORTED_MODULE_2___default().node,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string])};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(FormCancelButton);FormCancelButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleClick",docblock:"Handle cancel click\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle cancel click"}],displayName:"FormCancelButton",props:{value:{defaultValue:{value:"<Trans>Cancel</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormSubmitButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.getClassName=this.getClassName.bind(this)}getClassName(){let name="button primary form";return this.props.warning?name+=" warning":this.props.attention&&(name+=" attention"),this.props.disabled&&(name+=" disabled"),this.props.processing&&(name+=" processing"),this.props.big&&(name+=" big"),this.props.medium&&(name+=" medium"),this.props.fullWidth&&(name+=" full-width"),name}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:this.getClassName(),disabled:this.props.disabled},this.props.value||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Save"),this.props.processing&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__.A,null))}}FormSubmitButton.defaultProps={warning:!1,attention:!1},FormSubmitButton.propTypes={processing:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().node),prop_types__WEBPACK_IMPORTED_MODULE_3___default().node,prop_types__WEBPACK_IMPORTED_MODULE_3___default().string]),warning:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,attention:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,big:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,medium:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,fullWidth:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(FormSubmitButton);FormSubmitButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"getClassName",docblock:"Get the input button classname\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the input button classname"}],displayName:"FormSubmitButton",props:{warning:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},attention:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},processing:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},value:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},big:{description:"",type:{name:"bool"},required:!1},medium:{description:"",type:{name:"bool"},required:!1},fullWidth:{description:"",type:{name:"bool"},required:!1}}}},"./src/react-extension/components/Resource/EditResource/EditResource.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>EditResource_EditResource});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),DialogWrapper=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),FormSubmitButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),FormCancelButton=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),ResourceTypesLocalStorageContext=__webpack_require__("./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js"),SelectResourceForm=__webpack_require__("./src/react-extension/components/Resource/ResourceForm/SelectResourceForm.js"),resource_resourceFormEntity=__webpack_require__("./src/shared/models/entity/resource/resourceFormEntity.js"),resourceTypesCollection=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js"),ResourceEditCreateFormEnumerationTypes=__webpack_require__("./src/shared/models/resource/ResourceEditCreateFormEnumerationTypes.js"),AddResourceName=__webpack_require__("./src/react-extension/components/Resource/ResourceForm/AddResourceName.js"),OrchestrateResourceForm=__webpack_require__("./src/react-extension/components/Resource/ResourceForm/OrchestrateResourceForm.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),SecretGenerator=__webpack_require__("./src/shared/lib/SecretGenerator/SecretGenerator.js"),ConfirmCreateEdit=__webpack_require__("./src/react-extension/components/Resource/ConfirmCreateEdit/ConfirmCreateEdit.js"),SecretGeneratorComplexity=__webpack_require__("./src/shared/lib/SecretGenerator/SecretGeneratorComplexity.js"),memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js"),pownedService=__webpack_require__("./src/shared/services/api/secrets/pownedService.js"),PasswordPoliciesContext=__webpack_require__("./src/shared/context/PasswordPoliciesContext/PasswordPoliciesContext.js"),PasswordExpirySettingsContext=__webpack_require__("./src/react-extension/contexts/PasswordExpirySettingsContext.js"),ActionFeedbackContext=__webpack_require__("./src/react-extension/contexts/ActionFeedbackContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),NotifyError=__webpack_require__("./src/react-extension/components/Common/Error/NotifyError/NotifyError.js"),ResourceWorkspaceContext=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),luxon=__webpack_require__("./node_modules/luxon/src/luxon.js");class EditResourceSkeleton extends react.Component{render(){return react.createElement(react.Fragment,null,react.createElement("div",{className:"left-sidebar"},react.createElement("div",{className:"main-action-wrapper"}),react.createElement("div",{className:"sidebar-content-sections"})),react.createElement("form",{className:"grid-and-footer",onSubmit:this.handleFormSubmit,noValidate:!0},react.createElement("div",{className:"grid"},react.createElement("div",{className:"resource-info skeleton"},react.createElement("div",{className:"resource-icon"}),react.createElement("div",{className:"information"},react.createElement("div",{className:"input text"}),react.createElement("div",{className:"breadcrumbs"},react.createElement("div",{className:"folder-name"})))),react.createElement("div",{className:"edit-workspace skeleton"})),react.createElement("div",{className:"submit-wrapper"},react.createElement(FormCancelButton.A,{disabled:!0}),react.createElement(FormSubmitButton.A,{value:this.props.t("Save"),disabled:!0}))))}}EditResourceSkeleton.propTypes={t:prop_types_default().func};const EditResource_EditResourceSkeleton=(0,es.CI)("common")(EditResourceSkeleton);EditResourceSkeleton.__docgenInfo={description:"",methods:[],displayName:"EditResourceSkeleton",props:{t:{description:"",type:{name:"func"},required:!1}}};class EditResource extends react.Component{constructor(props){super(props),this.initializeResourceForm(),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{resource:null,resourceType:null,resourceFormSelected:null,originalSecret:null,isSecretDecrypting:!0,isProcessing:!1,hasAlreadyBeenValidated:!1,isPasswordDictionaryCheckRequested:!0,passwordEntropy:null,passwordInDictionary:!1,isPasswordDictionaryCheckServiceAvailable:!0}}bindCallbacks(){this.handleClose=this.handleClose.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.onSelectForm=this.onSelectForm.bind(this),this.onAddSecret=this.onAddSecret.bind(this),this.onDeleteSecret=this.onDeleteSecret.bind(this),this.handleConvertToDescription=this.handleConvertToDescription.bind(this),this.handleConvertToNote=this.handleConvertToNote.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.rejectEditionConfirmation=this.rejectEditionConfirmation.bind(this),this.consumePasswordEntropyError=this.consumePasswordEntropyError.bind(this),this.save=this.save.bind(this)}async initializeResourceForm(){const resourceDto={...this.props.resource},secret=await this.getDecryptedSecret();resourceDto.secret=secret,this.resourceFormEntity=new resource_resourceFormEntity.A(resourceDto,{validate:!1,resourceTypes:this.props.resourceTypes});const passwordEntropy=secret?.password?.length?SecretGenerator.M.entropy(secret.password):null;this.setState({isSecretDecrypting:!1,originalSecret:secret,resource:this.resourceFormEntity.toDto(),resourceType:this.props.resourceTypes.getFirstById(this.props.resource.resource_type_id),resourceFormSelected:this.selectResourceFormByResourceSecretData(),passwordEntropy})}async componentDidMount(){await Promise.all([this.props.passwordExpiryContext.findSettings(),this.props.passwordPoliciesContext.findPolicies()]),this.initPwnedPasswordService()}initPwnedPasswordService(){const isPasswordDictionaryCheckRequested=this.props.passwordPoliciesContext.shouldRunDictionaryCheck();isPasswordDictionaryCheckRequested&&(this.pownedService=new pownedService.A(this.props.context.port)),this.setState({isPasswordDictionaryCheckRequested})}validateForm=(0,memoize_one_esm.A)((resourceFormDto=>new resource_resourceFormEntity.A(resourceFormDto,{validate:!1,resourceTypes:this.props.resourceTypes}).validate()));verifyDataHealth=(0,memoize_one_esm.A)((resourceFormDto=>this.resourceFormEntity?.verifyHealth()));async getDecryptedSecret(){try{return await this.props.context.port.request("passbolt.secret.find-by-resource-id",this.props.resource.id)}catch(error){this.handleClose()}}selectResourceFormByResourceSecretData(){return null!=this.resourceFormEntity?.secret?.password?ResourceEditCreateFormEnumerationTypes.D.PASSWORD:null!=this.resourceFormEntity?.secret?.totp?ResourceEditCreateFormEnumerationTypes.D.TOTP:null!=this.resourceFormEntity?.secret?.description?ResourceEditCreateFormEnumerationTypes.D.NOTE:null}selectResourceFormByFirstError(errors){errors.hasError("secret")&&errors.details.secret.hasError("totp")&&this.setState({resourceFormSelected:ResourceEditCreateFormEnumerationTypes.D.TOTP})}handleInputChange(event){const target=event.target,name=target.name;let value;value="number"===target.type?Number.isNaN(target.valueAsNumber)?"":target.valueAsNumber:target.value,this.resourceFormEntity.set(name,value,{validate:!1});const newState={resource:this.resourceFormEntity.toDto()};"secret.password"===name&&(newState.passwordInDictionary=!1,newState.passwordEntropy=value?.length?SecretGenerator.M.entropy(value):null),this.setState(newState)}async handleFormSubmit(event){if(event.preventDefault(),!this.state.isProcessing){this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing();try{const resourceFormEntity=this.createAndSanitizeResourceFormEntity(),validationError=resourceFormEntity.validate();if(validationError?.hasErrors())return this.selectResourceFormByFirstError(validationError),void await this.toggleProcessing();if(!this.isMinimumRequiredEntropyReached())return void this.handlePasswordMinimumEntropyNotReached(resourceFormEntity);if(await this.isPasswordInDictionary())return void this.handlePasswordInDictionary(resourceFormEntity);await this.save(resourceFormEntity)}catch(error){await this.toggleProcessing(),this.handleSaveError(error)}}}isMinimumRequiredEntropyReached(){if(!this.state.resourceType.hasPassword())return!0;return!Boolean(this.state.resource.secret.password)||this.state.passwordEntropy&&this.state.passwordEntropy>=SecretGeneratorComplexity.JP.WEAK}async isPasswordInDictionary(){if(!this.state.resourceType.hasPassword())return!1;if(!Boolean(this.state.resource.secret.password))return!1;const password=this.state.resource.secret.password;if(!this.state.isPasswordDictionaryCheckRequested||!this.state.isPasswordDictionaryCheckServiceAvailable)return!1;const{isPwnedServiceAvailable,inDictionary}=await this.pownedService.evaluateSecret(password);return isPwnedServiceAvailable?inDictionary:(this.setState({isPasswordDictionaryCheckServiceAvailable:!1}),!1)}handlePasswordMinimumEntropyNotReached(resourceFormEntity){const confirmCreationDialog={operation:ConfirmCreateEdit.OL.CREATE,rule:ConfirmCreateEdit.BJ.MINIMUM_ENTROPY,resourceName:this.state.resource?.metadata?.name,onConfirm:()=>this.save(resourceFormEntity),onReject:this.rejectEditionConfirmation};this.props.dialogContext.open(ConfirmCreateEdit.Ay,confirmCreationDialog)}handlePasswordInDictionary(resourceFormEntity){this.setState({passwordInDictionary:!0});const confirmCreationDialog={operation:ConfirmCreateEdit.OL.CREATE,rule:ConfirmCreateEdit.BJ.IN_DICTIONARY,resourceName:this.state.resource?.metadata?.name,onConfirm:()=>this.save(resourceFormEntity),onReject:this.rejectEditionConfirmation};this.props.dialogContext.open(ConfirmCreateEdit.Ay,confirmCreationDialog)}rejectEditionConfirmation(){this.passwordEntropyError=!0,this.setState({resourceFormSelected:ResourceEditCreateFormEnumerationTypes.D.PASSWORD,isProcessing:!1})}consumePasswordEntropyError(){const hasPasswordEntropyError=this.passwordEntropyError;return this.passwordEntropyError=!1,hasPasswordEntropyError}createAndSanitizeResourceFormEntity(){const resourceFormEntity=new resource_resourceFormEntity.A(this.state.resource,{validate:!1,resourceTypes:this.props.resourceTypes});return 0===resourceFormEntity.metadata.name.length&&resourceFormEntity.set("metadata.name","no name",{validate:!1}),resourceFormEntity.removeEmptySecret({validate:!1}),resourceFormEntity.addRequiredSecret({validate:!1}),resourceFormEntity}async save(resource){await this.updateResource(resource),await this.handleSaveSuccess()}async updateResource(resource){if(!resource.secret.areSecretsDifferent(this.state.originalSecret))return void await this.props.context.port.request("passbolt.resources.update",resource.toResourceDto(),null);this.shouldUpdateExpirationDate()&&resource.set("expired",this.getResourceExpirationDate());const resourceDto=resource.toResourceDto(),secretDto=this.props.resourceTypes.getFirstById(resource.resourceTypeId).isPasswordString()?resource.toSecretDto().password:resource.toSecretDto();await this.props.context.port.request("passbolt.resources.update",resourceDto,secretDto)}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The resource has been updated successfully")),this.props.resourceWorkspaceContext.onResourceEdited(),this.handleClose()}handleSaveError(error){"UserAbortsOperationError"!==error.name&&(console.error(error),this.handleError(error))}handleError(error){this.props.dialogContext.open(NotifyError.A,{error})}async toggleProcessing(){const prev=this.state.isProcessing;return new Promise((resolve=>{this.setState({isProcessing:!prev},(()=>resolve()))}))}handleClose(){this.props.onClose()}onSelectForm(event,resourceFormSelected){this.setState({resourceFormSelected})}onAddSecret(secret){this.resourceFormEntity.addSecret(secret,{validate:!1});const resourceType=this.props.resourceTypes.getFirstById(this.resourceFormEntity.resourceTypeId);this.setState({resource:this.resourceFormEntity.toDto(),resourceFormSelected:secret,resourceType})}onDeleteSecret(secret){this.resourceFormEntity.deleteSecret(secret,{validate:!1});const resourceType=this.props.resourceTypes.getFirstById(this.resourceFormEntity.resourceTypeId);this.state.resourceFormSelected===secret?this.setState({resource:this.resourceFormEntity.toDto(),resourceFormSelected:this.selectResourceFormByResourceSecretData(),resourceType}):this.setState({resource:this.resourceFormEntity.toDto(),resourceType})}handleConvertToDescription(){this.resourceFormEntity.convertToMetadataDescription({validate:!1});const resourceType=this.props.resourceTypes.getFirstById(this.resourceFormEntity.resourceTypeId);this.setState({resource:this.resourceFormEntity.toDto(),resourceFormSelected:ResourceEditCreateFormEnumerationTypes.D.DESCRIPTION,resourceType})}handleConvertToNote(){this.resourceFormEntity.convertToNote({validate:!1});const resourceType=this.props.resourceTypes.getFirstById(this.resourceFormEntity.resourceTypeId);this.setState({resource:this.resourceFormEntity.toDto(),resourceFormSelected:ResourceEditCreateFormEnumerationTypes.D.NOTE,resourceType})}get hasAllInputDisabled(){return this.state.isProcessing}get hasSecretDecrypting(){return this.state.isSecretDecrypting}shouldUpdateExpirationDate(){const passwordExpirySettings=this.props.passwordExpiryContext.getSettings();return!!passwordExpirySettings?.automatic_update&&this.state.resource.password!==this.state.originalSecret.password}getResourceExpirationDate(){const passwordExpirySettings=this.props.passwordExpiryContext.getSettings();return null==passwordExpirySettings.default_expiry_period?null:luxon.c9.utc().plus({days:passwordExpirySettings.default_expiry_period}).toISO()}get translate(){return this.props.t}render(){const warnings=this.verifyDataHealth(this.state.resource),errors=this.state.hasAlreadyBeenValidated?this.validateForm(this.state.resource):null;return react.createElement(DialogWrapper.A,{title:this.translate("Edit a resource"),className:"edit-resource",disabled:this.hasAllInputDisabled,onClose:this.handleClose},this.hasSecretDecrypting&&react.createElement(EditResource_EditResourceSkeleton,null),!this.hasSecretDecrypting&&react.createElement(react.Fragment,null,react.createElement(SelectResourceForm.A,{resourceType:this.state.resourceType,resourceFormSelected:this.state.resourceFormSelected,resource:this.state.resource,onAddSecret:this.onAddSecret,onDeleteSecret:this.onDeleteSecret,onSelectForm:this.onSelectForm,disabled:this.hasAllInputDisabled}),react.createElement("form",{className:"grid-and-footer",onSubmit:this.handleFormSubmit,noValidate:!0},react.createElement("div",{className:"grid"},react.createElement(AddResourceName.A,{resource:this.state.resource,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled,warnings,errors}),react.createElement("div",{className:"edit-workspace"},react.createElement(OrchestrateResourceForm.A,{resourceFormSelected:this.state.resourceFormSelected,resource:this.state.resource,resourceType:this.state.resourceType,onChange:this.handleInputChange,onConvertToDescription:this.handleConvertToDescription,onConvertToNote:this.handleConvertToNote,passwordEntropy:this.state.passwordEntropy,consumePasswordEntropyError:this.consumePasswordEntropyError,disabled:this.hasAllInputDisabled,warnings,errors}))),react.createElement("div",{className:"submit-wrapper"},react.createElement(FormCancelButton.A,{disabled:this.hasAllInputDisabled,onClick:this.handleClose}),react.createElement(FormSubmitButton.A,{value:this.translate("Save"),disabled:this.hasAllInputDisabled,processing:this.state.isProcessing})))))}}EditResource.propTypes={context:prop_types_default().any,resource:prop_types_default().object,onClose:prop_types_default().func,resourceWorkspaceContext:prop_types_default().any,dialogContext:prop_types_default().object,passwordExpiryContext:prop_types_default().object,passwordPoliciesContext:prop_types_default().object,actionFeedbackContext:prop_types_default().any,resourceTypes:prop_types_default().instanceOf(resourceTypesCollection.A),t:prop_types_default().func};const EditResource_EditResource=(0,AppContext.L)((0,PasswordPoliciesContext.WJ)((0,PasswordExpirySettingsContext.f4)((0,ResourceTypesLocalStorageContext.KH)((0,ActionFeedbackContext.ot)((0,DialogContext.z9)((0,ResourceWorkspaceContext.Qw)((0,es.CI)("common")(EditResource))))))));EditResource.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Ge the default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Ge the default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"initializeResourceForm",docblock:"Initialize resource form\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Initialize resource form"},{name:"initPwnedPasswordService",docblock:"Initialize the pwned password service",modifiers:[],params:[],returns:null,description:"Initialize the pwned password service"},{name:"getDecryptedSecret",docblock:"Get the decrypted secret associated to the resource\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Get the decrypted secret associated to the resource"},{name:"selectResourceFormByResourceSecretData",docblock:"Selected the resource form by resource type\n@return {string | null} The selected form",modifiers:[],params:[],returns:{description:"The selected form",type:{name:"union",elements:[{name:"string"}]}},description:"Selected the resource form by resource type"},{name:"selectResourceFormByFirstError",docblock:"Select resource form by first error\n@param {EntityValidationError} errors",modifiers:[],params:[{name:"errors",type:{name:"EntityValidationError"},optional:!1}],returns:null,description:"Select resource form by first error"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handleFormSubmit",docblock:"Handle form submission that can be trigger when hitting `enter`\n@param {Event} event The html event triggering the form submit.",modifiers:["async"],params:[{name:"event",description:"The html event triggering the form submit.",type:{name:"Event"},optional:!1}],returns:null,description:"Handle form submission that can be trigger when hitting `enter`"},{name:"isMinimumRequiredEntropyReached",docblock:"Returns true if the given entropy is greater or equal to the minimum required entropy.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given entropy is greater or equal to the minimum required entropy."},{name:"isPasswordInDictionary",docblock:"Check if the password is part of a dictionary.\n@returns {Promise<boolean>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Check if the password is part of a dictionary."},{name:"handlePasswordMinimumEntropyNotReached",docblock:"Request password not reaching minimum entropy creation confirmation.\n@param {ResourceFormEntity} resourceFormEntity The resource form entity",modifiers:[],params:[{name:"resourceFormEntity",description:"The resource form entity",type:{name:"ResourceFormEntity"},optional:!1}],returns:null,description:"Request password not reaching minimum entropy creation confirmation."},{name:"handlePasswordInDictionary",docblock:"Request password in dictionary creation confirmation.\n@param {ResourceFormEntity} resourceFormEntity The resource form entity",modifiers:[],params:[{name:"resourceFormEntity",description:"The resource form entity",type:{name:"ResourceFormEntity"},optional:!1}],returns:null,description:"Request password in dictionary creation confirmation."},{name:"rejectEditionConfirmation",docblock:"Reject the edition confirmation.",modifiers:[],params:[],returns:null,description:"Reject the edition confirmation."},{name:"consumePasswordEntropyError",docblock:'Returns true if the password entropy has been marked as erroneous.\nThe value is then "consumed";\n@returns {boolean}',modifiers:[],params:[],returns:{type:{name:"boolean"}},description:'Returns true if the password entropy has been marked as erroneous.\nThe value is then "consumed";'},{name:"createAndSanitizeResourceFormEntity",docblock:"Create and sanitize resource form entity\n\nThe user should not be blocked during the creation so the goal is to find the best match between resource type available\n- Remove empty secret that is required like Totp (this will find the best match for resource type)\n- Add minimum required secret like password to match resource type\n\nSanitize:\n - remove empty secret\n - add required secret\n\n@returns {ResourceFormEntity}",modifiers:[],params:[],returns:{type:{name:"ResourceFormEntity"}},description:"Create and sanitize resource form entity\n\nThe user should not be blocked during the creation so the goal is to find the best match between resource type available\n- Remove empty secret that is required like Totp (this will find the best match for resource type)\n- Add minimum required secret like password to match resource type\n\nSanitize:\n - remove empty secret\n - add required secret"},{name:"save",docblock:"Save the resource\n@param {ResourceFormEntity} resource\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"resource",type:{name:"ResourceFormEntity"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Save the resource"},{name:"updateResource",docblock:"Update the resource\n@param {ResourceFormEntity} resource\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"resource",type:{name:"ResourceFormEntity"},optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Update the resource"},{name:"handleSaveSuccess",docblock:"Handle save operation success.\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle save operation success."},{name:"handleSaveError",docblock:"Handle save operation error.\n@param {object} error The returned error",modifiers:[],params:[{name:"error",description:"The returned error",type:{name:"object"},optional:!1}],returns:null,description:"Handle save operation error."},{name:"handleError",docblock:"Handle any unexpected errors.\n@param error",modifiers:[],params:[{name:"error",optional:!1}],returns:null,description:"Handle any unexpected errors."},{name:"toggleProcessing",docblock:"Toggle processing state when validating / saving\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Toggle processing state when validating / saving"},{name:"handleClose",docblock:"Handle close",modifiers:[],params:[],returns:null,description:"Handle close"},{name:"onSelectForm",docblock:"Set the state for the resource form selected\n@param event\n@param resourceFormSelected",modifiers:[],params:[{name:"event",optional:!1},{name:"resourceFormSelected",optional:!1}],returns:null,description:"Set the state for the resource form selected"},{name:"onAddSecret",docblock:"Add secret to the resourceFormEntity\n@param {string} secret The secret to add",modifiers:[],params:[{name:"secret",description:"The secret to add",type:{name:"string"},optional:!1}],returns:null,description:"Add secret to the resourceFormEntity"},{name:"onDeleteSecret",docblock:"Delete secret to the resourceFormEntity\n@param {string} secret The secret to delete",modifiers:[],params:[{name:"secret",description:"The secret to delete",type:{name:"string"},optional:!1}],returns:null,description:"Delete secret to the resourceFormEntity"},{name:"handleConvertToDescription",docblock:"Handle convert note to metadata description",modifiers:[],params:[],returns:null,description:"Handle convert note to metadata description"},{name:"handleConvertToNote",docblock:"Handle convert description to secret note",modifiers:[],params:[],returns:null,description:"Handle convert description to secret note"},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"hasSecretDecrypting",docblock:"Should input be disabled? True if state secret is decrypting\n@returns {boolean}",modifiers:["get"],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state secret is decrypting"},{name:"shouldUpdateExpirationDate",docblock:"Returns true if the expiration date of the resource should be updated.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the expiration date of the resource should be updated."},{name:"getResourceExpirationDate",docblock:"Get the expiration date on the given resource according to the password expiry settings\n@returns {DateTime|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"DateTime"}]}},description:"Get the expiration date on the given resource according to the password expiry settings"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"EditResource",props:{context:{description:"",type:{name:"any"},required:!1},resource:{description:"",type:{name:"object"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1},passwordExpiryContext:{description:"",type:{name:"object"},required:!1},passwordPoliciesContext:{description:"",type:{name:"object"},required:!1},actionFeedbackContext:{description:"",type:{name:"any"},required:!1},resourceTypes:{description:"",type:{name:"instanceOf",value:"ResourceTypesCollection"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/contexts/ActionFeedbackContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultActionFeedbackContext(data={}){const defaultContext={displaySuccess:jest.fn(),displayError:jest.fn(),remove:jest.fn()};return Object.assign(defaultContext,data)}__webpack_require__.d(__webpack_exports__,{M:()=>defaultActionFeedbackContext})},"./src/react-extension/contexts/DialogContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>DialogContextProvider,z9:()=>withDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const DialogContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({dialogs:[],open:()=>{},close:()=>{}});class DialogContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(Dialog,DialogProps)=>{const dialogKey=(0,uuid__WEBPACK_IMPORTED_MODULE_1__.A)();return this.setState({dialogs:[...this.state.dialogs,{key:dialogKey,Dialog,DialogProps}]}),dialogKey},close:dialogKey=>this.setState({dialogs:this.state.dialogs.filter((dialog=>dialogKey!==dialog.key))}),closeAll:()=>this.setState({dialogs:[]})}}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Provider,{value:this.state},this.props.children)}}function withDialog(WrappedComponent){return class WithDialog extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(DialogContext.Consumer,null,(dialogContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{dialogContext,...this.props})))}}}DialogContextProvider.displayName="DialogContextProvider",DialogContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any},DialogContextProvider.__docgenInfo={description:"The related context provider",methods:[{name:"defaultState",docblock:"Returns the default component state",modifiers:["get"],params:[],returns:null,description:"Returns the default component state"}],displayName:"DialogContextProvider",props:{children:{description:"",type:{name:"any"},required:!1}}}},"./src/react-extension/contexts/DialogContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function defaultDialogContext(context={}){const defaultContext={dialogs:[],open:jest.fn(),close:jest.fn(),closeAll:jest.fn()};return Object.assign(defaultContext,context)}__webpack_require__.d(__webpack_exports__,{L:()=>defaultDialogContext})},"./src/react-extension/contexts/ResourcePasswordGeneratorContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>defaultResourcePasswordGeneratorContext});var _shared_models_passwordPolicies_PassphraseGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/passwordPolicies/PassphraseGeneratorSettingsDto.test.data.js"),_shared_models_passwordPolicies_PasswordGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/passwordPolicies/PasswordGeneratorSettingsDto.test.data.js"),_shared_models_passwordPolicies_PasswordPoliciesDto_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/passwordPolicies/PasswordPoliciesDto.test.data.js");const defaultResourcePasswordGeneratorContext=(data={})=>({lastGeneratedPassword:"This is the last generated password",getSettings:()=>(0,_shared_models_passwordPolicies_PasswordPoliciesDto_test_data__WEBPACK_IMPORTED_MODULE_0__.m)({password_generator_settings:(0,_shared_models_passwordPolicies_PasswordGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_1__._)({min_length:8,max_length:128}),passphrase_generator_settings:(0,_shared_models_passwordPolicies_PassphraseGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_2__.N)({min_words:4,max_words:40})}),onPasswordGenerated:jest.fn(),resetSecretGeneratorSettings:jest.fn(),consumeLastGeneratedPassword:()=>"This is the last generated password",...data})},"./src/shared/context/PasswordPoliciesContext/PasswordPoliciesContext.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>defaultPasswordPoliciesContext});var _models_passwordPolicies_PasswordPoliciesDto_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/passwordPolicies/PasswordPoliciesDto.test.data.js");const defaultPasswordPoliciesContext=(data={})=>{const policies=data?.policies||(0,_models_passwordPolicies_PasswordPoliciesDto_test_data__WEBPACK_IMPORTED_MODULE_0__.m)();return{policies,getPolicies:jest.fn(),findPolicies:jest.fn(),shouldRunDictionaryCheck:jest.fn((()=>policies?.external_dictionary_check||!1)),...data}}},"./src/shared/context/ResourceTypesLocalStorageContext/ResourceTypesLocalStorageContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,KH:()=>withResourceTypesLocalStorage,dA:()=>ResourceTypesLocalStorageContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypesCollection.js");const ResourceTypesLocalStorageContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({get:()=>{},resourceTypes:null,updateLocalStorage:()=>{}});class ResourceTypesLocalStorageContextProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.runningLocalStorageUpdatePromise=null,this.initEventHandlers()}get defaultState(){return{get:this.get.bind(this),resourceTypes:null,updateLocalStorage:this.updateLocalStorage.bind(this)}}initEventHandlers(){this.handleStorageChange=this.handleStorageChange.bind(this)}componentDidMount(){this.props.context.storage.onChanged.addListener(this.handleStorageChange)}componentWillUnmount(){this.props.context.storage.onChanged.removeListener(this.handleStorageChange)}handleStorageChange(changes){changes.resourceTypes&&this.set(changes.resourceTypes.newValue)}set(resourceTypes){const resourceTypesCollection=new _models_entity_resourceType_resourceTypesCollection__WEBPACK_IMPORTED_MODULE_2__.A(resourceTypes);this.setState({resourceTypes:resourceTypesCollection})}get(){return null===this.state.resourceTypes?(this.loadLocalStorage(),null):this.state.resourceTypes}async loadLocalStorage(){const storageData=await this.props.context.storage.local.get(["resourceTypes"]);storageData.resourceTypes?this.set(storageData.resourceTypes):this.updateLocalStorage()}async updateLocalStorage(){null===this.runningLocalStorageUpdatePromise?(this.runningLocalStorageUpdatePromise=this.props.context.port.request("passbolt.resource-type.get-or-find-all"),await this.runningLocalStorageUpdatePromise,this.runningLocalStorageUpdatePromise=null):await this.runningLocalStorageUpdatePromise}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Provider,{value:this.state},this.props.children)}}ResourceTypesLocalStorageContextProvider.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.L)(ResourceTypesLocalStorageContextProvider);function withResourceTypesLocalStorage(WrappedComponent){return class withResourceTypesLocalStorage extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourceTypesLocalStorageContext.Consumer,null,(resourceTypesLocalStorageContext=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,{resourceTypesLocalStorageContext,resourceTypes:resourceTypesLocalStorageContext.get(),...this.props})))}}}ResourceTypesLocalStorageContextProvider.__docgenInfo={description:"The resource types local storage context provider",methods:[{name:"defaultState",docblock:"Returns the default component state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Returns the default component state"},{name:"initEventHandlers",docblock:"Initialize the component event handlers",modifiers:[],params:[],returns:null,description:"Initialize the component event handlers"},{name:"handleStorageChange",docblock:"Handles update of the resource types in the local storage.",modifiers:[],params:[{name:"changes",optional:!1}],returns:null,description:"Handles update of the resource types in the local storage."},{name:"set",docblock:"Set resourceTypes.\n@param {Array<Object>} resourceTypes The resource types to set.\n@private",modifiers:[],params:[{name:"resourceTypes",description:"The resource types to set.",type:{name:"Array",elements:[{name:"Object"}]},optional:!1}],returns:null,description:"Set resourceTypes."},{name:"get",docblock:"Get the resource types from the local storage and/or init them if not the case already.\n@returns {ResourceTypesCollection|null}",modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"ResourceTypesCollection"}]}},description:"Get the resource types from the local storage and/or init them if not the case already."},{name:"loadLocalStorage",docblock:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation.\n@returns {Promise<void>}\n@private",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Load the resource types from the local storage if it is available.\nIf the local storage is not yet initialised, then it asks for its initialisation."},{name:"updateLocalStorage",docblock:"Forces the update of the resource types in the local storage.\n@return {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Forces the update of the resource types in the local storage."}],displayName:"ResourceTypesLocalStorageContextProvider",props:{context:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/models/entity/resourceType/resourceTypesCollection.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V1:()=>resourceTypesCollectionDto,XB:()=>resourceTypesV4CollectionDto,Yd:()=>resourceTypesV5CollectionDto});var _resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/resourceType/resourceTypeEntity.test.data.js");const resourceTypesCollectionDto=()=>[(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.m$)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.KD)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G6)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Lt)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G9)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Tl)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.tS)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.mF)()],resourceTypesV4CollectionDto=()=>[(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.m$)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.KD)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G6)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Lt)()],resourceTypesV5CollectionDto=()=>[(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.G9)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.Tl)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.tS)(),(0,_resourceTypeEntity_test_data__WEBPACK_IMPORTED_MODULE_0__.mF)()]},"./src/shared/models/entity/totp/totpDto.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gV:()=>defaultTotpDto});__webpack_require__("./src/shared/models/entity/totp/totpEntity.js");const defaultTotpDto=(data={})=>Object.assign({secret_key:"DAV3DS4ERAAF5QGH",period:30,digits:6,algorithm:"SHA1"},data)},"./src/shared/models/passwordPolicies/PassphraseGeneratorSettingsDto.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>defaultPassphraseGeneratorSettingsDto});const defaultPassphraseGeneratorSettingsDto=(data={})=>({words:9,word_separator:" ",word_case:"lowercase",...data})},"./src/shared/models/passwordPolicies/PasswordGeneratorSettingsDto.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>defaultPasswordGeneratorSettingsDto});const defaultPasswordGeneratorSettingsDto=(data={})=>({length:18,mask_upper:!0,mask_lower:!0,mask_digit:!0,mask_char1:!0,mask_parenthesis:!0,mask_char2:!0,mask_char3:!0,mask_char4:!0,mask_char5:!0,mask_emoji:!1,exclude_look_alike_chars:!0,...data})},"./src/shared/models/passwordPolicies/PasswordPoliciesDto.test.data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>defaultPasswordPoliciesDto,n:()=>configuredPasswordPoliciesDto});var uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),_PasswordGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/passwordPolicies/PasswordGeneratorSettingsDto.test.data.js"),_PassphraseGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/passwordPolicies/PassphraseGeneratorSettingsDto.test.data.js");const defaultPasswordPoliciesDto=(data={})=>({default_generator:"password",external_dictionary_check:!0,password_generator_settings:(0,_PasswordGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_0__._)(),passphrase_generator_settings:(0,_PassphraseGeneratorSettingsDto_test_data__WEBPACK_IMPORTED_MODULE_1__.N)(),source:"default",...data}),configuredPasswordPoliciesDto=(data={})=>defaultPasswordPoliciesDto({id:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),created:"2023-07-01T13:59:11+00:00",created_by:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),modified:"2023-08-01T13:59:11+00:00",modified_by:(0,uuid__WEBPACK_IMPORTED_MODULE_2__.A)(),...data})},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}}}]);