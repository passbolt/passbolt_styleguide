/*! For license information please see react-extension-components-ResourceFolderDetails-DisplayResourceFolderDetails-DisplayResourceFolderDetailsActivity-test-stories.09ad3f3e.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[8590],{"./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/lib/Settings/UserSettings.js"),_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/test/fixture/Settings/userSettings.js"),_DisplayResourceFolderDetailsActivity__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/ResourceFolderDetails/DisplayResourceFolderDetailsActivity",component:_DisplayResourceFolderDetailsActivity__WEBPACK_IMPORTED_MODULE_3__.A},context={siteSettings:{getServerTimezone:()=>(new Date).toDateString()},userSettings:new _shared_lib_Settings_UserSettings__WEBPACK_IMPORTED_MODULE_4__.A(_test_fixture_Settings_userSettings__WEBPACK_IMPORTED_MODULE_2__.A),port:{request:()=>[{action_log_id:"6aada140-fe8b-5e69-a90f-ae0cec6d3dcf",type:"Folders.created",creator:{profile:{first_name:"Ada",last_name:"Lovelace"}}}]}},Initial=(args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_1__.A.Provider,{value:context},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__.fS,{initialEntries:["/"]},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"panel aside"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__.qh,{component:routerProps=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DisplayResourceFolderDetailsActivity__WEBPACK_IMPORTED_MODULE_3__.A,{...args,...routerProps})}))))).bind({});Initial.args={resourceWorkspaceContext:{details:{folder:{id:"9e03fd73-04c0-5514-95fa-1a6cf2c7c093",name:"Accounting",created:"2020-02-01T00:00:00+00:00",modified:"2020-02-01T00:00:00+00:00",created_by:"f848277c-5398-58f8-a82a-72397af2d450",modified_by:"f848277c-5398-58f8-a82a-72397af2d450",permission:{id:"6aada140-fe8b-5e69-a90f-ae0cec6d3dcf",aco:"Folder",aco_foreign_key:"9e03fd73-04c0-5514-95fa-1a6cf2c7c093",aro:"User",aro_foreign_key:"f848277c-5398-58f8-a82a-72397af2d450",type:1,created:"2020-05-11T10:11:13+00:00",modified:"2020-05-11T10:11:13+00:00"},folder_parent_id:null,personal:!1}}}};const __namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"args => <AppContext.Provider value={context}>\n    <MemoryRouter initialEntries={['/']}>\n      <div className=\"panel aside\">\n        <Route component={routerProps => <DisplayResourceFolderDetailsActivity {...args} {...routerProps} />}></Route>\n      </div>\n    </MemoryRouter>\n  </AppContext.Provider>",...Initial.parameters?.docs?.source}}}},"./src/react-extension/components/Common/Avatar/GroupAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class GroupAvatar extends react__WEBPACK_IMPORTED_MODULE_0__.Component{getAltText(){return this.props.t("Avatar of the {{group_name}} group.",{group_name:this.props.group?.name})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"avatar user-avatar"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 42","aria-labelledby":"svg-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:"svg-title"},this.getAltText()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{fill:"#939598",cx:"21",cy:"21",r:"21"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"white",d:"m36.59,24.69h-9.55c-.94,0-1.84.23-2.66.64h2.68c2.32,0,4.49.9,6.13,2.54,1.54,1.54,2.42,3.56,2.52,5.72,1.94-2.26,3.35-4.97,4.09-7.94-.94-.63-2.05-.96-3.21-.96Zm-9.65,1.84h-12.33c-2.01,0-3.89.78-5.31,2.2-1.42,1.42-2.2,3.3-2.2,5.31v.44c3.53,3.64,8.45,5.91,13.9,5.91s9.96-2.08,13.45-5.45v-.89c0-2.01-.78-3.89-2.2-5.31-1.42-1.42-3.3-2.2-5.31-2.2Zm1.02-6.02c1.03.91,2.38,1.48,3.86,1.48,3.21,0,5.81-2.61,5.81-5.81s-2.61-5.81-5.81-5.81c-1.24,0-2.39.39-3.33,1.06.66,1.23,1.04,2.63,1.04,4.12,0,1.85-.58,3.56-1.56,4.97Zm-7.19,2.53c4.14,0,7.51-3.37,7.51-7.51s-3.37-7.51-7.51-7.51-7.51,3.37-7.51,7.51,3.37,7.51,7.51,7.51Z"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"white",d:"m32.25,28.73c-1.42-1.42-3.3-2.2-5.31-2.2h-12.33c-2.01,0-3.89.78-5.31,2.2-1.42,1.42-2.2,3.3-2.2,5.31v.44c3.53,3.64,8.45,5.91,13.9,5.91s9.96-2.08,13.45-5.45v-.89c0-2.01-.78-3.89-2.2-5.31Zm-11.48-5.69c4.14,0,7.51-3.37,7.51-7.51s-3.37-7.51-7.51-7.51-7.51,3.37-7.51,7.51,3.37,7.51,7.51,7.51Zm-6.28,2.29h2.14c-.13-.19-.28-.37-.44-.54-.79-.79-1.85-1.23-2.97-1.23h-6.9c-1.12,0-2.18.44-2.97,1.23-.44.44-.76.97-.97,1.54.71,2.49,1.91,4.78,3.49,6.75.21-1.97,1.07-3.8,2.49-5.21,1.63-1.64,3.81-2.54,6.13-2.54Zm-4.72-3.72c1.4,0,2.64-.7,3.41-1.76-.73-1.27-1.15-2.74-1.15-4.31,0-.53.06-1.05.15-1.56-.68-.48-1.51-.77-2.41-.77-2.32,0-4.2,1.88-4.2,4.2s1.88,4.2,4.2,4.2Z"})))}}GroupAvatar.propTypes={group:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,t:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(GroupAvatar);GroupAvatar.__docgenInfo={description:"",methods:[{name:"getAltText",docblock:"Get image alternative text\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get image alternative text"}],displayName:"GroupAvatar",props:{group:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Avatar/UserAvatar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const DEFAULT_AVATAR_URL_REGEXP=/img\/avatar\/user(_medium)?\.png$/;class UserAvatar extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{error:!1}}bindCallbacks(){this.handleError=this.handleError.bind(this)}get avatarUrl(){return this.props?.user?.profile?.avatar?.url?.medium}propsHasUrl(){return Boolean(this.avatarUrl)}propsUrlHasProtocol(){return this.avatarUrl.startsWith("https://")||this.avatarUrl.startsWith("http://")}formatUrl(url){return`${this.props.baseUrl}/${url}`}isDefaultAvatarUrlFromApi(){return DEFAULT_AVATAR_URL_REGEXP.test(this.avatarUrl)}getAvatarSrc(){return this.propsHasUrl()?this.propsUrlHasProtocol()?this.avatarUrl:this.formatUrl(this.avatarUrl):null}handleError(){console.error(`Could not load avatar image url: ${this.getAvatarSrc()}`),this.setState({error:!0})}getAltText(){const user=this.props?.user;return user?.first_name&&user?.last_name?this.props.t("Avatar of user {{first_name}} {{last_name}}.",{firstname:user.first_name,lastname:user.last_name}):"..."}render(){const srcAvatar=this.getAvatarSrc(),shouldDisplayDefaultAvatar=this.state.error||this.isDefaultAvatarUrlFromApi()||!srcAvatar;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`${this.props.className} ${this.props.attentionRequired?"attention-required":""}`},shouldDisplayDefaultAvatar&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 42","aria-labelledby":"svg-title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:"svg-title"},this.getAltText()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{fill:"#939598",cx:"21",cy:"21",r:"21"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#ffffff",d:"m21,23.04c-4.14,0-7.51-3.37-7.51-7.51s3.37-7.51,7.51-7.51,7.51,3.37,7.51,7.51-3.37,7.51-7.51,7.51Z"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#ffffff",d:"m27.17,26.53h-12.33c-2.01,0-3.89.78-5.31,2.2-1.42,1.42-2.2,3.3-2.2,5.31v1.15c3.55,3.42,8.36,5.53,13.67,5.53s10.13-2.11,13.67-5.53v-1.15c0-2.01-.78-3.89-2.2-5.31-1.42-1.42-3.3-2.2-5.31-2.2Z"})),!shouldDisplayDefaultAvatar&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{src:srcAvatar,onError:this.handleError,alt:this.getAltText()}),this.props.attentionRequired&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"exclamation"}))}}UserAvatar.defaultProps={className:"avatar user-avatar"},UserAvatar.propTypes={baseUrl:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,user:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,attentionRequired:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,className:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,t:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(UserAvatar);UserAvatar.__docgenInfo={description:"",methods:[{name:"getDefaultState",docblock:"Get default state\n@returns {*}",modifiers:[],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"avatarUrl",docblock:"Returns the current avatar URL from the props\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the current avatar URL from the props"},{name:"propsHasUrl",docblock:"Return true if the user from props contains a valid profile with avatar url properties\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the user from props contains a valid profile with avatar url properties"},{name:"propsUrlHasProtocol",docblock:"Check if the url has a protocol like http or https?\n@todo only check https for now\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Check if the url has a protocol like http or https?"},{name:"formatUrl",docblock:"Format the avatar url to point on the site url.\n@param {string} url The relative url\n@returns {string}",modifiers:[],params:[{name:"url",description:"The relative url",type:{name:"string"},optional:!1}],returns:{type:{name:"string"}},description:"Format the avatar url to point on the site url."},{name:"isDefaultAvatarUrlFromApi",docblock:"Returns true if the given URL matches a default avatar from the API\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the given URL matches a default avatar from the API"},{name:"getAvatarSrc",docblock:"Get the user avatar url. If the user has no avatar defined, return the default one.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar url. If the user has no avatar defined, return the default one."},{name:"handleError",docblock:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle error while loading the user avatar image.\nBy instance when the image is not present on the server."},{name:"getAltText",docblock:"Get the user avatar image alternative text.\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the user avatar image alternative text."}],displayName:"UserAvatar",props:{className:{defaultValue:{value:'"avatar user-avatar"',computed:!1},description:"",type:{name:"string"},required:!1},baseUrl:{description:"",type:{name:"string"},required:!1},user:{description:"",type:{name:"object"},required:!1},attentionRequired:{description:"",type:{name:"bool"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/ResourceFolderDetails/DisplayResourceFolderDetails/DisplayResourceFolderDetailsActivity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Avatar/UserAvatar.js"),_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Avatar/GroupAvatar.js"),_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/react-extension/contexts/ResourceWorkspaceContext.js"),_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/utils/dateUtils.js");class DisplayResourceFolderDetailsActivity extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{activities:null,activitiesPage:1,loadingMore:!1,open:!1,loading:!0}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this)}async componentDidUpdate(prevProps){await this.handleResourceChange(prevProps.resourceWorkspaceContext.details.folder)}async handleResourceChange(previousFolder){if(this.state.open&&this.folder.id!==previousFolder.id){const state=Object.assign({},this.defaultState,{open:!0});await this.setState(state),await this.fetch(),this.setState({loading:!1})}}async handleTitleClickEvent(){if(this.state.open){const defaultState=this.defaultState;this.setState(defaultState)}else await this.setState({loading:!0,open:!0}),await this.fetch(),this.setState({loading:!1})}async handleMoreClickEvent(){const activitiesPage=this.state.activitiesPage+1;await this.setState({activitiesPage,loadingMore:!0}),await this.fetch(),this.setState({loadingMore:!1})}async fetch(){const options={limit:5,page:this.state.activitiesPage},newActivities=await this.props.context.port.request("passbolt.actionlogs.find-all-for","Folder",this.folder.id,options);let activities;activities=this.state.activitiesPage>1?[...this.state.activities||[],...newActivities]:[...newActivities],this.setState({activities})}getActivityCreatorFullName(user){return`${user.profile.first_name} ${user.profile.last_name}`}getPermissionAroName(permission){if(permission.user){const profile=permission.user.profile;return`${profile.first_name} ${profile.last_name}`}return permission.group.name}getPermissionLabel(permission){switch(permission.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}getPermissionChangeTypeLabel(type){switch(type){case"created":return this.translate("new");case"updated":return this.translate("updated");case"removed":return this.translate("deleted")}}renderFolderCreatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," created folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderFolderUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," updated folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderSharedActivityPermissionChangeItem(permission,changeType){const permissionLabel=this.getPermissionLabel(permission),permissionAroName=this.getPermissionAroName(permission),changeTypeLabel=this.getPermissionChangeTypeLabel(changeType);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:permission.id,className:"clearfix"},permission.user&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:permission.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),permission.group&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_GroupAvatar__WEBPACK_IMPORTED_MODULE_2__.A,{group:permission.group}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},permissionAroName),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"permission-type"}," - ",permissionLabel)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"type"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:changeType},changeTypeLabel)))}renderPermissionsUpdatedActivity(activity){const activityCreatorName=this.getActivityCreatorFullName(activity.creator),folderName=this.folder.name,activityFormattedDate=(0,_shared_utils_dateUtils__WEBPACK_IMPORTED_MODULE_7__.kD)(activity.created,this.props.t,this.props.context.locale);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{key:activity.action_log_id,className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"creator"},{activityCreatorName})," changed permissions of folder ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"item"},{folderName})," with")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"subinfo light"},activityFormattedDate),react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"permissions-list"},activity.data.permissions.added.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"created"))),activity.data.permissions.updated.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"updated"))),activity.data.permissions.removed.map((permission=>this.renderSharedActivityPermissionChangeItem(permission,"removed")))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Avatar_UserAvatar__WEBPACK_IMPORTED_MODULE_1__.A,{user:activity.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderUnknownActivity(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:"usercard-detailed-col-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Unknown activity, please contact your administrator."))))}renderActivity(activity){let render;switch(activity.type){case"Folders.created":render=this.renderFolderCreatedActivity(activity);break;case"Folders.updated":render=this.renderFolderUpdatedActivity(activity);break;case"Permissions.updated":render=this.renderPermissionsUpdatedActivity(activity);break;default:render=this.renderUnknownActivity(activity)}return render}isMoreButtonVisible(){return null!==this.state.activities&&!this.state.activities.some((activity=>"Folders.created"===activity.type))}get folder(){return this.props.resourceWorkspaceContext.details.folder}get translate(){return this.props.t}render(){const loadingActivities=null===this.state.activities,isMoreButtonVisible=this.isMoreButtonVisible();return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"activity accordion sidebar-section "+(this.state.open?"":"closed")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:"link no-border",onClick:this.handleTitleClickEvent},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Activity"),this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__.A,{name:"caret-down"}),!this.state.open&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__.A,{name:"caret-right"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accordion-content"},loadingActivities&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"processing-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_components_Icons_Icon__WEBPACK_IMPORTED_MODULE_5__.A,{name:"spinner"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"processing-text"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"Retrieving activities"))),!loadingActivities&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"ready"},this.state.activities.map((activity=>this.renderActivity(activity)))),isMoreButtonVisible&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"actions"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleMoreClickEvent,disabled:this.state.loadingMore,className:"link no-border action-logs-load-more "+(this.state.loadingMore?"processing":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_6__.x6,null,"More")))))))}}DisplayResourceFolderDetailsActivity.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,resourceWorkspaceContext:prop_types__WEBPACK_IMPORTED_MODULE_8___default().any,t:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_shared_context_AppContext_AppContext__WEBPACK_IMPORTED_MODULE_3__.L)((0,_contexts_ResourceWorkspaceContext__WEBPACK_IMPORTED_MODULE_4__.Qw)((0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.CI)("common")(DisplayResourceFolderDetailsActivity)));DisplayResourceFolderDetailsActivity.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Get default state\n@returns {*}",modifiers:["get"],params:[],returns:{type:{name:"mixed"}},description:"Get default state"},{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleResourceChange",docblock:"Check if the folder has changed and fetch\n@param previousFolder",modifiers:["async"],params:[{name:"previousFolder",optional:!1}],returns:null,description:"Check if the folder has changed and fetch"},{name:"handleTitleClickEvent",docblock:"handle when the users click on the section header.\nOpen/Close it.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the section header.\nOpen/Close it."},{name:"handleMoreClickEvent",docblock:"handle when the users click on the more button.",modifiers:["async"],params:[],returns:null,description:"handle when the users click on the more button."},{name:"fetch",docblock:"Fetch the folder activities\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Fetch the folder activities"},{name:"getActivityCreatorFullName",docblock:"Get an activity creator full name\n@param {object} user The creator\n@return string",modifiers:[],params:[{name:"user",description:"The creator",type:{name:"object"},optional:!1}],returns:{description:"string"},description:"Get an activity creator full name"},{name:"getPermissionAroName",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionLabel",docblock:"Get a permission aro name\n@param {object} permission The permission",modifiers:[],params:[{name:"permission",description:"The permission",type:{name:"object"},optional:!1}],returns:null,description:"Get a permission aro name"},{name:"getPermissionChangeTypeLabel",docblock:"Get permission change type label\n@param {string} type The target change type",modifiers:[],params:[{name:"type",description:"The target change type",type:{name:"string"},optional:!1}],returns:null,description:"Get permission change type label"},{name:"renderFolderCreatedActivity",docblock:"Render a created activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a created activity."},{name:"renderFolderUpdatedActivity",docblock:"Render an updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render an updated activity."},{name:"renderSharedActivityPermissionChangeItem",docblock:"Render a shared activity permission change item.\n@param {object} permission The target permission\n@param {string} changeType The change type\n@returns {JSX}",modifiers:[],params:[{name:"permission",description:"The target permission",type:{name:"object"},optional:!1},{name:"changeType",description:"The change type",type:{name:"string"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a shared activity permission change item."},{name:"renderPermissionsUpdatedActivity",docblock:"Render a permissions updated activity.\n@param {object} activity The target activity\n@returns {JSX}",modifiers:[],params:[{name:"activity",description:"The target activity",type:{name:"object"},optional:!1}],returns:{type:{name:"JSX"}},description:"Render a permissions updated activity."},{name:"renderUnknownActivity",docblock:"Render an unknown activity.\n@returns {JSX}",modifiers:[],params:[],returns:{type:{name:"JSX"}},description:"Render an unknown activity."},{name:"renderActivity",docblock:"Render an activity\n@param {object} activity The activity to render",modifiers:[],params:[{name:"activity",description:"The activity to render",type:{name:"object"},optional:!1}],returns:null,description:"Render an activity"},{name:"isMoreButtonVisible",docblock:"Is the more button visible\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is the more button visible"},{name:"folder",docblock:"Returns the current detailed folder",modifiers:["get"],params:[],returns:null,description:"Returns the current detailed folder"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"DisplayResourceFolderDetailsActivity",props:{context:{description:"",type:{name:"any"},required:!1},resourceWorkspaceContext:{description:"",type:{name:"any"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/lib/Object/getPropValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(obj,path)=>path.split(".").reduce(((accumulator,key)=>accumulator?.[key]),obj)},"./src/react-extension/lib/Sanitize/sanitizeUrl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,P:()=>urlProtocols});const __WEBPACK_DEFAULT_EXPORT__=(uri,options)=>{if(void 0===uri||"string"!=typeof uri||!uri.length)return!1;if((options=options||{}).whitelistedProtocols&&!Array.isArray(options.whitelistedProtocols))throw new TypeError("The whitelistedProtocols should be an array of string.");if(options.defaultProtocol&&"string"!=typeof options.defaultProtocol)throw new TypeError("The defaultProtocol should be a string.");const whitelistedProtocols=options.whitelistedProtocols||[urlProtocols.HTTP,urlProtocols.HTTPS],blacklistedProtocols=[urlProtocols.JAVASCRIPT],defaultProtocol=options.defaultProtocol||"";!/^((?!:\/\/).)*:\/\//.test(uri)&&defaultProtocol&&(uri=`${defaultProtocol}//${uri}`);try{const url=new URL(uri);return!blacklistedProtocols.includes(url.protocol)&&(!!whitelistedProtocols.includes(url.protocol)&&url.href)}catch(error){return!1}},urlProtocols={FTP:"http:",FTPS:"https:",HTTP:"http:",HTTPS:"https:",JAVASCRIPT:"javascript:",SSH:"ssh:"}},"./src/react-extension/test/fixture/Settings/userSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={"user.settings.trustedDomain":new URL(window.location.href).origin,"user.firstname":"Ada","user.id":"f848277c-5398-58f8-a82a-72397af2d450","user.lastname":"Lovelace","user.settings.securityToken.code":"TST","user.settings.securityToken.color":"#000000","user.settings.securityToken.textColor":"#FFFFFF","user.username":"ada@passbolt.com","user.settings.locale":"en-UK","user.settings.theme":"default"}},"./src/shared/lib/Settings/UserSettings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>UserSettings});class UserSettings{constructor(settings){this.settings=settings}get id(){return this.settings["user.id"]}get fullName(){return`${this.settings["user.firstname"]} ${this.settings["user.lastname"]}`}get username(){return this.settings["user.username"]}getTheme(){return this.settings["user.settings.theme"]}getTrustedDomain(){return this.settings["user.settings.trustedDomain"]}getSecurityToken(){return{code:this.settings["user.settings.securityToken.code"],backgroundColor:this.settings["user.settings.securityToken.color"],textColor:this.settings["user.settings.securityToken.textColor"]}}get locale(){return this.settings["user.settings.locale"]}}},"./node_modules/uuid/dist/esm-browser/stringify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});for(var _validate_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid/dist/esm-browser/validate.js"),byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const __WEBPACK_DEFAULT_EXPORT__=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__.A)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify=__webpack_require__("./node_modules/uuid/dist/esm-browser/stringify.js");const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,stringify.A)(rnds)}},"./node_modules/uuid/dist/esm-browser/validate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_validate});const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)}},"./node_modules/validator/es/lib/util/assertString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function assertString(input){if(!("string"==typeof input||input instanceof String)){var invalidType=_typeof(input);throw null===input?invalidType="null":"object"===invalidType&&(invalidType=input.constructor.name),new TypeError("Expected a string but received a ".concat(invalidType))}}__webpack_require__.d(__webpack_exports__,{A:()=>assertString})}}]);