/*! For license information please see react-extension-components-Resource-UploadQrCode-UploadQrCode-test-stories.8b9accad.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[2983],{"./src/react-extension/components/Resource/UploadQrCode/UploadQrCode.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,__namedExportsOrder:()=>__namedExportsOrder,default:()=>UploadQrCode_test_stories});const UploadQrCode_test_stories={title:"Components/Resource/UploadQrCode",component:__webpack_require__("./src/react-extension/components/Resource/UploadQrCode/UploadQrCode.js").A},Initial={args:function defaultProps(data={}){const defaultData={title:"Create Standalone TOTP",action:"Create",onClose:jest.fn(),onSubmit:jest.fn()};return Object.assign(defaultData,data)}()},__namedExportsOrder=["Initial"];Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"{\n  args: defaultProps()\n}",...Initial.parameters?.docs?.source}}}},"./src/img/svg/close.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgClose(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m12 4-8 8M4 4l8 8"})))}},"./src/img/svg/info.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgInfo(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:17,height:18,fill:"none",viewBox:"0 0 17 18"},props),_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"var(--icon-color)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.5 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15M8.5 12V9M8.5 6h.008"})))}},"./src/img/svg/spinner.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function SvgSpinner(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({width:18,height:18,fill:"none",className:"svg-icon spinner",viewBox:"0 0 18 18"},props),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"background",cx:8,cy:8,r:8,fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(1 1)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{id:"loading",r:8,fill:"none",stroke:"var(--spinner-color)",strokeLinecap:"round",strokeWidth:"var(--spinner-stroke-width)",transform:"translate(9 9)"})))}},"./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DialogWrapper_DialogWrapper});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),svg_close=__webpack_require__("./src/img/svg/close.svg");class DialogCloseButton extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleCloseClick=this.handleCloseClick.bind(this)}handleCloseClick(){this.props.onClose()}render(){return react.createElement("button",{type:"button",disabled:this.props.disabled,className:"dialog-close button button-transparent",onClick:this.handleCloseClick},react.createElement(svg_close.A,{className:"svg-icon close"}),react.createElement("span",{className:"visually-hidden"},react.createElement(es.x6,null,"Close")))}}DialogCloseButton.propTypes={onClose:prop_types_default().func,disabled:prop_types_default().bool};const DialogCloseButton_DialogCloseButton=(0,es.CI)("common")(DialogCloseButton);DialogCloseButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleCloseClick",docblock:"Handle close click.\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle close click."}],displayName:"DialogCloseButton",props:{onClose:{description:"",type:{name:"func"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1}}};var Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),Tooltip=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js");class DialogWrapper extends react.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleKeyDown=this.handleKeyDown.bind(this),this.handleClose=this.handleClose.bind(this)}handleKeyDown(event){27===event.keyCode&&this.handleClose()}handleClose(){this.props.disabled||this.props.onClose()}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown,{capture:!1})}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown,{capture:!1})}render(){return react.createElement("div",{className:`${this.props.className} dialog-wrapper`},react.createElement("div",{className:"dialog"},react.createElement("div",{className:"dialog-header"},react.createElement("div",{className:"dialog-title-wrapper"},react.createElement("h2",null,react.createElement("span",{className:"dialog-header-title"},this.props.title),this.props.subtitle&&react.createElement("span",{className:"dialog-header-subtitle"},this.props.subtitle)),this.props.tooltip&&""!==this.props.tooltip&&react.createElement(Tooltip.A,{message:this.props.tooltip},react.createElement(Icon.A,{name:"info-circle"}))),react.createElement(DialogCloseButton_DialogCloseButton,{onClose:this.handleClose,disabled:this.props.disabled})),react.createElement("div",{className:"dialog-content"},this.props.children)))}}DialogWrapper.propTypes={children:prop_types_default().node,className:prop_types_default().string,title:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node,prop_types_default().string]),subtitle:prop_types_default().string,tooltip:prop_types_default().string,disabled:prop_types_default().bool,onClose:prop_types_default().func};const DialogWrapper_DialogWrapper=DialogWrapper;DialogWrapper.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleKeyDown",docblock:"Handle key down\n@param {ReactEvent} event The triggered event",modifiers:[],params:[{name:"event",description:"The triggered event",type:{name:"ReactEvent"},optional:!1}],returns:null,description:"Handle key down"},{name:"handleClose",docblock:"Handle close",modifiers:[],params:[],returns:null,description:"Handle close"}],displayName:"DialogWrapper",props:{children:{description:"",type:{name:"node"},required:!1},className:{description:"",type:{name:"string"},required:!1},title:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},subtitle:{description:"",type:{name:"string"},required:!1},tooltip:{description:"",type:{name:"string"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onClose:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormCancelButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.disabled||this.props.onClick()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",disabled:this.props.disabled,className:"link cancel",onClick:this.handleClick},this.props.value)}}FormCancelButton.defaultProps={value:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_1__.x6,null,"Cancel")},FormCancelButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,value:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_2___default().node),prop_types__WEBPACK_IMPORTED_MODULE_2___default().node,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string])};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.CI)("common")(FormCancelButton);FormCancelButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleClick",docblock:"Handle cancel click\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Handle cancel click"}],displayName:"FormCancelButton",props:{value:{defaultValue:{value:"<Trans>Cancel</Trans>",computed:!1},description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}}},"./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/img/svg/spinner.svg"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class FormSubmitButton extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallbacks()}bindCallbacks(){this.getClassName=this.getClassName.bind(this)}getClassName(){let name="button primary form";return this.props.warning?name+=" warning":this.props.attention&&(name+=" attention"),this.props.disabled&&(name+=" disabled"),this.props.processing&&(name+=" processing"),this.props.big&&(name+=" big"),this.props.medium&&(name+=" medium"),this.props.fullWidth&&(name+=" full-width"),name}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"submit",className:this.getClassName(),disabled:this.props.disabled},this.props.value||react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"Save"),this.props.processing&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_spinner_svg__WEBPACK_IMPORTED_MODULE_1__.A,null))}}FormSubmitButton.defaultProps={warning:!1,attention:!1},FormSubmitButton.propTypes={processing:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().node),prop_types__WEBPACK_IMPORTED_MODULE_3___default().node,prop_types__WEBPACK_IMPORTED_MODULE_3___default().string]),warning:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,attention:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,big:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,medium:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,fullWidth:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(FormSubmitButton);FormSubmitButton.__docgenInfo={description:"",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"getClassName",docblock:"Get the input button classname\n@returns {string}",modifiers:[],params:[],returns:{type:{name:"string"}},description:"Get the input button classname"}],displayName:"FormSubmitButton",props:{warning:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},attention:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},processing:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},value:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"},{name:"string"}]},required:!1},big:{description:"",type:{name:"bool"},required:!1},medium:{description:"",type:{name:"bool"},required:!1},fullWidth:{description:"",type:{name:"bool"},required:!1}}}},"./src/react-extension/components/Common/Tooltip/Tooltip.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);class Tooltip extends react__WEBPACK_IMPORTED_MODULE_0__.Component{render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tooltip",tabIndex:"0"},this.props.children,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:`tooltip-text ${this.props.direction}`},this.props.message))}}Tooltip.defaultProps={direction:"right"},Tooltip.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,message:prop_types__WEBPACK_IMPORTED_MODULE_1___default().any.isRequired,direction:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=Tooltip;Tooltip.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{direction:{defaultValue:{value:"'right'",computed:!1},description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"any"},required:!1},message:{description:"",type:{name:"any"},required:!0}}}},"./src/react-extension/components/Resource/UploadQrCode/UploadQrCode.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/components/Common/Dialog/DialogWrapper/DialogWrapper.js"),_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormSubmitButton.js"),_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/react-extension/components/Common/Inputs/FormSubmitButton/FormCancelButton.js"),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/react-extension/components/Common/Tooltip/Tooltip.js"),html5_qrcode__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/html5-qrcode/esm/index.js"),_shared_models_standaloneTotp_StandaloneTotpViewModel__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/shared/models/standaloneTotp/StandaloneTotpViewModel.js"),_img_svg_info_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/img/svg/info.svg");class UploadQrCode extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}get defaultState(){return{processing:!1,fileToImport:null,fileError:""}}bindHandlers(){this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFileSelected=this.handleFileSelected.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}createReferences(){this.fileUploaderRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef()}hasAllInputDisabled(){return this.state.processing}get selectedFilename(){return this.state.fileToImport?.name||""}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFileSelected(event){const[fileToImport]=event.target.files;await this.resetValidation(),this.setState({fileToImport})}handleCancel(){this.close()}async handleSubmit(event){if(event.preventDefault(),this.state.processing)return;if(this.toggleProcessing(),!await this.validate())return void await this.toggleProcessing();let standaloneTotp;try{const url=await this.getDataFromQrCode();standaloneTotp=_shared_models_standaloneTotp_StandaloneTotpViewModel__WEBPACK_IMPORTED_MODULE_7__.A.createStandaloneTotpFromUrl(url)}catch(error){return void this.handleImportError(error)}this.props.onSubmit(standaloneTotp),this.handleImportSuccess()}toggleProcessing(){const prev=this.state.processing;this.setState({processing:!prev})}close(){this.props.onClose()}async getDataFromQrCode(){const html5QrCode=new html5_qrcode__WEBPACK_IMPORTED_MODULE_6__.j9("dialog-upload-qr-code",{formatsToSupport:[html5_qrcode__WEBPACK_IMPORTED_MODULE_6__.Jl.QR_CODE]}),result=await html5QrCode.scanFileV2(this.state.fileToImport,!1);return new URL(decodeURIComponent(result.decodedText))}handleImportSuccess(){this.toggleProcessing(),this.close()}handleImportError(error){const isUserAbortsOperation="UserAbortsOperationError"===error.name,isNoQrCodeFound="NotFoundException"===error.name;let fileError="";this.toggleProcessing(),isUserAbortsOperation||(isNoQrCodeFound?fileError=this.translate("No QR code found."):(console.error(error),fileError=this.translate("The QR code is incomplete."))),this.setState({fileError})}async validate(){return this.setState({fileError:""}),await this.validateFileInput(),""===this.state.fileError}validateFileInput(){const file=this.state.fileToImport;let fileError="";return file||(fileError=this.translate("A file is required.")),new Promise((resolve=>{this.setState({fileError},resolve)}))}async resetValidation(){await this.setState({fileError:""})}get translate(){return this.props.t}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Dialog_DialogWrapper_DialogWrapper__WEBPACK_IMPORTED_MODULE_1__.A,{title:this.props.title,className:"upload-qr-code-dialog",disabled:this.hasAllInputDisabled(),onClose:this.handleCancel},react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input file required ${this.state.fileError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"file",id:"dialog-upload-qr-code",ref:this.fileUploaderRef,onChange:this.handleFileSelected,accept:".png, .jpg, .jpeg"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"label-required-inline"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"dialog-import-passwords"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Upload a QR code")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_5__.A,{message:this.translate("Only PNG or JPEG file are accepted.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_img_svg_info_svg__WEBPACK_IMPORTED_MODULE_8__.A,null))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"input-file-inline"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"text",disabled:!0,placeholder:this.translate("QR code picture"),defaultValue:this.selectedFilename}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"button primary",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleSelectFile},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_4__.x6,null,"Select a file")))),this.state.fileError&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"error-message"},this.state.fileError))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"submit-wrapper clearfix"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormCancelButton__WEBPACK_IMPORTED_MODULE_3__.A,{disabled:this.hasAllInputDisabled(),onClick:this.handleCancel}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Common_Inputs_FormSubmitButton_FormSubmitButton__WEBPACK_IMPORTED_MODULE_2__.A,{value:this.props.action,disabled:this.hasAllInputDisabled(),processing:this.state.processing}))))}}UploadQrCode.propTypes={title:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string,action:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string,onClose:prop_types__WEBPACK_IMPORTED_MODULE_9___default().func,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_9___default().func,t:prop_types__WEBPACK_IMPORTED_MODULE_9___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.CI)("common")(UploadQrCode);UploadQrCode.__docgenInfo={description:"",methods:[{name:"defaultState",docblock:"Returns the default state",modifiers:["get"],params:[],returns:null,description:"Returns the default state"},{name:"bindHandlers",docblock:"Bind component handlers",modifiers:[],params:[],returns:null,description:"Bind component handlers"},{name:"createReferences",docblock:"Create elements references",modifiers:[],params:[],returns:null,description:"Create elements references"},{name:"hasAllInputDisabled",docblock:"Should input be disabled? True if state is processing\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Should input be disabled? True if state is processing"},{name:"selectedFilename",docblock:"Returns the selected file's name\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the selected file's name"},{name:"handleSelectFile",docblock:"Handle the selection of a file by file explorer",modifiers:[],params:[],returns:null,description:"Handle the selection of a file by file explorer"},{name:"handleFileSelected",docblock:"Handle the event that a file has been selected\n@param event A dom event\n@returns {Promise<void>}",modifiers:["async"],params:[{name:"event",description:"A dom event",optional:!1}],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Handle the event that a file has been selected"},{name:"handleCancel",docblock:"Handle the cancellation of the import",modifiers:[],params:[],returns:null,description:"Handle the cancellation of the import"},{name:"handleSubmit",docblock:"Handle the import submit event\n@param event A dom event",modifiers:["async"],params:[{name:"event",description:"A dom event",optional:!1}],returns:null,description:"Handle the import submit event"},{name:"toggleProcessing",docblock:"Toggle processing state",modifiers:[],params:[],returns:null,description:"Toggle processing state"},{name:"close",docblock:"Close the dialog",modifiers:[],params:[],returns:null,description:"Close the dialog"},{name:"getDataFromQrCode",docblock:"Get data from QR code\n@return {Promise<module:url.URL>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"module:url.URL"}]}},description:"Get data from QR code"},{name:"handleImportSuccess",docblock:"Handle import success",modifiers:[],params:[],returns:null,description:"Handle import success"},{name:"handleImportError",docblock:"Handle import error.\n@param {Object} error The error returned by the background page",modifiers:[],params:[{name:"error",description:"The error returned by the background page",type:{name:"Object"},optional:!1}],returns:null,description:"Handle import error."},{name:"validate",docblock:"Validate the form.\n@return {Promise<boolean>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"boolean"}]}},description:"Validate the form."},{name:"validateFileInput",docblock:"Validate the name input.\n@return {Promise<void>}",modifiers:[],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Validate the name input."},{name:"resetValidation",docblock:"Reset the validation process\n@returns {Promise<void>}",modifiers:["async"],params:[],returns:{type:{name:"Promise",elements:[{name:"void"}]}},description:"Reset the validation process"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"UploadQrCode",props:{title:{description:"",type:{name:"string"},required:!1},action:{description:"",type:{name:"string"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},t:{description:"",type:{name:"func"},required:!1}}}},"./src/shared/constants/inputs.const.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bh:()=>RESOURCE_PASSWORD_MAX_LENGTH,Dt:()=>RESOURCE_NAME_MAX_LENGTH,E1:()=>RESOURCE_USERNAME_MAX_LENGTH,G3:()=>RESOURCE_DESCRIPTION_MAX_LENGTH,UZ:()=>RESOURCE_TAG_MAX_LENGTH,VB:()=>RESOURCE_TOTP_KEY_MAX_LENGTH,Z_:()=>USER_INPUT_MAX_LENGTH,kW:()=>RESOURCE_URI_MAX_LENGTH,nX:()=>RESOURCE_GROUP_NAME_MAX_LENGTH,yN:()=>RESOURCE_FOLDER_NAME_MAX_LENGTH});const USER_INPUT_MAX_LENGTH=128,RESOURCE_GROUP_NAME_MAX_LENGTH=50,RESOURCE_NAME_MAX_LENGTH=255,RESOURCE_USERNAME_MAX_LENGTH=255,RESOURCE_FOLDER_NAME_MAX_LENGTH=256,RESOURCE_TAG_MAX_LENGTH=128,RESOURCE_PASSWORD_MAX_LENGTH=4096,RESOURCE_DESCRIPTION_MAX_LENGTH=1e4,RESOURCE_URI_MAX_LENGTH=1024,RESOURCE_TOTP_KEY_MAX_LENGTH=1024},"./src/shared/models/standaloneTotp/StandaloneTotpViewModel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _constants_inputs_const__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/constants/inputs.const.js"),_totp_TotpViewModel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/totp/TotpViewModel.js");class StandaloneTotpViewModel extends _totp_TotpViewModel__WEBPACK_IMPORTED_MODULE_0__.A{constructor(totpViewModelDto={}){super(totpViewModelDto),this.name=totpViewModelDto.name||"",this.uri=totpViewModelDto.uri||"",totpViewModelDto.resource_type_id&&(this.resource_type_id=totpViewModelDto.resource_type_id),totpViewModelDto.object_type&&(this.object_type=totpViewModelDto.object_type)}static getSchema(){return{type:"object",required:["name","secret_key","period","digits","algorithm"],properties:{name:{type:"string",notEmpty:!0,maxLength:_constants_inputs_const__WEBPACK_IMPORTED_MODULE_1__.Dt},uri:{type:"string",maxLength:_constants_inputs_const__WEBPACK_IMPORTED_MODULE_1__.kW},resource_type_id:{type:"string",format:"uuid"},object_type:{type:"string",enum:["PASSBOLT_RESOURCE_METADATA"]},secret_key:super.getSchema().properties.secret_key,period:super.getSchema().properties.period,digits:super.getSchema().properties.digits,algorithm:super.getSchema().properties.algorithm}}}toResourceDto(){const dto={metadata:{name:this.name,uris:[this.uri]}};return this.resource_type_id&&(dto.resource_type_id=this.resource_type_id,dto.metadata.resource_type_id=this.resource_type_id),this.object_type&&(dto.metadata.object_type=this.object_type),dto}static createStandaloneTotpFromUrl(url){const totp={name:url.pathname.substring(7).split(":").join(": "),uri:url.searchParams.get("issuer")||"",secret_key:url.searchParams.get("secret").toUpperCase(),algorithm:url.searchParams.get("algorithm")||_totp_TotpViewModel__WEBPACK_IMPORTED_MODULE_0__.A.SUPPORTED_ALGORITHMS[0],digits:parseInt(url.searchParams.get("digits"),10)||6,period:parseInt(url.searchParams.get("period"),10)||30},standaloneTotp=new StandaloneTotpViewModel(totp),errors=standaloneTotp.validate();if(errors.hasErrors())throw errors;return standaloneTotp}}const __WEBPACK_DEFAULT_EXPORT__=StandaloneTotpViewModel},"./src/shared/models/totp/TotpViewModel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _entity_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/shared/models/entity/abstract/entityValidationError.js"),_entity_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/models/entity/abstract/entitySchema.js"),_constants_inputs_const__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/shared/constants/inputs.const.js");class TotpViewModel{constructor(resource={}){this.secret_key=resource.secret_key||"",this.period=resource.period??30,this.digits=resource.digits??6,this.algorithm=resource.algorithm||TotpViewModel.SUPPORTED_ALGORITHMS[0]}static getSchema(){return{type:"object",required:["secret_key","period","digits","algorithm"],properties:{secret_key:{type:"string",notEmpty:!0,pattern:/^\s*[A-Za-z2-7\s]+=*\s*$/,maxLength:_constants_inputs_const__WEBPACK_IMPORTED_MODULE_2__.VB},period:{type:"number",minimum:1},digits:{type:"number",maximum:8,minimum:6},algorithm:{type:"string",notEmpty:!0,enum:TotpViewModel.SUPPORTED_ALGORITHMS}}}}toSecretDto(){return{totp:{algorithm:this.algorithm,digits:this.digits,period:this.period,secret_key:this.secret_key.replaceAll(/\s+/g,"").toUpperCase()}}}cloneWithMutation(field,value){const clone={...this,[field]:value};return new this.constructor(clone)}static areSecretsDifferent(a,b){return["secret_key","period","digits","algorithm"].some((key=>a[key]!==b[key]))}validate(){try{_entity_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_1__.A.validate(this.constructor.name,this,this.constructor.getSchema())}catch(error){return error}return new _entity_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_0__.A}validateField(field){try{_entity_abstract_entitySchema__WEBPACK_IMPORTED_MODULE_1__.A.validateProp(field,this[field],this.constructor.getSchema().properties[field])}catch(error){return error}return new _entity_abstract_entityValidationError__WEBPACK_IMPORTED_MODULE_0__.A}isWarningSizeField(field){const schema=this.constructor.getSchema();return this[field].length>=schema.properties[field].maxLength}static get SUPPORTED_ALGORITHMS(){return["SHA1","SHA256","SHA512"]}}const __WEBPACK_DEFAULT_EXPORT__=TotpViewModel}}]);