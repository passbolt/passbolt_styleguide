/*! For license information please see react-extension-components-Administration-ManageSmtpAdministrationSettings-ManageSmtpAdministrationSettings-test-stories.5be02e1c.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpassbolt_styleguide=self.webpackChunkpassbolt_styleguide||[]).push([[9763],{"./src/react-extension/components/Administration/ManageSmtpAdministrationSettings/ManageSmtpAdministrationSettings.test.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithErrorFromServer:()=>WithErrorFromServer,WithKnownSmtpSettings:()=>WithKnownSmtpSettings,WithSmtpSettings:()=>WithSmtpSettings,WithSmtpSettingsFromFile:()=>WithSmtpSettingsFromFile,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ManageSmtpAdministrationSettings_test_stories});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),AppContext=__webpack_require__("./src/shared/context/AppContext/AppContext.js"),AdministrationWorkspaceContext=__webpack_require__("./src/react-extension/contexts/AdministrationWorkspaceContext.js"),DialogContext=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),Icon=__webpack_require__("./src/shared/components/Icons/Icon.js"),SmtpProviders_data=__webpack_require__("./src/react-extension/components/Administration/ManageSmtpAdministrationSettings/SmtpProviders.data.js"),Password=__webpack_require__("./src/shared/components/Password/Password.js"),Select=__webpack_require__("./src/react-extension/components/Common/Select/Select.js"),AdminSmtpSettingsContext=__webpack_require__("./src/react-extension/contexts/AdminSmtpSettingsContext.js"),SendTestMailDialog=__webpack_require__("./src/react-extension/components/Administration/SendTestMailDialog/SendTestMailDialog.js");class DisplayAdministrationWorkspaceActions extends react.Component{constructor(props){super(props),this.bindCallbacks(),this.dialogId=null}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this),this.handleTestClick=this.handleTestClick.bind(this),this.handleCloseDialog=this.handleCloseDialog.bind(this)}async handleSaveClick(){if(this.smtpSettings.isProcessing())return;this.smtpSettings.validateData()&&await this.smtpSettings.saveSmtpSettings()}async handleTestClick(){if(this.smtpSettings.isProcessing())return;this.smtpSettings.validateData()&&(null!==this.dialogId&&this.handleCloseDialog(),this.dialogId=await this.props.dialogContext.open(SendTestMailDialog.A,{handleClose:this.handleCloseDialog}))}handleCloseDialog(){this.props.dialogContext.close(this.dialogId),this.dialogId=null}isSaveEnabled(){return this.smtpSettings.isSettingsModified()&&!this.smtpSettings.isProcessing()}isTestEnabled(){return this.smtpSettings.isSettingsModified()&&!this.smtpSettings.isProcessing()}get smtpSettings(){return this.props.adminSmtpSettingsContext}render(){return react.createElement("div",{className:"col2_3 actions-wrapper"},react.createElement("div",{className:"actions"},react.createElement("ul",null,react.createElement("li",null,react.createElement("button",{type:"button",disabled:!this.isSaveEnabled(),onClick:this.handleSaveClick},react.createElement(Icon.A,{name:"save"}),react.createElement("span",null,react.createElement(es.x6,null,"Save settings")))),react.createElement("li",null,react.createElement("button",{type:"button",disabled:!this.isTestEnabled(),onClick:this.handleTestClick},react.createElement(Icon.A,{name:"plug"}),react.createElement("span",null,react.createElement(es.x6,null,"Send test email")))))))}}DisplayAdministrationWorkspaceActions.propTypes={adminSmtpSettingsContext:prop_types_default().object,workflowContext:prop_types_default().any,dialogContext:prop_types_default().object};const DisplayAdministrationSmtpSettingsActions=(0,AdminSmtpSettingsContext.fZ)((0,DialogContext.z9)((0,es.CI)("common")(DisplayAdministrationWorkspaceActions)));DisplayAdministrationWorkspaceActions.__docgenInfo={description:"This component is a container of multiple actions applicable on setting",methods:[{name:"bindCallbacks",docblock:"Bind callbacks methods",modifiers:[],params:[],returns:null,description:"Bind callbacks methods"},{name:"handleSaveClick",docblock:"Handle save settings",modifiers:["async"],params:[],returns:null,description:"Handle save settings"},{name:"handleTestClick",docblock:"Handle save settings",modifiers:["async"],params:[],returns:null,description:"Handle save settings"},{name:"handleCloseDialog",docblock:"Handle close dialog",modifiers:[],params:[],returns:null,description:"Handle close dialog"},{name:"isSaveEnabled",docblock:"Is save button enable\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is save button enable"},{name:"isTestEnabled",docblock:"Is test button enable\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Is test button enable"},{name:"smtpSettings",docblock:"Returns the adminSmtpSettingsContext props\n@returns {object}\n@private",modifiers:["get"],params:[],returns:{type:{name:"object"}},description:"Returns the adminSmtpSettingsContext props"}],displayName:"DisplayAdministrationWorkspaceActions",props:{adminSmtpSettingsContext:{description:"",type:{name:"object"},required:!1},workflowContext:{description:"",type:{name:"any"},required:!1},dialogContext:{description:"",type:{name:"object"},required:!1}}};class ManageSmtpAdministrationSettings extends react.Component{static get AUTHENTICATION_METHOD_NONE(){return"None"}static get AUTHENTICATION_METHOD_USERNAME(){return"Username only"}static get AUTHENTICATION_METHOD_USERNAME_PASSWORD(){return"Username & password"}constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks(),this.createRefs()}get defaultState(){return{showAdvancedSettings:!1,source:"db"}}createRefs(){this.usernameFieldRef=react.createRef(),this.passwordFieldRef=react.createRef(),this.hostFieldRef=react.createRef(),this.portFieldRef=react.createRef(),this.clientFieldRef=react.createRef(),this.senderEmailFieldRef=react.createRef(),this.senderNameFieldRef=react.createRef()}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(DisplayAdministrationSmtpSettingsActions),await this.props.adminSmtpSettingsContext.findSmtpSettings();const settings=this.props.adminSmtpSettingsContext.getCurrentSmtpSettings();this.setState({showAdvancedSettings:"other"===settings.provider?.id})}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminSmtpSettingsContext.clearContext()}componentDidUpdate(){const smtpContext=this.props.adminSmtpSettingsContext,fieldToFocus=smtpContext.getFieldToFocus();fieldToFocus&&this[`${fieldToFocus}FieldRef`]?.current?.focus(),smtpContext.hasProviderChanged()&&this.setState({showAdvancedSettings:"other"===smtpContext.getCurrentSmtpSettings().provider?.id})}bindCallbacks(){this.handleAdvancedSettingsToggle=this.handleAdvancedSettingsToggle.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleProviderChange=this.handleProviderChange.bind(this),this.handleAuthenticationMethodChange=this.handleAuthenticationMethodChange.bind(this)}handleProviderChange(event){const providerId=event.target.value,provider=SmtpProviders_data.A.find((item=>item.id===providerId));this.props.adminSmtpSettingsContext.changeProvider(provider)}handleAuthenticationMethodChange(event){let username=null,password=null;"Username only"===event.target.value?username="":"Username & password"===event.target.value&&(username="",password=""),this.props.adminSmtpSettingsContext.setData({username,password})}handleInputChange(event){const target=event.target;this.props.adminSmtpSettingsContext.setData({[target.name]:target.value})}handleAdvancedSettingsToggle(){this.setState({showAdvancedSettings:!this.state.showAdvancedSettings})}isProcessing(){return this.props.adminSmtpSettingsContext.isProcessing()}get providerList(){return SmtpProviders_data.A.map((item=>({value:item.id,label:item.name})))}get authenticationMethodList(){return[{value:"None",label:this.translate("None")},{value:"Username only",label:this.translate("Username only")},{value:"Username & password",label:this.translate("Username & password")}]}get tlsSelectList(){return[{value:!0,label:this.translate("Yes")},{value:!1,label:this.translate("No")}]}get authenticationMethod(){const smtpSettings=this.props.adminSmtpSettingsContext.getCurrentSmtpSettings();return null===smtpSettings?.username?"None":null===smtpSettings?.password?"Username only":"Username & password"}shouldDisplayUsername(){return"Username only"===this.authenticationMethod||"Username & password"===this.authenticationMethod}shouldDisplayPassword(){return"Username & password"===this.authenticationMethod}shouldShowSourceWarningMessage(){const smtpContext=this.props.adminSmtpSettingsContext;return"db"!==smtpContext.getCurrentSmtpSettings().source&&smtpContext.isSettingsModified()}isReady(){return this.props.adminSmtpSettingsContext.isDataReady()}get settingsSource(){return this.props.adminSmtpSettingsContext?.getCurrentSmtpSettings()?.source}get configurationSource(){return{env:this.props.t("environment variables"),file:this.props.t("file"),db:this.props.t("database")}[this.settingsSource]||this.props.t("unknown")}get translate(){return this.props.t}render(){const settings=this.props.adminSmtpSettingsContext.getCurrentSmtpSettings(),errors=this.props.adminSmtpSettingsContext.getErrors();return react.createElement("div",{className:"grid grid-responsive-12"},react.createElement("div",{className:"row"},react.createElement("div",{className:"third-party-provider-settings smtp-settings col8 main-column"},react.createElement("h3",null,react.createElement(es.x6,null,"Email server")),this.isReady()&&!settings?.provider&&react.createElement(react.Fragment,null,react.createElement("h4",{className:"no-border"},react.createElement(es.x6,null,"Select a provider")),react.createElement("div",{className:"provider-list"},SmtpProviders_data.A.map((provider=>react.createElement("div",{key:provider.id,className:"provider button",id:provider.id,onClick:()=>this.props.adminSmtpSettingsContext.changeProvider(provider)},react.createElement("div",{className:"provider-logo"},"other"===provider.id&&react.createElement(Icon.A,{name:"envelope"}),"other"!==provider.id&&react.createElement("img",{src:`${this.props.context.trustedDomain}/img/third_party/${provider.icon}`})),react.createElement("p",{className:"provider-name"},provider.name)))))),this.isReady()&&settings?.provider&&react.createElement(react.Fragment,null,this.shouldShowSourceWarningMessage()&&react.createElement("div",{className:"warning message"},react.createElement(es.x6,null,react.createElement("b",null,"Warning:")," These are the settings provided by a configuration file. If you save it, will ignore the settings on file and use the ones from the database.")),react.createElement("form",{className:"form"},react.createElement("h4",{className:"no-border"},react.createElement(es.x6,null,"SMTP server configuration")),react.createElement("div",{className:"select-wrapper input required "+(this.isProcessing()?"disabled":"")},react.createElement("label",{htmlFor:"smtp-settings-form-provider"},react.createElement(es.x6,null,"Email provider")),react.createElement(Select.A,{id:"smtp-settings-form-provider",name:"provider",items:this.providerList,value:settings.provider.id,onChange:this.handleProviderChange,disabled:this.isProcessing()})),react.createElement("div",{className:"select-wrapper input required "+(this.isProcessing()?"disabled":"")},react.createElement("label",{htmlFor:"smtp-settings-form-authentication-method"},react.createElement(es.x6,null,"Authentication method")),react.createElement(Select.A,{id:"smtp-settings-form-authentication-method",name:"authentication-method",items:this.authenticationMethodList,value:this.authenticationMethod,onChange:this.handleAuthenticationMethodChange,disabled:this.isProcessing()})),this.shouldDisplayUsername()&&react.createElement("div",{className:`input text ${errors.username?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-username"},react.createElement(es.x6,null,"Username")),react.createElement("input",{id:"smtp-settings-form-username",ref:this.usernameFieldRef,name:"username",className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:settings.username,onChange:this.handleInputChange,placeholder:this.translate("Username"),disabled:this.isProcessing()}),errors.username&&react.createElement("div",{className:"error-message"},errors.username)),this.shouldDisplayPassword()&&react.createElement("div",{className:`input-password-wrapper input ${errors.password?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-password"},react.createElement(es.x6,null,"Password")),react.createElement(Password.A,{id:"smtp-settings-form-password",name:"password",autoComplete:"new-password",placeholder:this.translate("Password"),preview:!0,value:settings.password,onChange:this.handleInputChange,disabled:this.isProcessing(),inputRef:this.passwordFieldRef}),errors.password&&react.createElement("div",{className:"password error-message"},errors.password)),react.createElement("div",{className:"accordion-header"},react.createElement("button",{type:"button",className:"link no-border",onClick:this.handleAdvancedSettingsToggle},react.createElement(Icon.A,{name:this.state.showAdvancedSettings?"caret-down":"caret-right"}),react.createElement(es.x6,null,"Advanced settings"))),this.state.showAdvancedSettings&&react.createElement("div",{className:"advanced-settings"},react.createElement("div",{className:`input text required ${errors.host?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-host"},react.createElement(es.x6,null,"SMTP host")),react.createElement("input",{id:"smtp-settings-form-host",ref:this.hostFieldRef,name:"host","aria-required":!0,className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:settings.host,onChange:this.handleInputChange,placeholder:this.translate("SMTP server address"),disabled:this.isProcessing()}),errors.host&&react.createElement("div",{className:"error-message"},errors.host)),react.createElement("div",{className:`input text required ${errors.tls?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-tls"},react.createElement(es.x6,null,"Use TLS")),react.createElement(Select.A,{id:"smtp-settings-form-tls",name:"tls",items:this.tlsSelectList,value:settings.tls,onChange:this.handleInputChange,disabled:this.isProcessing()})),react.createElement("div",{className:`input text required ${errors.port?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-port"},react.createElement(es.x6,null,"Port")),react.createElement("input",{id:"smtp-settings-form-port","aria-required":!0,ref:this.portFieldRef,name:"port",className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:settings.port,onChange:this.handleInputChange,placeholder:this.translate("Port number"),disabled:this.isProcessing()}),errors.port&&react.createElement("div",{className:"error-message"},errors.port)),react.createElement("div",{className:`input text ${errors.client?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-client"},react.createElement(es.x6,null,"SMTP client")),react.createElement("input",{id:"smtp-settings-form-client",ref:this.clientFieldRef,name:"client",maxLength:"2048",type:"text",autoComplete:"off",value:settings.client,onChange:this.handleInputChange,placeholder:this.translate("SMTP client address"),disabled:this.isProcessing()}),errors.client&&react.createElement("div",{className:"error-message"},errors.client))),react.createElement("h4",null,react.createElement(es.x6,null,"Sender configuration")),react.createElement("div",{className:`input text required ${errors.sender_name?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-sender-name"},react.createElement(es.x6,null,"Sender name")),react.createElement("input",{id:"smtp-settings-form-sender-name",ref:this.senderNameFieldRef,name:"sender_name","aria-required":!0,className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:settings.sender_name,onChange:this.handleInputChange,placeholder:this.translate("Sender name"),disabled:this.isProcessing()}),errors.sender_name&&react.createElement("div",{className:"error-message"},errors.sender_name),react.createElement("p",null,react.createElement(es.x6,null,"This is the name users will see in their mailbox when passbolt sends a notification."))),react.createElement("div",{className:`input text required ${errors.sender_email?"error":""} ${this.isProcessing()?"disabled":""}`},react.createElement("label",{htmlFor:"smtp-settings-form-sender-name"},react.createElement(es.x6,null,"Sender email")),react.createElement("input",{id:"smtp-settings-form-sender-email",ref:this.senderEmailFieldRef,name:"sender_email","aria-required":!0,className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:settings.sender_email,onChange:this.handleInputChange,placeholder:this.translate("Sender email"),disabled:this.isProcessing()}),errors.sender_email&&react.createElement("div",{className:"error-message"},errors.sender_email),react.createElement("p",null,react.createElement(es.x6,null,"This is the email address users will see in their mail box when passbolt sends a notification.",react.createElement("br",null),"It's a good practice to provide a working email address that users can reply to.")))))),react.createElement("div",{className:"col4 last"},react.createElement("div",{className:"sidebar-help",id:"smtp-settings-source"},react.createElement("h3",null,react.createElement(es.x6,null,"Configuration source")),react.createElement("p",null,react.createElement(es.x6,null,"This current configuration source is: "),this.configurationSource,".")),react.createElement("div",{className:"sidebar-help"},react.createElement("h3",null,react.createElement(es.x6,null,"Why do I need an SMTP server?")),react.createElement("p",null,react.createElement(es.x6,null,"Passbolt needs an smtp server in order to send invitation emails after an account creation and to send email notifications.")),react.createElement("a",{className:"button",href:"https://passbolt.com/docs/admin/emails/email-server/",target:"_blank",rel:"noopener noreferrer"},react.createElement(Icon.A,{name:"document"}),react.createElement("span",null,react.createElement(es.x6,null,"Read the documentation")))),settings?.provider&&"other"!==settings?.provider.id&&react.createElement("div",{className:"sidebar-help"},react.createElement("h3",null,react.createElement(es.x6,null,"How do I configure a ",settings.provider.name," SMTP server?")),react.createElement("a",{className:"button",href:settings.provider.help_page,target:"_blank",rel:"noopener noreferrer"},react.createElement(Icon.A,{name:"link"}),react.createElement("span",null,react.createElement(es.x6,null,"See the ",settings.provider.name," documentation")))),settings?.provider&&("google-mail"===settings.provider.id||"google-workspace"===settings.provider.id)&&react.createElement("div",{className:"sidebar-help"},react.createElement("h3",null,react.createElement(es.x6,null,"Why shouldn't I use my login password ?")),react.createElement("p",null,react.createElement(es.x6,null,'In order to use the "Username & Password" authentication method with Google, you will need to enable MFA on your Google Account. The password should not be your login password, you have to create an "App Password" generated by Google.. However, the email remain the same.')),react.createElement("a",{className:"button",href:"https://support.google.com/mail/answer/185833",target:"_blank",rel:"noopener noreferrer"},react.createElement(Icon.A,{name:"document"}),react.createElement("span",null,react.createElement(es.x6,null,"More informations")))))))}}ManageSmtpAdministrationSettings.propTypes={context:prop_types_default().object,dialogContext:prop_types_default().any,administrationWorkspaceContext:prop_types_default().object,adminSmtpSettingsContext:prop_types_default().object,t:prop_types_default().func};const ManageSmtpAdministrationSettings_ManageSmtpAdministrationSettings=(0,AppContext.L)((0,AdminSmtpSettingsContext.fZ)((0,DialogContext.z9)((0,AdministrationWorkspaceContext.Kk)((0,es.CI)("common")(ManageSmtpAdministrationSettings)))));ManageSmtpAdministrationSettings.__docgenInfo={description:"",methods:[{name:"AUTHENTICATION_METHOD_NONE",docblock:"The no authentication method.\n@returns {string}",modifiers:["static","get"],params:[],returns:{type:{name:"string"}},description:"The no authentication method."},{name:"AUTHENTICATION_METHOD_USERNAME",docblock:"The authentication method username only\n@returns {string}",modifiers:["static","get"],params:[],returns:{type:{name:"string"}},description:"The authentication method username only"},{name:"AUTHENTICATION_METHOD_USERNAME_PASSWORD",docblock:"The authentication method username and password\n@returns {string}",modifiers:["static","get"],params:[],returns:{type:{name:"string"}},description:"The authentication method username and password"},{name:"defaultState",docblock:"Get default state\n@returns {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get default state"},{name:"createRefs",docblock:"Creates the React ref for the forms to be able to focus fields having errors",modifiers:[],params:[],returns:null,description:"Creates the React ref for the forms to be able to focus fields having errors"},{name:"bindCallbacks",docblock:"Bind callbacks",modifiers:[],params:[],returns:null,description:"Bind callbacks"},{name:"handleProviderChange",docblock:"Handle provider change from select field.\n@params {ReactEvent} The react event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle provider change from select field."},{name:"handleAuthenticationMethodChange",docblock:"Handle provider change from select field.\n@params {ReactEvent} The react event",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle provider change from select field."},{name:"handleInputChange",docblock:"Handle form input changes.\n@params {ReactEvent} The react event\n@returns {void}",modifiers:[],params:[{name:"event",optional:!1}],returns:{type:{name:"void"}},description:"Handle form input changes."},{name:"handleAdvancedSettingsToggle",docblock:"Handles the click on the advanced settings toggle.",modifiers:[],params:[],returns:null,description:"Handles the click on the advanced settings toggle."},{name:"isProcessing",docblock:"Returns true if there is a processing happening with the SMTP settings.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if there is a processing happening with the SMTP settings."},{name:"providerList",docblock:"Return the list of available providers.\n@returns {Array<object>}",modifiers:["get"],params:[],returns:{type:{name:"Array",elements:[{name:"object"}]}},description:"Return the list of available providers."},{name:"authenticationMethodList",docblock:"Return the list of available authentication method.\n@returns {Array<object>}",modifiers:["get"],params:[],returns:{type:{name:"Array",elements:[{name:"object"}]}},description:"Return the list of available authentication method."},{name:"tlsSelectList",docblock:"Returns a list of available choice for the 'TLS' select field.\n@returns {Array<object>}",modifiers:["get"],params:[],returns:{type:{name:"Array",elements:[{name:"object"}]}},description:"Returns a list of available choice for the 'TLS' select field."},{name:"authenticationMethod",docblock:"Return the selected authentication method.\n@return {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Return the selected authentication method."},{name:"shouldDisplayUsername",docblock:"Return true if the username field should be displayed\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the username field should be displayed"},{name:"shouldDisplayPassword",docblock:"Return true if the password field should be displayed\n@return {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Return true if the password field should be displayed"},{name:"shouldShowSourceWarningMessage",docblock:"Returns true if the source of the settings is from a config file instead of DB and the user has modified a field.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the source of the settings is from a config file instead of DB and the user has modified a field."},{name:"isReady",docblock:"Returns true if the data is loaded.\nUseful to avoid UI blinking during data loading.\n@returns {boolean}",modifiers:[],params:[],returns:{type:{name:"boolean"}},description:"Returns true if the data is loaded.\nUseful to avoid UI blinking during data loading."},{name:"settingsSource",docblock:null,modifiers:["get"],params:[],returns:null},{name:"configurationSource",docblock:"Returns the source of the current configuration\n@returns {string}",modifiers:["get"],params:[],returns:{type:{name:"string"}},description:"Returns the source of the current configuration"},{name:"translate",docblock:"Get the translate function\n@returns {function(...[*]=)}",modifiers:["get"],params:[],returns:{},description:"Get the translate function"}],displayName:"ManageSmtpAdministrationSettings",props:{context:{description:"",type:{name:"object"},required:!1},dialogContext:{description:"",type:{name:"any"},required:!1},administrationWorkspaceContext:{description:"",type:{name:"object"},required:!1},adminSmtpSettingsContext:{description:"",type:{name:"object"},required:!1},t:{description:"",type:{name:"func"},required:!1}}};var ManageDialogs=__webpack_require__("./src/react-extension/components/Common/Dialog/ManageDialogs/ManageDialogs.js"),ApiAppContext_test_data=__webpack_require__("./src/react-extension/contexts/ApiAppContext.test.data.js");function defaultProps(data={}){const defaultProps1={context:(0,ApiAppContext_test_data.s)(data?.context),administrationWorkspaceContext:{setDisplayAdministrationWorkspaceAction:jest.fn(),resetDisplayAdministrationWorkspaceAction:jest.fn()},actionFeedbackContext:{displaySuccess:jest.fn()}};return delete data.context,Object.assign(defaultProps1,data)}function defaultSmtpSettings(data={}){return{username:"",password:"",host:"localhost",tls:!1,port:25,sender_email:"",sender_name:"Passbolt",...data}}function withExistingSmtpSettings(data={}){return defaultSmtpSettings({host:"smtp.test.com",tls:!1,port:25,client:null,username:"test username",password:"test password",sender_email:"server@passbolt.com",sender_name:"Passbolt",...data})}var MockFetch=__webpack_require__("./src/react-extension/test/mock/MockFetch.js"),mockApiResponse=__webpack_require__("./test/mocks/mockApiResponse.js");const ManageSmtpAdministrationSettings_test_stories={title:"Components/Administration/ManageSmtpAdministrationSettings",component:ManageSmtpAdministrationSettings_ManageSmtpAdministrationSettings};let currentStory=null;(new MockFetch.A).addGetFetchRequest(/smtp\/settings\.json/,(async()=>{switch(currentStory){case"components-administration-managesmtpadministrationsettings--default":return(0,mockApiResponse._)(function emptySmtpSettings(data={}){return{username:"",password:"",host:"",tls:!1,port:25,sender_email:"",sender_name:"",...data}}());case"components-administration-managesmtpadministrationsettings--with-smtp-settings":return(0,mockApiResponse._)(withExistingSmtpSettings());case"components-administration-managesmtpadministrationsettings--with-smtp-settings-from-file":return(0,mockApiResponse._)(withExistingSmtpSettings({source:"file"}));case"components-administration-managesmtpadministrationsettings--with-known-smtp-settings":return(0,mockApiResponse._)(function withAwsSesSmtpSettings(data={}){return withExistingSmtpSettings({...SmtpProviders_data.A.find((provider=>"aws-ses"===provider.id)).availableConfigurations[0],...data})}());case"components-administration-managesmtpadministrationsettings--with-error-from-server":throw new Error("Something went wrong!")}throw new Error("Unsupported story")}));const decorators=[(Story,context)=>(currentStory=context.id,react.createElement(react.Fragment,null,react.createElement(Story,null)))],Template=args=>react.createElement(DialogContext.Ay,null,react.createElement(ManageDialogs.A,null),react.createElement(AdminSmtpSettingsContext.Ay,args,react.createElement("div",{className:"panel main"},react.createElement("div",{className:"panel middle"},react.createElement("div",{className:"grid grid-responsive-12"},react.createElement(ManageSmtpAdministrationSettings_ManageSmtpAdministrationSettings,args)))))),Default=Template.bind({});Default.args=defaultProps(),Default.decorators=decorators,Default.parameters={css:"api_main"};const WithSmtpSettings=Template.bind({});WithSmtpSettings.args=defaultProps(),WithSmtpSettings.decorators=decorators,WithSmtpSettings.parameters={css:"api_main"};const WithSmtpSettingsFromFile=Template.bind({});WithSmtpSettingsFromFile.args=defaultProps(),WithSmtpSettingsFromFile.decorators=decorators,WithSmtpSettingsFromFile.parameters={css:"api_main"};const WithKnownSmtpSettings=Template.bind({});WithKnownSmtpSettings.args=defaultProps(),WithKnownSmtpSettings.decorators=decorators,WithKnownSmtpSettings.parameters={css:"api_main"};const WithErrorFromServer=Template.bind({});WithErrorFromServer.args=defaultProps(),WithErrorFromServer.decorators=decorators,WithErrorFromServer.parameters={css:"api_main"};const __namedExportsOrder=["Default","WithSmtpSettings","WithSmtpSettingsFromFile","WithKnownSmtpSettings","WithErrorFromServer"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'args => <DialogContextProvider>\n    <ManageDialogs />\n    <AdminSmtpSettingsContextProvider {...args}>\n      <div className="panel main">\n        <div className="panel middle">\n          <div className="grid grid-responsive-12">\n            <ManageSmtpAdministrationSettings {...args} />\n          </div>\n        </div>\n      </div>\n    </AdminSmtpSettingsContextProvider>\n  </DialogContextProvider>',...Default.parameters?.docs?.source}}},WithSmtpSettings.parameters={...WithSmtpSettings.parameters,docs:{...WithSmtpSettings.parameters?.docs,source:{originalSource:'args => <DialogContextProvider>\n    <ManageDialogs />\n    <AdminSmtpSettingsContextProvider {...args}>\n      <div className="panel main">\n        <div className="panel middle">\n          <div className="grid grid-responsive-12">\n            <ManageSmtpAdministrationSettings {...args} />\n          </div>\n        </div>\n      </div>\n    </AdminSmtpSettingsContextProvider>\n  </DialogContextProvider>',...WithSmtpSettings.parameters?.docs?.source}}},WithSmtpSettingsFromFile.parameters={...WithSmtpSettingsFromFile.parameters,docs:{...WithSmtpSettingsFromFile.parameters?.docs,source:{originalSource:'args => <DialogContextProvider>\n    <ManageDialogs />\n    <AdminSmtpSettingsContextProvider {...args}>\n      <div className="panel main">\n        <div className="panel middle">\n          <div className="grid grid-responsive-12">\n            <ManageSmtpAdministrationSettings {...args} />\n          </div>\n        </div>\n      </div>\n    </AdminSmtpSettingsContextProvider>\n  </DialogContextProvider>',...WithSmtpSettingsFromFile.parameters?.docs?.source}}},WithKnownSmtpSettings.parameters={...WithKnownSmtpSettings.parameters,docs:{...WithKnownSmtpSettings.parameters?.docs,source:{originalSource:'args => <DialogContextProvider>\n    <ManageDialogs />\n    <AdminSmtpSettingsContextProvider {...args}>\n      <div className="panel main">\n        <div className="panel middle">\n          <div className="grid grid-responsive-12">\n            <ManageSmtpAdministrationSettings {...args} />\n          </div>\n        </div>\n      </div>\n    </AdminSmtpSettingsContextProvider>\n  </DialogContextProvider>',...WithKnownSmtpSettings.parameters?.docs?.source}}},WithErrorFromServer.parameters={...WithErrorFromServer.parameters,docs:{...WithErrorFromServer.parameters?.docs,source:{originalSource:'args => <DialogContextProvider>\n    <ManageDialogs />\n    <AdminSmtpSettingsContextProvider {...args}>\n      <div className="panel main">\n        <div className="panel middle">\n          <div className="grid grid-responsive-12">\n            <ManageSmtpAdministrationSettings {...args} />\n          </div>\n        </div>\n      </div>\n    </AdminSmtpSettingsContextProvider>\n  </DialogContextProvider>',...WithErrorFromServer.parameters?.docs?.source}}}},"./src/react-extension/components/Common/Dialog/ManageDialogs/ManageDialogs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/react-extension/contexts/DialogContext.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);class ManageDialogs extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.bindCallback()}bindCallback(){this.close=this.close.bind(this)}async close(index){const dialog=this.props.dialogContext.dialogs.find((({key})=>key===index));dialog?.DialogProps?.onClose&&dialog.DialogProps.onClose(),this.props.dialogContext.close(index)}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,this.props.dialogContext.dialogs.map((({key,Dialog,DialogProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Dialog,{key,...DialogProps,onClose:()=>this.close(key)}))),this.props.children)}}ManageDialogs.propTypes={dialogContext:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any};const __WEBPACK_DEFAULT_EXPORT__=(0,_contexts_DialogContext__WEBPACK_IMPORTED_MODULE_1__.z9)(ManageDialogs);ManageDialogs.__docgenInfo={description:"This component acts as an anchor for the different project dialogs.",methods:[{name:"bindCallback",docblock:"Bind class methods callback",modifiers:[],params:[],returns:null,description:"Bind class methods callback"},{name:"close",docblock:"Removes the index-th dialog",modifiers:["async"],params:[{name:"index",optional:!1}],returns:null,description:"Removes the index-th dialog"}],displayName:"ManageDialogs",props:{dialogContext:{description:"",type:{name:"any"},required:!1},children:{description:"",type:{name:"any"},required:!1}}}},"./src/shared/components/Password/Password.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/shared/components/Icons/Icon.js"),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");class Password extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{viewPassword:!1,hasPassphraseFocus:!1}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordInputFocus=this.handlePasswordInputFocus.bind(this),this.handlePasswordInputBlur=this.handlePasswordInputBlur.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this)}handleInputChange(event){this.props.onChange&&this.props.onChange(event)}handlePasswordInputFocus(){this.setState({hasPassphraseFocus:!0})}handlePasswordInputBlur(){this.setState({hasPassphraseFocus:!1})}handleViewPasswordButtonClick(){this.props.disabled||this.setState({viewPassword:!this.state.viewPassword})}get securityTokenStyle(){const inverseStyle={background:this.props.securityToken.textColor,color:this.props.securityToken.backgroundColor},fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor};return this.state.hasPassphraseFocus?inverseStyle:fullStyle}get passphraseInputStyle(){const fullStyle={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor,"--passphrase-placeholder-color":this.props.securityToken.textColor};return this.state.hasPassphraseFocus?fullStyle:undefined}get previewStyle(){const fullStyle={"--icon-color":this.props.securityToken.textColor,"--icon-background-color":this.props.securityToken.backgroundColor};return this.state.hasPassphraseFocus?fullStyle:void 0}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`input password ${this.props.disabled?"disabled":""} ${this.state.hasPassphraseFocus?"":"no-focus"} ${this.props.securityToken?"security":""}`,style:this.props.securityToken?this.passphraseInputStyle:void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:this.props.id,name:this.props.name,maxLength:"4096",placeholder:this.props.placeholder,type:this.state.viewPassword&&!this.props.disabled?"text":"password",onKeyUp:this.props.onKeyUp,value:this.props.value,onFocus:this.handlePasswordInputFocus,onBlur:this.handlePasswordInputBlur,onChange:this.handleInputChange,disabled:this.props.disabled,readOnly:this.props.readOnly,autoComplete:this.props.autoComplete,"aria-required":!0,ref:this.props.inputRef}),this.props.preview&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"password-view-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:this.handleViewPasswordButtonClick,style:this.props.securityToken?this.previewStyle:void 0,className:"password-view infield button-transparent "+(this.props.disabled?"disabled":"")},!this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"eye-open"}),this.state.viewPassword&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icons_Icon__WEBPACK_IMPORTED_MODULE_1__.A,{name:"eye-close"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"visually-hidden"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__.x6,null,"View")))),this.props.securityToken&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"security-token-wrapper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"security-token",style:this.securityTokenStyle},this.props.securityToken.code)))}}Password.defaultProps={id:"",name:"",autoComplete:"off"},Password.propTypes={context:prop_types__WEBPACK_IMPORTED_MODULE_3___default().any,id:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,name:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,autoComplete:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,inputRef:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,disabled:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,readOnly:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,preview:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,onKeyUp:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,securityToken:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({code:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,backgroundColor:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,textColor:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string})};const __WEBPACK_DEFAULT_EXPORT__=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.CI)("common")(Password);Password.__docgenInfo={description:"This component represent a password input field with some additional properties",methods:[{name:"defaultState",docblock:null,modifiers:["get"],params:[],returns:null},{name:"bindCallbacks",docblock:"Bind callbacks methods\n@return {void}",modifiers:[],params:[],returns:{type:{name:"void"}},description:"Bind callbacks methods"},{name:"handleInputChange",docblock:"Handle form input change.\n@params {ReactEvent} The react event.",modifiers:[],params:[{name:"event",optional:!1}],returns:null,description:"Handle form input change."},{name:"handlePasswordInputFocus",docblock:"Whenever the user focus on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user focus on the password input"},{name:"handlePasswordInputBlur",docblock:"Whenever the user blurs on the password input",modifiers:[],params:[],returns:null,description:"Whenever the user blurs on the password input"},{name:"handleViewPasswordButtonClick",docblock:"Handle view password button click.",modifiers:[],params:[],returns:null,description:"Handle view password button click."},{name:"securityTokenStyle",docblock:"Returns the style of the security token (color and text color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of the security token (color and text color)"},{name:"passphraseInputStyle",docblock:"Get the passphrase input style.\n@return {Object}",modifiers:["get"],params:[],returns:{type:{name:"Object"}},description:"Get the passphrase input style."},{name:"previewStyle",docblock:"Returns the style of preview (icon color and icon background color)",modifiers:["get"],params:[],returns:null,description:"Returns the style of preview (icon color and icon background color)"}],displayName:"Password",props:{id:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},name:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},autoComplete:{defaultValue:{value:'"off"',computed:!1},description:"",type:{name:"string"},required:!1},context:{description:"",type:{name:"any"},required:!1},value:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},inputRef:{description:"",type:{name:"object"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},readOnly:{description:"",type:{name:"bool"},required:!1},preview:{description:"",type:{name:"bool"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},onKeyUp:{description:"",type:{name:"func"},required:!1},securityToken:{description:"",type:{name:"shape",value:{code:{name:"string",required:!1},backgroundColor:{name:"string",required:!1},textColor:{name:"string",required:!1}}},required:!1}}}}}]);